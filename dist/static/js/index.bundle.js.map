{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/assets/js/gloable.js","webpack:///./src/assets/js/load.js","webpack:///./src/assets/js/Stage.js","webpack:///./src/assets/js/Screen01.js","webpack:///./src/assets/js/Screen02.js","webpack:///./src/assets/js/Screen03.js","webpack:///./src/assets/js/Screen04.js","webpack:///./src/assets/js/Screen05.js","webpack:///./src/assets/js/index.js","webpack:///./src/assets/js/resize.js","webpack:///./src/assets/lib/tweenjs-0.6.2.combined.js","webpack:///./src/assets/lib/soundjs-0.6.2.combined.js","webpack:///(webpack)/buildin/amd-options.js","webpack:///(webpack)/buildin/global.js","webpack:///(webpack)/buildin/module.js","webpack:///./src/assets/lib/preloadjs-0.6.2.combined.js","webpack:///./src/assets/lib/easeljs-0.8.2.combined.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","r","value","n","__esModule","default","object","property","prototype","hasOwnProperty","p","s","t","e","gloable","screen","screenLocked","bg","girlAni","ground","bgContainer","ground_bg","Load","this","progress","_init","proNode","loadNode","Stage","canvasId","Screen01","queue","stage","flowers","paths","curI","container","createjs","Container","addChild","Screen02","Screen03","Screen04","Screen05","document","querySelector","LoadQueue","installPlugin","Sound","loadManifest","id","src","on","innerText","parseInt","style","display","play","ctrl","createElement","position","right","top","zIndex","className","setAttribute","ctrlBtn","width","height","background","backgroundSize","backgroundPosition","appendChild","addEventListener","getAttribute","stop","body","Touch","enable","Bitmap","getResult","y","alpha","_flower","_showText","_showHand","flowerPath","flower","regX","regY","x","push","path","k","pathObj","setTransform","evt","stageX","stageY","len","length","posX","posY","removeChild","handAni","Ticker","setFPS","Tween","loop","to","rotation","console","log","text01","handSprite","SpriteSheet","images","frames","count","animations","handtip","Sprite","wait","_showMoon","_showBlock","_showGril","_showCloud","girlContainer","girlSprite","stand","walk","run","Promise","resolve","reject","gotoAndPlay","then","setTimeout","_showBtn","optipbtn","optipcircle","scaleX","scaleY","text02","bgAni","pause","block02","block03","girlCloud","moon","block01","block04","cloudContainer","cloud01","cloud02","cloud03","cloud04","_showLight","lightStage","_showBranch","light","_lightAni","branch","timmer","clearTimeout","_girlWalk","_girlLight","girlLight","shining","girlLightAni","queueObj","stageObj","update","resize","getElementById","a","clientWidth","b","clientHeight","direction","webkitTransform","window","onload","extend","subclass","superclass","constructor","promote","prefix","subP","supP","getPrototypeOf","__proto__","Event","type","bubbles","cancelable","target","currentTarget","eventPhase","timeStamp","Date","getTime","defaultPrevented","propagationStopped","immediatePropagationStopped","removed","preventDefault","stopPropagation","stopImmediatePropagation","remove","clone","set","props","toString","EventDispatcher","_listeners","_captureListeners","initialize","removeEventListener","off","removeAllEventListeners","hasEventListener","dispatchEvent","_dispatchEvent","willTrigger","listener","useCapture","listeners","arr","scope","once","data","handleEvent","splice","eventObj","parent","list","captureListeners","slice","RAF_SYNCHED","RAF","TIMEOUT","useRAF","timingMode","maxDelta","paused","_addEventListener","_inited","init","apply","arguments","_startTime","_pausedTime","_ticks","_pausedTicks","_interval","_lastTime","_times","_tickTimes","_timerId","_raf","setInterval","interval","_setupTick","getInterval","getFPS","defineProperties","framerate","_getTime","reset","f","cancelAnimationFrame","webkitCancelAnimationFrame","mozCancelAnimationFrame","oCancelAnimationFrame","msCancelAnimationFrame","getMeasuredTickTime","ticks","ttl","times","Math","min","getMeasuredFPS","setPaused","getPaused","runTime","getEventTime","getTicks","pauseable","_handleSynch","_tick","_handleRAF","_handleTimeout","mode","requestAnimationFrame","webkitRequestAnimationFrame","mozRequestAnimationFrame","oRequestAnimationFrame","msRequestAnimationFrame","time","elapsedTime","event","delta","unshift","pop","now","performance","mozNow","msNow","oNow","webkitNow","pluginData","ignoreGlobalPause","duration","passive","_paused","_curQueueProps","_initQueueProps","_steps","_actions","_prevPosition","_stepPosition","_prevPos","_target","_useTicks","_registered","useTicks","onChange","override","removeTweens","_register","setPosition","NONE","LOOP","REVERSE","IGNORE","_tweens","_plugins","tick","tweens","tween","tweenjs_count","removeAllTweens","hasActiveTweens","plugin","properties","priority","j","jl","_cloneProps","_addStep","p0","_linearEase","p1","v","ease","isNaN","_appendQueueProps","callback","params","_addAction","_set","actionsMode","end","prevPos","_updateTargetProps","step","_runActions","w","ratio","v0","v1","ignore","v2","startPos","endPos","includeStart","sPos","ePos","action","pos","oldValue","injectProps","Timeline","labels","EventDispatcher_constructor","_labels","_labelList","addTween","setLabels","removeTween","good","updateDuration","addLabel","label","getLabels","sort","getCurrentLabel","positionOrLabel","_goto","gotoAndStop","_calcPosition","Number","Ease","linear","none","amount","getPowIn","pow","getPowOut","getPowInOut","abs","quadIn","quadOut","quadInOut","cubicIn","cubicOut","cubicInOut","quartIn","quartOut","quartInOut","quintIn","quintOut","quintInOut","sineIn","cos","PI","sineOut","sin","sineInOut","getBackIn","backIn","getBackOut","backOut","getBackInOut","backInOut","circIn","sqrt","circOut","circInOut","bounceIn","bounceOut","bounceInOut","getElasticIn","amplitude","period","pi2","asin","elasticIn","getElasticOut","elasticOut","getElasticInOut","elasticInOut","MotionGuidePlugin","_rotOffS","_rotOffE","_rotNormS","_rotNormE","install","prop","__needsRot","startValue","endValue","__rotGlobalS","__rotGlobalE","testRotData","temp","start","_length","_segments","tempX","tempY","sx","sy","cx","cy","ex","ey","oldX","oldY","total","sublines","inv","orient","calc","__rotPathS","toFixed","__rotPathE","__guideData","rotGlobalD","rotPathD","rot","rotDelta","rotOffS","startValues","endValues","guide","lastRatio","seg","cap","atan2","TweenJS","version","buildDate","SoundJS","indexOf","array","searchElement","proxy","method","aArgs","Array","concat","BrowserDetect","agent","navigator","userAgent","isWindowPhone","isFirefox","isOpera","opera","isChrome","isIOS","isAndroid","isBlackberry","ErrorEvent","title","message","Event_constructor","ProgressEvent","loaded","LoadItem","maintainOrder","GET","values","headers","withCredentials","mimeType","crossOrigin","loadTimeout","LOAD_TIMEOUT_DEFAULT","create","item","Error","ABSOLUTE_PATT","RELATIVE_PATT","EXTENSION_PATT","parseURI","info","absolute","relative","match","queryIndex","substr","test","extension","toLowerCase","formatQueryString","query","escape","join","buildPath","idx","q","split","isCrossDomain","href","host","location","hostname","port","protocol","isLocal","isBinary","AbstractLoader","IMAGE","BINARY","isImageTag","HTMLImageElement","isAudioTag","HTMLAudioElement","isVideoTag","HTMLVideoElement","isText","TEXT","JSON","MANIFEST","XML","CSS","SVG","JAVASCRIPT","SPRITESHEET","getTypeByExtension","SOUND","VIDEO","RequestUtils","loadItem","preferXHR","canceled","resultFormatter","_item","_preferXHR","_result","_rawResult","_loadedItems","_tagSrcAttribute","_tag","POST","JSONP","getItem","raw","getTag","setTag","tag","load","_createRequest","_request","loader","cancel","destroy","_loadItems","getLoadedItems","XHRRequest","TagRequest","_createTag","_sendLoadStart","_isCanceled","_sendProgress","Infinity","_sendComplete","rawResult","result","_sendError","_response","Function","_resultFormatSuccess","_resultFormatFailed","toUpperCase","AbstractMediaLoader","AbstractLoader_constructor","_formatResult","_updateXHR","preload","AbstractLoader_load","MediaTagRequest","setResponseType","_loadedHandler","onstalled","URL","webkitURL","createObjectURL","AbstractRequest","srcAttribute","AbstractRequest_constructor","_handleTagComplete","_addedToDOM","_startTagVisibility","onreadystatechange","_handleReadyStateChange","onerror","_handleError","_hideTag","_loadTimeout","parentNode","_clean","AbstractRequest_destroy","readyState","_showTag","visibility","_handleStalled","sc","_stalledCallback","pc","_handleProgress","TagRequest_load","newEvent","_progressCallback","TagRequest__clean","_xhrLevel","_rawResponse","_canceled","_handleLoadStartProxy","_handleLoadStart","_handleProgressProxy","_handleAbortProxy","_handleAbort","_handleErrorProxy","_handleTimeoutProxy","_handleLoadProxy","_handleLoad","_handleReadyStateChangeProxy","_createXHR","ACTIVEX_VERSIONS","abort","onloadstart","onprogress","onabort","ontimeout","send","error","_responseType","responseType","getAllResponseHeaders","getResponseHeader","header","_checkError","_getResponse","Blob","BlobBuilder","WebKitBlobBuilder","MozBlobBuilder","MSBlobBuilder","builder","append","getBlob","status","response","responseText","responseXML","crossdomain","req","XMLHttpRequest","XDomainRequest","axVersion","ActiveXObject","overrideMimeType","open","Origin","origin","setRequestHeader","SoundLoader","AbstractMediaLoader_constructor","canLoadItem","autoplay","PlayPropsConfig","interrupt","delay","offset","volume","pan","startTime","ppc","SoundChannel","max","INTERRUPT_ANY","INTERRUPT_EARLY","INTERRUPT_LATE","INTERRUPT_NONE","PLAY_INITED","PLAY_SUCCEEDED","PLAY_INTERRUPTED","PLAY_FINISHED","PLAY_FAILED","SUPPORTED_EXTENSIONS","EXTENSION_MAP","m4a","FILE_PATTERN","defaultInterruptBehavior","alternateExtensions","activePlugin","_masterVolume","setVolume","instances","_instances","setMasterVolume","_masterMute","setMute","setMasterMute","_capabilities","_pluginsRegistered","_lastID","_idHash","_preloadHash","_defaultPlayPropsHash","getPreloadHandlers","initLoad","types","extensions","_handleLoadComplete","sprite","_handleLoadError","_registerPlugin","isSupported","registerPlugins","plugins","initializeDefaultPlugins","WebAudioPlugin","HTMLAudioPlugin","isReady","getCapabilities","getCapability","key","_registerSound","details","_parseSrc","_parsePath","numChannels","channels","audioSprite","sp","defaultPlayProps","register","maxPerChannel","registerSound","basePath","registerSounds","sounds","returnValues","manifest","removeSound","_getSrcById","removeSrc","removeSounds","removeAllSounds","removeAll","loadComplete","ext","capabilities","replace","ret","lastIndexOf","playProps","instance","createInstance","_playInstance","_playFailed","DefaultSoundInstance","applyPlayProps","uniqueId","getVolume","getMute","setDefaultPlayProps","getDefaultPlayProps","getPosition","_beginPlaying","delayTimeoutId","add","index","_playFinished","channel","_removeAll","_add","_remove","maxDefault","_get","_getSlot","replacement","playState","_interrupt","AbstractSoundInstance","playbackResource","_volume","_pan","getPan","setPan","getStartTime","setStartTime","_duration","getDuration","setDuration","_playbackResource","getPlaybackResource","setPlaybackResource","_position","_loop","getLoop","setLoop","_muted","getMuted","setMuted","_cleanUp","_handleStop","_pause","_resume","_updateVolume","_updatePan","_calculateCurrentPosition","_updatePosition","_updateStartTime","_updateDuration","_setDurationFromSource","_removeLooping","_addLooping","_sendEvent","_handleCleanUp","_handleSoundReady","_handleSoundComplete","_handleLoop","AbstractPlugin","_loaders","_audioSources","_soundInstances","_loaderClass","_soundInstanceClass","_handlePreloadComplete","_handlePreloadError","isPreloadStarted","isPreloadComplete","si","Loader","context","decodeAudioData","_handleAudioDecoded","decodedAudio","AbstractLoader__sendComplete","WebAudioLoader","WebAudioSoundInstance","AbstractSoundInstance_constructor","gainNode","createGain","panNode","createPanner","panningModel","_panningModel","connect","sourceNode","_soundCompleteTimeout","_sourceNodeNext","_playbackStartTime","_endedHandler","_scratchBuffer","destinationNode","AbstractSoundInstance_destroy","disconnect","_cleanUpAudioNode","_createAndPlayAudioNode","numberOfOutputs","audioNode","buffer","dur","currentTime","createBufferSource","newVolume","gain","AbstractPlugin_constructor","dynamicsCompressorNode","createDynamicsCompressor","destination","_addPropsToClasses","_unlocked","isMobilePhoneGap","_isFileXHRSupported","_generateCapabilities","playEmptySound","source","supported","xhr","canPlayType","AudioContext","webkitAudioContext","createBuffer","_compatibilitySetUp","state","_unlock","panning","tracks","supportedExtensions","extensionMap","playType","numberOfChannels","createGainNode","noteGrainOn","noteOff","HTMLAudioTagPool","TagPool","_tags","_tagPool","_tagUsed","HTMLAudioSoundInstance","_audioSpriteStopTime","_delayTimeoutId","_readyHandler","_handleTagReady","_stalledHandler","_audioSpriteEndHandler","_handleAudioSpriteLoop","_loopHandler","isMuted","_AUDIO_SEEKED","_AUDIO_ENDED","_AUDIO_READY","_AUDIO_STALLED","_TIME_UPDATE","AbstractSoundInstance__beginPlaying","_handleSetPositionSeek","defaultNumChannels","MAX_INSTANCES","AbstractPlugin_register","AbstractPlugin_removeSound","AbstractPlugin_create","__webpack_amd_options__","g","eval","webpackPolyfill","deprecate","children","__WEBPACK_AMD_DEFINE_RESULT__","PreloadJS","isLoader","objectTypes","function","freeExports","nodeType","root","freeGlobal","global","runInContext","String","SyntaxError","TypeError","nativeJSON","stringify","parse","isProperty","forEach","undef","objectProto","getClass","isExtended","getUTCFullYear","getUTCMonth","getUTCDate","getUTCHours","getUTCMinutes","getUTCSeconds","getUTCMilliseconds","exception","has","serialized","stringifySupported","toJSON","parseSupported","charIndexBuggy","floor","Months","getDay","year","month","members","original","Properties","size","valueOf","isFunction","isConstructor","hasProperty","Escapes","92","34","8","12","10","13","9","toPaddedString","quote","useCharIndex","symbols","charCode","charCodeAt","charAt","serialize","whitespace","indentation","stack","date","hours","minutes","seconds","milliseconds","results","element","filter","Index","Source","fromCharCode","Unescapes","47","98","116","110","102","114","lex","begin","isSigned","hasMembers","self","previousJSON","JSON3","isRestored","noConflict","appendToHead","el","getHead","head","getElementsByTagName","getBody","DomUtils","parseXML","text","xml","DOMParser","parseFromString","async","loadXML","parseJSON","DataUtils","_typeCallbacks","_extensionCallbacks","next","maintainScriptOrder","stopOnError","_maxConnections","_availableLoaders","ImageLoader","JavaScriptLoader","CSSLoader","JSONLoader","JSONPLoader","ManifestLoader","SpriteSheetLoader","XMLLoader","SVGLoader","BinaryLoader","VideoLoader","TextLoader","_defaultLoaderLength","useXHR","setPreferXHR","_basePath","_crossOrigin","_loadStartWasDispatched","_currentlyLoadingScript","_currentLoads","_loadQueue","_loadQueueBackup","_loadItemsById","_loadItemsBySrc","_loadedResults","_loadedRawResults","_numItems","_numItemsLoaded","_scriptOrder","_loadedScripts","_lastProgress","NaN","LOAD_TIMEOUT","registerLoader","unregisterLoader","setUseXHR","idsOrUrls","args","isArray","itemsWereRemoved","_disposeItem","_loadNext","close","map","setMaxConnections","loadFile","file","loadNow","_addItem","fileList","getItems","loadStartWasDispatched","_itemCount","_createLoadItem","_createLoader","_loader","_updateProgress","bp","useBasePath","pathMatch","autoId","customHandler","_canStartLoad","_loadItem","_handleFileLoad","_handleFileComplete","_handleFileError","_sendFileStart","_finishOrderedItem","_removeLoadItem","_cleanLoadItem","_saveLoadedItems","_processFinishedLoad","loadFailed","_checkScriptLoadOrder","_sendFileComplete","_sendFileProgress","remaining","chunk","completeHandler","rel","styleSheet","cssText","textNode","createTextNode","complete","_formatImage","successCallback","errorCallback","objURL","_cleanUpURL","_this","revokeObjectURL","json","AbstractLoader_cancel","_dispose","_manifestQueue","MANIFEST_PROGRESS","_loadManifest","AbstractLoader_handleEvent","AbstractLoader_destroy","_handleManifestFileLoad","_handleManifestProgress","_handleManifestComplete","_handleManifestError","SPRITESHEET_PROGRESS","image","contains","documentElement","UID","_nextID","MouseEvent","nativeEvent","pointerID","primary","rawX","rawY","relatedTarget","_get_localX","globalToLocal","_get_localY","_get_isTouch","localX","localY","isTouch","Matrix2D","tx","ty","setValues","DEG_TO_RAD","identity","a1","b1","c1","d1","prepend","tx1","appendMatrix","matrix","prependMatrix","appendTransform","skewX","skewY","prependTransform","rotate","angle","skew","scale","translate","invert","isIdentity","equals","transformPoint","pt","decompose","copy","DisplayProps","visible","shadow","compositeOperation","Point","point","Rectangle","pad","left","bottom","rectangle","union","rect","intersection","x1","y1","x2","y2","intersects","isEmpty","ButtonHelper","outLabel","overLabel","downLabel","hitArea","hitLabel","_isPressed","_isOver","_enabled","mouseChildren","enabled","actionsEnabled","setEnabled","cursor","_reset","__reset","getEnabled","Shadow","color","offsetX","offsetY","blur","_animations","_frames","_images","_data","_loadCount","_frameHeight","_frameWidth","_numFrames","_regX","_regY","_spacing","_margin","_parseData","getAnimations","getNumFrames","animation","getAnimation","getFrame","frameIndex","frame","getFrameBounds","img","getContext","naturalWidth","_handleImageLoad","_handleImageError","spacing","margin","_calculateFrames","anim","obj","speed","errorEvent","maxFrames","frameCount","frameWidth","frameHeight","imgLoop","imgs","imgW","imgH","Graphics","command","_stroke","_strokeStyle","_oldStrokeStyle","_strokeDash","_oldStrokeDash","_strokeIgnoreScale","_fill","_instructions","_commitIndex","_activeInstructions","_dirty","_storeIndex","clear","G","getRGB","getHSL","hue","saturation","lightness","BASE_64","A","B","C","D","E","F","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","h","u","z","0","1","2","3","4","5","6","7","+","/","STROKE_CAPS_MAP","STROKE_JOINTS_MAP","canvas","createCanvas","_ctx","getInstructions","_updateInstructions","instructions","draw","ctx","instr","exec","drawAsPath","instrs","moveTo","MoveTo","lineTo","LineTo","arcTo","radius","ArcTo","arc","startAngle","endAngle","anticlockwise","Arc","quadraticCurveTo","cpx","cpy","QuadraticCurveTo","bezierCurveTo","cp1x","cp1y","cp2x","cp2y","BezierCurveTo","Rect","closePath","ClosePath","beginFill","_setFill","Fill","beginLinearGradientFill","colors","ratios","x0","y0","linearGradient","beginRadialGradientFill","r0","r1","radialGradient","beginBitmapFill","repetition","bitmap","endFill","setStrokeStyle","thickness","caps","joints","miterLimit","ignoreScale","StrokeStyle","setStrokeDash","segments","StrokeDash","beginStroke","_setStroke","Stroke","beginLinearGradientStroke","beginRadialGradientStroke","beginBitmapStroke","endStroke","curveTo","drawRect","drawRoundRect","drawRoundRectComplex","radiusTL","radiusTR","radiusBR","radiusBL","RoundRect","drawCircle","Circle","drawEllipse","Ellipse","drawPolyStar","sides","pointSize","PolyStar","clean","decodePath","str","paramCount","base64","fi","pl","charCount","num","sign","store","unstore","mt","lt","at","bt","qt","cp","lf","rf","bf","ef","ss","sd","ls","rs","bs","es","dr","rr","rc","dc","de","dp","commit","active","commitIndex","beginCmd","ll","fill","stroke","BeginPath","beginPath","fillStyle","mtx","save","transform","restore","createLinearGradient","addColorStop","createRadialGradient","createPattern","strokeStyle","lineWidth","lineCap","lineJoin","setLineDash","EMPTY_SEGMENTS","lineDashOffset","mTL","mTR","mBR","mBL","rTL","rTR","rBR","rBL","ox","oy","xe","ye","xm","ym","ps","DisplayObject","cacheCanvas","cacheID","mouseEnabled","tickEnabled","transformMatrix","snapToPixel","filters","mask","_cacheOffsetX","_cacheOffsetY","_filterOffsetX","_filterOffsetY","_cacheScale","_cacheDataURLID","_cacheDataURL","_props","_rectangle","_bounds","_MOUSE_EVENTS","suppressCrossDomainErrors","_snapToPixelEnabled","_hitTestCanvas","_hitTestContext","_nextCacheID","getStage","_Stage","isVisible","ignoreCache","drawImage","updateContext","graphics","getMatrix","clip","globalAlpha","globalCompositeOperation","_applyShadow","cache","_cacheWidth","_cacheHeight","updateCache","offX","offY","fBounds","_getFilterBounds","ceil","clearRect","_applyFilters","uncache","getCacheDataURL","toDataURL","localToGlobal","getConcatenatedMatrix","localToLocal","getConcatenatedDisplayProps","hitTest","hit","_testHit","getBounds","getTransformedBounds","_getBounds","setBounds","shadowColor","shadowOffsetX","shadowOffsetY","shadowBlur","evtObj","getImageData","applyFilter","bounds","ignoreTransform","_transformBounds","x_a","x_b","y_c","y_d","minX","maxX","minY","maxY","_hasMouseEventListener","evts","DisplayObject_constructor","tickChildren","getNumChildren","numChildren","hasContent","DisplayObject_draw","child","addChildAt","indx","removeChildAt","removeAllChildren","kids","getChildAt","getChildByName","sortChildren","sortFunction","getChildIndex","swapChildrenAt","index1","index2","o1","o2","swapChildren","child1","child2","setChildIndex","getObjectUnderPoint","getObjectsUnderPoint","_getObjectsUnderPoint","recursive","_cloneChildren","DisplayObject__tick","mouse","activeListener","currentDepth","_testMask","DisplayObject_getBounds","Container_constructor","autoClear","mouseX","mouseY","snapToPixelEnabled","mouseInBounds","tickOnUpdate","mouseMoveOutside","preventSelection","_pointerData","_pointerCount","_primaryPointerID","_mouseOverIntervalID","_nextStage","_prevStage","enableDOMEvents","_get_nextStage","_set_nextStage","nextStage","backgroundColor","fillRect","dataURL","putImageData","enableMouseOver","frequency","clearInterval","_testMouseOver","_eventListeners","mouseup","_handleMouseUp","mousemove","_handleMouseMove","dblclick","_handleDoubleClick","mousedown","_handleMouseDown","_getElementRect","getBoundingClientRect","err","offsetTop","offsetLeft","offsetWidth","offsetHeight","pageXOffset","scrollLeft","clientLeft","pageYOffset","scrollTop","clientTop","styles","getComputedStyle","currentStyle","padL","paddingLeft","borderLeftWidth","padT","paddingTop","borderTopWidth","padR","paddingRight","borderRightWidth","padB","paddingBottom","borderBottomWidth","_getPointerData","_handlePointerMove","pageX","pageY","owner","inBounds","_updatePointerPosition","_dispatchMouseEvent","posEvtObj","_handlePointerUp","oTarget","down","_handlePointerDown","eventTarget","_mouseOverX","_mouseOverY","isEventTarget","common","oldList","_mouseOverTarget","oldTarget","pointerId","imageOrUri","sourceRect","spriteSheet","frameOrAnimation","currentFrame","currentAnimation","currentAnimationFrame","_animation","_currentFrame","_skipAdvance","_normalizeFrame","advance","fps","DisplayObject__cloneProps","frameDelta","animFrame","_dispatchAnimationEnd","changed","Shape","Text","font","textAlign","textBaseline","maxWidth","outline","lineHeight","_workingContext","H_OFFSETS","center","V_OFFSETS","hanging","middle","alphabetic","ideographic","col","_drawText","_prepContext","getMeasuredWidth","_getMeasuredWidth","getMeasuredLineHeight","getMeasuredHeight","getMetrics","lines","vOffset","paint","maxW","hardLines","measureText","words","wordW","_drawTextLine","strokeText","fillText","BitmapText","letterSpacing","spaceWidth","_oldProps","maxPoolSize","_spritePool","_updateText","Container_draw","Container_getBounds","Container__cloneProps","_getFrameIndex","character","_getFrame","_getLineHeight","_getSpaceWidth","change","spaceW","lineH","pool","childIndex","numKids","hasSpace","MovieClip","startPosition","inited","INDEPENDENT","timeline","autoReset","frameBounds","_synchOffset","_t","_managed","SINGLE_FRAME","SYNCHED","MovieClipPlugin","_updateTimeline","currentLabel","totalFrames","independent","_framerate","Container__tick","tl","synched","_addManagedChild","_setState","_off","Container__getBounds","SpriteSheetUtils","_workingCanvas","addFlippedFrames","horizontal","vertical","both","_flip","extractFrame","mergeAlpha","rgbImage","alphaImage","il","__tmp","fl","sfx","names","al","SpriteSheetBuilder","maxHeight","padding","timeSlice","_nextFrameIndex","_index","_timerID","_scale","ERR_DIMENSIONS","ERR_RUNNING","addFrame","setupFunction","setupData","nominalBounds","funct","addAnimation","addMovieClip","labelFunction","rects","baseFrameIndex","_setupMovieClipFrame","lbls","build","_startBuild","_drawNext","_endBuild","buildAsync","_run","stopAsync","dataFrames","_fillRow","_getSize","ae","rx","ry","rh","rw","round","ts","DOMElement","htmlElement","transformOrigin","WebkitTransformOrigin","msTransformOrigin","MozTransformOrigin","OTransformOrigin","_handleDrawEnd","oldProps","oldMtx","WebkitTransform","OTransform","msTransform","MozTransform","opacity","Filter","targetCtx","targetX","targetY","imageData","_applyFilter","BlurFilter","blurX","blurY","quality","MUL_TABLE","SHG_TABLE","radiusX","radiusY","iterations","px","yp","yi","yw","pr","pg","pb","pa","divx","divy","w1","h1","rxp1","ryp1","ssx","ssy","stx","mty","sty","ms","AlphaMapFilter","alphaMap","_alphaMap","_mapData","_prepAlphaMap","HTMLCanvasElement","imgData","AlphaMaskFilter","ColorFilter","redMultiplier","greenMultiplier","blueMultiplier","alphaMultiplier","redOffset","greenOffset","blueOffset","alphaOffset","ColorMatrix","brightness","contrast","setColor","DELTA_INDEX","IDENTITY_MATRIX","LENGTH","adjustColor","adjustHue","adjustContrast","adjustBrightness","adjustSaturation","_cleanValue","_multiplyMatrix","cosVal","sinVal","_fixMatrix","toArray","val","limit","ColorMatrixFilter","m0","m1","m2","m3","m4","m5","m6","m7","m8","m9","m10","m11","m12","m13","m14","m15","m16","m17","m18","m19","msPointerEnabled","msMaxTouchPoints","pointerEnabled","maxTouchPoints","singleTouch","allowDefault","__touch","pointers","multitouch","_IOS_enable","_IE_enable","disable","_IOS_disable","_IE_disable","_IOS_handleEvent","touches","changedTouches","touch","identifier","_handleStart","_handleMove","_handleEnd","_IE_handleEvent","msTouchAction","touchAction","activeIDs","ids","srcElement","EaselJS"],"mappings":"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","file":"./static/js/index.bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","//createjs相关库\r\nimport easeljs from 'imports-loader?this=>window!easeljs';\r\nimport preloadjs from 'imports-loader?this=>window!preloadjs';\r\nimport soundjs from 'imports-loader?this=>window!soundjs';\r\nimport tweenjs from 'imports-loader?this=>window!tweenjs';\r\n\r\n//全局控制变量\r\nexport default{\r\n\t//场景值\r\n\tscreen:0,\r\n\tscreenLocked:0,\r\n\tbg:{},\r\n\tgirlAni:{},\r\n\tground:{},\r\n\tbgContainer:{},\r\n\tground_bg:{}\r\n}","import G from './gloable.js';\r\nexport default function Load(){\r\n\tthis.progress = 0;\r\n\tthis._init();\r\n}\r\n\r\nlet proNode = null;\r\nlet loadNode = null;\r\nLoad.prototype._init = function(){\r\n\tloadNode = document.querySelector('#progress');\r\n\tproNode = document.querySelector('#progress span');\r\n\tthis.queue = new createjs.LoadQueue();\r\n\t//注册音频插件\r\n\tthis.queue.installPlugin(createjs.Sound);\r\n\t//定义资源加载列表\r\n\tthis.queue.loadManifest([\r\n\t\t{id:\"home_bg\",src:\"../images/homePage_684d8f7.jpg\"},\r\n\t\t{id:\"music_bg\",src:\"../media/music.mp3\"},\r\n\r\n\t\t//场景1资源列表\r\n\t\t{id:\"01_flower\",src:\"../images/flower_ddf789f.png\"},\r\n\t\t{id:\"01_path\",src:\"../images/dot_7daf7df.png\"},\r\n\t\t{id:\"01_text\",src:\"../images/optipwords_cec9df4.png\"},\r\n\t\t{id:\"01_hand\",src:\"../images/handtip_2a217ef.png\"},\r\n\r\n\t\t//场景切换按钮\r\n\t\t{id:'screen_optipbtn', src:'../images/optipbtn_61a674a.png'},\r\n\t\t{id:'screen_optipcircle', src:'../images/optipcircle_59cf14b.png'},\r\n\r\n\t\t//场景2资源列表\r\n\t\t{id:'02_text01', src:'../images/p1w1_0b28dab.png'},\r\n\t\t{id:'02_text02', src:'../images/p1w2_5971c24.png'},\r\n\t\t{id:'02_moon', src:'../images/moon_d4c77ad.png'},\r\n\t\t{id:'02_block01', src:'../images/blockbig_ea93d8e.png'},\r\n\t\t{id:'02_block02', src:'../images/block2_6cb88e9.png'},\r\n\t\t{id:'02_block03', src:'../images/block1_7696ddd.png'},\r\n\t\t{id:'02_block04', src:'../images/stair_edf570b.png'},\r\n\t\t{id:'02_girl', src:'../images/girl_63090bc.png'},\r\n\t\t{id:'02_cloud01', src:'../images/cloud1_d65b6e1.png'},\r\n\t\t{id:'02_cloud02', src:'../images/cloud2_71bf032.png'},\r\n\t\t{id:'02_cloud03', src:'../images/cloud3_bc745db.png'},\r\n\t\t{id:'02_cloud04', src:'../images/cloud4_2c8990f.png'},\r\n\r\n\t\t//场景3资源列表\r\n\t\t{id:'03_text01', src:'../images/p2w1_5c2c750.png'},\r\n\t\t{id:'03_text02', src:'../images/p2w2_95a96b0.png'},\r\n\t\t{id:'04_light', src:'../images/light_4f354be.png'},\r\n\t\t{id:'04_branch', src:'../images/bigtree_1f02526.png'},\r\n\r\n\t\t//场景4的资源列表\r\n\t\t{id:'05_ground', src:'../images/ground_cc8e201.png'},\r\n\t\t{id:'05_ground_bg', src:'../images/treePage_3a1da40.jpg'},\r\n\t\t{id:'05_text01', src:'../images/p3w1_8d3187d.png'},\r\n\t\t{id:'05_text02', src:'../images/p3w2_d1668d1.png'},\r\n\r\n\t\t//场景五的资源\r\n\t\t{id:'06_bg', src:'../images/flowerPage_a402a6d.jpg'},\r\n\t\t{id:'06_girllights', src:'../images/girllights_2968f54.png'},\r\n\t\t{id:'06_meteor', src:'../images/meteor_e9fdfcf.png'},\r\n\t\t{id:'06_text01', src:'../images/p4w2_f821859.png'},\r\n\t\t{id:'06_text02', src:'../images/p4w1_d9fb938.png'}\r\n\t\t\r\n\t]);\r\n\r\n\t//资源加载进度\r\n\tthis.queue.on('progress',handleProgress);\r\n\tfunction handleProgress(e){\r\n\t\tthis.progress = e.progress;\r\n\r\n\t\tproNode.innerText = parseInt(this.progress * 100) + '%';\r\n\t}\r\n\t//资源加载完成\r\n\tthis.queue.on('complete',handleComplete);\r\n\tfunction handleComplete(){\r\n\t\tG.screen = 1;\r\n\t\t//隐藏加载进度\r\n\t\tloadNode.style.display = 'none';\r\n\t\t//播放音乐\r\n\t\tcreatejs.Sound.play('music_bg');\r\n\t\t//生成控制播放按钮\r\n\t\tlet ctrl = document.createElement('div');\r\n\t\tctrl.style.position = 'fixed';\r\n\t\tctrl.style.right = '20px';\r\n\t\tctrl.style.top = '20px';\r\n\t\tctrl.style.zIndex = 1000;\r\n\t\tctrl.className = 'audio';\r\n\t\tctrl.setAttribute('playState', 'true');\r\n\r\n\t\tlet ctrlBtn = document.createElement('span');\r\n\t\tctrlBtn.style.display = 'block';\r\n\t\tctrlBtn.style.width = '30px';\r\n\t\tctrlBtn.style.height = '30px';\r\n\t\tctrlBtn.style.background = 'url(../images/music-on_d8d8e5f.png) no-repeat';\r\n\t\tctrlBtn.style.backgroundSize = '100% 100%';\r\n\t\tctrlBtn.style.backgroundPosition = 'center center';\r\n\t\tctrl.appendChild(ctrlBtn);\r\n\r\n\t\tctrl.addEventListener('click',()=>{\r\n\t\t\tlet state = ctrl.getAttribute('playState');\r\n\t\t\tif(state == 'true'){\r\n\t\t\t\tcreatejs.Sound.stop();\r\n\t\t\t\tctrl.setAttribute('playState', 'false');\r\n\t\t\t\tctrlBtn.style.background = 'url(../images/music-off_8ae1c44.png) no-repeat';\r\n\t\t\t\tctrlBtn.style.backgroundSize = '100% 100%';\r\n\t\t\t\tctrlBtn.style.backgroundPosition = 'center center';\r\n\t\t\t}else{\r\n\t\t\t\tcreatejs.Sound.play('music_bg');\r\n\t\t\t\tctrl.setAttribute('playState', 'true');\r\n\t\t\t\tctrlBtn.style.background = 'url(../images/music-on_d8d8e5f.png) no-repeat';\r\n\t\t\t\tctrlBtn.style.backgroundSize = '100% 100%';\r\n\t\t\t\tctrlBtn.style.backgroundPosition = 'center center';\r\n\t\t\t}\r\n\t\t})\r\n\t\tdocument.body.appendChild(ctrl);\r\n\t\t\r\n\t}\r\n}","import G from './gloable.js';\r\nexport default function Stage(canvasId = 'stage'){\r\n\tthis.canvasId = canvasId;\r\n\tthis._init();\r\n}\r\n\r\nStage.prototype._init = function(){\r\n\t//实例化舞台\r\n\tthis.stage = new createjs.Stage(this.canvasId);\r\n\t//开启事件\r\n\tcreatejs.Touch.enable(this.stage);\r\n}","import G from './gloable.js';\r\nexport default function Screen01(queue,stage){\r\n\tthis.queue = queue;\r\n\tthis.stage = stage;\r\n\tthis.flowers = [];\r\n\tthis.paths = [];\r\n\tthis.curI = 0;\r\n\tthis.container = new createjs.Container();\r\n\tthis._init();\r\n\tthis.stage.addChild(this.container);\r\n}\r\n\r\nScreen01.prototype._init = function(){\r\n\tG.screenLocked = 1;\r\n\t//添加背景\r\n\tG.bgContainer = new createjs.Container();\r\n\tG.bg = new createjs.Bitmap(this.queue.getResult('home_bg'));\r\n\t//第四幕背景\r\n\tG.ground_bg = new createjs.Bitmap(this.queue.getResult('05_ground_bg'));\r\n\tG.ground_bg.y = 1810;\r\n\tG.ground_bg.alpha = 0;\r\n\tG.ground = new createjs.Bitmap(this.queue.getResult('05_ground'));\r\n\tG.ground.y = 1810;\r\n\tG.ground.alpha = 0;\r\n\tG.bgContainer.addChild(G.ground_bg,G.ground);\r\n\tG.bgContainer.addChild(G.bg);\r\n\tthis.stage.addChild(G.bgContainer);\r\n\t//花朵 flower\r\n\tthis._flower();\r\n\t//文 字\r\n\tthis._showText();\r\n\t//手势\r\n\tthis._showHand();\r\n}\r\n\r\nScreen01.prototype._flower = function(){\r\n\t//位置花朵\r\n\tvar flowerPath = [\r\n\t\t[307,403],\r\n\t\t[421,316],\r\n\t\t[571,266],\r\n\t\t[741,261],\r\n\t\t[866,356],\r\n\t\t[1041,331],\r\n\t\t[1051,171]\r\n\t];\r\n\t//添加花朵\r\n\tfor(let i=0;i<7;i++){\r\n\t\tlet flower = new createjs.Bitmap(this.queue.getResult('01_flower'));\r\n\t\tflower.regX = flower.regY = 31;\r\n\t\tflower.x = flowerPath[i][0];\r\n\t\tflower.y = flowerPath[i][1];\r\n\t\tthis.container.addChild(flower);\r\n\t\tthis.flowers.push(flower);\r\n\t}\r\n\r\n\t//解锁路径 x,y,deg\r\n\tvar path = [\r\n\t\t[332,375,-40],\r\n\t\t[466,288,-18],\r\n\t\t[625,244,0],\r\n\t\t[783,281,30],\r\n\t\t[930,350,-15],\r\n\t\t[1040,270,-90]\r\n\t];\r\n\t//添加路径\r\n\tfor(let k=0;k<6;k++){\r\n\t\tlet pathObj = new createjs.Bitmap(this.queue.getResult('01_path'));\r\n\t\tpathObj.setTransform(path[k][0], path[k][1], .6, .6, path[k][2]);\r\n\t\tpathObj.alpha = 0.3;\r\n\t\tthis.container.addChild(pathObj);\r\n\t\tthis.paths.push(pathObj);\r\n\t}\r\n\t\r\n\r\n\t//鼠标触屏事件\r\n\tthis.stage.addEventListener('stagemousemove',(evt)=>{\r\n\t\t//当前鼠标经过位置\r\n\t\tlet x = evt.stageX;\r\n\t\tlet y = evt.stageY;\r\n\t\tlet len = flowerPath.length;\r\n\t\tfor(let i=0;i<len;i++){\r\n\t\t\tlet posX = flowerPath[i][0];\r\n\t\t\tlet posY = flowerPath[i][1];\r\n\t\t\t//鼠标经过花朵\r\n\t\t\tif(x>=posX && x<=posX+62 && y>=posY && y<=posY+62){\r\n\t\t\t\t//经过当前索引值花朵\r\n\t\t\t\tif(this.curI === i){\r\n\t\t\t\t\tif(this.curI === 0){\r\n\t\t\t\t\t\t//移除手势\r\n\t\t\t\t\t\tthis.container.removeChild(this.handAni);\r\n\t\t\t\t\t\tcreatejs.Ticker.setFPS(100);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t//添加花瓣旋转动画\r\n\t\t\t\t\tcreatejs.Tween.get(this.flowers[i],{loop:true},true)\r\n\t\t\t\t\t.to({\r\n\t\t\t\t\t\trotation:360\r\n\t\t\t\t\t},1500);\r\n\t\t\t\t\t\r\n\t\t\t\t\t//路径变亮\r\n\t\t\t\t\ttry{\r\n\t\t\t\t\t\tcreatejs.Tween.get(this.paths[i-1])\r\n\t\t\t\t\t\t.to({\r\n\t\t\t\t\t\t\talpha:1\r\n\t\t\t\t\t\t},1000)\r\n\t\t\t\t\t}catch(e){\r\n\t\t\t\t\t\tconsole.log(e)\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t//this.curI ++\r\n\t\t\t\t\tthis.curI = this.curI+1;\r\n\t\t\t\t\t//花瓣全部点亮\r\n\t\t\t\t\tif(this.curI>=len){\r\n\t\t\t\t\t\t//隐藏并移除 第一幕场景\r\n\t\t\t\t\t\tcreatejs.Tween.get(this.container)\r\n\t\t\t\t\t\t.to({\r\n\t\t\t\t\t\t\talpha:0\r\n\t\t\t\t\t\t},1000)\r\n\t\t\t\t\t\t.call(()=>{\r\n\t\t\t\t\t\t\tthis.stage.removeChild(this.container);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\t//场景切换到2\r\n\t\t\t\t\t\tG.screen = 2;\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t})\r\n}\r\n\r\n//添加文字\r\nScreen01.prototype._showText = function(){\r\n\tthis.text01 = new createjs.Bitmap(this.queue.getResult('01_text'));\r\n\tthis.text01.x = 540;\r\n\tthis.text01.y = 520;\r\n\tthis.container.addChild(this.text01);\r\n}\r\n\r\n//添加手势\r\nScreen01.prototype._showHand = function(){\r\n\t//创建精灵图  配置\r\n\tthis.handSprite = new createjs.SpriteSheet({\r\n\t\timages:[this.queue.getResult('01_hand')],\r\n\t\tframes:{\r\n\t\t\twidth:218,\r\n\t\t\theight:200,\r\n\t\t\tcount:5\r\n\t\t},\r\n\t\tanimations:{\r\n\t\t\thandtip:[0,1,2,3,4,4,0]\r\n\t\t}\r\n\t});\r\n\r\n\t//调用精灵图\r\n\tthis.handAni = new createjs.Sprite(this.handSprite,'handtip');\r\n\t//\r\n\tthis.handAni.setTransform(300, 430, 1, 1, -35);\r\n\tcreatejs.Ticker.setFPS(3);\r\n\tthis.container.addChild(this.handAni);\r\n}\r\n","import G from './gloable.js';\r\nexport default function Screen02(queue,stage){\r\n\tthis.queue = queue;\r\n\tthis.stage = stage;\r\n\tthis.container = new createjs.Container();\r\n\tthis.stage.addChild(this.container);\r\n\tthis._init();\r\n}\r\n\r\nScreen02.prototype._init = function(){\r\n\tG.screenLocked = 2;\r\n\t//背景图下移\r\n\tcreatejs.Tween.get(this.stage)\r\n\t.wait(1500)\r\n\t.to({\r\n\t\ty:-595\r\n\t},3500)\r\n\r\n\t\r\n\t//月亮\r\n\tthis._showMoon();\r\n\t//城墙\r\n\tthis._showBlock();\r\n\t//女孩\r\n\tthis._showGril();\r\n\t//云朵\r\n\tthis._showCloud();\r\n}\r\n//女孩\r\nScreen02.prototype._showGril = function(){\r\n\tthis.girlContainer = new createjs.Container();\r\n\tcreatejs.Ticker.setFPS(15);\r\n\t//女孩精灵图\r\n\tlet girlSprite = new createjs.SpriteSheet({\r\n\t\timages:[this.queue.getResult('02_girl')],\r\n\t\tframes:{\r\n\t\t\twidth: 135,\r\n\t\t\theight:100,\r\n\t\t\tcount: 48\r\n\t\t},\r\n\t\tanimations: {\r\n\t\t\tstand: [0,20],\r\n\t\t\twalk: [21,36],\r\n\t\t\trun: [37,47]\r\n\t\t}\r\n\t});\r\n\t//实例化精灵图\r\n\tG.girlAni = new createjs.Sprite(girlSprite,'walk');\r\n\tG.girlAni.x = 450;\r\n\tG.girlAni.y = 968;\r\n\tnew Promise((resolve,reject)=>{\r\n\t\t//走路动画\r\n\t\tcreatejs.Tween.get(G.girlAni)\r\n\t\t.wait(3500)\r\n\t\t.to({\r\n\t\t\tx:580\r\n\t\t},4000)\r\n\t\t.call(()=>{\r\n\t\t\t//站立\r\n\t\t\tG.girlAni.gotoAndPlay('stand');\r\n\t\t\tresolve();\r\n\t\t})\r\n\t})\r\n\t.then(()=>{\r\n\t\treturn this._showText();\r\n\t})\r\n\t.then(()=>{\r\n\t\tsetTimeout(()=>{\r\n\t\t\tthis._showBtn();\r\n\t\t},1000)\r\n\t})\r\n\tthis.girlContainer.addChild(G.girlAni);\r\n\tthis.container.addChild(this.girlContainer);\r\n}\r\n\r\n//按钮\r\nScreen02.prototype._showBtn = function(){\r\n\tthis.optipbtn = new createjs.Bitmap(this.queue.getResult('screen_optipbtn'));\r\n\tthis.optipbtn.x = 1015;\r\n\tthis.optipbtn.y = 1015;\r\n\tthis.optipbtn.alpha = 0;\r\n\r\n\tthis.optipcircle = new createjs.Bitmap(this.queue.getResult('screen_optipcircle'));\r\n\tthis.optipcircle.x = 1050;\r\n\tthis.optipcircle.y = 1050;\r\n\tthis.optipcircle.regX = 35;\r\n\tthis.optipcircle.regY = 35;\r\n\tthis.optipcircle.alpha = 0;\r\n\tnew Promise((resolve,reject)=>{\r\n\t\tcreatejs.Tween.get(this.optipbtn)\r\n\t\t.to({\r\n\t\t\talpha:1\r\n\t\t},500)\r\n\t\t.call(()=>{\r\n\t\t\tresolve();\r\n\t\t})\r\n\t\tcreatejs.Tween.get(this.optipcircle)\r\n\t\t.to({\r\n\t\t\talpha:1\r\n\t\t},500)\r\n\t\t.call(()=>{\r\n\t\t\tresolve();\r\n\t\t})\r\n\t})\r\n\t.then(()=>{\r\n\t\t//外圈闪烁动画\r\n\t\tcreatejs.Tween.get(this.optipcircle,{loop:true})\r\n\t\t.to({\r\n\t\t\talpha:0,\r\n\t\t\tscaleX:1.5,\r\n\t\t\tscaleY:1.5\r\n\t\t},1000)\r\n\t})\r\n\tthis.container.addChild(this.optipbtn,this.optipcircle);\r\n\r\n\t//btn点击事件\r\n\tthis.optipbtn.addEventListener('click',()=>{\r\n\t\t//按钮消失\r\n\t\tthis.container.removeChild(this.optipbtn);\r\n\t\tthis.container.removeChild(this.optipcircle);\r\n\t\t//文字消失\r\n\t\tnew Promise((resolve,reject)=>{\r\n\t\t\tcreatejs.Tween.get(this.text01)\r\n\t\t\t.to({\r\n\t\t\t\tx: 230,\r\n\t\t\t\talpha: 0\r\n\t\t\t},1500);\r\n\t\t\tcreatejs.Tween.get(this.text02)\r\n\t\t\t.to({\r\n\t\t\t\tx: 320,\r\n\t\t\t\talpha: 0\r\n\t\t\t},1500)\r\n\t\t\t.call(()=>{\r\n\t\t\t\tresolve();\r\n\t\t\t})\r\n\t\t})\r\n\t\t.then(()=>{\r\n\t\t\tthis.container.removeChild(this.text01,this.text02);\r\n\t\t\treturn new Promise((resolve,reject)=>{\r\n\t\t\t\t//屏幕抖动\r\n\t\t\t\tlet count = 0;\r\n\t\t\t\tlet bgAni = createjs.Tween.get(this.stage,{loop:true})\r\n\t\t\t\t.to({\r\n\t\t\t\t\tx:-5,\r\n\t\t\t\t\ty:-600\r\n\t\t\t\t},200)\r\n\t\t\t\t.call(()=>{\r\n\t\t\t\t\tif(count===6){\r\n\t\t\t\t\t\tresolve();\r\n\t\t\t\t\t\tbgAni.pause();\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcreatejs.Tween.get(this.stage)\r\n\t\t\t\t\t.to({\r\n\t\t\t\t\t\tx:0,\r\n\t\t\t\t\t\ty:-595\r\n\t\t\t\t\t},200);\r\n\t\t\t\t\tcount++;\r\n\t\t\t\t})\r\n\t\t\t})\r\n\t\t})\r\n\t\t.then(()=>{\r\n\t\t\t//背景下移\r\n\t\t\tcreatejs.Tween.get(this.stage)\r\n\t\t\t.to({\r\n\t\t\t\ty:-1810\r\n\t\t\t},7000);\r\n\t\t\t//墙体脱落\r\n\t\t\tcreatejs.Tween.get(this.block02)\r\n\t\t\t.to({\r\n\t\t\t\ty:1160,\r\n\t\t\t\talpha:0\r\n\t\t\t},2000);\r\n\t\t\tcreatejs.Tween.get(this.block03)\r\n\t\t\t.to({\r\n\t\t\t\ty:1500,\r\n\t\t\t\trotation:-30\r\n\t\t\t},2000)\r\n\t\t\t.call(()=>{\r\n\t\t\t\tcreatejs.Tween.get(this.block03)\r\n\t\t\t\t.to({\r\n\t\t\t\t\ty:1550,\r\n\t\t\t\t\talpha:0\r\n\t\t\t\t},2000)\r\n\t\t\t});\r\n\t\t\t//女孩掉落\r\n\t\t\tcreatejs.Tween.get(G.girlAni)\r\n\t\t\t.to({\r\n\t\t\t\ty:2250\r\n\t\t\t},10000)\r\n\t\t\t.call(()=>{\r\n\t\t\t\tcreatejs.Tween.get(G.girlAni)\r\n\t\t\t\t.to({\r\n\t\t\t\t\ty:2260\r\n\t\t\t\t},2000)\r\n\t\t\t})\r\n\t\t\t//云朵下落\r\n\t\t\tthis.girlCloud = new createjs.Bitmap(this.queue.getResult('02_cloud01'));\r\n\t\t\tthis.girlCloud.x = 620;\r\n\t\t\tthis.girlCloud.y = 1030;\r\n\t\t\tthis.girlCloud.scaleX = .2;\r\n\t\t\tthis.girlCloud.scaleY = .2;\r\n\t\t\tthis.girlCloud.alpha = .8;\r\n\t\t\tthis.girlContainer.addChild(this.girlCloud);\r\n\t\t\tcreatejs.Tween.get(this.girlCloud)\r\n\t\t\t.to({\r\n\t\t\t\ty:2312\r\n\t\t\t},10000)\r\n\t\t\t.call(()=>{\r\n\t\t\t\tcreatejs.Tween.get(this.girlCloud)\r\n\t\t\t\t.to({\r\n\t\t\t\t\talpha:0\r\n\t\t\t\t},200)\r\n\t\t\t\t.call(()=>{\r\n\t\t\t\t\tthis.container.removeChild(this.girlCloud);\r\n\r\n\t\t\t\t\t//将场景控制值设置为 场景三\r\n\t\t\t\t\tG.screen = 3;\r\n\t\t\t\t})\r\n\t\t\t})\r\n\t\t})\r\n\t\t\r\n\r\n\t})\r\n\r\n}\r\n//文字\r\nScreen02.prototype._showText = function(){\r\n\treturn new Promise((resolve,reject)=>{\r\n\t\tthis.text01 = new createjs.Bitmap(this.queue.getResult('02_text01'));\r\n\t\tthis.text01.alpha = 0;\r\n\t\tthis.text01.x = 230;\r\n\t\tthis.text01.y = 730;\r\n\t\tcreatejs.Tween.get(this.text01)\r\n\t\t.wait(500)\r\n\t\t.to({\r\n\t\t\tx: 250,\r\n\t\t\talpha: 1\r\n\t\t},1500);\r\n\r\n\t\tthis.text02 = new createjs.Bitmap(this.queue.getResult('02_text02'));\r\n\t\tthis.text02.alpha = 0;\r\n\t\tthis.text02.x = 320;\r\n\t\tthis.text02.y = 750;\r\n\t\tcreatejs.Tween.get(this.text02)\r\n\t\t.wait(2000)\r\n\t\t.to({\r\n\t\t\tx: 350,\r\n\t\t\talpha: 1\r\n\t\t},1500)\r\n\t\t.call(()=>{\r\n\t\t\tresolve();\r\n\t\t});\r\n\r\n\t\tthis.container.addChild(this.text01,this.text02);\r\n\t})\r\n}\r\n\r\n//月亮\r\nScreen02.prototype._showMoon = function(){\r\n\tthis.moon = new createjs.Bitmap(this.queue.getResult('02_moon'));\r\n\tthis.moon.x = 860;\r\n\tthis.moon.y = 585;\r\n\tthis.container.addChild(this.moon);\r\n}\r\n//城墙\r\nScreen02.prototype._showBlock = function(){\r\n\tthis.block01 = new createjs.Bitmap(this.queue.getResult('02_block01'));\r\n\tthis.block01.x = -70;\r\n\tthis.block01.y = 1055;\r\n\r\n\tthis.block02 = new createjs.Bitmap(this.queue.getResult('02_block02'));\r\n\tthis.block02.x = 570;\r\n\tthis.block02.y = 1055;\r\n\r\n\tthis.block03 = new createjs.Bitmap(this.queue.getResult('02_block03'));\r\n\tthis.block03.x = 636;\r\n\tthis.block03.y = 1055;\r\n\r\n\tthis.block04 = new createjs.Bitmap(this.queue.getResult('02_block04'));\r\n\tthis.block04.x = 830;\r\n\tthis.block04.y = 900;\r\n\r\n\tthis.container.addChild(this.block01,this.block02,this.block03,this.block04);\r\n}\r\n//云朵\r\nScreen02.prototype._showCloud = function(){\r\n\tthis.cloudContainer = new createjs.Container();\r\n\tthis.cloud01 = new createjs.Bitmap(this.queue.getResult('02_cloud01'));\r\n\tthis.cloud01.x = 15;\r\n\tthis.cloud01.y = 1065;\r\n\tthis.cloud01.alpha = 0.8;\r\n\r\n\tthis.cloud02 = new createjs.Bitmap(this.queue.getResult('02_cloud02'));\r\n\tthis.cloud02.x = 100;\r\n\tthis.cloud02.y = 1065;\r\n\tthis.cloud02.alpha = 0.8;\r\n\r\n\tthis.cloud03 = new createjs.Bitmap(this.queue.getResult('02_cloud03'));\r\n\tthis.cloud03.x = 200;\r\n\tthis.cloud03.y = 1065;\r\n\tthis.cloud03.alpha = 0.8;\r\n\r\n\tthis.cloud04 = new createjs.Bitmap(this.queue.getResult('02_cloud04'));\r\n\tthis.cloud04.x = 300;\r\n\tthis.cloud04.y = 1065;\r\n\tthis.cloud04.alpha = 0.8;\r\n\r\n\tthis.cloudContainer.addChild(this.cloud01,this.cloud02,this.cloud03,this.cloud04);\r\n\tthis.container.addChild(this.cloudContainer);\r\n\tthis.cloudContainer.x = 120;\r\n\tcreatejs.Tween.get(this.cloudContainer)\r\n\t.to({\r\n\t\tx:0\r\n\t},16000)\r\n}\r\n\r\n","import G from './gloable.js';\r\nexport default function Screen03(queue,stage){\r\n\tthis.queue = queue;\r\n\tthis.stage = stage;\r\n\tthis.container = new createjs.Container();\r\n\tthis.stage.addChild(this.container);\r\n\tthis._init();\r\n}\r\n\r\nScreen03.prototype._init = function(){\r\n\tG.screenLocked = 3;\r\n\tthis._showLight();\r\n\tthis._showText()\r\n\t.then(()=>{\r\n\t\tthis._showBtn();\r\n\t});\r\n}\r\n\r\nScreen03.prototype._showText = function(){\r\n\treturn new Promise((resolve,reject)=>{\r\n\t\tthis.text01 = new createjs.Bitmap(this.queue.getResult('03_text01'));\r\n\t\tthis.text01.alpha = 0;\r\n\t\tthis.text01.x = 400;\r\n\t\tthis.text01.y = 2045;\r\n\t\tcreatejs.Tween.get(this.text01)\r\n\t\t.to({\r\n\t\t\talpha:1\r\n\t\t},1500)\r\n\t\tthis.text02 = new createjs.Bitmap(this.queue.getResult('03_text02'));\r\n\t\tthis.text02.alpha = 0;\r\n\t\tthis.text02.x = 450;\r\n\t\tthis.text02.y = 2045;\r\n\t\tcreatejs.Tween.get(this.text02)\r\n\t\t.wait(1500)\r\n\t\t.to({\r\n\t\t\talpha:1,\r\n\t\t\tx:430\r\n\t\t},1500)\r\n\t\t.call(()=>{\r\n\t\t\tresolve();\r\n\t\t})\r\n\t\tthis.container.addChild(this.text01,this.text02);\r\n\t})\r\n}\r\n\r\n//按钮\r\nScreen03.prototype._showBtn = function(){\r\n\tthis.optipbtn = new createjs.Bitmap(this.queue.getResult('screen_optipbtn'));\r\n\tthis.optipbtn.x = 1015;\r\n\tthis.optipbtn.y = 2200;\r\n\tthis.optipbtn.alpha = 0;\r\n\r\n\tthis.optipcircle = new createjs.Bitmap(this.queue.getResult('screen_optipcircle'));\r\n\tthis.optipcircle.x = 1050;\r\n\tthis.optipcircle.y = 2235;\r\n\tthis.optipcircle.regX = 35;\r\n\tthis.optipcircle.regY = 35;\r\n\tthis.optipcircle.alpha = 0;\r\n\r\n\tnew Promise((resolve,reject)=>{\r\n\t\tcreatejs.Tween.get(this.optipbtn)\r\n\t\t.to({\r\n\t\t\talpha:1\r\n\t\t},500)\r\n\t\t.call(()=>{\r\n\t\t\tresolve();\r\n\t\t})\r\n\t\tcreatejs.Tween.get(this.optipcircle)\r\n\t\t.to({\r\n\t\t\talpha:1\r\n\t\t},500)\r\n\t\t.call(()=>{\r\n\t\t\tresolve();\r\n\t\t})\r\n\t})\r\n\t.then(()=>{\r\n\t\t//外圈闪烁动画\r\n\t\tcreatejs.Tween.get(this.optipcircle,{loop:true})\r\n\t\t.to({\r\n\t\t\talpha:0,\r\n\t\t\tscaleX:1.5,\r\n\t\t\tscaleY:1.5\r\n\t\t},1000)\r\n\t})\r\n\r\n\tthis.container.addChild(this.optipbtn,this.optipcircle);\r\n\r\n\t//点击事件\r\n\tthis.optipbtn.addEventListener('click',()=>{\r\n\t\tG.lightStage = 'false';\r\n\t\t//文字消失\r\n\t\tnew Promise((resolve,reject)=>{\r\n\t\t\tcreatejs.Tween.get(this.text02)\r\n\t\t\t.to({\r\n\t\t\t\talpha:0,\r\n\t\t\t\tx:450\r\n\t\t\t},1500)\r\n\t\t\tcreatejs.Tween.get(this.text01)\r\n\t\t\t.to({\r\n\t\t\t\talpha:0,\r\n\t\t\t\tx : 395\r\n\t\t\t},1500)\r\n\t\t\t.call(()=>{\r\n\t\t\t\tresolve();\r\n\t\t\t\tthis.container.removeChild(this.text01,this.text02);\r\n\t\t\t})\r\n\t\t})\r\n\t\t.then(()=>{\r\n\t\t\tthis._showBranch();\r\n\t\t})\r\n\t})\r\n\r\n}\r\n\r\nScreen03.prototype._showLight = function(){\r\n\tthis.light = new createjs.Bitmap(this.queue.getResult('04_light'));\r\n\tthis.light.x = 140;\r\n\tthis.light.y = 1800;\r\n\tthis.light.alpha = 0;\r\n\tnew Promise((resolve,reject)=>{\r\n\t\tcreatejs.Tween.get(this.light)\r\n\t\t.to({\r\n\t\t\talpha: .4\r\n\t\t}, 1500)\r\n\t\t.call(()=>{\r\n\t\t\tresolve();\r\n\t\t});\r\n\t})\r\n\t.then(()=>{\r\n\t\t_lightAni(this.light);\r\n\t})\r\n\tthis.container.addChild(this.light);\r\n\tfunction _lightAni(light){\r\n\t\tif(G.lightStage == 'false'){\r\n\t\t\treturn 0;\r\n\t\t}\r\n\t\tnew Promise((resolve,reject)=>{\r\n\t\t\tcreatejs.Tween.get(light)\r\n\t\t\t.to({\r\n\t\t\t\talpha: .9,\r\n\t\t\t\tx:160\r\n\t\t\t}, 1500)\r\n\t\t\t.call(()=>{\r\n\t\t\t\tresolve();\r\n\t\t\t})\r\n\t\t})\r\n\t\t.then(()=>{\r\n\t\t\tcreatejs.Tween.get(light)\r\n\t\t\t.to({\r\n\t\t\t\talpha: .4,\r\n\t\t\t\tx:140\r\n\t\t\t}, 1500)\r\n\t\t\t.call(()=>{\r\n\t\t\t\t_lightAni(light);\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n}\r\n\r\nScreen03.prototype._showBranch = function(){\r\n\tthis.branch = new createjs.Bitmap(this.queue.getResult('04_branch'));\r\n\tthis.branch.x = 1400;\r\n\tthis.branch.y = 1825;\r\n\tcreatejs.Tween.get(this.branch)\r\n\t.to({\r\n\t\tx:-1400\r\n\t}, 4000);\r\n\r\n\tlet timmer = setTimeout(()=>{\r\n\t\tG.screen = 4;\r\n\t\t//移除光线\r\n\t\tcreatejs.Tween.get(this.light)\r\n\t\t.to({\r\n\t\t\talpha:0\r\n\t\t},2000)\r\n\t\t.call(()=>{\r\n\t\t\tthis.container.removeChild(this.light);\r\n\t\t});\r\n\t\t//替换背景\r\n\t\tcreatejs.Tween.get(G.bg)\r\n\t\t.to({\r\n\t\t\talpha:0\r\n\t\t},2000);\r\n\t\tcreatejs.Tween.get(G.ground)\r\n\t\t.to({\r\n\t\t\talpha:1\r\n\t\t},2000);\r\n\t\tcreatejs.Tween.get(G.ground_bg)\r\n\t\t.to({\r\n\t\t\talpha:1\r\n\t\t},2000);\r\n\r\n\t\tclearTimeout(timmer);\r\n\t},2000)\r\n\tthis.container.addChild(this.branch);\r\n}\r\n","import G from './gloable.js';\r\nexport default function Screen04(queue,stage){\r\n\tthis.queue = queue;\r\n\tthis.stage = stage;\r\n\tthis.container = new createjs.Container();\r\n\tthis.stage.addChild(this.container);\r\n\tthis._init();\r\n}\r\n\r\nScreen04.prototype._init = function(){\r\n\tG.screenLocked =4;\r\n\t//背景图\r\n\tcreatejs.Tween.get(G.ground)\r\n\t.to({\r\n\t\tx:-150\r\n\t},5500);\r\n\r\n\tthis._girlWalk();\r\n\tthis._showText();\r\n}\r\n\r\nScreen04.prototype._girlWalk = function(){\r\n\tG.girlAni.gotoAndPlay('walk');\r\n\tcreatejs.Tween.get(G.girlAni)\r\n\t.to({\r\n\t\tx:600\r\n\t},5500)\r\n\t.call(()=>{\r\n\t\tG.girlAni.gotoAndPlay('stand');\r\n\t\tthis._showBtn();\r\n\t});\r\n\tthis.container.addChild(G.girlAni);\r\n}\r\n\r\nScreen04.prototype._showText = function(){\r\n\tthis.text01 = new createjs.Bitmap(this.queue.getResult('05_text01'));\r\n\tthis.text01.alpha = 0;\r\n\tthis.text01.x = 230;\r\n\tthis.text01.y = 1880;\r\n\tcreatejs.Tween.get(this.text01)\r\n\t.wait(2000)\r\n\t.to({\r\n\t\talpha: 1\r\n\t}, 1500);\r\n\r\n\tthis.text02 = new createjs.Bitmap(this.queue.getResult('05_text02'));\r\n\tthis.text02.alpha = 0;\r\n\tthis.text02.x = 390\r\n\tthis.text02.y = 1960;\r\n\tcreatejs.Tween.get(this.text02)\r\n\t.wait(4000)\r\n\t.to({\r\n\t\tx: 370,\r\n\t\talpha: 1 \r\n\t}, 1800)\r\n\r\n\tthis.container.addChild(this.text01, this.text02);\r\n}\r\n\r\nScreen04.prototype._showBtn = function(){\r\n\tthis.optipbtn = new createjs.Bitmap(this.queue.getResult('screen_optipbtn'));\r\n\tthis.optipbtn.x = 1015;\r\n\tthis.optipbtn.y = 2200;\r\n\tthis.optipbtn.alpha = 0;\r\n\r\n\tthis.optipcircle = new createjs.Bitmap(this.queue.getResult('screen_optipcircle'));\r\n\tthis.optipcircle.x = 1050;\r\n\tthis.optipcircle.y = 2235;\r\n\tthis.optipcircle.regX = 35;\r\n\tthis.optipcircle.regY = 35;\r\n\tthis.optipcircle.alpha = 0;\r\n\r\n\tnew Promise((resolve,reject)=>{\r\n\t\tcreatejs.Tween.get(this.optipbtn)\r\n\t\t.to({\r\n\t\t\talpha:1\r\n\t\t},500)\r\n\t\t.call(()=>{\r\n\t\t\tresolve();\r\n\t\t})\r\n\t\tcreatejs.Tween.get(this.optipcircle)\r\n\t\t.to({\r\n\t\t\talpha:1\r\n\t\t},500)\r\n\t\t.call(()=>{\r\n\t\t\tresolve();\r\n\t\t})\r\n\t})\r\n\t.then(()=>{\r\n\t\t//外圈闪烁动画\r\n\t\tcreatejs.Tween.get(this.optipcircle,{loop:true})\r\n\t\t.to({\r\n\t\t\talpha:0,\r\n\t\t\tscaleX:1.5,\r\n\t\t\tscaleY:1.5\r\n\t\t},1000)\r\n\t})\r\n\r\n\tthis.container.addChild(this.optipbtn,this.optipcircle);\r\n\r\n\r\n\t//按钮点击事件\r\n\tthis.optipbtn.addEventListener('click',()=>{\r\n\t\t//按钮消失\r\n\t\tcreatejs.Tween.get(this.optipcircle)\r\n\t\t.to({\r\n\t\t\talpha:0\r\n\t\t},200)\r\n\t\tcreatejs.Tween.get(this.optipbtn)\r\n\t\t.to({\r\n\t\t\talpha:0\r\n\t\t},200)\r\n\t\t.call(()=>{\r\n\t\t\tthis.container.removeChild(this.optipbtn,this.optipcircle)\r\n\t\t})\r\n\r\n\t\t//文字消失\r\n\t\tcreatejs.Tween.get(this.text01)\r\n\t\t.to({\r\n\t\t\talpha:0,\r\n\t\t\tx:220\r\n\t\t},1000) \r\n\t\tcreatejs.Tween.get(this.text02)\r\n\t\t.to({\r\n\t\t\talpha:0,\r\n\t\t\tx:390\r\n\t\t},1000)\r\n\t\t.call(()=>{\r\n\t\t\tthis.container.removeChild(this.text01,this.text02);\r\n\t\t});\r\n\r\n\t\t//小女孩跑出屏幕\r\n\t\tG.girlAni.gotoAndPlay('run');\r\n\t\tcreatejs.Tween.get(G.girlAni)\r\n\t\t.to({\r\n\t\t\tx:1400\r\n\t\t},5500)\r\n\t\t.call(()=>{\r\n\t\t\tG.screen = 5;\r\n\t\t\t//移除背景\r\n\t\t\tthis.container.removeChild(this.ground,this.ground_bg);\r\n\t\t})\r\n\t})\r\n}","import G from './gloable.js';\r\nexport default function Screen05(queue,stage){\r\n\tthis.queue = queue;\r\n\tthis.stage = stage;\r\n\tthis.container = new createjs.Container();\r\n\tthis.stage.addChild(this.container);\r\n\tthis._init();\r\n}\r\n\r\nScreen05.prototype._init = function(){\r\n\tG.screenLocked =5;\r\n\t//背景图\r\n\tthis.bg = new createjs.Bitmap(this.queue.getResult('06_bg'));\r\n\tthis.bg.y = 1810;\r\n\tthis.container.addChild(this.bg);\r\n\tnew Promise((resolve,reject)=>{\r\n\t\t//人物跑\r\n\t\tG.girlAni.gotoAndPlay('run');\r\n\t\tG.girlAni.x = 0;\r\n\t\tG.girlAni.y = 2250;\r\n\t\tcreatejs.Tween.get(G.girlAni)\r\n\t\t.to({\r\n\t\t\tx:600\r\n\t\t},5500)\r\n\t\t.call(()=>{\r\n\t\t\tG.girlAni.gotoAndPlay('stand');\r\n\t\t\tresolve();\r\n\t\t})\r\n\t})\r\n\t.then(()=>{\r\n\t\t//文字\r\n\t\tthis._showText();\r\n\t\t//光\r\n\t\tthis._girlLight();\r\n\t});\r\n\r\n\tthis.container.addChild(G.girlAni);\r\n}\r\n\r\nScreen05.prototype._showText= function(){\r\n\tthis.text01 = new createjs.Bitmap(this.queue.getResult('06_text01'));\r\n\tthis.text01.x = 304;\r\n\tthis.text01.y = 1980;\r\n\tthis.text01.alpha = 0;\r\n\tcreatejs.Tween.get(this.text01)\r\n\t.wait(2000)\r\n\t.to({\r\n\t\ty: 2000,\r\n\t\talpha: 1\r\n\t},1000);\r\n\r\n\tthis.text02 = new createjs.Bitmap(this.queue.getResult('06_text02'));\r\n\tthis.text02.x = 525;\r\n\tthis.text02.y = 2120;\r\n\tthis.text02.alpha = 0;\r\n\tcreatejs.Tween.get(this.text02)\r\n\t.to({\r\n\t\talpha: 1\r\n\t},1000);\r\n\r\n\tthis.container.addChild(this.text01, this.text02);\r\n}\r\n\r\nScreen05.prototype._girlLight= function(){\r\n\t//光精灵图\r\n\tlet girlLight = new createjs.SpriteSheet({\r\n\t\timages:[this.queue.getResult('06_girllights')],\r\n\t\tframes:{\r\n\t\t\twidth:180,\r\n\t\t\theight:150,\r\n\t\t\tcount:30\r\n\t\t},\r\n\t\tanimations:{\r\n\t\t\tshining: [0,29]\r\n\t\t}\r\n\t});\r\n\r\n\tthis.girlLightAni = new createjs.Sprite(girlLight,'shining');\r\n\tthis.girlLightAni.x = 500;\r\n\tthis.girlLightAni.y = 2200;\r\n\r\n\tthis.container.addChild(this.girlLightAni);\r\n\r\n}\r\n","import G from './gloable';\r\nimport '../scss/index.scss';\r\nimport Load from './load';\r\nimport Stage from './Stage';\r\nimport Screen01 from './Screen01';\r\nimport Screen02 from './Screen02';\r\nimport Screen03 from './Screen03';\r\nimport Screen04 from './Screen04';\r\nimport Screen05 from './Screen05';\r\nimport './resize.js';\r\n\r\n\r\nvar queueObj = new Load();\r\nvar stageObj = new Stage();\r\n\r\n//主要流程控制\r\ncreatejs.Ticker.addEventListener('tick',handleTick);\r\nfunction handleTick(){\r\n\tswitch(G.screen){\r\n\t\tcase 1:\r\n\t\t\tif(G.screenLocked == 1){\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\t//实例化场景1\r\n\t\t\tvar screen01 = new Screen01(queueObj.queue,stageObj.stage);\r\n\t\tbreak;\r\n\t\tcase 2:\r\n\t\t\tif(G.screenLocked == 2){\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t//实例化场景2\r\n\t\t\tvar screen02 = new Screen02(queueObj.queue,stageObj.stage);\r\n\t\tbreak;\r\n\t\tcase 3:\r\n\t\t\tif(G.screenLocked == 3){\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\t//实例化场景3\r\n\t\t\tvar screen03 = new Screen03(queueObj.queue,stageObj.stage);\r\n\t\tbreak;\r\n\t\tcase 4:\r\n\t\t\tif(G.screenLocked == 4){\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\t//实例化场景4\r\n\t\t\tvar screen04 = new Screen04(queueObj.queue,stageObj.stage);\r\n\t\tbreak;\r\n\t\tcase 5:\r\n\t\t\tif(G.screenLocked == 5){\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\t//实例化场景5\r\n\t\t\tvar screen05 = new Screen05(queueObj.queue,stageObj.stage);\r\n\t\tbreak;\r\n\t}\r\n\r\n\t//实时更新\r\n\tstageObj.stage.update();\r\n}\r\n","window.onload=function(){\r\n\tresize();\r\n\r\n\twindow.addEventListener(\"resize\",resize);\r\n};\r\nfunction resize(){\r\n\tvar c=document.getElementById(\"stage\");\r\n\tvar a=document.body.clientWidth;\r\n\tvar b=document.body.clientHeight;\r\n\tdirection=1>a/b?\"portrait\":\"landscape\";\r\n\ta=(a>b?b:a)/640;\r\n\tc.style.webkitTransform=\"portrait\"==direction?\"rotate(90deg) scale(\"+a+\",\"+a+\")\":\"rotate(0deg) scale(\"+a+\",\"+a+\")\";\r\n};","/*** IMPORTS FROM imports-loader ***/\n(function() {\n\n/*!\r\n* TweenJS\r\n* Visit http://createjs.com/ for documentation, updates and examples.\r\n*\r\n* Copyright (c) 2010 gskinner.com, inc.\r\n*\r\n* Permission is hereby granted, free of charge, to any person\r\n* obtaining a copy of this software and associated documentation\r\n* files (the \"Software\"), to deal in the Software without\r\n* restriction, including without limitation the rights to use,\r\n* copy, modify, merge, publish, distribute, sublicense, and/or sell\r\n* copies of the Software, and to permit persons to whom the\r\n* Software is furnished to do so, subject to the following\r\n* conditions:\r\n*\r\n* The above copyright notice and this permission notice shall be\r\n* included in all copies or substantial portions of the Software.\r\n*\r\n* THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\r\n* EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES\r\n* OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\r\n* NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\r\n* HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,\r\n* WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\r\n* FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR\r\n* OTHER DEALINGS IN THE SOFTWARE.\r\n*/\r\n\r\n\r\n//##############################################################################\r\n// extend.js\r\n//##############################################################################\r\n\r\nthis.createjs = this.createjs||{};\r\n\r\n/**\r\n * @class Utility Methods\r\n */\r\n\r\n/**\r\n * Sets up the prototype chain and constructor property for a new class.\r\n *\r\n * This should be called right after creating the class constructor.\r\n *\r\n * \tfunction MySubClass() {}\r\n * \tcreatejs.extend(MySubClass, MySuperClass);\r\n * \tMySubClass.prototype.doSomething = function() { }\r\n *\r\n * \tvar foo = new MySubClass();\r\n * \tconsole.log(foo instanceof MySuperClass); // true\r\n * \tconsole.log(foo.prototype.constructor === MySubClass); // true\r\n *\r\n * @method extend\r\n * @param {Function} subclass The subclass.\r\n * @param {Function} superclass The superclass to extend.\r\n * @return {Function} Returns the subclass's new prototype.\r\n */\r\ncreatejs.extend = function(subclass, superclass) {\r\n\t\"use strict\";\r\n\r\n\tfunction o() { this.constructor = subclass; }\r\n\to.prototype = superclass.prototype;\r\n\treturn (subclass.prototype = new o());\r\n};\r\n\r\n//##############################################################################\r\n// promote.js\r\n//##############################################################################\r\n\r\nthis.createjs = this.createjs||{};\r\n\r\n/**\r\n * @class Utility Methods\r\n */\r\n\r\n/**\r\n * Promotes any methods on the super class that were overridden, by creating an alias in the format `prefix_methodName`.\r\n * It is recommended to use the super class's name as the prefix.\r\n * An alias to the super class's constructor is always added in the format `prefix_constructor`.\r\n * This allows the subclass to call super class methods without using `function.call`, providing better performance.\r\n *\r\n * For example, if `MySubClass` extends `MySuperClass`, and both define a `draw` method, then calling `promote(MySubClass, \"MySuperClass\")`\r\n * would add a `MySuperClass_constructor` method to MySubClass and promote the `draw` method on `MySuperClass` to the\r\n * prototype of `MySubClass` as `MySuperClass_draw`.\r\n *\r\n * This should be called after the class's prototype is fully defined.\r\n *\r\n * \tfunction ClassA(name) {\r\n * \t\tthis.name = name;\r\n * \t}\r\n * \tClassA.prototype.greet = function() {\r\n * \t\treturn \"Hello \"+this.name;\r\n * \t}\r\n *\r\n * \tfunction ClassB(name, punctuation) {\r\n * \t\tthis.ClassA_constructor(name);\r\n * \t\tthis.punctuation = punctuation;\r\n * \t}\r\n * \tcreatejs.extend(ClassB, ClassA);\r\n * \tClassB.prototype.greet = function() {\r\n * \t\treturn this.ClassA_greet()+this.punctuation;\r\n * \t}\r\n * \tcreatejs.promote(ClassB, \"ClassA\");\r\n *\r\n * \tvar foo = new ClassB(\"World\", \"!?!\");\r\n * \tconsole.log(foo.greet()); // Hello World!?!\r\n *\r\n * @method promote\r\n * @param {Function} subclass The class to promote super class methods on.\r\n * @param {String} prefix The prefix to add to the promoted method names. Usually the name of the superclass.\r\n * @return {Function} Returns the subclass.\r\n */\r\ncreatejs.promote = function(subclass, prefix) {\r\n\t\"use strict\";\r\n\r\n\tvar subP = subclass.prototype, supP = (Object.getPrototypeOf&&Object.getPrototypeOf(subP))||subP.__proto__;\r\n\tif (supP) {\r\n\t\tsubP[(prefix+=\"_\") + \"constructor\"] = supP.constructor; // constructor is not always innumerable\r\n\t\tfor (var n in supP) {\r\n\t\t\tif (subP.hasOwnProperty(n) && (typeof supP[n] == \"function\")) { subP[prefix + n] = supP[n]; }\r\n\t\t}\r\n\t}\r\n\treturn subclass;\r\n};\r\n\r\n//##############################################################################\r\n// Event.js\r\n//##############################################################################\r\n\r\nthis.createjs = this.createjs||{};\r\n\r\n(function() {\r\n\t\"use strict\";\r\n\r\n// constructor:\r\n\t/**\r\n\t * Contains properties and methods shared by all events for use with\r\n\t * {{#crossLink \"EventDispatcher\"}}{{/crossLink}}.\r\n\t * \r\n\t * Note that Event objects are often reused, so you should never\r\n\t * rely on an event object's state outside of the call stack it was received in.\r\n\t * @class Event\r\n\t * @param {String} type The event type.\r\n\t * @param {Boolean} bubbles Indicates whether the event will bubble through the display list.\r\n\t * @param {Boolean} cancelable Indicates whether the default behaviour of this event can be cancelled.\r\n\t * @constructor\r\n\t **/\r\n\tfunction Event(type, bubbles, cancelable) {\r\n\t\t\r\n\t\r\n\t// public properties:\r\n\t\t/**\r\n\t\t * The type of event.\r\n\t\t * @property type\r\n\t\t * @type String\r\n\t\t **/\r\n\t\tthis.type = type;\r\n\t\r\n\t\t/**\r\n\t\t * The object that generated an event.\r\n\t\t * @property target\r\n\t\t * @type Object\r\n\t\t * @default null\r\n\t\t * @readonly\r\n\t\t*/\r\n\t\tthis.target = null;\r\n\t\r\n\t\t/**\r\n\t\t * The current target that a bubbling event is being dispatched from. For non-bubbling events, this will\r\n\t\t * always be the same as target. For example, if childObj.parent = parentObj, and a bubbling event\r\n\t\t * is generated from childObj, then a listener on parentObj would receive the event with\r\n\t\t * target=childObj (the original target) and currentTarget=parentObj (where the listener was added).\r\n\t\t * @property currentTarget\r\n\t\t * @type Object\r\n\t\t * @default null\r\n\t\t * @readonly\r\n\t\t*/\r\n\t\tthis.currentTarget = null;\r\n\t\r\n\t\t/**\r\n\t\t * For bubbling events, this indicates the current event phase:<OL>\r\n\t\t * \t<LI> capture phase: starting from the top parent to the target</LI>\r\n\t\t * \t<LI> at target phase: currently being dispatched from the target</LI>\r\n\t\t * \t<LI> bubbling phase: from the target to the top parent</LI>\r\n\t\t * </OL>\r\n\t\t * @property eventPhase\r\n\t\t * @type Number\r\n\t\t * @default 0\r\n\t\t * @readonly\r\n\t\t*/\r\n\t\tthis.eventPhase = 0;\r\n\t\r\n\t\t/**\r\n\t\t * Indicates whether the event will bubble through the display list.\r\n\t\t * @property bubbles\r\n\t\t * @type Boolean\r\n\t\t * @default false\r\n\t\t * @readonly\r\n\t\t*/\r\n\t\tthis.bubbles = !!bubbles;\r\n\t\r\n\t\t/**\r\n\t\t * Indicates whether the default behaviour of this event can be cancelled via\r\n\t\t * {{#crossLink \"Event/preventDefault\"}}{{/crossLink}}. This is set via the Event constructor.\r\n\t\t * @property cancelable\r\n\t\t * @type Boolean\r\n\t\t * @default false\r\n\t\t * @readonly\r\n\t\t*/\r\n\t\tthis.cancelable = !!cancelable;\r\n\t\r\n\t\t/**\r\n\t\t * The epoch time at which this event was created.\r\n\t\t * @property timeStamp\r\n\t\t * @type Number\r\n\t\t * @default 0\r\n\t\t * @readonly\r\n\t\t*/\r\n\t\tthis.timeStamp = (new Date()).getTime();\r\n\t\r\n\t\t/**\r\n\t\t * Indicates if {{#crossLink \"Event/preventDefault\"}}{{/crossLink}} has been called\r\n\t\t * on this event.\r\n\t\t * @property defaultPrevented\r\n\t\t * @type Boolean\r\n\t\t * @default false\r\n\t\t * @readonly\r\n\t\t*/\r\n\t\tthis.defaultPrevented = false;\r\n\t\r\n\t\t/**\r\n\t\t * Indicates if {{#crossLink \"Event/stopPropagation\"}}{{/crossLink}} or\r\n\t\t * {{#crossLink \"Event/stopImmediatePropagation\"}}{{/crossLink}} has been called on this event.\r\n\t\t * @property propagationStopped\r\n\t\t * @type Boolean\r\n\t\t * @default false\r\n\t\t * @readonly\r\n\t\t*/\r\n\t\tthis.propagationStopped = false;\r\n\t\r\n\t\t/**\r\n\t\t * Indicates if {{#crossLink \"Event/stopImmediatePropagation\"}}{{/crossLink}} has been called\r\n\t\t * on this event.\r\n\t\t * @property immediatePropagationStopped\r\n\t\t * @type Boolean\r\n\t\t * @default false\r\n\t\t * @readonly\r\n\t\t*/\r\n\t\tthis.immediatePropagationStopped = false;\r\n\t\t\r\n\t\t/**\r\n\t\t * Indicates if {{#crossLink \"Event/remove\"}}{{/crossLink}} has been called on this event.\r\n\t\t * @property removed\r\n\t\t * @type Boolean\r\n\t\t * @default false\r\n\t\t * @readonly\r\n\t\t*/\r\n\t\tthis.removed = false;\r\n\t}\r\n\tvar p = Event.prototype;\r\n\r\n\t/**\r\n\t * <strong>REMOVED</strong>. Removed in favor of using `MySuperClass_constructor`.\r\n\t * See {{#crossLink \"Utility Methods/extend\"}}{{/crossLink}} and {{#crossLink \"Utility Methods/promote\"}}{{/crossLink}}\r\n\t * for details.\r\n\t *\r\n\t * There is an inheritance tutorial distributed with EaselJS in /tutorials/Inheritance.\r\n\t *\r\n\t * @method initialize\r\n\t * @protected\r\n\t * @deprecated\r\n\t */\r\n\t// p.initialize = function() {}; // searchable for devs wondering where it is.\r\n\r\n// public methods:\r\n\t/**\r\n\t * Sets {{#crossLink \"Event/defaultPrevented\"}}{{/crossLink}} to true if the event is cancelable.\r\n\t * Mirrors the DOM level 2 event standard. In general, cancelable events that have `preventDefault()` called will\r\n\t * cancel the default behaviour associated with the event.\r\n\t * @method preventDefault\r\n\t **/\r\n\tp.preventDefault = function() {\r\n\t\tthis.defaultPrevented = this.cancelable&&true;\r\n\t};\r\n\r\n\t/**\r\n\t * Sets {{#crossLink \"Event/propagationStopped\"}}{{/crossLink}} to true.\r\n\t * Mirrors the DOM event standard.\r\n\t * @method stopPropagation\r\n\t **/\r\n\tp.stopPropagation = function() {\r\n\t\tthis.propagationStopped = true;\r\n\t};\r\n\r\n\t/**\r\n\t * Sets {{#crossLink \"Event/propagationStopped\"}}{{/crossLink}} and\r\n\t * {{#crossLink \"Event/immediatePropagationStopped\"}}{{/crossLink}} to true.\r\n\t * Mirrors the DOM event standard.\r\n\t * @method stopImmediatePropagation\r\n\t **/\r\n\tp.stopImmediatePropagation = function() {\r\n\t\tthis.immediatePropagationStopped = this.propagationStopped = true;\r\n\t};\r\n\t\r\n\t/**\r\n\t * Causes the active listener to be removed via removeEventListener();\r\n\t * \r\n\t * \t\tmyBtn.addEventListener(\"click\", function(evt) {\r\n\t * \t\t\t// do stuff...\r\n\t * \t\t\tevt.remove(); // removes this listener.\r\n\t * \t\t});\r\n\t * \r\n\t * @method remove\r\n\t **/\r\n\tp.remove = function() {\r\n\t\tthis.removed = true;\r\n\t};\r\n\t\r\n\t/**\r\n\t * Returns a clone of the Event instance.\r\n\t * @method clone\r\n\t * @return {Event} a clone of the Event instance.\r\n\t **/\r\n\tp.clone = function() {\r\n\t\treturn new Event(this.type, this.bubbles, this.cancelable);\r\n\t};\r\n\t\r\n\t/**\r\n\t * Provides a chainable shortcut method for setting a number of properties on the instance.\r\n\t *\r\n\t * @method set\r\n\t * @param {Object} props A generic object containing properties to copy to the instance.\r\n\t * @return {Event} Returns the instance the method is called on (useful for chaining calls.)\r\n\t * @chainable\r\n\t*/\r\n\tp.set = function(props) {\r\n\t\tfor (var n in props) { this[n] = props[n]; }\r\n\t\treturn this;\r\n\t};\r\n\r\n\t/**\r\n\t * Returns a string representation of this object.\r\n\t * @method toString\r\n\t * @return {String} a string representation of the instance.\r\n\t **/\r\n\tp.toString = function() {\r\n\t\treturn \"[Event (type=\"+this.type+\")]\";\r\n\t};\r\n\r\n\tcreatejs.Event = Event;\r\n}());\r\n\r\n//##############################################################################\r\n// EventDispatcher.js\r\n//##############################################################################\r\n\r\nthis.createjs = this.createjs||{};\r\n\r\n(function() {\r\n\t\"use strict\";\r\n\r\n\r\n// constructor:\r\n\t/**\r\n\t * EventDispatcher provides methods for managing queues of event listeners and dispatching events.\r\n\t *\r\n\t * You can either extend EventDispatcher or mix its methods into an existing prototype or instance by using the\r\n\t * EventDispatcher {{#crossLink \"EventDispatcher/initialize\"}}{{/crossLink}} method.\r\n\t * \r\n\t * Together with the CreateJS Event class, EventDispatcher provides an extended event model that is based on the\r\n\t * DOM Level 2 event model, including addEventListener, removeEventListener, and dispatchEvent. It supports\r\n\t * bubbling / capture, preventDefault, stopPropagation, stopImmediatePropagation, and handleEvent.\r\n\t * \r\n\t * EventDispatcher also exposes a {{#crossLink \"EventDispatcher/on\"}}{{/crossLink}} method, which makes it easier\r\n\t * to create scoped listeners, listeners that only run once, and listeners with associated arbitrary data. The \r\n\t * {{#crossLink \"EventDispatcher/off\"}}{{/crossLink}} method is merely an alias to\r\n\t * {{#crossLink \"EventDispatcher/removeEventListener\"}}{{/crossLink}}.\r\n\t * \r\n\t * Another addition to the DOM Level 2 model is the {{#crossLink \"EventDispatcher/removeAllEventListeners\"}}{{/crossLink}}\r\n\t * method, which can be used to listeners for all events, or listeners for a specific event. The Event object also \r\n\t * includes a {{#crossLink \"Event/remove\"}}{{/crossLink}} method which removes the active listener.\r\n\t *\r\n\t * <h4>Example</h4>\r\n\t * Add EventDispatcher capabilities to the \"MyClass\" class.\r\n\t *\r\n\t *      EventDispatcher.initialize(MyClass.prototype);\r\n\t *\r\n\t * Add an event (see {{#crossLink \"EventDispatcher/addEventListener\"}}{{/crossLink}}).\r\n\t *\r\n\t *      instance.addEventListener(\"eventName\", handlerMethod);\r\n\t *      function handlerMethod(event) {\r\n\t *          console.log(event.target + \" Was Clicked\");\r\n\t *      }\r\n\t *\r\n\t * <b>Maintaining proper scope</b><br />\r\n\t * Scope (ie. \"this\") can be be a challenge with events. Using the {{#crossLink \"EventDispatcher/on\"}}{{/crossLink}}\r\n\t * method to subscribe to events simplifies this.\r\n\t *\r\n\t *      instance.addEventListener(\"click\", function(event) {\r\n\t *          console.log(instance == this); // false, scope is ambiguous.\r\n\t *      });\r\n\t *      \r\n\t *      instance.on(\"click\", function(event) {\r\n\t *          console.log(instance == this); // true, \"on\" uses dispatcher scope by default.\r\n\t *      });\r\n\t * \r\n\t * If you want to use addEventListener instead, you may want to use function.bind() or a similar proxy to manage\r\n\t * scope.\r\n\t *\r\n\t * <b>Browser support</b>\r\n\t * The event model in CreateJS can be used separately from the suite in any project, however the inheritance model\r\n\t * requires modern browsers (IE9+).\r\n\t *      \r\n\t *\r\n\t * @class EventDispatcher\r\n\t * @constructor\r\n\t **/\r\n\tfunction EventDispatcher() {\r\n\t\r\n\t\r\n\t// private properties:\r\n\t\t/**\r\n\t\t * @protected\r\n\t\t * @property _listeners\r\n\t\t * @type Object\r\n\t\t **/\r\n\t\tthis._listeners = null;\r\n\t\t\r\n\t\t/**\r\n\t\t * @protected\r\n\t\t * @property _captureListeners\r\n\t\t * @type Object\r\n\t\t **/\r\n\t\tthis._captureListeners = null;\r\n\t}\r\n\tvar p = EventDispatcher.prototype;\r\n\r\n\t/**\r\n\t * <strong>REMOVED</strong>. Removed in favor of using `MySuperClass_constructor`.\r\n\t * See {{#crossLink \"Utility Methods/extend\"}}{{/crossLink}} and {{#crossLink \"Utility Methods/promote\"}}{{/crossLink}}\r\n\t * for details.\r\n\t *\r\n\t * There is an inheritance tutorial distributed with EaselJS in /tutorials/Inheritance.\r\n\t *\r\n\t * @method initialize\r\n\t * @protected\r\n\t * @deprecated\r\n\t */\r\n\t// p.initialize = function() {}; // searchable for devs wondering where it is.\r\n\r\n\r\n// static public methods:\r\n\t/**\r\n\t * Static initializer to mix EventDispatcher methods into a target object or prototype.\r\n\t * \r\n\t * \t\tEventDispatcher.initialize(MyClass.prototype); // add to the prototype of the class\r\n\t * \t\tEventDispatcher.initialize(myObject); // add to a specific instance\r\n\t * \r\n\t * @method initialize\r\n\t * @static\r\n\t * @param {Object} target The target object to inject EventDispatcher methods into. This can be an instance or a\r\n\t * prototype.\r\n\t **/\r\n\tEventDispatcher.initialize = function(target) {\r\n\t\ttarget.addEventListener = p.addEventListener;\r\n\t\ttarget.on = p.on;\r\n\t\ttarget.removeEventListener = target.off =  p.removeEventListener;\r\n\t\ttarget.removeAllEventListeners = p.removeAllEventListeners;\r\n\t\ttarget.hasEventListener = p.hasEventListener;\r\n\t\ttarget.dispatchEvent = p.dispatchEvent;\r\n\t\ttarget._dispatchEvent = p._dispatchEvent;\r\n\t\ttarget.willTrigger = p.willTrigger;\r\n\t};\r\n\t\r\n\r\n// public methods:\r\n\t/**\r\n\t * Adds the specified event listener. Note that adding multiple listeners to the same function will result in\r\n\t * multiple callbacks getting fired.\r\n\t *\r\n\t * <h4>Example</h4>\r\n\t *\r\n\t *      displayObject.addEventListener(\"click\", handleClick);\r\n\t *      function handleClick(event) {\r\n\t *         // Click happened.\r\n\t *      }\r\n\t *\r\n\t * @method addEventListener\r\n\t * @param {String} type The string type of the event.\r\n\t * @param {Function | Object} listener An object with a handleEvent method, or a function that will be called when\r\n\t * the event is dispatched.\r\n\t * @param {Boolean} [useCapture] For events that bubble, indicates whether to listen for the event in the capture or bubbling/target phase.\r\n\t * @return {Function | Object} Returns the listener for chaining or assignment.\r\n\t **/\r\n\tp.addEventListener = function(type, listener, useCapture) {\r\n\t\tvar listeners;\r\n\t\tif (useCapture) {\r\n\t\t\tlisteners = this._captureListeners = this._captureListeners||{};\r\n\t\t} else {\r\n\t\t\tlisteners = this._listeners = this._listeners||{};\r\n\t\t}\r\n\t\tvar arr = listeners[type];\r\n\t\tif (arr) { this.removeEventListener(type, listener, useCapture); }\r\n\t\tarr = listeners[type]; // remove may have deleted the array\r\n\t\tif (!arr) { listeners[type] = [listener];  }\r\n\t\telse { arr.push(listener); }\r\n\t\treturn listener;\r\n\t};\r\n\t\r\n\t/**\r\n\t * A shortcut method for using addEventListener that makes it easier to specify an execution scope, have a listener\r\n\t * only run once, associate arbitrary data with the listener, and remove the listener.\r\n\t * \r\n\t * This method works by creating an anonymous wrapper function and subscribing it with addEventListener.\r\n\t * The wrapper function is returned for use with `removeEventListener` (or `off`).\r\n\t * \r\n\t * <b>IMPORTANT:</b> To remove a listener added with `on`, you must pass in the returned wrapper function as the listener, or use\r\n\t * {{#crossLink \"Event/remove\"}}{{/crossLink}}. Likewise, each time you call `on` a NEW wrapper function is subscribed, so multiple calls\r\n\t * to `on` with the same params will create multiple listeners.\r\n\t * \r\n\t * <h4>Example</h4>\r\n\t * \r\n\t * \t\tvar listener = myBtn.on(\"click\", handleClick, null, false, {count:3});\r\n\t * \t\tfunction handleClick(evt, data) {\r\n\t * \t\t\tdata.count -= 1;\r\n\t * \t\t\tconsole.log(this == myBtn); // true - scope defaults to the dispatcher\r\n\t * \t\t\tif (data.count == 0) {\r\n\t * \t\t\t\talert(\"clicked 3 times!\");\r\n\t * \t\t\t\tmyBtn.off(\"click\", listener);\r\n\t * \t\t\t\t// alternately: evt.remove();\r\n\t * \t\t\t}\r\n\t * \t\t}\r\n\t * \r\n\t * @method on\r\n\t * @param {String} type The string type of the event.\r\n\t * @param {Function | Object} listener An object with a handleEvent method, or a function that will be called when\r\n\t * the event is dispatched.\r\n\t * @param {Object} [scope] The scope to execute the listener in. Defaults to the dispatcher/currentTarget for function listeners, and to the listener itself for object listeners (ie. using handleEvent).\r\n\t * @param {Boolean} [once=false] If true, the listener will remove itself after the first time it is triggered.\r\n\t * @param {*} [data] Arbitrary data that will be included as the second parameter when the listener is called.\r\n\t * @param {Boolean} [useCapture=false] For events that bubble, indicates whether to listen for the event in the capture or bubbling/target phase.\r\n\t * @return {Function} Returns the anonymous function that was created and assigned as the listener. This is needed to remove the listener later using .removeEventListener.\r\n\t **/\r\n\tp.on = function(type, listener, scope, once, data, useCapture) {\r\n\t\tif (listener.handleEvent) {\r\n\t\t\tscope = scope||listener;\r\n\t\t\tlistener = listener.handleEvent;\r\n\t\t}\r\n\t\tscope = scope||this;\r\n\t\treturn this.addEventListener(type, function(evt) {\r\n\t\t\t\tlistener.call(scope, evt, data);\r\n\t\t\t\tonce&&evt.remove();\r\n\t\t\t}, useCapture);\r\n\t};\r\n\r\n\t/**\r\n\t * Removes the specified event listener.\r\n\t *\r\n\t * <b>Important Note:</b> that you must pass the exact function reference used when the event was added. If a proxy\r\n\t * function, or function closure is used as the callback, the proxy/closure reference must be used - a new proxy or\r\n\t * closure will not work.\r\n\t *\r\n\t * <h4>Example</h4>\r\n\t *\r\n\t *      displayObject.removeEventListener(\"click\", handleClick);\r\n\t *\r\n\t * @method removeEventListener\r\n\t * @param {String} type The string type of the event.\r\n\t * @param {Function | Object} listener The listener function or object.\r\n\t * @param {Boolean} [useCapture] For events that bubble, indicates whether to listen for the event in the capture or bubbling/target phase.\r\n\t **/\r\n\tp.removeEventListener = function(type, listener, useCapture) {\r\n\t\tvar listeners = useCapture ? this._captureListeners : this._listeners;\r\n\t\tif (!listeners) { return; }\r\n\t\tvar arr = listeners[type];\r\n\t\tif (!arr) { return; }\r\n\t\tfor (var i=0,l=arr.length; i<l; i++) {\r\n\t\t\tif (arr[i] == listener) {\r\n\t\t\t\tif (l==1) { delete(listeners[type]); } // allows for faster checks.\r\n\t\t\t\telse { arr.splice(i,1); }\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\t\r\n\t/**\r\n\t * A shortcut to the removeEventListener method, with the same parameters and return value. This is a companion to the\r\n\t * .on method.\r\n\t * \r\n\t * <b>IMPORTANT:</b> To remove a listener added with `on`, you must pass in the returned wrapper function as the listener. See \r\n\t * {{#crossLink \"EventDispatcher/on\"}}{{/crossLink}} for an example.\r\n\t *\r\n\t * @method off\r\n\t * @param {String} type The string type of the event.\r\n\t * @param {Function | Object} listener The listener function or object.\r\n\t * @param {Boolean} [useCapture] For events that bubble, indicates whether to listen for the event in the capture or bubbling/target phase.\r\n\t **/\r\n\tp.off = p.removeEventListener;\r\n\r\n\t/**\r\n\t * Removes all listeners for the specified type, or all listeners of all types.\r\n\t *\r\n\t * <h4>Example</h4>\r\n\t *\r\n\t *      // Remove all listeners\r\n\t *      displayObject.removeAllEventListeners();\r\n\t *\r\n\t *      // Remove all click listeners\r\n\t *      displayObject.removeAllEventListeners(\"click\");\r\n\t *\r\n\t * @method removeAllEventListeners\r\n\t * @param {String} [type] The string type of the event. If omitted, all listeners for all types will be removed.\r\n\t **/\r\n\tp.removeAllEventListeners = function(type) {\r\n\t\tif (!type) { this._listeners = this._captureListeners = null; }\r\n\t\telse {\r\n\t\t\tif (this._listeners) { delete(this._listeners[type]); }\r\n\t\t\tif (this._captureListeners) { delete(this._captureListeners[type]); }\r\n\t\t}\r\n\t};\r\n\r\n\t/**\r\n\t * Dispatches the specified event to all listeners.\r\n\t *\r\n\t * <h4>Example</h4>\r\n\t *\r\n\t *      // Use a string event\r\n\t *      this.dispatchEvent(\"complete\");\r\n\t *\r\n\t *      // Use an Event instance\r\n\t *      var event = new createjs.Event(\"progress\");\r\n\t *      this.dispatchEvent(event);\r\n\t *\r\n\t * @method dispatchEvent\r\n\t * @param {Object | String | Event} eventObj An object with a \"type\" property, or a string type.\r\n\t * While a generic object will work, it is recommended to use a CreateJS Event instance. If a string is used,\r\n\t * dispatchEvent will construct an Event instance if necessary with the specified type. This latter approach can\r\n\t * be used to avoid event object instantiation for non-bubbling events that may not have any listeners.\r\n\t * @param {Boolean} [bubbles] Specifies the `bubbles` value when a string was passed to eventObj.\r\n\t * @param {Boolean} [cancelable] Specifies the `cancelable` value when a string was passed to eventObj.\r\n\t * @return {Boolean} Returns false if `preventDefault()` was called on a cancelable event, true otherwise.\r\n\t **/\r\n\tp.dispatchEvent = function(eventObj, bubbles, cancelable) {\r\n\t\tif (typeof eventObj == \"string\") {\r\n\t\t\t// skip everything if there's no listeners and it doesn't bubble:\r\n\t\t\tvar listeners = this._listeners;\r\n\t\t\tif (!bubbles && (!listeners || !listeners[eventObj])) { return true; }\r\n\t\t\teventObj = new createjs.Event(eventObj, bubbles, cancelable);\r\n\t\t} else if (eventObj.target && eventObj.clone) {\r\n\t\t\t// redispatching an active event object, so clone it:\r\n\t\t\teventObj = eventObj.clone();\r\n\t\t}\r\n\t\t\r\n\t\t// TODO: it would be nice to eliminate this. Maybe in favour of evtObj instanceof Event? Or !!evtObj.createEvent\r\n\t\ttry { eventObj.target = this; } catch (e) {} // try/catch allows redispatching of native events\r\n\r\n\t\tif (!eventObj.bubbles || !this.parent) {\r\n\t\t\tthis._dispatchEvent(eventObj, 2);\r\n\t\t} else {\r\n\t\t\tvar top=this, list=[top];\r\n\t\t\twhile (top.parent) { list.push(top = top.parent); }\r\n\t\t\tvar i, l=list.length;\r\n\r\n\t\t\t// capture & atTarget\r\n\t\t\tfor (i=l-1; i>=0 && !eventObj.propagationStopped; i--) {\r\n\t\t\t\tlist[i]._dispatchEvent(eventObj, 1+(i==0));\r\n\t\t\t}\r\n\t\t\t// bubbling\r\n\t\t\tfor (i=1; i<l && !eventObj.propagationStopped; i++) {\r\n\t\t\t\tlist[i]._dispatchEvent(eventObj, 3);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn !eventObj.defaultPrevented;\r\n\t};\r\n\r\n\t/**\r\n\t * Indicates whether there is at least one listener for the specified event type.\r\n\t * @method hasEventListener\r\n\t * @param {String} type The string type of the event.\r\n\t * @return {Boolean} Returns true if there is at least one listener for the specified event.\r\n\t **/\r\n\tp.hasEventListener = function(type) {\r\n\t\tvar listeners = this._listeners, captureListeners = this._captureListeners;\r\n\t\treturn !!((listeners && listeners[type]) || (captureListeners && captureListeners[type]));\r\n\t};\r\n\t\r\n\t/**\r\n\t * Indicates whether there is at least one listener for the specified event type on this object or any of its\r\n\t * ancestors (parent, parent's parent, etc). A return value of true indicates that if a bubbling event of the\r\n\t * specified type is dispatched from this object, it will trigger at least one listener.\r\n\t * \r\n\t * This is similar to {{#crossLink \"EventDispatcher/hasEventListener\"}}{{/crossLink}}, but it searches the entire\r\n\t * event flow for a listener, not just this object.\r\n\t * @method willTrigger\r\n\t * @param {String} type The string type of the event.\r\n\t * @return {Boolean} Returns `true` if there is at least one listener for the specified event.\r\n\t **/\r\n\tp.willTrigger = function(type) {\r\n\t\tvar o = this;\r\n\t\twhile (o) {\r\n\t\t\tif (o.hasEventListener(type)) { return true; }\r\n\t\t\to = o.parent;\r\n\t\t}\r\n\t\treturn false;\r\n\t};\r\n\r\n\t/**\r\n\t * @method toString\r\n\t * @return {String} a string representation of the instance.\r\n\t **/\r\n\tp.toString = function() {\r\n\t\treturn \"[EventDispatcher]\";\r\n\t};\r\n\r\n\r\n// private methods:\r\n\t/**\r\n\t * @method _dispatchEvent\r\n\t * @param {Object | String | Event} eventObj\r\n\t * @param {Object} eventPhase\r\n\t * @protected\r\n\t **/\r\n\tp._dispatchEvent = function(eventObj, eventPhase) {\r\n\t\tvar l, listeners = (eventPhase==1) ? this._captureListeners : this._listeners;\r\n\t\tif (eventObj && listeners) {\r\n\t\t\tvar arr = listeners[eventObj.type];\r\n\t\t\tif (!arr||!(l=arr.length)) { return; }\r\n\t\t\ttry { eventObj.currentTarget = this; } catch (e) {}\r\n\t\t\ttry { eventObj.eventPhase = eventPhase; } catch (e) {}\r\n\t\t\teventObj.removed = false;\r\n\t\t\t\r\n\t\t\tarr = arr.slice(); // to avoid issues with items being removed or added during the dispatch\r\n\t\t\tfor (var i=0; i<l && !eventObj.immediatePropagationStopped; i++) {\r\n\t\t\t\tvar o = arr[i];\r\n\t\t\t\tif (o.handleEvent) { o.handleEvent(eventObj); }\r\n\t\t\t\telse { o(eventObj); }\r\n\t\t\t\tif (eventObj.removed) {\r\n\t\t\t\t\tthis.off(eventObj.type, o, eventPhase==1);\r\n\t\t\t\t\teventObj.removed = false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\r\n\tcreatejs.EventDispatcher = EventDispatcher;\r\n}());\r\n\r\n//##############################################################################\r\n// Ticker.js\r\n//##############################################################################\r\n\r\nthis.createjs = this.createjs||{};\r\n\r\n(function() {\r\n\t\"use strict\";\r\n\r\n\r\n// constructor:\r\n\t/**\r\n\t * The Ticker provides a centralized tick or heartbeat broadcast at a set interval. Listeners can subscribe to the tick\r\n\t * event to be notified when a set time interval has elapsed.\r\n\t *\r\n\t * Note that the interval that the tick event is called is a target interval, and may be broadcast at a slower interval\r\n\t * when under high CPU load. The Ticker class uses a static interface (ex. `Ticker.framerate = 30;`) and\r\n\t * can not be instantiated.\r\n\t *\r\n\t * <h4>Example</h4>\r\n\t *\r\n\t *      createjs.Ticker.addEventListener(\"tick\", handleTick);\r\n\t *      function handleTick(event) {\r\n\t *          // Actions carried out each tick (aka frame)\r\n\t *          if (!event.paused) {\r\n\t *              // Actions carried out when the Ticker is not paused.\r\n\t *          }\r\n\t *      }\r\n\t *\r\n\t * @class Ticker\r\n\t * @uses EventDispatcher\r\n\t * @static\r\n\t **/\r\n\tfunction Ticker() {\r\n\t\tthrow \"Ticker cannot be instantiated.\";\r\n\t}\r\n\r\n\r\n// constants:\r\n\t/**\r\n\t * In this mode, Ticker uses the requestAnimationFrame API, but attempts to synch the ticks to target framerate. It\r\n\t * uses a simple heuristic that compares the time of the RAF return to the target time for the current frame and\r\n\t * dispatches the tick when the time is within a certain threshold.\r\n\t *\r\n\t * This mode has a higher variance for time between frames than {{#crossLink \"Ticker/TIMEOUT:property\"}}{{/crossLink}},\r\n\t * but does not require that content be time based as with {{#crossLink \"Ticker/RAF:property\"}}{{/crossLink}} while\r\n\t * gaining the benefits of that API (screen synch, background throttling).\r\n\t *\r\n\t * Variance is usually lowest for framerates that are a divisor of the RAF frequency. This is usually 60, so\r\n\t * framerates of 10, 12, 15, 20, and 30 work well.\r\n\t *\r\n\t * Falls back to {{#crossLink \"Ticker/TIMEOUT:property\"}}{{/crossLink}} if the requestAnimationFrame API is not\r\n\t * supported.\r\n\t * @property RAF_SYNCHED\r\n\t * @static\r\n\t * @type {String}\r\n\t * @default \"synched\"\r\n\t * @readonly\r\n\t **/\r\n\tTicker.RAF_SYNCHED = \"synched\";\r\n\r\n\t/**\r\n\t * In this mode, Ticker passes through the requestAnimationFrame heartbeat, ignoring the target framerate completely.\r\n\t * Because requestAnimationFrame frequency is not deterministic, any content using this mode should be time based.\r\n\t * You can leverage {{#crossLink \"Ticker/getTime\"}}{{/crossLink}} and the {{#crossLink \"Ticker/tick:event\"}}{{/crossLink}}\r\n\t * event object's \"delta\" properties to make this easier.\r\n\t *\r\n\t * Falls back on {{#crossLink \"Ticker/TIMEOUT:property\"}}{{/crossLink}} if the requestAnimationFrame API is not\r\n\t * supported.\r\n\t * @property RAF\r\n\t * @static\r\n\t * @type {String}\r\n\t * @default \"raf\"\r\n\t * @readonly\r\n\t **/\r\n\tTicker.RAF = \"raf\";\r\n\r\n\t/**\r\n\t * In this mode, Ticker uses the setTimeout API. This provides predictable, adaptive frame timing, but does not\r\n\t * provide the benefits of requestAnimationFrame (screen synch, background throttling).\r\n\t * @property TIMEOUT\r\n\t * @static\r\n\t * @type {String}\r\n\t * @default \"timeout\"\r\n\t * @readonly\r\n\t **/\r\n\tTicker.TIMEOUT = \"timeout\";\r\n\r\n\r\n// static events:\r\n\t/**\r\n\t * Dispatched each tick. The event will be dispatched to each listener even when the Ticker has been paused using\r\n\t * {{#crossLink \"Ticker/setPaused\"}}{{/crossLink}}.\r\n\t *\r\n\t * <h4>Example</h4>\r\n\t *\r\n\t *      createjs.Ticker.addEventListener(\"tick\", handleTick);\r\n\t *      function handleTick(event) {\r\n\t *          console.log(\"Paused:\", event.paused, event.delta);\r\n\t *      }\r\n\t *\r\n\t * @event tick\r\n\t * @param {Object} target The object that dispatched the event.\r\n\t * @param {String} type The event type.\r\n\t * @param {Boolean} paused Indicates whether the ticker is currently paused.\r\n\t * @param {Number} delta The time elapsed in ms since the last tick.\r\n\t * @param {Number} time The total time in ms since Ticker was initialized.\r\n\t * @param {Number} runTime The total time in ms that Ticker was not paused since it was initialized. For example,\r\n\t * \tyou could determine the amount of time that the Ticker has been paused since initialization with `time-runTime`.\r\n\t * @since 0.6.0\r\n\t */\r\n\r\n\r\n// public static properties:\r\n\t/**\r\n\t * Deprecated in favour of {{#crossLink \"Ticker/timingMode\"}}{{/crossLink}}, and will be removed in a future version. If true, timingMode will\r\n\t * use {{#crossLink \"Ticker/RAF_SYNCHED\"}}{{/crossLink}} by default.\r\n\t * @deprecated Deprecated in favour of {{#crossLink \"Ticker/timingMode\"}}{{/crossLink}}.\r\n\t * @property useRAF\r\n\t * @static\r\n\t * @type {Boolean}\r\n\t * @default false\r\n\t **/\r\n\tTicker.useRAF = false;\r\n\r\n\t/**\r\n\t * Specifies the timing api (setTimeout or requestAnimationFrame) and mode to use. See\r\n\t * {{#crossLink \"Ticker/TIMEOUT\"}}{{/crossLink}}, {{#crossLink \"Ticker/RAF\"}}{{/crossLink}}, and\r\n\t * {{#crossLink \"Ticker/RAF_SYNCHED\"}}{{/crossLink}} for mode details.\r\n\t * @property timingMode\r\n\t * @static\r\n\t * @type {String}\r\n\t * @default Ticker.TIMEOUT\r\n\t **/\r\n\tTicker.timingMode = null;\r\n\r\n\t/**\r\n\t * Specifies a maximum value for the delta property in the tick event object. This is useful when building time\r\n\t * based animations and systems to prevent issues caused by large time gaps caused by background tabs, system sleep,\r\n\t * alert dialogs, or other blocking routines. Double the expected frame duration is often an effective value\r\n\t * (ex. maxDelta=50 when running at 40fps).\r\n\t * \r\n\t * This does not impact any other values (ex. time, runTime, etc), so you may experience issues if you enable maxDelta\r\n\t * when using both delta and other values.\r\n\t * \r\n\t * If 0, there is no maximum.\r\n\t * @property maxDelta\r\n\t * @static\r\n\t * @type {number}\r\n\t * @default 0\r\n\t */\r\n\tTicker.maxDelta = 0;\r\n\t\r\n\t/**\r\n\t * When the ticker is paused, all listeners will still receive a tick event, but the <code>paused</code> property\r\n\t * of the event will be `true`. Also, while paused the `runTime` will not increase. See {{#crossLink \"Ticker/tick:event\"}}{{/crossLink}},\r\n\t * {{#crossLink \"Ticker/getTime\"}}{{/crossLink}}, and {{#crossLink \"Ticker/getEventTime\"}}{{/crossLink}} for more\r\n\t * info.\r\n\t *\r\n\t * <h4>Example</h4>\r\n\t *\r\n\t *      createjs.Ticker.addEventListener(\"tick\", handleTick);\r\n\t *      createjs.Ticker.paused = true;\r\n\t *      function handleTick(event) {\r\n\t *          console.log(event.paused,\r\n\t *          \tcreatejs.Ticker.getTime(false),\r\n\t *          \tcreatejs.Ticker.getTime(true));\r\n\t *      }\r\n\t *\r\n\t * @property paused\r\n\t * @static\r\n\t * @type {Boolean}\r\n\t * @default false\r\n\t **/\r\n\tTicker.paused = false;\r\n\r\n\r\n// mix-ins:\r\n\t// EventDispatcher methods:\r\n\tTicker.removeEventListener = null;\r\n\tTicker.removeAllEventListeners = null;\r\n\tTicker.dispatchEvent = null;\r\n\tTicker.hasEventListener = null;\r\n\tTicker._listeners = null;\r\n\tcreatejs.EventDispatcher.initialize(Ticker); // inject EventDispatcher methods.\r\n\tTicker._addEventListener = Ticker.addEventListener;\r\n\tTicker.addEventListener = function() {\r\n\t\t!Ticker._inited&&Ticker.init();\r\n\t\treturn Ticker._addEventListener.apply(Ticker, arguments);\r\n\t};\r\n\r\n\r\n// private static properties:\r\n\t/**\r\n\t * @property _inited\r\n\t * @static\r\n\t * @type {Boolean}\r\n\t * @protected\r\n\t **/\r\n\tTicker._inited = false;\r\n\r\n\t/**\r\n\t * @property _startTime\r\n\t * @static\r\n\t * @type {Number}\r\n\t * @protected\r\n\t **/\r\n\tTicker._startTime = 0;\r\n\r\n\t/**\r\n\t * @property _pausedTime\r\n\t * @static\r\n\t * @type {Number}\r\n\t * @protected\r\n\t **/\r\n\tTicker._pausedTime=0;\r\n\r\n\t/**\r\n\t * The number of ticks that have passed\r\n\t * @property _ticks\r\n\t * @static\r\n\t * @type {Number}\r\n\t * @protected\r\n\t **/\r\n\tTicker._ticks = 0;\r\n\r\n\t/**\r\n\t * The number of ticks that have passed while Ticker has been paused\r\n\t * @property _pausedTicks\r\n\t * @static\r\n\t * @type {Number}\r\n\t * @protected\r\n\t **/\r\n\tTicker._pausedTicks = 0;\r\n\r\n\t/**\r\n\t * @property _interval\r\n\t * @static\r\n\t * @type {Number}\r\n\t * @protected\r\n\t **/\r\n\tTicker._interval = 50;\r\n\r\n\t/**\r\n\t * @property _lastTime\r\n\t * @static\r\n\t * @type {Number}\r\n\t * @protected\r\n\t **/\r\n\tTicker._lastTime = 0;\r\n\r\n\t/**\r\n\t * @property _times\r\n\t * @static\r\n\t * @type {Array}\r\n\t * @protected\r\n\t **/\r\n\tTicker._times = null;\r\n\r\n\t/**\r\n\t * @property _tickTimes\r\n\t * @static\r\n\t * @type {Array}\r\n\t * @protected\r\n\t **/\r\n\tTicker._tickTimes = null;\r\n\r\n\t/**\r\n\t * Stores the timeout or requestAnimationFrame id.\r\n\t * @property _timerId\r\n\t * @static\r\n\t * @type {Number}\r\n\t * @protected\r\n\t **/\r\n\tTicker._timerId = null;\r\n\t\r\n\t/**\r\n\t * True if currently using requestAnimationFrame, false if using setTimeout. This may be different than timingMode\r\n\t * if that property changed and a tick hasn't fired.\r\n\t * @property _raf\r\n\t * @static\r\n\t * @type {Boolean}\r\n\t * @protected\r\n\t **/\r\n\tTicker._raf = true;\r\n\t\r\n\r\n// static getter / setters:\r\n\t/**\r\n\t * Use the {{#crossLink \"Ticker/interval:property\"}}{{/crossLink}} property instead.\r\n\t * @method setInterval\r\n\t * @static\r\n\t * @param {Number} interval\r\n\t * @deprecated\r\n\t **/\r\n\tTicker.setInterval = function(interval) {\r\n\t\tTicker._interval = interval;\r\n\t\tif (!Ticker._inited) { return; }\r\n\t\tTicker._setupTick();\r\n\t};\r\n\r\n\t/**\r\n\t * Use the {{#crossLink \"Ticker/interval:property\"}}{{/crossLink}} property instead.\r\n\t * @method getInterval\r\n\t * @static\r\n\t * @return {Number}\r\n\t * @deprecated\r\n\t **/\r\n\tTicker.getInterval = function() {\r\n\t\treturn Ticker._interval;\r\n\t};\r\n\r\n\t/**\r\n\t * Use the {{#crossLink \"Ticker/framerate:property\"}}{{/crossLink}} property instead.\r\n\t * @method setFPS\r\n\t * @static\r\n\t * @param {Number} value\r\n\t * @deprecated\r\n\t **/\r\n\tTicker.setFPS = function(value) {\r\n\t\tTicker.setInterval(1000/value);\r\n\t};\r\n\r\n\t/**\r\n\t * Use the {{#crossLink \"Ticker/framerate:property\"}}{{/crossLink}} property instead.\r\n\t * @method getFPS\r\n\t * @static\r\n\t * @return {Number}\r\n\t * @deprecated\r\n\t **/\r\n\tTicker.getFPS = function() {\r\n\t\treturn 1000/Ticker._interval;\r\n\t};\r\n\r\n\t/**\r\n\t * Indicates the target time (in milliseconds) between ticks. Default is 50 (20 FPS).\r\n\t * Note that actual time between ticks may be more than specified depending on CPU load.\r\n\t * This property is ignored if the ticker is using the `RAF` timing mode.\r\n\t * @property interval\r\n\t * @static\r\n\t * @type {Number}\r\n\t **/\r\n\t \r\n\t/**\r\n\t * Indicates the target frame rate in frames per second (FPS). Effectively just a shortcut to `interval`, where\r\n\t * `framerate == 1000/interval`.\r\n\t * @property framerate\r\n\t * @static\r\n\t * @type {Number}\r\n\t **/\r\n\ttry {\r\n\t\tObject.defineProperties(Ticker, {\r\n\t\t\tinterval: { get: Ticker.getInterval, set: Ticker.setInterval },\r\n\t\t\tframerate: { get: Ticker.getFPS, set: Ticker.setFPS }\r\n\t\t});\r\n\t} catch (e) { console.log(e); }\r\n\r\n\r\n// public static methods:\r\n\t/**\r\n\t * Starts the tick. This is called automatically when the first listener is added.\r\n\t * @method init\r\n\t * @static\r\n\t **/\r\n\tTicker.init = function() {\r\n\t\tif (Ticker._inited) { return; }\r\n\t\tTicker._inited = true;\r\n\t\tTicker._times = [];\r\n\t\tTicker._tickTimes = [];\r\n\t\tTicker._startTime = Ticker._getTime();\r\n\t\tTicker._times.push(Ticker._lastTime = 0);\r\n\t\tTicker.interval = Ticker._interval;\r\n\t};\r\n\t\r\n\t/**\r\n\t * Stops the Ticker and removes all listeners. Use init() to restart the Ticker.\r\n\t * @method reset\r\n\t * @static\r\n\t **/\r\n\tTicker.reset = function() {\r\n\t\tif (Ticker._raf) {\r\n\t\t\tvar f = window.cancelAnimationFrame || window.webkitCancelAnimationFrame || window.mozCancelAnimationFrame || window.oCancelAnimationFrame || window.msCancelAnimationFrame;\r\n\t\t\tf&&f(Ticker._timerId);\r\n\t\t} else {\r\n\t\t\tclearTimeout(Ticker._timerId);\r\n\t\t}\r\n\t\tTicker.removeAllEventListeners(\"tick\");\r\n\t\tTicker._timerId = Ticker._times = Ticker._tickTimes = null;\r\n\t\tTicker._startTime = Ticker._lastTime = Ticker._ticks = 0;\r\n\t\tTicker._inited = false;\r\n\t};\r\n\r\n\t/**\r\n\t * Returns the average time spent within a tick. This can vary significantly from the value provided by getMeasuredFPS\r\n\t * because it only measures the time spent within the tick execution stack. \r\n\t * \r\n\t * Example 1: With a target FPS of 20, getMeasuredFPS() returns 20fps, which indicates an average of 50ms between \r\n\t * the end of one tick and the end of the next. However, getMeasuredTickTime() returns 15ms. This indicates that \r\n\t * there may be up to 35ms of \"idle\" time between the end of one tick and the start of the next.\r\n\t *\r\n\t * Example 2: With a target FPS of 30, getFPS() returns 10fps, which indicates an average of 100ms between the end of\r\n\t * one tick and the end of the next. However, getMeasuredTickTime() returns 20ms. This would indicate that something\r\n\t * other than the tick is using ~80ms (another script, DOM rendering, etc).\r\n\t * @method getMeasuredTickTime\r\n\t * @static\r\n\t * @param {Number} [ticks] The number of previous ticks over which to measure the average time spent in a tick.\r\n\t * Defaults to the number of ticks per second. To get only the last tick's time, pass in 1.\r\n\t * @return {Number} The average time spent in a tick in milliseconds.\r\n\t **/\r\n\tTicker.getMeasuredTickTime = function(ticks) {\r\n\t\tvar ttl=0, times=Ticker._tickTimes;\r\n\t\tif (!times || times.length < 1) { return -1; }\r\n\r\n\t\t// by default, calculate average for the past ~1 second:\r\n\t\tticks = Math.min(times.length, ticks||(Ticker.getFPS()|0));\r\n\t\tfor (var i=0; i<ticks; i++) { ttl += times[i]; }\r\n\t\treturn ttl/ticks;\r\n\t};\r\n\r\n\t/**\r\n\t * Returns the actual frames / ticks per second.\r\n\t * @method getMeasuredFPS\r\n\t * @static\r\n\t * @param {Number} [ticks] The number of previous ticks over which to measure the actual frames / ticks per second.\r\n\t * Defaults to the number of ticks per second.\r\n\t * @return {Number} The actual frames / ticks per second. Depending on performance, this may differ\r\n\t * from the target frames per second.\r\n\t **/\r\n\tTicker.getMeasuredFPS = function(ticks) {\r\n\t\tvar times = Ticker._times;\r\n\t\tif (!times || times.length < 2) { return -1; }\r\n\r\n\t\t// by default, calculate fps for the past ~1 second:\r\n\t\tticks = Math.min(times.length-1, ticks||(Ticker.getFPS()|0));\r\n\t\treturn 1000/((times[0]-times[ticks])/ticks);\r\n\t};\r\n\r\n\t/**\r\n\t * Use the {{#crossLink \"Ticker/paused:property\"}}{{/crossLink}} property instead.\r\n\t * @method setPaused\r\n\t * @static\r\n\t * @param {Boolean} value\r\n\t * @deprecated\r\n\t **/\r\n\tTicker.setPaused = function(value) {\r\n\t\t// TODO: deprecated.\r\n\t\tTicker.paused = value;\r\n\t};\r\n\r\n\t/**\r\n\t * Use the {{#crossLink \"Ticker/paused:property\"}}{{/crossLink}} property instead.\r\n\t * @method getPaused\r\n\t * @static\r\n\t * @return {Boolean}\r\n\t * @deprecated\r\n\t **/\r\n\tTicker.getPaused = function() {\r\n\t\t// TODO: deprecated.\r\n\t\treturn Ticker.paused;\r\n\t};\r\n\r\n\t/**\r\n\t * Returns the number of milliseconds that have elapsed since Ticker was initialized via {{#crossLink \"Ticker/init\"}}.\r\n\t * Returns -1 if Ticker has not been initialized. For example, you could use\r\n\t * this in a time synchronized animation to determine the exact amount of time that has elapsed.\r\n\t * @method getTime\r\n\t * @static\r\n\t * @param {Boolean} [runTime=false] If true only time elapsed while Ticker was not paused will be returned.\r\n\t * If false, the value returned will be total time elapsed since the first tick event listener was added.\r\n\t * @return {Number} Number of milliseconds that have elapsed since Ticker was initialized or -1.\r\n\t **/\r\n\tTicker.getTime = function(runTime) {\r\n\t\treturn Ticker._startTime ? Ticker._getTime() - (runTime ? Ticker._pausedTime : 0) : -1;\r\n\t};\r\n\r\n\t/**\r\n\t * Similar to the {{#crossLink \"Ticker/getTime\"}}{{/crossLink}} method, but returns the time on the most recent {{#crossLink \"Ticker/tick:event\"}}{{/crossLink}}\r\n\t * event object.\r\n\t * @method getEventTime\r\n\t * @static\r\n\t * @param runTime {Boolean} [runTime=false] If true, the runTime property will be returned instead of time.\r\n\t * @returns {number} The time or runTime property from the most recent tick event or -1.\r\n\t */\r\n\tTicker.getEventTime = function(runTime) {\r\n\t\treturn Ticker._startTime ? (Ticker._lastTime || Ticker._startTime) - (runTime ? Ticker._pausedTime : 0) : -1;\r\n\t};\r\n\t\r\n\t/**\r\n\t * Returns the number of ticks that have been broadcast by Ticker.\r\n\t * @method getTicks\r\n\t * @static\r\n\t * @param {Boolean} pauseable Indicates whether to include ticks that would have been broadcast\r\n\t * while Ticker was paused. If true only tick events broadcast while Ticker is not paused will be returned.\r\n\t * If false, tick events that would have been broadcast while Ticker was paused will be included in the return\r\n\t * value. The default value is false.\r\n\t * @return {Number} of ticks that have been broadcast.\r\n\t **/\r\n\tTicker.getTicks = function(pauseable) {\r\n\t\treturn  Ticker._ticks - (pauseable ? Ticker._pausedTicks : 0);\r\n\t};\r\n\r\n\r\n// private static methods:\r\n\t/**\r\n\t * @method _handleSynch\r\n\t * @static\r\n\t * @protected\r\n\t **/\r\n\tTicker._handleSynch = function() {\r\n\t\tTicker._timerId = null;\r\n\t\tTicker._setupTick();\r\n\r\n\t\t// run if enough time has elapsed, with a little bit of flexibility to be early:\r\n\t\tif (Ticker._getTime() - Ticker._lastTime >= (Ticker._interval-1)*0.97) {\r\n\t\t\tTicker._tick();\r\n\t\t}\r\n\t};\r\n\r\n\t/**\r\n\t * @method _handleRAF\r\n\t * @static\r\n\t * @protected\r\n\t **/\r\n\tTicker._handleRAF = function() {\r\n\t\tTicker._timerId = null;\r\n\t\tTicker._setupTick();\r\n\t\tTicker._tick();\r\n\t};\r\n\r\n\t/**\r\n\t * @method _handleTimeout\r\n\t * @static\r\n\t * @protected\r\n\t **/\r\n\tTicker._handleTimeout = function() {\r\n\t\tTicker._timerId = null;\r\n\t\tTicker._setupTick();\r\n\t\tTicker._tick();\r\n\t};\r\n\r\n\t/**\r\n\t * @method _setupTick\r\n\t * @static\r\n\t * @protected\r\n\t **/\r\n\tTicker._setupTick = function() {\r\n\t\tif (Ticker._timerId != null) { return; } // avoid duplicates\r\n\r\n\t\tvar mode = Ticker.timingMode||(Ticker.useRAF&&Ticker.RAF_SYNCHED);\r\n\t\tif (mode == Ticker.RAF_SYNCHED || mode == Ticker.RAF) {\r\n\t\t\tvar f = window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || window.oRequestAnimationFrame || window.msRequestAnimationFrame;\r\n\t\t\tif (f) {\r\n\t\t\t\tTicker._timerId = f(mode == Ticker.RAF ? Ticker._handleRAF : Ticker._handleSynch);\r\n\t\t\t\tTicker._raf = true;\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t}\r\n\t\tTicker._raf = false;\r\n\t\tTicker._timerId = setTimeout(Ticker._handleTimeout, Ticker._interval);\r\n\t};\r\n\r\n\t/**\r\n\t * @method _tick\r\n\t * @static\r\n\t * @protected\r\n\t **/\r\n\tTicker._tick = function() {\r\n\t\tvar paused = Ticker.paused;\r\n\t\tvar time = Ticker._getTime();\r\n\t\tvar elapsedTime = time-Ticker._lastTime;\r\n\t\tTicker._lastTime = time;\r\n\t\tTicker._ticks++;\r\n\t\t\r\n\t\tif (paused) {\r\n\t\t\tTicker._pausedTicks++;\r\n\t\t\tTicker._pausedTime += elapsedTime;\r\n\t\t}\r\n\t\t\r\n\t\tif (Ticker.hasEventListener(\"tick\")) {\r\n\t\t\tvar event = new createjs.Event(\"tick\");\r\n\t\t\tvar maxDelta = Ticker.maxDelta;\r\n\t\t\tevent.delta = (maxDelta && elapsedTime > maxDelta) ? maxDelta : elapsedTime;\r\n\t\t\tevent.paused = paused;\r\n\t\t\tevent.time = time;\r\n\t\t\tevent.runTime = time-Ticker._pausedTime;\r\n\t\t\tTicker.dispatchEvent(event);\r\n\t\t}\r\n\t\t\r\n\t\tTicker._tickTimes.unshift(Ticker._getTime()-time);\r\n\t\twhile (Ticker._tickTimes.length > 100) { Ticker._tickTimes.pop(); }\r\n\r\n\t\tTicker._times.unshift(time);\r\n\t\twhile (Ticker._times.length > 100) { Ticker._times.pop(); }\r\n\t};\r\n\r\n\t/**\r\n\t * @method _getTime\r\n\t * @static\r\n\t * @protected\r\n\t **/\r\n\tvar now = window.performance && (performance.now || performance.mozNow || performance.msNow || performance.oNow || performance.webkitNow);\r\n\tTicker._getTime = function() {\r\n\t\treturn ((now&&now.call(performance))||(new Date().getTime())) - Ticker._startTime;\r\n\t};\r\n\r\n\r\n\tcreatejs.Ticker = Ticker;\r\n}());\r\n\r\n//##############################################################################\r\n// Tween.js\r\n//##############################################################################\r\n\r\n// TODO: possibly add a END actionsMode (only runs actions that == position)?\r\n// TODO: evaluate a way to decouple paused from tick registration.\r\n\r\n\r\nthis.createjs = this.createjs||{};\r\n\r\n(function() {\r\n\t\"use strict\";\r\n\r\n\r\n// constructor\r\n\t/**\r\n\t * A Tween instance tweens properties for a single target. Instance methods can be chained for easy construction and sequencing:\r\n\t *\r\n\t * <h4>Example</h4>\r\n\t *\r\n\t *      target.alpha = 1;\r\n\t *\t    createjs.Tween.get(target)\r\n\t *\t         .wait(500)\r\n\t *\t         .to({alpha:0, visible:false}, 1000)\r\n\t *\t         .call(handleComplete);\r\n\t *\t    function handleComplete() {\r\n\t *\t    \t//Tween complete\r\n\t *\t    }\r\n\t *\r\n\t * Multiple tweens can point to the same instance, however if they affect the same properties there could be unexpected\r\n\t * behaviour. To stop all tweens on an object, use {{#crossLink \"Tween/removeTweens\"}}{{/crossLink}} or pass `override:true`\r\n\t * in the props argument.\r\n\t *\r\n\t *      createjs.Tween.get(target, {override:true}).to({x:100});\r\n\t *\r\n\t * Subscribe to the {{#crossLink \"Tween/change:event\"}}{{/crossLink}} event to get notified when a property of the\r\n\t * target is changed.\r\n\t *\r\n\t *      createjs.Tween.get(target, {override:true}).to({x:100}).addEventListener(\"change\", handleChange);\r\n\t *      function handleChange(event) {\r\n\t *          // The tween changed.\r\n\t *      }\r\n\t *\r\n\t * See the Tween {{#crossLink \"Tween/get\"}}{{/crossLink}} method for additional param documentation.\r\n\t * @class Tween\r\n\t * @param {Object} target The target object that will have its properties tweened.\r\n\t * @param {Object} [props] The configuration properties to apply to this tween instance (ex. `{loop:true, paused:true}`.\r\n\t * All properties default to false. Supported props are:<UL>\r\n\t *    <LI> loop: sets the loop property on this tween.</LI>\r\n\t *    <LI> useTicks: uses ticks for all durations instead of milliseconds.</LI>\r\n\t *    <LI> ignoreGlobalPause: sets the {{#crossLink \"Tween/ignoreGlobalPause:property\"}}{{/crossLink}} property on this tween.</LI>\r\n\t *    <LI> override: if true, `Tween.removeTweens(target)` will be called to remove any other tweens with the same target.\r\n\t *    <LI> paused: indicates whether to start the tween paused.</LI>\r\n\t *    <LI> position: indicates the initial position for this tween.</LI>\r\n\t *    <LI> onChange: specifies a listener for the \"change\" event.</LI>\r\n\t * </UL>\r\n\t * @param {Object} [pluginData] An object containing data for use by installed plugins. See individual\r\n\t * plugins' documentation for details.\r\n\t * @extends EventDispatcher\r\n\t * @constructor\r\n\t */\r\n\tfunction Tween(target, props, pluginData) {\r\n\r\n\t// public properties:\r\n\t\t/**\r\n\t\t * Causes this tween to continue playing when a global pause is active. For example, if TweenJS is using {{#crossLink \"Ticker\"}}{{/crossLink}},\r\n\t\t * then setting this to true (the default) will cause this tween to be paused when <code>Ticker.setPaused(true)</code>\r\n\t\t * is called. See the Tween {{#crossLink \"Tween/tick\"}}{{/crossLink}} method for more info. Can be set via the props\r\n\t\t * parameter.\r\n\t\t * @property ignoreGlobalPause\r\n\t\t * @type Boolean\r\n\t\t * @default false\r\n\t\t */\r\n\t\tthis.ignoreGlobalPause = false;\r\n\t\r\n\t\t/**\r\n\t\t * If true, the tween will loop when it reaches the end. Can be set via the props param.\r\n\t\t * @property loop\r\n\t\t * @type {Boolean}\r\n\t\t * @default false\r\n\t\t */\r\n\t\tthis.loop = false;\r\n\t\r\n\t\t/**\r\n\t\t * Specifies the total duration of this tween in milliseconds (or ticks if useTicks is true).\r\n\t\t * This value is automatically updated as you modify the tween. Changing it directly could result in unexpected\r\n\t\t * behaviour.\r\n\t\t * @property duration\r\n\t\t * @type {Number}\r\n\t\t * @default 0\r\n\t\t * @readonly\r\n\t\t */\r\n\t\tthis.duration = 0;\r\n\t\r\n\t\t/**\r\n\t\t * Allows you to specify data that will be used by installed plugins. Each plugin uses this differently, but in general\r\n\t\t * you specify data by setting it to a property of pluginData with the same name as the plugin class.\r\n\t\t * @example\r\n\t\t *\tmyTween.pluginData.PluginClassName = data;\r\n\t\t * <br/>\r\n\t\t * Also, most plugins support a property to enable or disable them. This is typically the plugin class name followed by \"_enabled\".<br/>\r\n\t\t * @example\r\n\t\t *\tmyTween.pluginData.PluginClassName_enabled = false;<br/>\r\n\t\t * <br/>\r\n\t\t * Some plugins also store instance data in this object, usually in a property named _PluginClassName.\r\n\t\t * See the documentation for individual plugins for more details.\r\n\t\t * @property pluginData\r\n\t\t * @type {Object}\r\n\t\t */\r\n\t\tthis.pluginData = pluginData || {};\r\n\t\r\n\t\t/**\r\n\t\t * The target of this tween. This is the object on which the tweened properties will be changed. Changing\r\n\t\t * this property after the tween is created will not have any effect.\r\n\t\t * @property target\r\n\t\t * @type {Object}\r\n\t\t * @readonly\r\n\t\t */\r\n\t\tthis.target = target;\r\n\t\r\n\t\t/**\r\n\t\t * The current normalized position of the tween. This will always be a value between 0 and duration.\r\n\t\t * Changing this property directly will have no effect.\r\n\t\t * @property position\r\n\t\t * @type {Object}\r\n\t\t * @readonly\r\n\t\t */\r\n\t\tthis.position = null;\r\n\t\r\n\t\t/**\r\n\t\t * Indicates the tween's current position is within a passive wait.\r\n\t\t * @property passive\r\n\t\t * @type {Boolean}\r\n\t\t * @default false\r\n\t\t * @readonly\r\n\t\t **/\r\n\t\tthis.passive = false;\r\n\t\r\n\t// private properties:\t\r\n\t\t/**\r\n\t\t * @property _paused\r\n\t\t * @type {Boolean}\r\n\t\t * @default false\r\n\t\t * @protected\r\n\t\t */\r\n\t\tthis._paused = false;\r\n\t\r\n\t\t/**\r\n\t\t * @property _curQueueProps\r\n\t\t * @type {Object}\r\n\t\t * @protected\r\n\t\t */\r\n\t\tthis._curQueueProps = {};\r\n\t\r\n\t\t/**\r\n\t\t * @property _initQueueProps\r\n\t\t * @type {Object}\r\n\t\t * @protected\r\n\t\t */\r\n\t\tthis._initQueueProps = {};\r\n\t\r\n\t\t/**\r\n\t\t * @property _steps\r\n\t\t * @type {Array}\r\n\t\t * @protected\r\n\t\t */\r\n\t\tthis._steps = [];\r\n\t\r\n\t\t/**\r\n\t\t * @property _actions\r\n\t\t * @type {Array}\r\n\t\t * @protected\r\n\t\t */\r\n\t\tthis._actions = [];\r\n\t\r\n\t\t/**\r\n\t\t * Raw position.\r\n\t\t * @property _prevPosition\r\n\t\t * @type {Number}\r\n\t\t * @default 0\r\n\t\t * @protected\r\n\t\t */\r\n\t\tthis._prevPosition = 0;\r\n\t\r\n\t\t/**\r\n\t\t * The position within the current step.\r\n\t\t * @property _stepPosition\r\n\t\t * @type {Number}\r\n\t\t * @default 0\r\n\t\t * @protected\r\n\t\t */\r\n\t\tthis._stepPosition = 0; // this is needed by MovieClip.\r\n\t\r\n\t\t/**\r\n\t\t * Normalized position.\r\n\t\t * @property _prevPos\r\n\t\t * @type {Number}\r\n\t\t * @default -1\r\n\t\t * @protected\r\n\t\t */\r\n\t\tthis._prevPos = -1;\r\n\t\r\n\t\t/**\r\n\t\t * @property _target\r\n\t\t * @type {Object}\r\n\t\t * @protected\r\n\t\t */\r\n\t\tthis._target = target;\r\n\t\r\n\t\t/**\r\n\t\t * @property _useTicks\r\n\t\t * @type {Boolean}\r\n\t\t * @default false\r\n\t\t * @protected\r\n\t\t */\r\n\t\tthis._useTicks = false;\r\n\t\r\n\t\t/**\r\n\t\t * @property _inited\r\n\t\t * @type {boolean}\r\n\t\t * @default false\r\n\t\t * @protected\r\n\t\t */\r\n\t\tthis._inited = false;\r\n\t\t\r\n\t\t/**\r\n\t\t * Indicates whether the tween is currently registered with Tween.\r\n\t\t * @property _registered\r\n\t\t * @type {boolean}\r\n\t\t * @default false\r\n\t\t * @protected\r\n\t\t */\r\n\t\tthis._registered = false;\r\n\r\n\r\n\t\tif (props) {\r\n\t\t\tthis._useTicks = props.useTicks;\r\n\t\t\tthis.ignoreGlobalPause = props.ignoreGlobalPause;\r\n\t\t\tthis.loop = props.loop;\r\n\t\t\tprops.onChange && this.addEventListener(\"change\", props.onChange);\r\n\t\t\tif (props.override) { Tween.removeTweens(target); }\r\n\t\t}\r\n\t\tif (props&&props.paused) { this._paused=true; }\r\n\t\telse { createjs.Tween._register(this,true); }\r\n\t\tif (props&&props.position!=null) { this.setPosition(props.position, Tween.NONE); }\r\n\r\n\t};\r\n\r\n\tvar p = createjs.extend(Tween, createjs.EventDispatcher);\r\n\r\n\t// TODO: deprecated\r\n\t// p.initialize = function() {}; // searchable for devs wondering where it is. REMOVED. See docs for details.\r\n\t\r\n\r\n// static properties\r\n\t/**\r\n\t * Constant defining the none actionsMode for use with setPosition.\r\n\t * @property NONE\r\n\t * @type Number\r\n\t * @default 0\r\n\t * @static\r\n\t */\r\n\tTween.NONE = 0;\r\n\r\n\t/**\r\n\t * Constant defining the loop actionsMode for use with setPosition.\r\n\t * @property LOOP\r\n\t * @type Number\r\n\t * @default 1\r\n\t * @static\r\n\t */\r\n\tTween.LOOP = 1;\r\n\r\n\t/**\r\n\t * Constant defining the reverse actionsMode for use with setPosition.\r\n\t * @property REVERSE\r\n\t * @type Number\r\n\t * @default 2\r\n\t * @static\r\n\t */\r\n\tTween.REVERSE = 2;\r\n\r\n\t/**\r\n\t * Constant returned by plugins to tell the tween not to use default assignment.\r\n\t * @property IGNORE\r\n\t * @type Object\r\n\t * @static\r\n\t */\r\n\tTween.IGNORE = {};\r\n\r\n\t/**\r\n\t * @property _listeners\r\n\t * @type Array[Tween]\r\n\t * @static\r\n\t * @protected\r\n\t */\r\n\tTween._tweens = [];\r\n\r\n\t/**\r\n\t * @property _plugins\r\n\t * @type Object\r\n\t * @static\r\n\t * @protected\r\n\t */\r\n\tTween._plugins = {};\r\n\r\n\r\n// static methods\t\r\n\t/**\r\n\t * Returns a new tween instance. This is functionally identical to using \"new Tween(...)\", but looks cleaner\r\n\t * with the chained syntax of TweenJS.\r\n\t * <h4>Example</h4>\r\n\t *\r\n\t *\t\tvar tween = createjs.Tween.get(target);\r\n\t *\r\n\t * @method get\r\n\t * @param {Object} target The target object that will have its properties tweened.\r\n\t * @param {Object} [props] The configuration properties to apply to this tween instance (ex. `{loop:true, paused:true}`).\r\n\t * All properties default to `false`. Supported props are:\r\n\t * <UL>\r\n\t *    <LI> loop: sets the loop property on this tween.</LI>\r\n\t *    <LI> useTicks: uses ticks for all durations instead of milliseconds.</LI>\r\n\t *    <LI> ignoreGlobalPause: sets the {{#crossLink \"Tween/ignoreGlobalPause:property\"}}{{/crossLink}} property on\r\n\t *    this tween.</LI>\r\n\t *    <LI> override: if true, `createjs.Tween.removeTweens(target)` will be called to remove any other tweens with\r\n\t *    the same target.\r\n\t *    <LI> paused: indicates whether to start the tween paused.</LI>\r\n\t *    <LI> position: indicates the initial position for this tween.</LI>\r\n\t *    <LI> onChange: specifies a listener for the {{#crossLink \"Tween/change:event\"}}{{/crossLink}} event.</LI>\r\n\t * </UL>\r\n\t * @param {Object} [pluginData] An object containing data for use by installed plugins. See individual plugins'\r\n\t * documentation for details.\r\n\t * @param {Boolean} [override=false] If true, any previous tweens on the same target will be removed. This is the\r\n\t * same as calling `Tween.removeTweens(target)`.\r\n\t * @return {Tween} A reference to the created tween. Additional chained tweens, method calls, or callbacks can be\r\n\t * applied to the returned tween instance.\r\n\t * @static\r\n\t */\r\n\tTween.get = function(target, props, pluginData, override) {\r\n\t\tif (override) { Tween.removeTweens(target); }\r\n\t\treturn new Tween(target, props, pluginData);\r\n\t};\r\n\r\n\t/**\r\n\t * Advances all tweens. This typically uses the {{#crossLink \"Ticker\"}}{{/crossLink}} class, but you can call it\r\n\t * manually if you prefer to use your own \"heartbeat\" implementation.\r\n\t * @method tick\r\n\t * @param {Number} delta The change in time in milliseconds since the last tick. Required unless all tweens have\r\n\t * `useTicks` set to true.\r\n\t * @param {Boolean} paused Indicates whether a global pause is in effect. Tweens with {{#crossLink \"Tween/ignoreGlobalPause:property\"}}{{/crossLink}}\r\n\t * will ignore this, but all others will pause if this is `true`.\r\n\t * @static\r\n\t */\r\n\tTween.tick = function(delta, paused) {\r\n\t\tvar tweens = Tween._tweens.slice(); // to avoid race conditions.\r\n\t\tfor (var i=tweens.length-1; i>=0; i--) {\r\n\t\t\tvar tween = tweens[i];\r\n\t\t\tif ((paused && !tween.ignoreGlobalPause) || tween._paused) { continue; }\r\n\t\t\ttween.tick(tween._useTicks?1:delta);\r\n\t\t}\r\n\t};\r\n\r\n\t/**\r\n\t * Handle events that result from Tween being used as an event handler. This is included to allow Tween to handle\r\n\t * {{#crossLink \"Ticker/tick:event\"}}{{/crossLink}} events from the createjs {{#crossLink \"Ticker\"}}{{/crossLink}}.\r\n\t * No other events are handled in Tween.\r\n\t * @method handleEvent\r\n\t * @param {Object} event An event object passed in by the {{#crossLink \"EventDispatcher\"}}{{/crossLink}}. Will\r\n\t * usually be of type \"tick\".\r\n\t * @private\r\n\t * @static\r\n\t * @since 0.4.2\r\n\t */\r\n\tTween.handleEvent = function(event) {\r\n\t\tif (event.type == \"tick\") {\r\n\t\t\tthis.tick(event.delta, event.paused);\r\n\t\t}\r\n\t};\r\n\r\n\t/**\r\n\t * Removes all existing tweens for a target. This is called automatically by new tweens if the `override`\r\n\t * property is `true`.\r\n\t * @method removeTweens\r\n\t * @param {Object} target The target object to remove existing tweens from.\r\n\t * @static\r\n\t */\r\n\tTween.removeTweens = function(target) {\r\n\t\tif (!target.tweenjs_count) { return; }\r\n\t\tvar tweens = Tween._tweens;\r\n\t\tfor (var i=tweens.length-1; i>=0; i--) {\r\n\t\t\tvar tween = tweens[i];\r\n\t\t\tif (tween._target == target) {\r\n\t\t\t\ttween._paused = true;\r\n\t\t\t\ttweens.splice(i, 1);\r\n\t\t\t}\r\n\t\t}\r\n\t\ttarget.tweenjs_count = 0;\r\n\t};\r\n\r\n\t/**\r\n\t * Stop and remove all existing tweens.\r\n\t * @method removeAllTweens\r\n\t * @static\r\n\t * @since 0.4.1\r\n\t */\r\n\tTween.removeAllTweens = function() {\r\n\t\tvar tweens = Tween._tweens;\r\n\t\tfor (var i= 0, l=tweens.length; i<l; i++) {\r\n\t\t\tvar tween = tweens[i];\r\n\t\t\ttween._paused = true;\r\n\t\t\ttween.target&&(tween.target.tweenjs_count = 0);\r\n\t\t}\r\n\t\ttweens.length = 0;\r\n\t};\r\n\r\n\t/**\r\n\t * Indicates whether there are any active tweens (and how many) on the target object (if specified) or in general.\r\n\t * @method hasActiveTweens\r\n\t * @param {Object} [target] The target to check for active tweens. If not specified, the return value will indicate\r\n\t * if there are any active tweens on any target.\r\n\t * @return {Boolean} If there are active tweens.\r\n\t * @static\r\n\t */\r\n\tTween.hasActiveTweens = function(target) {\r\n\t\tif (target) { return target.tweenjs_count != null && !!target.tweenjs_count; }\r\n\t\treturn Tween._tweens && !!Tween._tweens.length;\r\n\t};\r\n\r\n\t/**\r\n\t * Installs a plugin, which can modify how certain properties are handled when tweened. See the {{#crossLink \"CSSPlugin\"}}{{/crossLink}}\r\n\t * for an example of how to write TweenJS plugins.\r\n\t * @method installPlugin\r\n\t * @static\r\n\t * @param {Object} plugin The plugin class to install\r\n\t * @param {Array} properties An array of properties that the plugin will handle.\r\n\t */\r\n\tTween.installPlugin = function(plugin, properties) {\r\n\t\tvar priority = plugin.priority;\r\n\t\tif (priority == null) { plugin.priority = priority = 0; }\r\n\t\tfor (var i=0,l=properties.length,p=Tween._plugins;i<l;i++) {\r\n\t\t\tvar n = properties[i];\r\n\t\t\tif (!p[n]) { p[n] = [plugin]; }\r\n\t\t\telse {\r\n\t\t\t\tvar arr = p[n];\r\n\t\t\t\tfor (var j=0,jl=arr.length;j<jl;j++) {\r\n\t\t\t\t\tif (priority < arr[j].priority) { break; }\r\n\t\t\t\t}\r\n\t\t\t\tp[n].splice(j,0,plugin);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\t/**\r\n\t * Registers or unregisters a tween with the ticking system.\r\n\t * @method _register\r\n\t * @param {Tween} tween The tween instance to register or unregister.\r\n\t * @param {Boolean} value If `true`, the tween is registered. If `false` the tween is unregistered.\r\n\t * @static\r\n\t * @protected\r\n\t */\r\n\tTween._register = function(tween, value) {\r\n\t\tvar target = tween._target;\r\n\t\tvar tweens = Tween._tweens;\r\n\t\tif (value && !tween._registered) {\r\n\t\t\t// TODO: this approach might fail if a dev is using sealed objects in ES5\r\n\t\t\tif (target) { target.tweenjs_count = target.tweenjs_count ? target.tweenjs_count+1 : 1; }\r\n\t\t\ttweens.push(tween);\r\n\t\t\tif (!Tween._inited && createjs.Ticker) { createjs.Ticker.addEventListener(\"tick\", Tween); Tween._inited = true; }\r\n\t\t} else if (!value && tween._registered) {\r\n\t\t\tif (target) { target.tweenjs_count--; }\r\n\t\t\tvar i = tweens.length;\r\n\t\t\twhile (i--) {\r\n\t\t\t\tif (tweens[i] == tween) {\r\n\t\t\t\t\ttweens.splice(i, 1);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\ttween._registered = value;\r\n\t};\r\n\r\n\r\n// events:\r\n\t/**\r\n\t * Called whenever the tween's position changes.\r\n\t * @event change\r\n\t * @since 0.4.0\r\n\t **/\r\n\t\r\n\r\n// public methods:\r\n\t/**\r\n\t * Queues a wait (essentially an empty tween).\r\n\t * <h4>Example</h4>\r\n\t *\r\n\t *\t\t//This tween will wait 1s before alpha is faded to 0.\r\n\t *\t\tcreatejs.Tween.get(target).wait(1000).to({alpha:0}, 1000);\r\n\t *\r\n\t * @method wait\r\n\t * @param {Number} duration The duration of the wait in milliseconds (or in ticks if `useTicks` is true).\r\n\t * @param {Boolean} [passive] Tween properties will not be updated during a passive wait. This\r\n\t * is mostly useful for use with {{#crossLink \"Timeline\"}}{{/crossLink}} instances that contain multiple tweens\r\n\t * affecting the same target at different times.\r\n\t * @return {Tween} This tween instance (for chaining calls).\r\n\t **/\r\n\tp.wait = function(duration, passive) {\r\n\t\tif (duration == null || duration <= 0) { return this; }\r\n\t\tvar o = this._cloneProps(this._curQueueProps);\r\n\t\treturn this._addStep({d:duration, p0:o, e:this._linearEase, p1:o, v:passive});\r\n\t};\r\n\r\n\t/**\r\n\t * Queues a tween from the current values to the target properties. Set duration to 0 to jump to these value.\r\n\t * Numeric properties will be tweened from their current value in the tween to the target value. Non-numeric\r\n\t * properties will be set at the end of the specified duration.\r\n\t * <h4>Example</h4>\r\n\t *\r\n\t *\t\tcreatejs.Tween.get(target).to({alpha:0}, 1000);\r\n\t *\r\n\t * @method to\r\n\t * @param {Object} props An object specifying property target values for this tween (Ex. `{x:300}` would tween the x\r\n\t * property of the target to 300).\r\n\t * @param {Number} [duration=0] The duration of the wait in milliseconds (or in ticks if `useTicks` is true).\r\n\t * @param {Function} [ease=\"linear\"] The easing function to use for this tween. See the {{#crossLink \"Ease\"}}{{/crossLink}}\r\n\t * class for a list of built-in ease functions.\r\n\t * @return {Tween} This tween instance (for chaining calls).\r\n\t */\r\n\tp.to = function(props, duration, ease) {\r\n\t\tif (isNaN(duration) || duration < 0) { duration = 0; }\r\n\t\treturn this._addStep({d:duration||0, p0:this._cloneProps(this._curQueueProps), e:ease, p1:this._cloneProps(this._appendQueueProps(props))});\r\n\t};\r\n\r\n\t/**\r\n\t * Queues an action to call the specified function.\r\n\t * <h4>Example</h4>\r\n\t *\r\n\t *   \t//would call myFunction() after 1 second.\r\n\t *   \tmyTween.wait(1000).call(myFunction);\r\n\t *\r\n\t * @method call\r\n\t * @param {Function} callback The function to call.\r\n\t * @param {Array} [params]. The parameters to call the function with. If this is omitted, then the function\r\n\t *      will be called with a single param pointing to this tween.\r\n\t * @param {Object} [scope]. The scope to call the function in. If omitted, it will be called in the target's\r\n\t *      scope.\r\n\t * @return {Tween} This tween instance (for chaining calls).\r\n\t */\r\n\tp.call = function(callback, params, scope) {\r\n\t\treturn this._addAction({f:callback, p:params ? params : [this], o:scope ? scope : this._target});\r\n\t};\r\n\r\n\t// TODO: add clarification between this and a 0 duration .to:\r\n\t/**\r\n\t * Queues an action to set the specified props on the specified target. If target is null, it will use this tween's\r\n\t * target.\r\n\t * <h4>Example</h4>\r\n\t *\r\n\t *\t\tmyTween.wait(1000).set({visible:false},foo);\r\n\t *\r\n\t * @method set\r\n\t * @param {Object} props The properties to set (ex. `{visible:false}`).\r\n\t * @param {Object} [target] The target to set the properties on. If omitted, they will be set on the tween's target.\r\n\t * @return {Tween} This tween instance (for chaining calls).\r\n\t */\r\n\tp.set = function(props, target) {\r\n\t\treturn this._addAction({f:this._set, o:this, p:[props, target ? target : this._target]});\r\n\t};\r\n\r\n\t/**\r\n\t * Queues an action to play (unpause) the specified tween. This enables you to sequence multiple tweens.\r\n\t * <h4>Example</h4>\r\n\t *\r\n\t *\t\tmyTween.to({x:100},500).play(otherTween);\r\n\t *\r\n\t * @method play\r\n\t * @param {Tween} tween The tween to play.\r\n\t * @return {Tween} This tween instance (for chaining calls).\r\n\t */\r\n\tp.play = function(tween) {\r\n\t\tif (!tween) { tween = this; }\r\n\t\treturn this.call(tween.setPaused, [false], tween);\r\n\t};\r\n\r\n\t/**\r\n\t * Queues an action to pause the specified tween.\r\n\t * @method pause\r\n\t * @param {Tween} tween The tween to pause. If null, it pauses this tween.\r\n\t * @return {Tween} This tween instance (for chaining calls)\r\n\t */\r\n\tp.pause = function(tween) {\r\n\t\tif (!tween) { tween = this; }\r\n\t\treturn this.call(tween.setPaused, [true], tween);\r\n\t};\r\n\r\n\t/**\r\n\t * Advances the tween to a specified position.\r\n\t * @method setPosition\r\n\t * @param {Number} value The position to seek to in milliseconds (or ticks if useTicks is true).\r\n\t * @param {Number} [actionsMode=1] Specifies how actions are handled (ie. call, set, play, pause):\r\n\t * <ul>\r\n\t *      <li>{{#crossLink \"Tween/NONE:property\"}}{{/crossLink}} (0) - run no actions.</li>\r\n\t *      <li>{{#crossLink \"Tween/LOOP:property\"}}{{/crossLink}} (1) - if new position is less than old, then run all\r\n\t *      actions between old and duration, then all actions between 0 and new.</li>\r\n\t *      <li>{{#crossLink \"Tween/REVERSE:property\"}}{{/crossLink}} (2) - if new position is less than old, run all\r\n\t *      actions between them in reverse.</li>\r\n\t * </ul>\r\n\t * @return {Boolean} Returns `true` if the tween is complete (ie. the full tween has run & {{#crossLink \"Tween/loop:property\"}}{{/crossLink}}\r\n\t * is `false`).\r\n\t */\r\n\tp.setPosition = function(value, actionsMode) {\r\n\t\tif (value < 0) { value = 0; }\r\n\t\tif (actionsMode == null) { actionsMode = 1; }\r\n\r\n\t\t// normalize position:\r\n\t\tvar t = value;\r\n\t\tvar end = false;\r\n\t\tif (t >= this.duration) {\r\n\t\t\tif (this.loop) { t = t%this.duration; }\r\n\t\t\telse {\r\n\t\t\t\tt = this.duration;\r\n\t\t\t\tend = true;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (t == this._prevPos) { return end; }\r\n\r\n\r\n\t\tvar prevPos = this._prevPos;\r\n\t\tthis.position = this._prevPos = t; // set this in advance in case an action modifies position.\r\n\t\tthis._prevPosition = value;\r\n\r\n\t\t// handle tweens:\r\n\t\tif (this._target) {\r\n\t\t\tif (end) {\r\n\t\t\t\t// addresses problems with an ending zero length step.\r\n\t\t\t\tthis._updateTargetProps(null,1);\r\n\t\t\t} else if (this._steps.length > 0) {\r\n\t\t\t\t// find our new tween index:\r\n\t\t\t\tfor (var i=0, l=this._steps.length; i<l; i++) {\r\n\t\t\t\t\tif (this._steps[i].t > t) { break; }\r\n\t\t\t\t}\r\n\t\t\t\tvar step = this._steps[i-1];\r\n\t\t\t\tthis._updateTargetProps(step,(this._stepPosition = t-step.t)/step.d);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// run actions:\r\n\t\tif (actionsMode != 0 && this._actions.length > 0) {\r\n\t\t\tif (this._useTicks) {\r\n\t\t\t\t// only run the actions we landed on.\r\n\t\t\t\tthis._runActions(t,t);\r\n\t\t\t} else if (actionsMode == 1 && t<prevPos) {\r\n\t\t\t\tif (prevPos != this.duration) { this._runActions(prevPos, this.duration); }\r\n\t\t\t\tthis._runActions(0, t, true);\r\n\t\t\t} else {\r\n\t\t\t\tthis._runActions(prevPos, t);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (end) { this.setPaused(true); }\r\n\r\n        this.dispatchEvent(\"change\");\r\n\t\treturn end;\r\n\t};\r\n\r\n\t/**\r\n\t * Advances this tween by the specified amount of time in milliseconds (or ticks if`useTicks` is `true`).\r\n\t * This is normally called automatically by the Tween engine (via {{#crossLink \"Tween/tick\"}}{{/crossLink}}), but is\r\n\t * exposed for advanced uses.\r\n\t * @method tick\r\n\t * @param {Number} delta The time to advance in milliseconds (or ticks if `useTicks` is `true`).\r\n\t */\r\n\tp.tick = function(delta) {\r\n\t\tif (this._paused) { return; }\r\n\t\tthis.setPosition(this._prevPosition+delta);\r\n\t};\r\n\r\n\t/**\r\n\t * Pauses or plays this tween.\r\n\t * @method setPaused\r\n\t * @param {Boolean} [value=true] Indicates whether the tween should be paused (`true`) or played (`false`).\r\n\t * @return {Tween} This tween instance (for chaining calls)\r\n\t */\r\n\tp.setPaused = function(value) {\r\n\t\tif (this._paused === !!value) { return this; }\r\n\t\tthis._paused = !!value;\r\n\t\tTween._register(this, !value);\r\n\t\treturn this;\r\n\t};\r\n\r\n\t// tiny api (primarily for tool output):\r\n\tp.w = p.wait;\r\n\tp.t = p.to;\r\n\tp.c = p.call;\r\n\tp.s = p.set;\r\n\r\n\t/**\r\n\t * Returns a string representation of this object.\r\n\t * @method toString\r\n\t * @return {String} a string representation of the instance.\r\n\t */\r\n\tp.toString = function() {\r\n\t\treturn \"[Tween]\";\r\n\t};\r\n\r\n\t/**\r\n\t * @method clone\r\n\t * @protected\r\n\t */\r\n\tp.clone = function() {\r\n\t\tthrow(\"Tween can not be cloned.\")\r\n\t};\r\n\r\n// private methods:\r\n\t/**\r\n\t * @method _updateTargetProps\r\n\t * @param {Object} step\r\n\t * @param {Number} ratio\r\n\t * @protected\r\n\t */\r\n\tp._updateTargetProps = function(step, ratio) {\r\n\t\tvar p0,p1,v,v0,v1,arr;\r\n\t\tif (!step && ratio == 1) {\r\n\t\t\t// GDS: when does this run? Just at the very end? Shouldn't.\r\n\t\t\tthis.passive = false;\r\n\t\t\tp0 = p1 = this._curQueueProps;\r\n\t\t} else {\r\n\t\t\tthis.passive = !!step.v;\r\n\t\t\tif (this.passive) { return; } // don't update props.\r\n\t\t\t// apply ease to ratio.\r\n\t\t\tif (step.e) { ratio = step.e(ratio,0,1,1); }\r\n\t\t\tp0 = step.p0;\r\n\t\t\tp1 = step.p1;\r\n\t\t}\r\n\r\n\t\tfor (var n in this._initQueueProps) {\r\n\t\t\tif ((v0 = p0[n]) == null) { p0[n] = v0 = this._initQueueProps[n]; }\r\n\t\t\tif ((v1 = p1[n]) == null) { p1[n] = v1 = v0; }\r\n\t\t\tif (v0 == v1 || ratio == 0 || ratio == 1 || (typeof(v0) != \"number\")) {\r\n\t\t\t\t// no interpolation - either at start, end, values don't change, or the value is non-numeric.\r\n\t\t\t\tv = ratio == 1 ? v1 : v0;\r\n\t\t\t} else {\r\n\t\t\t\tv = v0+(v1-v0)*ratio;\r\n\t\t\t}\r\n\r\n\t\t\tvar ignore = false;\r\n\t\t\tif (arr = Tween._plugins[n]) {\r\n\t\t\t\tfor (var i=0,l=arr.length;i<l;i++) {\r\n\t\t\t\t\tvar v2 = arr[i].tween(this, n, v, p0, p1, ratio, !!step&&p0==p1, !step);\r\n\t\t\t\t\tif (v2 == Tween.IGNORE) { ignore = true; }\r\n\t\t\t\t\telse { v = v2; }\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (!ignore) { this._target[n] = v; }\r\n\t\t}\r\n\r\n\t};\r\n\r\n\t/**\r\n\t * @method _runActions\r\n\t * @param {Number} startPos\r\n\t * @param {Number} endPos\r\n\t * @param {Boolean} includeStart\r\n\t * @protected\r\n\t */\r\n\tp._runActions = function(startPos, endPos, includeStart) {\r\n\t\tvar sPos = startPos;\r\n\t\tvar ePos = endPos;\r\n\t\tvar i = -1;\r\n\t\tvar j = this._actions.length;\r\n\t\tvar k = 1;\r\n\t\tif (startPos > endPos) {\r\n\t\t\t// running backwards, flip everything:\r\n\t\t\tsPos = endPos;\r\n\t\t\tePos = startPos;\r\n\t\t\ti = j;\r\n\t\t\tj = k = -1;\r\n\t\t}\r\n\t\twhile ((i+=k) != j) {\r\n\t\t\tvar action = this._actions[i];\r\n\t\t\tvar pos = action.t;\r\n\t\t\tif (pos == ePos || (pos > sPos && pos < ePos) || (includeStart && pos == startPos) ) {\r\n\t\t\t\taction.f.apply(action.o, action.p);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\t/**\r\n\t * @method _appendQueueProps\r\n\t * @param {Object} o\r\n\t * @protected\r\n\t */\r\n\tp._appendQueueProps = function(o) {\r\n\t\tvar arr,oldValue,i, l, injectProps;\r\n\t\tfor (var n in o) {\r\n\t\t\tif (this._initQueueProps[n] === undefined) {\r\n\t\t\t\toldValue = this._target[n];\r\n\r\n\t\t\t\t// init plugins:\r\n\t\t\t\tif (arr = Tween._plugins[n]) {\r\n\t\t\t\t\tfor (i=0,l=arr.length;i<l;i++) {\r\n\t\t\t\t\t\toldValue = arr[i].init(this, n, oldValue);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tthis._initQueueProps[n] = this._curQueueProps[n] = (oldValue===undefined) ? null : oldValue;\r\n\t\t\t} else {\r\n\t\t\t\toldValue = this._curQueueProps[n];\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfor (var n in o) {\r\n\t\t\toldValue = this._curQueueProps[n];\r\n\t\t\tif (arr = Tween._plugins[n]) {\r\n\t\t\t\tinjectProps = injectProps||{};\r\n\t\t\t\tfor (i=0, l=arr.length;i<l;i++) {\r\n\t\t\t\t\t// TODO: remove the check for .step in the next version. It's here for backwards compatibility.\r\n\t\t\t\t\tif (arr[i].step) { arr[i].step(this, n, oldValue, o[n], injectProps); }\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis._curQueueProps[n] = o[n];\r\n\t\t}\r\n\t\tif (injectProps) { this._appendQueueProps(injectProps); }\r\n\t\treturn this._curQueueProps;\r\n\t};\r\n\r\n\t/**\r\n\t * @method _cloneProps\r\n\t * @param {Object} props\r\n\t * @protected\r\n\t */\r\n\tp._cloneProps = function(props) {\r\n\t\tvar o = {};\r\n\t\tfor (var n in props) {\r\n\t\t\to[n] = props[n];\r\n\t\t}\r\n\t\treturn o;\r\n\t};\r\n\r\n\t/**\r\n\t * @method _addStep\r\n\t * @param {Object} o\r\n\t * @protected\r\n\t */\r\n\tp._addStep = function(o) {\r\n\t\tif (o.d > 0) {\r\n\t\t\tthis._steps.push(o);\r\n\t\t\to.t = this.duration;\r\n\t\t\tthis.duration += o.d;\r\n\t\t}\r\n\t\treturn this;\r\n\t};\r\n\r\n\t/**\r\n\t * @method _addAction\r\n\t * @param {Object} o\r\n\t * @protected\r\n\t */\r\n\tp._addAction = function(o) {\r\n\t\to.t = this.duration;\r\n\t\tthis._actions.push(o);\r\n\t\treturn this;\r\n\t};\r\n\r\n\t/**\r\n\t * @method _set\r\n\t * @param {Object} props\r\n\t * @param {Object} o\r\n\t * @protected\r\n\t */\r\n\tp._set = function(props, o) {\r\n\t\tfor (var n in props) {\r\n\t\t\to[n] = props[n];\r\n\t\t}\r\n\t};\r\n\r\n\tcreatejs.Tween = createjs.promote(Tween, \"EventDispatcher\");\r\n\r\n}());\r\n\r\n//##############################################################################\r\n// Timeline.js\r\n//##############################################################################\r\n\r\nthis.createjs = this.createjs||{};\r\n\r\n\r\n(function() {\r\n\t\"use strict\";\r\n\t\r\n\r\n// constructor\t\r\n\t/**\r\n\t * The Timeline class synchronizes multiple tweens and allows them to be controlled as a group. Please note that if a\r\n\t * timeline is looping, the tweens on it may appear to loop even if the \"loop\" property of the tween is false.\r\n\t * @class Timeline\r\n\t * @param {Array} tweens An array of Tweens to add to this timeline. See {{#crossLink \"Timeline/addTween\"}}{{/crossLink}}\r\n\t * for more info.\r\n\t * @param {Object} labels An object defining labels for using {{#crossLink \"Timeline/gotoAndPlay\"}}{{/crossLink}}/{{#crossLink \"Timeline/gotoAndStop\"}}{{/crossLink}}.\r\n\t * See {{#crossLink \"Timeline/setLabels\"}}{{/crossLink}}\r\n\t * for details.\r\n\t * @param {Object} props The configuration properties to apply to this tween instance (ex. `{loop:true}`). All properties\r\n\t * default to false. Supported props are:<UL>\r\n\t *    <LI> loop: sets the loop property on this tween.</LI>\r\n\t *    <LI> useTicks: uses ticks for all durations instead of milliseconds.</LI>\r\n\t *    <LI> ignoreGlobalPause: sets the ignoreGlobalPause property on this tween.</LI>\r\n\t *    <LI> paused: indicates whether to start the tween paused.</LI>\r\n\t *    <LI> position: indicates the initial position for this timeline.</LI>\r\n\t *    <LI> onChange: specifies a listener to add for the {{#crossLink \"Timeline/change:event\"}}{{/crossLink}} event.</LI>\r\n\t * </UL>\r\n\t * @extends EventDispatcher\r\n\t * @constructor\r\n\t **/\r\n\tfunction Timeline(tweens, labels, props) {\r\n\t\tthis.EventDispatcher_constructor();\r\n\r\n\t// public properties:\r\n\t\t/**\r\n\t\t * Causes this timeline to continue playing when a global pause is active.\r\n\t\t * @property ignoreGlobalPause\r\n\t\t * @type Boolean\r\n\t\t **/\r\n\t\tthis.ignoreGlobalPause = false;\r\n\r\n\t\t/**\r\n\t\t * The total duration of this timeline in milliseconds (or ticks if `useTicks `is `true`). This value is usually\r\n\t\t * automatically updated as you modify the timeline. See {{#crossLink \"Timeline/updateDuration\"}}{{/crossLink}}\r\n\t\t * for more information.\r\n\t\t * @property duration\r\n\t\t * @type Number\r\n\t\t * @default 0\r\n\t\t * @readonly\r\n\t\t **/\r\n\t\tthis.duration = 0;\r\n\r\n\t\t/**\r\n\t\t * If true, the timeline will loop when it reaches the end. Can be set via the props param.\r\n\t\t * @property loop\r\n\t\t * @type Boolean\r\n\t\t **/\r\n\t\tthis.loop = false;\r\n\r\n\t\t/**\r\n\t\t * The current normalized position of the timeline. This will always be a value between 0 and\r\n\t\t * {{#crossLink \"Timeline/duration:property\"}}{{/crossLink}}.\r\n\t\t * Changing this property directly will have no effect.\r\n\t\t * @property position\r\n\t\t * @type Object\r\n\t\t * @readonly\r\n\t\t **/\r\n\t\tthis.position = null;\r\n\r\n\t\t// private properties:\r\n\t\t/**\r\n\t\t * @property _paused\r\n\t\t * @type Boolean\r\n\t\t * @protected\r\n\t\t **/\r\n\t\tthis._paused = false;\r\n\r\n\t\t/**\r\n\t\t * @property _tweens\r\n\t\t * @type Array[Tween]\r\n\t\t * @protected\r\n\t\t **/\r\n\t\tthis._tweens = [];\r\n\r\n\t\t/**\r\n\t\t * @property _labels\r\n\t\t * @type Object\r\n\t\t * @protected\r\n\t\t **/\r\n\t\tthis._labels = null;\r\n\r\n\t\t/**\r\n\t\t * @property _labelList\r\n\t\t * @type Array[Object]\r\n\t\t * @protected\r\n\t\t **/\r\n\t\tthis._labelList = null;\r\n\r\n\t\t/**\r\n\t\t * @property _prevPosition\r\n\t\t * @type Number\r\n\t\t * @default 0\r\n\t\t * @protected\r\n\t\t **/\r\n\t\tthis._prevPosition = 0;\r\n\r\n\t\t/**\r\n\t\t * @property _prevPos\r\n\t\t * @type Number\r\n\t\t * @default -1\r\n\t\t * @protected\r\n\t\t **/\r\n\t\tthis._prevPos = -1;\r\n\r\n\t\t/**\r\n\t\t * @property _useTicks\r\n\t\t * @type Boolean\r\n\t\t * @default false\r\n\t\t * @protected\r\n\t\t **/\r\n\t\tthis._useTicks = false;\r\n\t\t\r\n\t\t/**\r\n\t\t * Indicates whether the timeline is currently registered with Tween.\r\n\t\t * @property _registered\r\n\t\t * @type {boolean}\r\n\t\t * @default false\r\n\t\t * @protected\r\n\t\t */\r\n\t\tthis._registered = false;\r\n\r\n\r\n\t\tif (props) {\r\n\t\t\tthis._useTicks = props.useTicks;\r\n\t\t\tthis.loop = props.loop;\r\n\t\t\tthis.ignoreGlobalPause = props.ignoreGlobalPause;\r\n\t\t\tprops.onChange&&this.addEventListener(\"change\", props.onChange);\r\n\t\t}\r\n\t\tif (tweens) { this.addTween.apply(this, tweens); }\r\n\t\tthis.setLabels(labels);\r\n\t\tif (props&&props.paused) { this._paused=true; }\r\n\t\telse { createjs.Tween._register(this,true); }\r\n\t\tif (props&&props.position!=null) { this.setPosition(props.position, createjs.Tween.NONE); }\r\n\t\t\r\n\t};\r\n\t\r\n\tvar p = createjs.extend(Timeline, createjs.EventDispatcher);\r\n\r\n\t// TODO: deprecated\r\n\t// p.initialize = function() {}; // searchable for devs wondering where it is. REMOVED. See docs for details.\r\n\r\n\t\r\n// events:\r\n\t/**\r\n\t * Called whenever the timeline's position changes.\r\n\t * @event change\r\n\t * @since 0.5.0\r\n\t **/\r\n\r\n\r\n// public methods:\r\n\t/**\r\n\t * Adds one or more tweens (or timelines) to this timeline. The tweens will be paused (to remove them from the\r\n\t * normal ticking system) and managed by this timeline. Adding a tween to multiple timelines will result in\r\n\t * unexpected behaviour.\r\n\t * @method addTween\r\n\t * @param {Tween} ...tween The tween(s) to add. Accepts multiple arguments.\r\n\t * @return {Tween} The first tween that was passed in.\r\n\t **/\r\n\tp.addTween = function(tween) {\r\n\t\tvar l = arguments.length;\r\n\t\tif (l > 1) {\r\n\t\t\tfor (var i=0; i<l; i++) { this.addTween(arguments[i]); }\r\n\t\t\treturn arguments[0];\r\n\t\t} else if (l == 0) { return null; }\r\n\t\tthis.removeTween(tween);\r\n\t\tthis._tweens.push(tween);\r\n\t\ttween.setPaused(true);\r\n\t\ttween._paused = false;\r\n\t\ttween._useTicks = this._useTicks;\r\n\t\tif (tween.duration > this.duration) { this.duration = tween.duration; }\r\n\t\tif (this._prevPos >= 0) { tween.setPosition(this._prevPos, createjs.Tween.NONE); }\r\n\t\treturn tween;\r\n\t};\r\n\r\n\t/**\r\n\t * Removes one or more tweens from this timeline.\r\n\t * @method removeTween\r\n\t * @param {Tween} ...tween The tween(s) to remove. Accepts multiple arguments.\r\n\t * @return Boolean Returns `true` if all of the tweens were successfully removed.\r\n\t **/\r\n\tp.removeTween = function(tween) {\r\n\t\tvar l = arguments.length;\r\n\t\tif (l > 1) {\r\n\t\t\tvar good = true;\r\n\t\t\tfor (var i=0; i<l; i++) { good = good && this.removeTween(arguments[i]); }\r\n\t\t\treturn good;\r\n\t\t} else if (l == 0) { return false; }\r\n\r\n\t\tvar tweens = this._tweens;\r\n\t\tvar i = tweens.length;\r\n\t\twhile (i--) {\r\n\t\t\tif (tweens[i] == tween) {\r\n\t\t\t\ttweens.splice(i, 1);\r\n\t\t\t\tif (tween.duration >= this.duration) { this.updateDuration(); }\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn false;\r\n\t};\r\n\r\n\t/**\r\n\t * Adds a label that can be used with {{#crossLink \"Timeline/gotoAndPlay\"}}{{/crossLink}}/{{#crossLink \"Timeline/gotoAndStop\"}}{{/crossLink}}.\r\n\t * @method addLabel\r\n\t * @param {String} label The label name.\r\n\t * @param {Number} position The position this label represents.\r\n\t **/\r\n\tp.addLabel = function(label, position) {\r\n\t\tthis._labels[label] = position;\r\n\t\tvar list = this._labelList;\r\n\t\tif (list) {\r\n\t\t\tfor (var i= 0,l=list.length; i<l; i++) { if (position < list[i].position) { break; } }\r\n\t\t\tlist.splice(i, 0, {label:label, position:position});\r\n\t\t}\r\n\t};\r\n\r\n\t/**\r\n\t * Defines labels for use with gotoAndPlay/Stop. Overwrites any previously set labels.\r\n\t * @method setLabels\r\n\t * @param {Object} o An object defining labels for using {{#crossLink \"Timeline/gotoAndPlay\"}}{{/crossLink}}/{{#crossLink \"Timeline/gotoAndStop\"}}{{/crossLink}}\r\n\t * in the form `{labelName:time}` where time is in milliseconds (or ticks if `useTicks` is `true`).\r\n\t **/\r\n\tp.setLabels = function(o) {\r\n\t\tthis._labels = o ?  o : {};\r\n\t};\r\n\r\n\t/**\r\n\t * Returns a sorted list of the labels defined on this timeline.\r\n\t * @method getLabels\r\n\t * @return {Array[Object]} A sorted array of objects with label and position properties.\r\n\t **/\r\n\tp.getLabels = function() {\r\n\t\tvar list = this._labelList;\r\n\t\tif (!list) {\r\n\t\t\tlist = this._labelList = [];\r\n\t\t\tvar labels = this._labels;\r\n\t\t\tfor (var n in labels) {\r\n\t\t\t\tlist.push({label:n, position:labels[n]});\r\n\t\t\t}\r\n\t\t\tlist.sort(function (a,b) { return a.position- b.position; });\r\n\t\t}\r\n\t\treturn list;\r\n\t};\r\n\r\n\t/**\r\n\t * Returns the name of the label on or immediately before the current position. For example, given a timeline with\r\n\t * two labels, \"first\" on frame index 4, and \"second\" on frame 8, getCurrentLabel would return:\r\n\t * <UL>\r\n\t * \t\t<LI>null if the current position is 2.</LI>\r\n\t * \t\t<LI>\"first\" if the current position is 4.</LI>\r\n\t * \t\t<LI>\"first\" if the current position is 7.</LI>\r\n\t * \t\t<LI>\"second\" if the current position is 15.</LI>\r\n\t * </UL>\r\n\t * @method getCurrentLabel\r\n\t * @return {String} The name of the current label or null if there is no label\r\n\t **/\r\n\tp.getCurrentLabel = function() {\r\n\t\tvar labels = this.getLabels();\r\n\t\tvar pos = this.position;\r\n\t\tvar l = labels.length;\r\n\t\tif (l) {\r\n\t\t\tfor (var i = 0; i<l; i++) { if (pos < labels[i].position) { break; } }\r\n\t\t\treturn (i==0) ? null : labels[i-1].label;\r\n\t\t}\r\n\t\treturn null;\r\n\t};\r\n\r\n\t/**\r\n\t * Unpauses this timeline and jumps to the specified position or label.\r\n\t * @method gotoAndPlay\r\n\t * @param {String|Number} positionOrLabel The position in milliseconds (or ticks if `useTicks` is `true`)\r\n\t * or label to jump to.\r\n\t **/\r\n\tp.gotoAndPlay = function(positionOrLabel) {\r\n\t\tthis.setPaused(false);\r\n\t\tthis._goto(positionOrLabel);\r\n\t};\r\n\r\n\t/**\r\n\t * Pauses this timeline and jumps to the specified position or label.\r\n\t * @method gotoAndStop\r\n\t * @param {String|Number} positionOrLabel The position in milliseconds (or ticks if `useTicks` is `true`) or label\r\n\t * to jump to.\r\n\t **/\r\n\tp.gotoAndStop = function(positionOrLabel) {\r\n\t\tthis.setPaused(true);\r\n\t\tthis._goto(positionOrLabel);\r\n\t};\r\n\r\n\t/**\r\n\t * Advances the timeline to the specified position.\r\n\t * @method setPosition\r\n\t * @param {Number} value The position to seek to in milliseconds (or ticks if `useTicks` is `true`).\r\n\t * @param {Number} [actionsMode] parameter specifying how actions are handled. See the Tween {{#crossLink \"Tween/setPosition\"}}{{/crossLink}}\r\n\t * method for more details.\r\n\t * @return {Boolean} Returns `true` if the timeline is complete (ie. the full timeline has run & {{#crossLink \"Timeline/loop:property\"}}{{/crossLink}}\r\n\t * is `false`).\r\n\t **/\r\n\tp.setPosition = function(value, actionsMode) {\r\n\t\tvar t = this._calcPosition(value);\r\n\t\tvar end = !this.loop && value >= this.duration;\r\n\t\tif (t == this._prevPos) { return end; }\r\n\t\tthis._prevPosition = value;\r\n\t\tthis.position = this._prevPos = t; // in case an action changes the current frame.\r\n\t\tfor (var i=0, l=this._tweens.length; i<l; i++) {\r\n\t\t\tthis._tweens[i].setPosition(t, actionsMode);\r\n\t\t\tif (t != this._prevPos) { return false; } // an action changed this timeline's position.\r\n\t\t}\r\n\t\tif (end) { this.setPaused(true); }\r\n\t\tthis.dispatchEvent(\"change\");\r\n\t\treturn end;\r\n\t};\r\n\r\n\t/**\r\n\t * Pauses or plays this timeline.\r\n\t * @method setPaused\r\n\t * @param {Boolean} value Indicates whether the tween should be paused (`true`) or played (`false`).\r\n\t **/\r\n\tp.setPaused = function(value) {\r\n\t\tthis._paused = !!value; \r\n\t\tcreatejs.Tween._register(this, !value);\r\n\t};\r\n\r\n\t/**\r\n\t * Recalculates the duration of the timeline. The duration is automatically updated when tweens are added or removed,\r\n\t * but this method is useful if you modify a tween after it was added to the timeline.\r\n\t * @method updateDuration\r\n\t **/\r\n\tp.updateDuration = function() {\r\n\t\tthis.duration = 0;\r\n\t\tfor (var i=0,l=this._tweens.length; i<l; i++) {\r\n\t\t\tvar tween = this._tweens[i];\r\n\t\t\tif (tween.duration > this.duration) { this.duration = tween.duration; }\r\n\t\t}\r\n\t};\r\n\r\n\t/**\r\n\t * Advances this timeline by the specified amount of time in milliseconds (or ticks if `useTicks` is `true`).\r\n\t * This is normally called automatically by the Tween engine (via the {{#crossLink \"Tween/tick:event\"}}{{/crossLink}}\r\n\t * event), but is exposed for advanced uses.\r\n\t * @method tick\r\n\t * @param {Number} delta The time to advance in milliseconds (or ticks if useTicks is true).\r\n\t **/\r\n\tp.tick = function(delta) {\r\n\t\tthis.setPosition(this._prevPosition+delta);\r\n\t};\r\n\r\n\t/**\r\n\t * If a numeric position is passed, it is returned unchanged. If a string is passed, the position of the\r\n\t * corresponding frame label will be returned, or `null` if a matching label is not defined.\r\n\t * @method resolve\r\n\t * @param {String|Number} positionOrLabel A numeric position value or label string.\r\n\t **/\r\n\tp.resolve = function(positionOrLabel) {\r\n\t\tvar pos = Number(positionOrLabel);\r\n\t\tif (isNaN(pos)) { pos = this._labels[positionOrLabel]; }\r\n\t\treturn pos;\r\n\t};\r\n\r\n\t/**\r\n\t* Returns a string representation of this object.\r\n\t* @method toString\r\n\t* @return {String} a string representation of the instance.\r\n\t**/\r\n\tp.toString = function() {\r\n\t\treturn \"[Timeline]\";\r\n\t};\r\n\r\n\t/**\r\n\t * @method clone\r\n\t * @protected\r\n\t **/\r\n\tp.clone = function() {\r\n\t\tthrow(\"Timeline can not be cloned.\")\r\n\t};\r\n\r\n// private methods:\r\n\t/**\r\n\t * @method _goto\r\n\t * @param {String | Number} positionOrLabel\r\n\t * @protected\r\n\t **/\r\n\tp._goto = function(positionOrLabel) {\r\n\t\tvar pos = this.resolve(positionOrLabel);\r\n\t\tif (pos != null) { this.setPosition(pos); }\r\n\t};\r\n\t\r\n\t/**\r\n\t * @method _calcPosition\r\n\t * @param {Number} value\r\n\t * @return {Number}\r\n\t * @protected\r\n\t **/\r\n\tp._calcPosition = function(value) {\r\n\t\tif (value < 0) { return 0; }\r\n\t\tif (value < this.duration) { return value; }\r\n\t\treturn this.loop ? value%this.duration : this.duration;\r\n\t};\r\n\r\n\tcreatejs.Timeline = createjs.promote(Timeline, \"EventDispatcher\");\r\n\r\n}());\r\n\r\n//##############################################################################\r\n// Ease.js\r\n//##############################################################################\r\n\r\nthis.createjs = this.createjs||{};\r\n\r\n(function() {\r\n\t\"use strict\";\r\n\r\n\t/**\r\n\t * The Ease class provides a collection of easing functions for use with TweenJS. It does not use the standard 4 param\r\n\t * easing signature. Instead it uses a single param which indicates the current linear ratio (0 to 1) of the tween.\r\n\t *\r\n\t * Most methods on Ease can be passed directly as easing functions:\r\n\t *\r\n\t *      Tween.get(target).to({x:100}, 500, Ease.linear);\r\n\t *\r\n\t * However, methods beginning with \"get\" will return an easing function based on parameter values:\r\n\t *\r\n\t *      Tween.get(target).to({y:200}, 500, Ease.getPowIn(2.2));\r\n\t *\r\n\t * Please see the <a href=\"http://www.createjs.com/Demos/TweenJS/Tween_SparkTable\">spark table demo</a> for an\r\n\t * overview of the different ease types on <a href=\"http://tweenjs.com\">TweenJS.com</a>.\r\n\t *\r\n\t * <em>Equations derived from work by Robert Penner.</em>\r\n\t * @class Ease\r\n\t * @static\r\n\t **/\r\n\tfunction Ease() {\r\n\t\tthrow \"Ease cannot be instantiated.\";\r\n\t}\r\n\r\n\r\n// static methods and properties\r\n\t/**\r\n\t * @method linear\r\n\t * @param {Number} t\r\n\t * @static\r\n\t * @return {Number}\r\n\t **/\r\n\tEase.linear = function(t) { return t; };\r\n\r\n\t/**\r\n\t * Identical to linear.\r\n\t * @method none\r\n\t * @param {Number} t\r\n\t * @static\r\n\t * @return {Number}\r\n\t **/\r\n\tEase.none = Ease.linear;\r\n\r\n\t/**\r\n\t * Mimics the simple -100 to 100 easing in Flash Pro.\r\n\t * @method get\r\n\t * @param {Number} amount A value from -1 (ease in) to 1 (ease out) indicating the strength and direction of the ease.\r\n\t * @static\r\n\t * @return {Function}\r\n\t **/\r\n\tEase.get = function(amount) {\r\n\t\tif (amount < -1) { amount = -1; }\r\n\t\tif (amount > 1) { amount = 1; }\r\n\t\treturn function(t) {\r\n\t\t\tif (amount==0) { return t; }\r\n\t\t\tif (amount<0) { return t*(t*-amount+1+amount); }\r\n\t\t\treturn t*((2-t)*amount+(1-amount));\r\n\t\t};\r\n\t};\r\n\r\n\t/**\r\n\t * Configurable exponential ease.\r\n\t * @method getPowIn\r\n\t * @param {Number} pow The exponent to use (ex. 3 would return a cubic ease).\r\n\t * @static\r\n\t * @return {Function}\r\n\t **/\r\n\tEase.getPowIn = function(pow) {\r\n\t\treturn function(t) {\r\n\t\t\treturn Math.pow(t,pow);\r\n\t\t};\r\n\t};\r\n\r\n\t/**\r\n\t * Configurable exponential ease.\r\n\t * @method getPowOut\r\n\t * @param {Number} pow The exponent to use (ex. 3 would return a cubic ease).\r\n\t * @static\r\n\t * @return {Function}\r\n\t **/\r\n\tEase.getPowOut = function(pow) {\r\n\t\treturn function(t) {\r\n\t\t\treturn 1-Math.pow(1-t,pow);\r\n\t\t};\r\n\t};\r\n\r\n\t/**\r\n\t * Configurable exponential ease.\r\n\t * @method getPowInOut\r\n\t * @param {Number} pow The exponent to use (ex. 3 would return a cubic ease).\r\n\t * @static\r\n\t * @return {Function}\r\n\t **/\r\n\tEase.getPowInOut = function(pow) {\r\n\t\treturn function(t) {\r\n\t\t\tif ((t*=2)<1) return 0.5*Math.pow(t,pow);\r\n\t\t\treturn 1-0.5*Math.abs(Math.pow(2-t,pow));\r\n\t\t};\r\n\t};\r\n\r\n\t/**\r\n\t * @method quadIn\r\n\t * @param {Number} t\r\n\t * @static\r\n\t * @return {Number}\r\n\t **/\r\n\tEase.quadIn = Ease.getPowIn(2);\r\n\t/**\r\n\t * @method quadOut\r\n\t * @param {Number} t\r\n\t * @static\r\n\t * @return {Number}\r\n\t **/\r\n\tEase.quadOut = Ease.getPowOut(2);\r\n\t/**\r\n\t * @method quadInOut\r\n\t * @param {Number} t\r\n\t * @static\r\n\t * @return {Number}\r\n\t **/\r\n\tEase.quadInOut = Ease.getPowInOut(2);\r\n\r\n\t/**\r\n\t * @method cubicIn\r\n\t * @param {Number} t\r\n\t * @static\r\n\t * @return {Number}\r\n\t **/\r\n\tEase.cubicIn = Ease.getPowIn(3);\r\n\t/**\r\n\t * @method cubicOut\r\n\t * @param {Number} t\r\n\t * @static\r\n\t * @return {Number}\r\n\t **/\r\n\tEase.cubicOut = Ease.getPowOut(3);\r\n\t/**\r\n\t * @method cubicInOut\r\n\t * @param {Number} t\r\n\t * @static\r\n\t * @return {Number}\r\n\t **/\r\n\tEase.cubicInOut = Ease.getPowInOut(3);\r\n\r\n\t/**\r\n\t * @method quartIn\r\n\t * @param {Number} t\r\n\t * @static\r\n\t * @return {Number}\r\n\t **/\r\n\tEase.quartIn = Ease.getPowIn(4);\r\n\t/**\r\n\t * @method quartOut\r\n\t * @param {Number} t\r\n\t * @static\r\n\t * @return {Number}\r\n\t **/\r\n\tEase.quartOut = Ease.getPowOut(4);\r\n\t/**\r\n\t * @method quartInOut\r\n\t * @param {Number} t\r\n\t * @static\r\n\t * @return {Number}\r\n\t **/\r\n\tEase.quartInOut = Ease.getPowInOut(4);\r\n\r\n\t/**\r\n\t * @method quintIn\r\n\t * @param {Number} t\r\n\t * @static\r\n\t * @return {Number}\r\n\t **/\r\n\tEase.quintIn = Ease.getPowIn(5);\r\n\t/**\r\n\t * @method quintOut\r\n\t * @param {Number} t\r\n\t * @static\r\n\t * @return {Number}\r\n\t **/\r\n\tEase.quintOut = Ease.getPowOut(5);\r\n\t/**\r\n\t * @method quintInOut\r\n\t * @param {Number} t\r\n\t * @static\r\n\t * @return {Number}\r\n\t **/\r\n\tEase.quintInOut = Ease.getPowInOut(5);\r\n\r\n\t/**\r\n\t * @method sineIn\r\n\t * @param {Number} t\r\n\t * @static\r\n\t * @return {Number}\r\n\t **/\r\n\tEase.sineIn = function(t) {\r\n\t\treturn 1-Math.cos(t*Math.PI/2);\r\n\t};\r\n\r\n\t/**\r\n\t * @method sineOut\r\n\t * @param {Number} t\r\n\t * @static\r\n\t * @return {Number}\r\n\t **/\r\n\tEase.sineOut = function(t) {\r\n\t\treturn Math.sin(t*Math.PI/2);\r\n\t};\r\n\r\n\t/**\r\n\t * @method sineInOut\r\n\t * @param {Number} t\r\n\t * @static\r\n\t * @return {Number}\r\n\t **/\r\n\tEase.sineInOut = function(t) {\r\n\t\treturn -0.5*(Math.cos(Math.PI*t) - 1);\r\n\t};\r\n\r\n\t/**\r\n\t * Configurable \"back in\" ease.\r\n\t * @method getBackIn\r\n\t * @param {Number} amount The strength of the ease.\r\n\t * @static\r\n\t * @return {Function}\r\n\t **/\r\n\tEase.getBackIn = function(amount) {\r\n\t\treturn function(t) {\r\n\t\t\treturn t*t*((amount+1)*t-amount);\r\n\t\t};\r\n\t};\r\n\t/**\r\n\t * @method backIn\r\n\t * @param {Number} t\r\n\t * @static\r\n\t * @return {Number}\r\n\t **/\r\n\tEase.backIn = Ease.getBackIn(1.7);\r\n\r\n\t/**\r\n\t * Configurable \"back out\" ease.\r\n\t * @method getBackOut\r\n\t * @param {Number} amount The strength of the ease.\r\n\t * @static\r\n\t * @return {Function}\r\n\t **/\r\n\tEase.getBackOut = function(amount) {\r\n\t\treturn function(t) {\r\n\t\t\treturn (--t*t*((amount+1)*t + amount) + 1);\r\n\t\t};\r\n\t};\r\n\t/**\r\n\t * @method backOut\r\n\t * @param {Number} t\r\n\t * @static\r\n\t * @return {Number}\r\n\t **/\r\n\tEase.backOut = Ease.getBackOut(1.7);\r\n\r\n\t/**\r\n\t * Configurable \"back in out\" ease.\r\n\t * @method getBackInOut\r\n\t * @param {Number} amount The strength of the ease.\r\n\t * @static\r\n\t * @return {Function}\r\n\t **/\r\n\tEase.getBackInOut = function(amount) {\r\n\t\tamount*=1.525;\r\n\t\treturn function(t) {\r\n\t\t\tif ((t*=2)<1) return 0.5*(t*t*((amount+1)*t-amount));\r\n\t\t\treturn 0.5*((t-=2)*t*((amount+1)*t+amount)+2);\r\n\t\t};\r\n\t};\r\n\t/**\r\n\t * @method backInOut\r\n\t * @param {Number} t\r\n\t * @static\r\n\t * @return {Number}\r\n\t **/\r\n\tEase.backInOut = Ease.getBackInOut(1.7);\r\n\r\n\t/**\r\n\t * @method circIn\r\n\t * @param {Number} t\r\n\t * @static\r\n\t * @return {Number}\r\n\t **/\r\n\tEase.circIn = function(t) {\r\n\t\treturn -(Math.sqrt(1-t*t)- 1);\r\n\t};\r\n\r\n\t/**\r\n\t * @method circOut\r\n\t * @param {Number} t\r\n\t * @static\r\n\t * @return {Number}\r\n\t **/\r\n\tEase.circOut = function(t) {\r\n\t\treturn Math.sqrt(1-(--t)*t);\r\n\t};\r\n\r\n\t/**\r\n\t * @method circInOut\r\n\t * @param {Number} t\r\n\t * @static\r\n\t * @return {Number}\r\n\t **/\r\n\tEase.circInOut = function(t) {\r\n\t\tif ((t*=2) < 1) return -0.5*(Math.sqrt(1-t*t)-1);\r\n\t\treturn 0.5*(Math.sqrt(1-(t-=2)*t)+1);\r\n\t};\r\n\r\n\t/**\r\n\t * @method bounceIn\r\n\t * @param {Number} t\r\n\t * @static\r\n\t * @return {Number}\r\n\t **/\r\n\tEase.bounceIn = function(t) {\r\n\t\treturn 1-Ease.bounceOut(1-t);\r\n\t};\r\n\r\n\t/**\r\n\t * @method bounceOut\r\n\t * @param {Number} t\r\n\t * @static\r\n\t * @return {Number}\r\n\t **/\r\n\tEase.bounceOut = function(t) {\r\n\t\tif (t < 1/2.75) {\r\n\t\t\treturn (7.5625*t*t);\r\n\t\t} else if (t < 2/2.75) {\r\n\t\t\treturn (7.5625*(t-=1.5/2.75)*t+0.75);\r\n\t\t} else if (t < 2.5/2.75) {\r\n\t\t\treturn (7.5625*(t-=2.25/2.75)*t+0.9375);\r\n\t\t} else {\r\n\t\t\treturn (7.5625*(t-=2.625/2.75)*t +0.984375);\r\n\t\t}\r\n\t};\r\n\r\n\t/**\r\n\t * @method bounceInOut\r\n\t * @param {Number} t\r\n\t * @static\r\n\t * @return {Number}\r\n\t **/\r\n\tEase.bounceInOut = function(t) {\r\n\t\tif (t<0.5) return Ease.bounceIn (t*2) * .5;\r\n\t\treturn Ease.bounceOut(t*2-1)*0.5+0.5;\r\n\t};\r\n\r\n\t/**\r\n\t * Configurable elastic ease.\r\n\t * @method getElasticIn\r\n\t * @param {Number} amplitude\r\n\t * @param {Number} period\r\n\t * @static\r\n\t * @return {Function}\r\n\t **/\r\n\tEase.getElasticIn = function(amplitude,period) {\r\n\t\tvar pi2 = Math.PI*2;\r\n\t\treturn function(t) {\r\n\t\t\tif (t==0 || t==1) return t;\r\n\t\t\tvar s = period/pi2*Math.asin(1/amplitude);\r\n\t\t\treturn -(amplitude*Math.pow(2,10*(t-=1))*Math.sin((t-s)*pi2/period));\r\n\t\t};\r\n\t};\r\n\t/**\r\n\t * @method elasticIn\r\n\t * @param {Number} t\r\n\t * @static\r\n\t * @return {Number}\r\n\t **/\r\n\tEase.elasticIn = Ease.getElasticIn(1,0.3);\r\n\r\n\t/**\r\n\t * Configurable elastic ease.\r\n\t * @method getElasticOut\r\n\t * @param {Number} amplitude\r\n\t * @param {Number} period\r\n\t * @static\r\n\t * @return {Function}\r\n\t **/\r\n\tEase.getElasticOut = function(amplitude,period) {\r\n\t\tvar pi2 = Math.PI*2;\r\n\t\treturn function(t) {\r\n\t\t\tif (t==0 || t==1) return t;\r\n\t\t\tvar s = period/pi2 * Math.asin(1/amplitude);\r\n\t\t\treturn (amplitude*Math.pow(2,-10*t)*Math.sin((t-s)*pi2/period )+1);\r\n\t\t};\r\n\t};\r\n\t/**\r\n\t * @method elasticOut\r\n\t * @param {Number} t\r\n\t * @static\r\n\t * @return {Number}\r\n\t **/\r\n\tEase.elasticOut = Ease.getElasticOut(1,0.3);\r\n\r\n\t/**\r\n\t * Configurable elastic ease.\r\n\t * @method getElasticInOut\r\n\t * @param {Number} amplitude\r\n\t * @param {Number} period\r\n\t * @static\r\n\t * @return {Function}\r\n\t **/\r\n\tEase.getElasticInOut = function(amplitude,period) {\r\n\t\tvar pi2 = Math.PI*2;\r\n\t\treturn function(t) {\r\n\t\t\tvar s = period/pi2 * Math.asin(1/amplitude);\r\n\t\t\tif ((t*=2)<1) return -0.5*(amplitude*Math.pow(2,10*(t-=1))*Math.sin( (t-s)*pi2/period ));\r\n\t\t\treturn amplitude*Math.pow(2,-10*(t-=1))*Math.sin((t-s)*pi2/period)*0.5+1;\r\n\t\t};\r\n\t};\r\n\t/**\r\n\t * @method elasticInOut\r\n\t * @param {Number} t\r\n\t * @static\r\n\t * @return {Number}\r\n\t **/\r\n\tEase.elasticInOut = Ease.getElasticInOut(1,0.3*1.5);\r\n\r\n\tcreatejs.Ease = Ease;\r\n\r\n}());\r\n\r\n//##############################################################################\r\n// MotionGuidePlugin.js\r\n//##############################################################################\r\n\r\nthis.createjs = this.createjs||{};\r\n\r\n(function() {\r\n\t\"use strict\";\r\n\r\n\t/**\r\n\t * A TweenJS plugin for working with motion guides.\r\n\t *\r\n\t * To use, install the plugin after TweenJS has loaded. Next tween the 'guide' property with an object as detailed below.\r\n\t *\r\n\t *       createjs.MotionGuidePlugin.install();\r\n\t *\r\n\t * <h4>Example</h4>\r\n\t *\r\n\t *      // Using a Motion Guide\r\n\t *\t    createjs.Tween.get(target).to({guide:{ path:[0,0, 0,200,200,200, 200,0,0,0] }},7000);\r\n\t *\t    // Visualizing the line\r\n\t *\t    graphics.moveTo(0,0).curveTo(0,200,200,200).curveTo(200,0,0,0);\r\n\t *\r\n\t * Each path needs pre-computation to ensure there's fast performance. Because of the pre-computation there's no\r\n\t * built in support for path changes mid tween. These are the Guide Object's properties:<UL>\r\n\t *      <LI> path: Required, Array : The x/y points used to draw the path with a moveTo and 1 to n curveTo calls.</LI>\r\n\t *      <LI> start: Optional, 0-1 : Initial position, default 0 except for when continuing along the same path.</LI>\r\n\t *      <LI> end: Optional, 0-1 : Final position, default 1 if not specified.</LI>\r\n\t *      <LI> orient: Optional, string : \"fixed\"/\"auto\"/\"cw\"/\"ccw\"<UL>\r\n\t *\t\t\t\t<LI>\"fixed\" forces the object to face down the path all movement (relative to start rotation),</LI>\r\n\t *      \t\t<LI>\"auto\" rotates the object along the path relative to the line.</LI>\r\n\t *      \t\t<LI>\"cw\"/\"ccw\" force clockwise or counter clockwise rotations including flash like behaviour</LI>\r\n\t * \t\t</UL></LI>\r\n\t * </UL>\r\n\t * Guide objects should not be shared between tweens even if all properties are identical, the library stores\r\n\t * information on these objects in the background and sharing them can cause unexpected behaviour. Values\r\n\t * outside 0-1 range of tweens will be a \"best guess\" from the appropriate part of the defined curve.\r\n\t *\r\n\t * @class MotionGuidePlugin\r\n\t * @constructor\r\n\t **/\r\n\tfunction MotionGuidePlugin() {\r\n\t\tthrow(\"MotionGuidePlugin cannot be instantiated.\")\r\n\t};\r\n\r\n\r\n// static properties:\r\n\t/**\r\n\t * @property priority\r\n\t * @protected\r\n\t * @static\r\n\t **/\r\n\tMotionGuidePlugin.priority = 0; // high priority, should run sooner\r\n\r\n\t/**\r\n\t * @property temporary variable storage\r\n\t * @private\r\n\t * @static\r\n\t */\r\n\tMotionGuidePlugin._rotOffS;\r\n\t/**\r\n\t * @property temporary variable storage\r\n\t * @private\r\n\t * @static\r\n\t */\r\n\tMotionGuidePlugin._rotOffE;\r\n\t/**\r\n\t * @property temporary variable storage\r\n\t * @private\r\n\t * @static\r\n\t */\r\n\tMotionGuidePlugin._rotNormS;\r\n\t/**\r\n\t * @property temporary variable storage\r\n\t * @private\r\n\t * @static\r\n\t */\r\n\tMotionGuidePlugin._rotNormE;\r\n\r\n\r\n// static methods\r\n\t/**\r\n\t * Installs this plugin for use with TweenJS. Call this once after TweenJS is loaded to enable this plugin.\r\n\t * @method install\r\n\t * @static\r\n\t **/\r\n\tMotionGuidePlugin.install = function() {\r\n\t\tcreatejs.Tween.installPlugin(MotionGuidePlugin, [\"guide\", \"x\", \"y\", \"rotation\"]);\r\n\t\treturn createjs.Tween.IGNORE;\r\n\t};\r\n\r\n\t/**\r\n\t * @method init\r\n\t * @protected\r\n\t * @static\r\n\t **/\r\n\tMotionGuidePlugin.init = function(tween, prop, value) {\r\n\t\tvar target = tween.target;\r\n\t\tif(!target.hasOwnProperty(\"x\")){ target.x = 0; }\r\n\t\tif(!target.hasOwnProperty(\"y\")){ target.y = 0; }\r\n\t\tif(!target.hasOwnProperty(\"rotation\")){ target.rotation = 0; }\r\n\r\n\t\tif(prop==\"rotation\"){ tween.__needsRot = true; }\r\n\t\treturn prop==\"guide\"?null:value;\r\n\t};\r\n\r\n\t/**\r\n\t * @method step\r\n\t * @protected\r\n\t * @static\r\n\t **/\r\n\tMotionGuidePlugin.step = function(tween, prop, startValue, endValue, injectProps) {\r\n\t\t// other props\r\n\t\tif(prop == \"rotation\"){\r\n\t\t\ttween.__rotGlobalS = startValue;\r\n\t\t\ttween.__rotGlobalE = endValue;\r\n\t\t\tMotionGuidePlugin.testRotData(tween, injectProps);\r\n\t\t}\r\n\t\tif(prop != \"guide\"){ return endValue; }\r\n\r\n\t\t// guide only information - Start -\r\n\t\tvar temp, data = endValue;\r\n\t\tif(!data.hasOwnProperty(\"path\")){ data.path = []; }\r\n\t\tvar path = data.path;\r\n\t\tif(!data.hasOwnProperty(\"end\")){ data.end = 1; }\r\n\t\tif(!data.hasOwnProperty(\"start\")){\r\n\t\t\tdata.start = (startValue&&startValue.hasOwnProperty(\"end\")&&startValue.path===path)?startValue.end:0;\r\n\t\t}\r\n\r\n\t\t// Figure out subline information\r\n\t\tif(data.hasOwnProperty(\"_segments\") && data._length){ return endValue; }\r\n\t\tvar l = path.length;\r\n\t\tvar accuracy = 10;\t\t// Adjust to improve line following precision but sacrifice performance (# of seg)\r\n\t\tif(l >= 6 && (l-2) % 4 == 0){\t// Enough points && contains correct number per entry ignoring start\r\n\t\t\tdata._segments = [];\r\n\t\t\tdata._length = 0;\r\n\t\t\tfor(var i=2; i<l; i+=4){\r\n\t\t\t\tvar sx = path[i-2], sy = path[i-1];\r\n\t\t\t\tvar cx = path[i+0], cy = path[i+1];\r\n\t\t\t\tvar ex = path[i+2], ey = path[i+3];\r\n\t\t\t\tvar oldX = sx, oldY = sy;\r\n\t\t\t\tvar tempX, tempY, total = 0;\r\n\t\t\t\tvar sublines = [];\r\n\t\t\t\tfor(var j=1; j<=accuracy; j++){\r\n\t\t\t\t\tvar t = j/accuracy;\r\n\t\t\t\t\tvar inv = 1 - t;\r\n\t\t\t\t\ttempX = inv*inv * sx + 2 * inv * t * cx + t*t * ex;\r\n\t\t\t\t\ttempY = inv*inv * sy + 2 * inv * t * cy + t*t * ey;\r\n\t\t\t\t\ttotal += sublines[sublines.push(Math.sqrt((temp=tempX-oldX)*temp + (temp=tempY-oldY)*temp))-1];\r\n\t\t\t\t\toldX = tempX;\r\n\t\t\t\t\toldY = tempY;\r\n\t\t\t\t}\r\n\t\t\t\tdata._segments.push(total);\r\n\t\t\t\tdata._segments.push(sublines);\r\n\t\t\t\tdata._length += total;\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tthrow(\"invalid 'path' data, please see documentation for valid paths\");\r\n\t\t}\r\n\r\n\t\t// Setup x/y tweens\r\n\t\ttemp = data.orient;\r\n\t\tdata.orient = true;\r\n\t\tvar o = {};\r\n\t\tMotionGuidePlugin.calc(data, data.start, o);\r\n\t\ttween.__rotPathS = Number(o.rotation.toFixed(5));\r\n\t\tMotionGuidePlugin.calc(data, data.end, o);\r\n\t\ttween.__rotPathE = Number(o.rotation.toFixed(5));\r\n\t\tdata.orient = false;\t//here and now we don't know if we need to\r\n\t\tMotionGuidePlugin.calc(data, data.end, injectProps);\r\n\t\tdata.orient = temp;\r\n\r\n\t\t// Setup rotation properties\r\n\t\tif(!data.orient){ return endValue; }\r\n\t\ttween.__guideData = data;\r\n\t\tMotionGuidePlugin.testRotData(tween, injectProps);\r\n\t\treturn endValue;\r\n\t};\r\n\r\n\t/**\r\n\t * @method testRotData\r\n\t * @protected\r\n\t * @static\r\n\t **/\r\n\tMotionGuidePlugin.testRotData = function(tween, injectProps){\r\n\r\n\t\t// no rotation informat? if we need it come back, if we don't use 0 & ensure we have guide data\r\n\t\tif(tween.__rotGlobalS === undefined || tween.__rotGlobalE === undefined){\r\n\t\t\tif(tween.__needsRot){ return; }\r\n\t\t\tif(tween._curQueueProps.rotation !== undefined){\r\n\t\t\t\ttween.__rotGlobalS = tween.__rotGlobalE = tween._curQueueProps.rotation;\r\n\t\t\t} else {\r\n\t\t\t\ttween.__rotGlobalS = tween.__rotGlobalE = injectProps.rotation = tween.target.rotation || 0;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif(tween.__guideData === undefined){ return; }\r\n\r\n\t\t// Process rotation properties\r\n\t\tvar data = tween.__guideData;\r\n\t\tvar rotGlobalD = tween.__rotGlobalE - tween.__rotGlobalS;\r\n\t\tvar rotPathD = tween.__rotPathE - tween.__rotPathS;\r\n\t\tvar rot = rotGlobalD - rotPathD;\r\n\r\n\t\tif(data.orient == \"auto\"){\r\n\t\t\tif(rot > 180){\t\t\trot -= 360; }\r\n\t\t\telse if(rot < -180){\trot += 360; }\r\n\r\n\t\t} else if(data.orient == \"cw\"){\r\n\t\t\twhile(rot < 0){ rot += 360; }\r\n\t\t\tif(rot == 0 && rotGlobalD > 0 && rotGlobalD != 180){ rot += 360; }\r\n\r\n\t\t} else if(data.orient == \"ccw\"){\r\n\t\t\trot = rotGlobalD - ((rotPathD > 180)?(360-rotPathD):(rotPathD));\t// sign flipping on path\r\n\t\t\twhile(rot > 0){ rot -= 360; }\r\n\t\t\tif(rot == 0 && rotGlobalD < 0 && rotGlobalD != -180){ rot -= 360; }\r\n\t\t}\r\n\r\n\t\tdata.rotDelta = rot;\r\n\t\tdata.rotOffS = tween.__rotGlobalS - tween.__rotPathS;\r\n\r\n\t\t// reset\r\n\t\ttween.__rotGlobalS = tween.__rotGlobalE = tween.__guideData = tween.__needsRot = undefined;\r\n\t};\r\n\r\n\t/**\r\n\t * @method tween\r\n\t * @protected\r\n\t * @static\r\n\t **/\r\n\tMotionGuidePlugin.tween = function(tween, prop, value, startValues, endValues, ratio, wait, end) {\r\n\t\tvar data = endValues.guide;\r\n\t\tif(data == undefined || data === startValues.guide){ return value; }\r\n\t\tif(data.lastRatio != ratio){\r\n\t\t\t// first time through so calculate what I need to\r\n\t\t\tvar t = ((data.end-data.start)*(wait?data.end:ratio)+data.start);\r\n\t\t\tMotionGuidePlugin.calc(data, t, tween.target);\r\n\t\t\tswitch(data.orient){\r\n\t\t\t\tcase \"cw\":\t\t// mix in the original rotation\r\n\t\t\t\tcase \"ccw\":\r\n\t\t\t\tcase \"auto\": tween.target.rotation += data.rotOffS + data.rotDelta*ratio; break;\r\n\t\t\t\tcase \"fixed\":\t// follow fixed behaviour to solve potential issues\r\n\t\t\t\tdefault: tween.target.rotation += data.rotOffS; break;\r\n\t\t\t}\r\n\t\t\tdata.lastRatio = ratio;\r\n\t\t}\r\n\t\tif(prop == \"rotation\" && ((!data.orient) || data.orient == \"false\")){ return value; }\r\n\t\treturn tween.target[prop];\r\n\t};\r\n\r\n\t/**\r\n\t * Determine the appropriate x/y/rotation information about a path for a given ratio along the path.\r\n\t * Assumes a path object with all optional parameters specified.\r\n\t * @param data Data object you would pass to the \"guide:\" property in a Tween\r\n\t * @param ratio 0-1 Distance along path, values outside 0-1 are \"best guess\"\r\n\t * @param target Object to copy the results onto, will use a new object if not supplied.\r\n\t * @return {Object} The target object or a new object w/ the tweened properties\r\n\t * @static\r\n\t */\r\n\tMotionGuidePlugin.calc = function(data, ratio, target) {\r\n\t\tif(data._segments == undefined){ throw(\"Missing critical pre-calculated information, please file a bug\"); }\r\n\t\tif(target == undefined){ target = {x:0, y:0, rotation:0}; }\r\n\t\tvar seg = data._segments;\r\n\t\tvar path = data.path;\r\n\r\n\t\t// find segment\r\n\t\tvar pos = data._length * ratio;\r\n\t\tvar cap = seg.length - 2;\r\n\t\tvar n = 0;\r\n\t\twhile(pos > seg[n] && n < cap){\r\n\t\t\tpos -= seg[n];\r\n\t\t\tn+=2;\r\n\t\t}\r\n\r\n\t\t// find subline\r\n\t\tvar sublines = seg[n+1];\r\n\t\tvar i = 0;\r\n\t\tcap = sublines.length-1;\r\n\t\twhile(pos > sublines[i] && i < cap){\r\n\t\t\tpos -= sublines[i];\r\n\t\t\ti++;\r\n\t\t}\r\n\t\tvar t = (i/++cap)+(pos/(cap*sublines[i]));\r\n\r\n\t\t// find x/y\r\n\t\tn = (n*2)+2;\r\n\t\tvar inv = 1 - t;\r\n\t\ttarget.x = inv*inv * path[n-2] + 2 * inv * t * path[n+0] + t*t * path[n+2];\r\n\t\ttarget.y = inv*inv * path[n-1] + 2 * inv * t * path[n+1] + t*t * path[n+3];\r\n\r\n\t\t// orientation\r\n\t\tif(data.orient){\r\n\t\t\ttarget.rotation = 57.2957795 * Math.atan2(\r\n\t\t\t\t(path[n+1]-path[n-1])*inv + (path[n+3]-path[n+1])*t,\r\n\t\t\t\t(path[n+0]-path[n-2])*inv + (path[n+2]-path[n+0])*t);\r\n\t\t}\r\n\r\n\t\treturn target;\r\n\t};\r\n\r\n\tcreatejs.MotionGuidePlugin = MotionGuidePlugin;\r\n\r\n}());\r\n\r\n//##############################################################################\r\n// version.js\r\n//##############################################################################\r\n\r\nthis.createjs = this.createjs || {};\r\n\r\n(function() {\r\n\t\"use strict\";\r\n\r\n\t/**\r\n\t * Static class holding library specific information such as the version and buildDate of\r\n\t * the library.\r\n\t * @class TweenJS\r\n\t **/\r\n\tvar s = createjs.TweenJS = createjs.TweenJS || {};\r\n\r\n\t/**\r\n\t * The version string for this release.\r\n\t * @property version\r\n\t * @type String\r\n\t * @static\r\n\t **/\r\n\ts.version = /*=version*/\"0.6.2\"; // injected by build process\r\n\r\n\t/**\r\n\t * The build date for this release in UTC format.\r\n\t * @property buildDate\r\n\t * @type String\r\n\t * @static\r\n\t **/\r\n\ts.buildDate = /*=date*/\"Thu, 26 Nov 2015 20:44:31 GMT\"; // injected by build process\r\n\r\n})();\n}.call(window));","/*** IMPORTS FROM imports-loader ***/\n(function() {\n\n/*!\r\n* SoundJS\r\n* Visit http://createjs.com/ for documentation, updates and examples.\r\n*\r\n* Copyright (c) 2010 gskinner.com, inc.\r\n*\r\n* Permission is hereby granted, free of charge, to any person\r\n* obtaining a copy of this software and associated documentation\r\n* files (the \"Software\"), to deal in the Software without\r\n* restriction, including without limitation the rights to use,\r\n* copy, modify, merge, publish, distribute, sublicense, and/or sell\r\n* copies of the Software, and to permit persons to whom the\r\n* Software is furnished to do so, subject to the following\r\n* conditions:\r\n*\r\n* The above copyright notice and this permission notice shall be\r\n* included in all copies or substantial portions of the Software.\r\n*\r\n* THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\r\n* EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES\r\n* OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\r\n* NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\r\n* HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,\r\n* WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\r\n* FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR\r\n* OTHER DEALINGS IN THE SOFTWARE.\r\n*/\r\n\r\n\r\n//##############################################################################\r\n// version.js\r\n//##############################################################################\r\n\r\nthis.createjs = this.createjs || {};\r\n\r\n(function () {\r\n\r\n\t/**\r\n\t * Static class holding library specific information such as the version and buildDate of the library.\r\n\t * The SoundJS class has been renamed {{#crossLink \"Sound\"}}{{/crossLink}}.  Please see {{#crossLink \"Sound\"}}{{/crossLink}}\r\n\t * for information on using sound.\r\n\t * @class SoundJS\r\n\t **/\r\n\tvar s = createjs.SoundJS = createjs.SoundJS || {};\r\n\r\n\t/**\r\n\t * The version string for this release.\r\n\t * @property version\r\n\t * @type String\r\n\t * @static\r\n\t **/\r\n\ts.version = /*=version*/\"0.6.2\"; // injected by build process\r\n\r\n\t/**\r\n\t * The build date for this release in UTC format.\r\n\t * @property buildDate\r\n\t * @type String\r\n\t * @static\r\n\t **/\r\n\ts.buildDate = /*=date*/\"Thu, 26 Nov 2015 20:44:31 GMT\"; // injected by build process\r\n\r\n})();\r\n\r\n//##############################################################################\r\n// extend.js\r\n//##############################################################################\r\n\r\nthis.createjs = this.createjs||{};\r\n\r\n/**\r\n * @class Utility Methods\r\n */\r\n\r\n/**\r\n * Sets up the prototype chain and constructor property for a new class.\r\n *\r\n * This should be called right after creating the class constructor.\r\n *\r\n * \tfunction MySubClass() {}\r\n * \tcreatejs.extend(MySubClass, MySuperClass);\r\n * \tMySubClass.prototype.doSomething = function() { }\r\n *\r\n * \tvar foo = new MySubClass();\r\n * \tconsole.log(foo instanceof MySuperClass); // true\r\n * \tconsole.log(foo.prototype.constructor === MySubClass); // true\r\n *\r\n * @method extend\r\n * @param {Function} subclass The subclass.\r\n * @param {Function} superclass The superclass to extend.\r\n * @return {Function} Returns the subclass's new prototype.\r\n */\r\ncreatejs.extend = function(subclass, superclass) {\r\n\t\"use strict\";\r\n\r\n\tfunction o() { this.constructor = subclass; }\r\n\to.prototype = superclass.prototype;\r\n\treturn (subclass.prototype = new o());\r\n};\r\n\r\n//##############################################################################\r\n// promote.js\r\n//##############################################################################\r\n\r\nthis.createjs = this.createjs||{};\r\n\r\n/**\r\n * @class Utility Methods\r\n */\r\n\r\n/**\r\n * Promotes any methods on the super class that were overridden, by creating an alias in the format `prefix_methodName`.\r\n * It is recommended to use the super class's name as the prefix.\r\n * An alias to the super class's constructor is always added in the format `prefix_constructor`.\r\n * This allows the subclass to call super class methods without using `function.call`, providing better performance.\r\n *\r\n * For example, if `MySubClass` extends `MySuperClass`, and both define a `draw` method, then calling `promote(MySubClass, \"MySuperClass\")`\r\n * would add a `MySuperClass_constructor` method to MySubClass and promote the `draw` method on `MySuperClass` to the\r\n * prototype of `MySubClass` as `MySuperClass_draw`.\r\n *\r\n * This should be called after the class's prototype is fully defined.\r\n *\r\n * \tfunction ClassA(name) {\r\n * \t\tthis.name = name;\r\n * \t}\r\n * \tClassA.prototype.greet = function() {\r\n * \t\treturn \"Hello \"+this.name;\r\n * \t}\r\n *\r\n * \tfunction ClassB(name, punctuation) {\r\n * \t\tthis.ClassA_constructor(name);\r\n * \t\tthis.punctuation = punctuation;\r\n * \t}\r\n * \tcreatejs.extend(ClassB, ClassA);\r\n * \tClassB.prototype.greet = function() {\r\n * \t\treturn this.ClassA_greet()+this.punctuation;\r\n * \t}\r\n * \tcreatejs.promote(ClassB, \"ClassA\");\r\n *\r\n * \tvar foo = new ClassB(\"World\", \"!?!\");\r\n * \tconsole.log(foo.greet()); // Hello World!?!\r\n *\r\n * @method promote\r\n * @param {Function} subclass The class to promote super class methods on.\r\n * @param {String} prefix The prefix to add to the promoted method names. Usually the name of the superclass.\r\n * @return {Function} Returns the subclass.\r\n */\r\ncreatejs.promote = function(subclass, prefix) {\r\n\t\"use strict\";\r\n\r\n\tvar subP = subclass.prototype, supP = (Object.getPrototypeOf&&Object.getPrototypeOf(subP))||subP.__proto__;\r\n\tif (supP) {\r\n\t\tsubP[(prefix+=\"_\") + \"constructor\"] = supP.constructor; // constructor is not always innumerable\r\n\t\tfor (var n in supP) {\r\n\t\t\tif (subP.hasOwnProperty(n) && (typeof supP[n] == \"function\")) { subP[prefix + n] = supP[n]; }\r\n\t\t}\r\n\t}\r\n\treturn subclass;\r\n};\r\n\r\n//##############################################################################\r\n// IndexOf.js\r\n//##############################################################################\r\n\r\nthis.createjs = this.createjs||{};\r\n\r\n/**\r\n * @class Utility Methods\r\n */\r\n\r\n/**\r\n * Finds the first occurrence of a specified value searchElement in the passed in array, and returns the index of\r\n * that value.  Returns -1 if value is not found.\r\n *\r\n *      var i = createjs.indexOf(myArray, myElementToFind);\r\n *\r\n * @method indexOf\r\n * @param {Array} array Array to search for searchElement\r\n * @param searchElement Element to find in array.\r\n * @return {Number} The first index of searchElement in array.\r\n */\r\ncreatejs.indexOf = function (array, searchElement){\r\n\t\"use strict\";\r\n\r\n\tfor (var i = 0,l=array.length; i < l; i++) {\r\n\t\tif (searchElement === array[i]) {\r\n\t\t\treturn i;\r\n\t\t}\r\n\t}\r\n\treturn -1;\r\n};\r\n\r\n//##############################################################################\r\n// Proxy.js\r\n//##############################################################################\r\n\r\nthis.createjs = this.createjs||{};\r\n\r\n/**\r\n * Various utilities that the CreateJS Suite uses. Utilities are created as separate files, and will be available on the\r\n * createjs namespace directly.\r\n *\r\n * <h4>Example</h4>\r\n *\r\n *      myObject.addEventListener(\"change\", createjs.proxy(myMethod, scope));\r\n *\r\n * @class Utility Methods\r\n * @main Utility Methods\r\n */\r\n\r\n(function() {\r\n\t\"use strict\";\r\n\r\n\t/**\r\n\t * A function proxy for methods. By default, JavaScript methods do not maintain scope, so passing a method as a\r\n\t * callback will result in the method getting called in the scope of the caller. Using a proxy ensures that the\r\n\t * method gets called in the correct scope.\r\n\t *\r\n\t * Additional arguments can be passed that will be applied to the function when it is called.\r\n\t *\r\n\t * <h4>Example</h4>\r\n\t *\r\n\t *      myObject.addEventListener(\"event\", createjs.proxy(myHandler, this, arg1, arg2));\r\n\t *\r\n\t *      function myHandler(arg1, arg2) {\r\n\t *           // This gets called when myObject.myCallback is executed.\r\n\t *      }\r\n\t *\r\n\t * @method proxy\r\n\t * @param {Function} method The function to call\r\n\t * @param {Object} scope The scope to call the method name on\r\n\t * @param {mixed} [arg] * Arguments that are appended to the callback for additional params.\r\n\t * @public\r\n\t * @static\r\n\t */\r\n\tcreatejs.proxy = function (method, scope) {\r\n\t\tvar aArgs = Array.prototype.slice.call(arguments, 2);\r\n\t\treturn function () {\r\n\t\t\treturn method.apply(scope, Array.prototype.slice.call(arguments, 0).concat(aArgs));\r\n\t\t};\r\n\t}\r\n\r\n}());\r\n\r\n//##############################################################################\r\n// BrowserDetect.js\r\n//##############################################################################\r\n\r\nthis.createjs = this.createjs||{};\r\n\r\n/**\r\n * @class Utility Methods\r\n */\r\n(function() {\r\n\t\"use strict\";\r\n\r\n\t/**\r\n\t * An object that determines the current browser, version, operating system, and other environment\r\n\t * variables via user agent string.\r\n\t *\r\n\t * Used for audio because feature detection is unable to detect the many limitations of mobile devices.\r\n\t *\r\n\t * <h4>Example</h4>\r\n\t *\r\n\t *      if (createjs.BrowserDetect.isIOS) { // do stuff }\r\n\t *\r\n\t * @property BrowserDetect\r\n\t * @type {Object}\r\n\t * @param {Boolean} isFirefox True if our browser is Firefox.\r\n\t * @param {Boolean} isOpera True if our browser is opera.\r\n\t * @param {Boolean} isChrome True if our browser is Chrome.  Note that Chrome for Android returns true, but is a\r\n\t * completely different browser with different abilities.\r\n\t * @param {Boolean} isIOS True if our browser is safari for iOS devices (iPad, iPhone, and iPod).\r\n\t * @param {Boolean} isAndroid True if our browser is Android.\r\n\t * @param {Boolean} isBlackberry True if our browser is Blackberry.\r\n\t * @constructor\r\n\t * @static\r\n\t */\r\n\tfunction BrowserDetect() {\r\n\t\tthrow \"BrowserDetect cannot be instantiated\";\r\n\t};\r\n\r\n\tvar agent = BrowserDetect.agent = window.navigator.userAgent;\r\n\tBrowserDetect.isWindowPhone = (agent.indexOf(\"IEMobile\") > -1) || (agent.indexOf(\"Windows Phone\") > -1);\r\n\tBrowserDetect.isFirefox = (agent.indexOf(\"Firefox\") > -1);\r\n\tBrowserDetect.isOpera = (window.opera != null);\r\n\tBrowserDetect.isChrome = (agent.indexOf(\"Chrome\") > -1);  // NOTE that Chrome on Android returns true but is a completely different browser with different abilities\r\n\tBrowserDetect.isIOS = (agent.indexOf(\"iPod\") > -1 || agent.indexOf(\"iPhone\") > -1 || agent.indexOf(\"iPad\") > -1) && !BrowserDetect.isWindowPhone;\r\n\tBrowserDetect.isAndroid = (agent.indexOf(\"Android\") > -1) && !BrowserDetect.isWindowPhone;\r\n\tBrowserDetect.isBlackberry = (agent.indexOf(\"Blackberry\") > -1);\r\n\r\n\tcreatejs.BrowserDetect = BrowserDetect;\r\n\r\n}());\r\n\r\n//##############################################################################\r\n// EventDispatcher.js\r\n//##############################################################################\r\n\r\nthis.createjs = this.createjs||{};\r\n\r\n(function() {\r\n\t\"use strict\";\r\n\r\n\r\n// constructor:\r\n\t/**\r\n\t * EventDispatcher provides methods for managing queues of event listeners and dispatching events.\r\n\t *\r\n\t * You can either extend EventDispatcher or mix its methods into an existing prototype or instance by using the\r\n\t * EventDispatcher {{#crossLink \"EventDispatcher/initialize\"}}{{/crossLink}} method.\r\n\t * \r\n\t * Together with the CreateJS Event class, EventDispatcher provides an extended event model that is based on the\r\n\t * DOM Level 2 event model, including addEventListener, removeEventListener, and dispatchEvent. It supports\r\n\t * bubbling / capture, preventDefault, stopPropagation, stopImmediatePropagation, and handleEvent.\r\n\t * \r\n\t * EventDispatcher also exposes a {{#crossLink \"EventDispatcher/on\"}}{{/crossLink}} method, which makes it easier\r\n\t * to create scoped listeners, listeners that only run once, and listeners with associated arbitrary data. The \r\n\t * {{#crossLink \"EventDispatcher/off\"}}{{/crossLink}} method is merely an alias to\r\n\t * {{#crossLink \"EventDispatcher/removeEventListener\"}}{{/crossLink}}.\r\n\t * \r\n\t * Another addition to the DOM Level 2 model is the {{#crossLink \"EventDispatcher/removeAllEventListeners\"}}{{/crossLink}}\r\n\t * method, which can be used to listeners for all events, or listeners for a specific event. The Event object also \r\n\t * includes a {{#crossLink \"Event/remove\"}}{{/crossLink}} method which removes the active listener.\r\n\t *\r\n\t * <h4>Example</h4>\r\n\t * Add EventDispatcher capabilities to the \"MyClass\" class.\r\n\t *\r\n\t *      EventDispatcher.initialize(MyClass.prototype);\r\n\t *\r\n\t * Add an event (see {{#crossLink \"EventDispatcher/addEventListener\"}}{{/crossLink}}).\r\n\t *\r\n\t *      instance.addEventListener(\"eventName\", handlerMethod);\r\n\t *      function handlerMethod(event) {\r\n\t *          console.log(event.target + \" Was Clicked\");\r\n\t *      }\r\n\t *\r\n\t * <b>Maintaining proper scope</b><br />\r\n\t * Scope (ie. \"this\") can be be a challenge with events. Using the {{#crossLink \"EventDispatcher/on\"}}{{/crossLink}}\r\n\t * method to subscribe to events simplifies this.\r\n\t *\r\n\t *      instance.addEventListener(\"click\", function(event) {\r\n\t *          console.log(instance == this); // false, scope is ambiguous.\r\n\t *      });\r\n\t *      \r\n\t *      instance.on(\"click\", function(event) {\r\n\t *          console.log(instance == this); // true, \"on\" uses dispatcher scope by default.\r\n\t *      });\r\n\t * \r\n\t * If you want to use addEventListener instead, you may want to use function.bind() or a similar proxy to manage\r\n\t * scope.\r\n\t *\r\n\t * <b>Browser support</b>\r\n\t * The event model in CreateJS can be used separately from the suite in any project, however the inheritance model\r\n\t * requires modern browsers (IE9+).\r\n\t *      \r\n\t *\r\n\t * @class EventDispatcher\r\n\t * @constructor\r\n\t **/\r\n\tfunction EventDispatcher() {\r\n\t\r\n\t\r\n\t// private properties:\r\n\t\t/**\r\n\t\t * @protected\r\n\t\t * @property _listeners\r\n\t\t * @type Object\r\n\t\t **/\r\n\t\tthis._listeners = null;\r\n\t\t\r\n\t\t/**\r\n\t\t * @protected\r\n\t\t * @property _captureListeners\r\n\t\t * @type Object\r\n\t\t **/\r\n\t\tthis._captureListeners = null;\r\n\t}\r\n\tvar p = EventDispatcher.prototype;\r\n\r\n\t/**\r\n\t * <strong>REMOVED</strong>. Removed in favor of using `MySuperClass_constructor`.\r\n\t * See {{#crossLink \"Utility Methods/extend\"}}{{/crossLink}} and {{#crossLink \"Utility Methods/promote\"}}{{/crossLink}}\r\n\t * for details.\r\n\t *\r\n\t * There is an inheritance tutorial distributed with EaselJS in /tutorials/Inheritance.\r\n\t *\r\n\t * @method initialize\r\n\t * @protected\r\n\t * @deprecated\r\n\t */\r\n\t// p.initialize = function() {}; // searchable for devs wondering where it is.\r\n\r\n\r\n// static public methods:\r\n\t/**\r\n\t * Static initializer to mix EventDispatcher methods into a target object or prototype.\r\n\t * \r\n\t * \t\tEventDispatcher.initialize(MyClass.prototype); // add to the prototype of the class\r\n\t * \t\tEventDispatcher.initialize(myObject); // add to a specific instance\r\n\t * \r\n\t * @method initialize\r\n\t * @static\r\n\t * @param {Object} target The target object to inject EventDispatcher methods into. This can be an instance or a\r\n\t * prototype.\r\n\t **/\r\n\tEventDispatcher.initialize = function(target) {\r\n\t\ttarget.addEventListener = p.addEventListener;\r\n\t\ttarget.on = p.on;\r\n\t\ttarget.removeEventListener = target.off =  p.removeEventListener;\r\n\t\ttarget.removeAllEventListeners = p.removeAllEventListeners;\r\n\t\ttarget.hasEventListener = p.hasEventListener;\r\n\t\ttarget.dispatchEvent = p.dispatchEvent;\r\n\t\ttarget._dispatchEvent = p._dispatchEvent;\r\n\t\ttarget.willTrigger = p.willTrigger;\r\n\t};\r\n\t\r\n\r\n// public methods:\r\n\t/**\r\n\t * Adds the specified event listener. Note that adding multiple listeners to the same function will result in\r\n\t * multiple callbacks getting fired.\r\n\t *\r\n\t * <h4>Example</h4>\r\n\t *\r\n\t *      displayObject.addEventListener(\"click\", handleClick);\r\n\t *      function handleClick(event) {\r\n\t *         // Click happened.\r\n\t *      }\r\n\t *\r\n\t * @method addEventListener\r\n\t * @param {String} type The string type of the event.\r\n\t * @param {Function | Object} listener An object with a handleEvent method, or a function that will be called when\r\n\t * the event is dispatched.\r\n\t * @param {Boolean} [useCapture] For events that bubble, indicates whether to listen for the event in the capture or bubbling/target phase.\r\n\t * @return {Function | Object} Returns the listener for chaining or assignment.\r\n\t **/\r\n\tp.addEventListener = function(type, listener, useCapture) {\r\n\t\tvar listeners;\r\n\t\tif (useCapture) {\r\n\t\t\tlisteners = this._captureListeners = this._captureListeners||{};\r\n\t\t} else {\r\n\t\t\tlisteners = this._listeners = this._listeners||{};\r\n\t\t}\r\n\t\tvar arr = listeners[type];\r\n\t\tif (arr) { this.removeEventListener(type, listener, useCapture); }\r\n\t\tarr = listeners[type]; // remove may have deleted the array\r\n\t\tif (!arr) { listeners[type] = [listener];  }\r\n\t\telse { arr.push(listener); }\r\n\t\treturn listener;\r\n\t};\r\n\t\r\n\t/**\r\n\t * A shortcut method for using addEventListener that makes it easier to specify an execution scope, have a listener\r\n\t * only run once, associate arbitrary data with the listener, and remove the listener.\r\n\t * \r\n\t * This method works by creating an anonymous wrapper function and subscribing it with addEventListener.\r\n\t * The wrapper function is returned for use with `removeEventListener` (or `off`).\r\n\t * \r\n\t * <b>IMPORTANT:</b> To remove a listener added with `on`, you must pass in the returned wrapper function as the listener, or use\r\n\t * {{#crossLink \"Event/remove\"}}{{/crossLink}}. Likewise, each time you call `on` a NEW wrapper function is subscribed, so multiple calls\r\n\t * to `on` with the same params will create multiple listeners.\r\n\t * \r\n\t * <h4>Example</h4>\r\n\t * \r\n\t * \t\tvar listener = myBtn.on(\"click\", handleClick, null, false, {count:3});\r\n\t * \t\tfunction handleClick(evt, data) {\r\n\t * \t\t\tdata.count -= 1;\r\n\t * \t\t\tconsole.log(this == myBtn); // true - scope defaults to the dispatcher\r\n\t * \t\t\tif (data.count == 0) {\r\n\t * \t\t\t\talert(\"clicked 3 times!\");\r\n\t * \t\t\t\tmyBtn.off(\"click\", listener);\r\n\t * \t\t\t\t// alternately: evt.remove();\r\n\t * \t\t\t}\r\n\t * \t\t}\r\n\t * \r\n\t * @method on\r\n\t * @param {String} type The string type of the event.\r\n\t * @param {Function | Object} listener An object with a handleEvent method, or a function that will be called when\r\n\t * the event is dispatched.\r\n\t * @param {Object} [scope] The scope to execute the listener in. Defaults to the dispatcher/currentTarget for function listeners, and to the listener itself for object listeners (ie. using handleEvent).\r\n\t * @param {Boolean} [once=false] If true, the listener will remove itself after the first time it is triggered.\r\n\t * @param {*} [data] Arbitrary data that will be included as the second parameter when the listener is called.\r\n\t * @param {Boolean} [useCapture=false] For events that bubble, indicates whether to listen for the event in the capture or bubbling/target phase.\r\n\t * @return {Function} Returns the anonymous function that was created and assigned as the listener. This is needed to remove the listener later using .removeEventListener.\r\n\t **/\r\n\tp.on = function(type, listener, scope, once, data, useCapture) {\r\n\t\tif (listener.handleEvent) {\r\n\t\t\tscope = scope||listener;\r\n\t\t\tlistener = listener.handleEvent;\r\n\t\t}\r\n\t\tscope = scope||this;\r\n\t\treturn this.addEventListener(type, function(evt) {\r\n\t\t\t\tlistener.call(scope, evt, data);\r\n\t\t\t\tonce&&evt.remove();\r\n\t\t\t}, useCapture);\r\n\t};\r\n\r\n\t/**\r\n\t * Removes the specified event listener.\r\n\t *\r\n\t * <b>Important Note:</b> that you must pass the exact function reference used when the event was added. If a proxy\r\n\t * function, or function closure is used as the callback, the proxy/closure reference must be used - a new proxy or\r\n\t * closure will not work.\r\n\t *\r\n\t * <h4>Example</h4>\r\n\t *\r\n\t *      displayObject.removeEventListener(\"click\", handleClick);\r\n\t *\r\n\t * @method removeEventListener\r\n\t * @param {String} type The string type of the event.\r\n\t * @param {Function | Object} listener The listener function or object.\r\n\t * @param {Boolean} [useCapture] For events that bubble, indicates whether to listen for the event in the capture or bubbling/target phase.\r\n\t **/\r\n\tp.removeEventListener = function(type, listener, useCapture) {\r\n\t\tvar listeners = useCapture ? this._captureListeners : this._listeners;\r\n\t\tif (!listeners) { return; }\r\n\t\tvar arr = listeners[type];\r\n\t\tif (!arr) { return; }\r\n\t\tfor (var i=0,l=arr.length; i<l; i++) {\r\n\t\t\tif (arr[i] == listener) {\r\n\t\t\t\tif (l==1) { delete(listeners[type]); } // allows for faster checks.\r\n\t\t\t\telse { arr.splice(i,1); }\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\t\r\n\t/**\r\n\t * A shortcut to the removeEventListener method, with the same parameters and return value. This is a companion to the\r\n\t * .on method.\r\n\t * \r\n\t * <b>IMPORTANT:</b> To remove a listener added with `on`, you must pass in the returned wrapper function as the listener. See \r\n\t * {{#crossLink \"EventDispatcher/on\"}}{{/crossLink}} for an example.\r\n\t *\r\n\t * @method off\r\n\t * @param {String} type The string type of the event.\r\n\t * @param {Function | Object} listener The listener function or object.\r\n\t * @param {Boolean} [useCapture] For events that bubble, indicates whether to listen for the event in the capture or bubbling/target phase.\r\n\t **/\r\n\tp.off = p.removeEventListener;\r\n\r\n\t/**\r\n\t * Removes all listeners for the specified type, or all listeners of all types.\r\n\t *\r\n\t * <h4>Example</h4>\r\n\t *\r\n\t *      // Remove all listeners\r\n\t *      displayObject.removeAllEventListeners();\r\n\t *\r\n\t *      // Remove all click listeners\r\n\t *      displayObject.removeAllEventListeners(\"click\");\r\n\t *\r\n\t * @method removeAllEventListeners\r\n\t * @param {String} [type] The string type of the event. If omitted, all listeners for all types will be removed.\r\n\t **/\r\n\tp.removeAllEventListeners = function(type) {\r\n\t\tif (!type) { this._listeners = this._captureListeners = null; }\r\n\t\telse {\r\n\t\t\tif (this._listeners) { delete(this._listeners[type]); }\r\n\t\t\tif (this._captureListeners) { delete(this._captureListeners[type]); }\r\n\t\t}\r\n\t};\r\n\r\n\t/**\r\n\t * Dispatches the specified event to all listeners.\r\n\t *\r\n\t * <h4>Example</h4>\r\n\t *\r\n\t *      // Use a string event\r\n\t *      this.dispatchEvent(\"complete\");\r\n\t *\r\n\t *      // Use an Event instance\r\n\t *      var event = new createjs.Event(\"progress\");\r\n\t *      this.dispatchEvent(event);\r\n\t *\r\n\t * @method dispatchEvent\r\n\t * @param {Object | String | Event} eventObj An object with a \"type\" property, or a string type.\r\n\t * While a generic object will work, it is recommended to use a CreateJS Event instance. If a string is used,\r\n\t * dispatchEvent will construct an Event instance if necessary with the specified type. This latter approach can\r\n\t * be used to avoid event object instantiation for non-bubbling events that may not have any listeners.\r\n\t * @param {Boolean} [bubbles] Specifies the `bubbles` value when a string was passed to eventObj.\r\n\t * @param {Boolean} [cancelable] Specifies the `cancelable` value when a string was passed to eventObj.\r\n\t * @return {Boolean} Returns false if `preventDefault()` was called on a cancelable event, true otherwise.\r\n\t **/\r\n\tp.dispatchEvent = function(eventObj, bubbles, cancelable) {\r\n\t\tif (typeof eventObj == \"string\") {\r\n\t\t\t// skip everything if there's no listeners and it doesn't bubble:\r\n\t\t\tvar listeners = this._listeners;\r\n\t\t\tif (!bubbles && (!listeners || !listeners[eventObj])) { return true; }\r\n\t\t\teventObj = new createjs.Event(eventObj, bubbles, cancelable);\r\n\t\t} else if (eventObj.target && eventObj.clone) {\r\n\t\t\t// redispatching an active event object, so clone it:\r\n\t\t\teventObj = eventObj.clone();\r\n\t\t}\r\n\t\t\r\n\t\t// TODO: it would be nice to eliminate this. Maybe in favour of evtObj instanceof Event? Or !!evtObj.createEvent\r\n\t\ttry { eventObj.target = this; } catch (e) {} // try/catch allows redispatching of native events\r\n\r\n\t\tif (!eventObj.bubbles || !this.parent) {\r\n\t\t\tthis._dispatchEvent(eventObj, 2);\r\n\t\t} else {\r\n\t\t\tvar top=this, list=[top];\r\n\t\t\twhile (top.parent) { list.push(top = top.parent); }\r\n\t\t\tvar i, l=list.length;\r\n\r\n\t\t\t// capture & atTarget\r\n\t\t\tfor (i=l-1; i>=0 && !eventObj.propagationStopped; i--) {\r\n\t\t\t\tlist[i]._dispatchEvent(eventObj, 1+(i==0));\r\n\t\t\t}\r\n\t\t\t// bubbling\r\n\t\t\tfor (i=1; i<l && !eventObj.propagationStopped; i++) {\r\n\t\t\t\tlist[i]._dispatchEvent(eventObj, 3);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn !eventObj.defaultPrevented;\r\n\t};\r\n\r\n\t/**\r\n\t * Indicates whether there is at least one listener for the specified event type.\r\n\t * @method hasEventListener\r\n\t * @param {String} type The string type of the event.\r\n\t * @return {Boolean} Returns true if there is at least one listener for the specified event.\r\n\t **/\r\n\tp.hasEventListener = function(type) {\r\n\t\tvar listeners = this._listeners, captureListeners = this._captureListeners;\r\n\t\treturn !!((listeners && listeners[type]) || (captureListeners && captureListeners[type]));\r\n\t};\r\n\t\r\n\t/**\r\n\t * Indicates whether there is at least one listener for the specified event type on this object or any of its\r\n\t * ancestors (parent, parent's parent, etc). A return value of true indicates that if a bubbling event of the\r\n\t * specified type is dispatched from this object, it will trigger at least one listener.\r\n\t * \r\n\t * This is similar to {{#crossLink \"EventDispatcher/hasEventListener\"}}{{/crossLink}}, but it searches the entire\r\n\t * event flow for a listener, not just this object.\r\n\t * @method willTrigger\r\n\t * @param {String} type The string type of the event.\r\n\t * @return {Boolean} Returns `true` if there is at least one listener for the specified event.\r\n\t **/\r\n\tp.willTrigger = function(type) {\r\n\t\tvar o = this;\r\n\t\twhile (o) {\r\n\t\t\tif (o.hasEventListener(type)) { return true; }\r\n\t\t\to = o.parent;\r\n\t\t}\r\n\t\treturn false;\r\n\t};\r\n\r\n\t/**\r\n\t * @method toString\r\n\t * @return {String} a string representation of the instance.\r\n\t **/\r\n\tp.toString = function() {\r\n\t\treturn \"[EventDispatcher]\";\r\n\t};\r\n\r\n\r\n// private methods:\r\n\t/**\r\n\t * @method _dispatchEvent\r\n\t * @param {Object | String | Event} eventObj\r\n\t * @param {Object} eventPhase\r\n\t * @protected\r\n\t **/\r\n\tp._dispatchEvent = function(eventObj, eventPhase) {\r\n\t\tvar l, listeners = (eventPhase==1) ? this._captureListeners : this._listeners;\r\n\t\tif (eventObj && listeners) {\r\n\t\t\tvar arr = listeners[eventObj.type];\r\n\t\t\tif (!arr||!(l=arr.length)) { return; }\r\n\t\t\ttry { eventObj.currentTarget = this; } catch (e) {}\r\n\t\t\ttry { eventObj.eventPhase = eventPhase; } catch (e) {}\r\n\t\t\teventObj.removed = false;\r\n\t\t\t\r\n\t\t\tarr = arr.slice(); // to avoid issues with items being removed or added during the dispatch\r\n\t\t\tfor (var i=0; i<l && !eventObj.immediatePropagationStopped; i++) {\r\n\t\t\t\tvar o = arr[i];\r\n\t\t\t\tif (o.handleEvent) { o.handleEvent(eventObj); }\r\n\t\t\t\telse { o(eventObj); }\r\n\t\t\t\tif (eventObj.removed) {\r\n\t\t\t\t\tthis.off(eventObj.type, o, eventPhase==1);\r\n\t\t\t\t\teventObj.removed = false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\r\n\tcreatejs.EventDispatcher = EventDispatcher;\r\n}());\r\n\r\n//##############################################################################\r\n// Event.js\r\n//##############################################################################\r\n\r\nthis.createjs = this.createjs||{};\r\n\r\n(function() {\r\n\t\"use strict\";\r\n\r\n// constructor:\r\n\t/**\r\n\t * Contains properties and methods shared by all events for use with\r\n\t * {{#crossLink \"EventDispatcher\"}}{{/crossLink}}.\r\n\t * \r\n\t * Note that Event objects are often reused, so you should never\r\n\t * rely on an event object's state outside of the call stack it was received in.\r\n\t * @class Event\r\n\t * @param {String} type The event type.\r\n\t * @param {Boolean} bubbles Indicates whether the event will bubble through the display list.\r\n\t * @param {Boolean} cancelable Indicates whether the default behaviour of this event can be cancelled.\r\n\t * @constructor\r\n\t **/\r\n\tfunction Event(type, bubbles, cancelable) {\r\n\t\t\r\n\t\r\n\t// public properties:\r\n\t\t/**\r\n\t\t * The type of event.\r\n\t\t * @property type\r\n\t\t * @type String\r\n\t\t **/\r\n\t\tthis.type = type;\r\n\t\r\n\t\t/**\r\n\t\t * The object that generated an event.\r\n\t\t * @property target\r\n\t\t * @type Object\r\n\t\t * @default null\r\n\t\t * @readonly\r\n\t\t*/\r\n\t\tthis.target = null;\r\n\t\r\n\t\t/**\r\n\t\t * The current target that a bubbling event is being dispatched from. For non-bubbling events, this will\r\n\t\t * always be the same as target. For example, if childObj.parent = parentObj, and a bubbling event\r\n\t\t * is generated from childObj, then a listener on parentObj would receive the event with\r\n\t\t * target=childObj (the original target) and currentTarget=parentObj (where the listener was added).\r\n\t\t * @property currentTarget\r\n\t\t * @type Object\r\n\t\t * @default null\r\n\t\t * @readonly\r\n\t\t*/\r\n\t\tthis.currentTarget = null;\r\n\t\r\n\t\t/**\r\n\t\t * For bubbling events, this indicates the current event phase:<OL>\r\n\t\t * \t<LI> capture phase: starting from the top parent to the target</LI>\r\n\t\t * \t<LI> at target phase: currently being dispatched from the target</LI>\r\n\t\t * \t<LI> bubbling phase: from the target to the top parent</LI>\r\n\t\t * </OL>\r\n\t\t * @property eventPhase\r\n\t\t * @type Number\r\n\t\t * @default 0\r\n\t\t * @readonly\r\n\t\t*/\r\n\t\tthis.eventPhase = 0;\r\n\t\r\n\t\t/**\r\n\t\t * Indicates whether the event will bubble through the display list.\r\n\t\t * @property bubbles\r\n\t\t * @type Boolean\r\n\t\t * @default false\r\n\t\t * @readonly\r\n\t\t*/\r\n\t\tthis.bubbles = !!bubbles;\r\n\t\r\n\t\t/**\r\n\t\t * Indicates whether the default behaviour of this event can be cancelled via\r\n\t\t * {{#crossLink \"Event/preventDefault\"}}{{/crossLink}}. This is set via the Event constructor.\r\n\t\t * @property cancelable\r\n\t\t * @type Boolean\r\n\t\t * @default false\r\n\t\t * @readonly\r\n\t\t*/\r\n\t\tthis.cancelable = !!cancelable;\r\n\t\r\n\t\t/**\r\n\t\t * The epoch time at which this event was created.\r\n\t\t * @property timeStamp\r\n\t\t * @type Number\r\n\t\t * @default 0\r\n\t\t * @readonly\r\n\t\t*/\r\n\t\tthis.timeStamp = (new Date()).getTime();\r\n\t\r\n\t\t/**\r\n\t\t * Indicates if {{#crossLink \"Event/preventDefault\"}}{{/crossLink}} has been called\r\n\t\t * on this event.\r\n\t\t * @property defaultPrevented\r\n\t\t * @type Boolean\r\n\t\t * @default false\r\n\t\t * @readonly\r\n\t\t*/\r\n\t\tthis.defaultPrevented = false;\r\n\t\r\n\t\t/**\r\n\t\t * Indicates if {{#crossLink \"Event/stopPropagation\"}}{{/crossLink}} or\r\n\t\t * {{#crossLink \"Event/stopImmediatePropagation\"}}{{/crossLink}} has been called on this event.\r\n\t\t * @property propagationStopped\r\n\t\t * @type Boolean\r\n\t\t * @default false\r\n\t\t * @readonly\r\n\t\t*/\r\n\t\tthis.propagationStopped = false;\r\n\t\r\n\t\t/**\r\n\t\t * Indicates if {{#crossLink \"Event/stopImmediatePropagation\"}}{{/crossLink}} has been called\r\n\t\t * on this event.\r\n\t\t * @property immediatePropagationStopped\r\n\t\t * @type Boolean\r\n\t\t * @default false\r\n\t\t * @readonly\r\n\t\t*/\r\n\t\tthis.immediatePropagationStopped = false;\r\n\t\t\r\n\t\t/**\r\n\t\t * Indicates if {{#crossLink \"Event/remove\"}}{{/crossLink}} has been called on this event.\r\n\t\t * @property removed\r\n\t\t * @type Boolean\r\n\t\t * @default false\r\n\t\t * @readonly\r\n\t\t*/\r\n\t\tthis.removed = false;\r\n\t}\r\n\tvar p = Event.prototype;\r\n\r\n\t/**\r\n\t * <strong>REMOVED</strong>. Removed in favor of using `MySuperClass_constructor`.\r\n\t * See {{#crossLink \"Utility Methods/extend\"}}{{/crossLink}} and {{#crossLink \"Utility Methods/promote\"}}{{/crossLink}}\r\n\t * for details.\r\n\t *\r\n\t * There is an inheritance tutorial distributed with EaselJS in /tutorials/Inheritance.\r\n\t *\r\n\t * @method initialize\r\n\t * @protected\r\n\t * @deprecated\r\n\t */\r\n\t// p.initialize = function() {}; // searchable for devs wondering where it is.\r\n\r\n// public methods:\r\n\t/**\r\n\t * Sets {{#crossLink \"Event/defaultPrevented\"}}{{/crossLink}} to true if the event is cancelable.\r\n\t * Mirrors the DOM level 2 event standard. In general, cancelable events that have `preventDefault()` called will\r\n\t * cancel the default behaviour associated with the event.\r\n\t * @method preventDefault\r\n\t **/\r\n\tp.preventDefault = function() {\r\n\t\tthis.defaultPrevented = this.cancelable&&true;\r\n\t};\r\n\r\n\t/**\r\n\t * Sets {{#crossLink \"Event/propagationStopped\"}}{{/crossLink}} to true.\r\n\t * Mirrors the DOM event standard.\r\n\t * @method stopPropagation\r\n\t **/\r\n\tp.stopPropagation = function() {\r\n\t\tthis.propagationStopped = true;\r\n\t};\r\n\r\n\t/**\r\n\t * Sets {{#crossLink \"Event/propagationStopped\"}}{{/crossLink}} and\r\n\t * {{#crossLink \"Event/immediatePropagationStopped\"}}{{/crossLink}} to true.\r\n\t * Mirrors the DOM event standard.\r\n\t * @method stopImmediatePropagation\r\n\t **/\r\n\tp.stopImmediatePropagation = function() {\r\n\t\tthis.immediatePropagationStopped = this.propagationStopped = true;\r\n\t};\r\n\t\r\n\t/**\r\n\t * Causes the active listener to be removed via removeEventListener();\r\n\t * \r\n\t * \t\tmyBtn.addEventListener(\"click\", function(evt) {\r\n\t * \t\t\t// do stuff...\r\n\t * \t\t\tevt.remove(); // removes this listener.\r\n\t * \t\t});\r\n\t * \r\n\t * @method remove\r\n\t **/\r\n\tp.remove = function() {\r\n\t\tthis.removed = true;\r\n\t};\r\n\t\r\n\t/**\r\n\t * Returns a clone of the Event instance.\r\n\t * @method clone\r\n\t * @return {Event} a clone of the Event instance.\r\n\t **/\r\n\tp.clone = function() {\r\n\t\treturn new Event(this.type, this.bubbles, this.cancelable);\r\n\t};\r\n\t\r\n\t/**\r\n\t * Provides a chainable shortcut method for setting a number of properties on the instance.\r\n\t *\r\n\t * @method set\r\n\t * @param {Object} props A generic object containing properties to copy to the instance.\r\n\t * @return {Event} Returns the instance the method is called on (useful for chaining calls.)\r\n\t * @chainable\r\n\t*/\r\n\tp.set = function(props) {\r\n\t\tfor (var n in props) { this[n] = props[n]; }\r\n\t\treturn this;\r\n\t};\r\n\r\n\t/**\r\n\t * Returns a string representation of this object.\r\n\t * @method toString\r\n\t * @return {String} a string representation of the instance.\r\n\t **/\r\n\tp.toString = function() {\r\n\t\treturn \"[Event (type=\"+this.type+\")]\";\r\n\t};\r\n\r\n\tcreatejs.Event = Event;\r\n}());\r\n\r\n//##############################################################################\r\n// ErrorEvent.js\r\n//##############################################################################\r\n\r\nthis.createjs = this.createjs||{};\r\n\r\n(function() {\r\n\t\"use strict\";\r\n\r\n\t/**\r\n\t * A general error {{#crossLink \"Event\"}}{{/crossLink}}, that describes an error that occurred, as well as any details.\r\n\t * @class ErrorEvent\r\n\t * @param {String} [title] The error title\r\n\t * @param {String} [message] The error description\r\n\t * @param {Object} [data] Additional error data\r\n\t * @constructor\r\n\t */\r\n\tfunction ErrorEvent(title, message, data) {\r\n\t\tthis.Event_constructor(\"error\");\r\n\r\n\t\t/**\r\n\t\t * The short error title, which indicates the type of error that occurred.\r\n\t\t * @property title\r\n\t\t * @type String\r\n\t\t */\r\n\t\tthis.title = title;\r\n\r\n\t\t/**\r\n\t\t * The verbose error message, containing details about the error.\r\n\t\t * @property message\r\n\t\t * @type String\r\n\t\t */\r\n\t\tthis.message = message;\r\n\r\n\t\t/**\r\n\t\t * Additional data attached to an error.\r\n\t\t * @property data\r\n\t\t * @type {Object}\r\n\t\t */\r\n\t\tthis.data = data;\r\n\t}\r\n\r\n\tvar p = createjs.extend(ErrorEvent, createjs.Event);\r\n\r\n\tp.clone = function() {\r\n\t\treturn new createjs.ErrorEvent(this.title, this.message, this.data);\r\n\t};\r\n\r\n\tcreatejs.ErrorEvent = createjs.promote(ErrorEvent, \"Event\");\r\n\r\n}());\r\n\r\n//##############################################################################\r\n// ProgressEvent.js\r\n//##############################################################################\r\n\r\nthis.createjs = this.createjs || {};\r\n\r\n(function (scope) {\r\n\t\"use strict\";\r\n\r\n\t// constructor\r\n\t/**\r\n\t * A CreateJS {{#crossLink \"Event\"}}{{/crossLink}} that is dispatched when progress changes.\r\n\t * @class ProgressEvent\r\n\t * @param {Number} loaded The amount that has been loaded. This can be any number relative to the total.\r\n\t * @param {Number} [total=1] The total amount that will load. This will default to 1, so if the `loaded` value is\r\n\t * a percentage (between 0 and 1), it can be omitted.\r\n\t * @todo Consider having this event be a \"fileprogress\" event as well\r\n\t * @constructor\r\n\t */\r\n\tfunction ProgressEvent(loaded, total) {\r\n\t\tthis.Event_constructor(\"progress\");\r\n\r\n\t\t/**\r\n\t\t * The amount that has been loaded (out of a total amount)\r\n\t\t * @property loaded\r\n\t\t * @type {Number}\r\n\t\t */\r\n\t\tthis.loaded = loaded;\r\n\r\n\t\t/**\r\n\t\t * The total \"size\" of the load.\r\n\t\t * @property total\r\n\t\t * @type {Number}\r\n\t\t * @default 1\r\n\t\t */\r\n\t\tthis.total = (total == null) ? 1 : total;\r\n\r\n\t\t/**\r\n\t\t * The percentage (out of 1) that the load has been completed. This is calculated using `loaded/total`.\r\n\t\t * @property progress\r\n\t\t * @type {Number}\r\n\t\t * @default 0\r\n\t\t */\r\n\t\tthis.progress = (total == 0) ? 0 : this.loaded / this.total;\r\n\t};\r\n\r\n\tvar p = createjs.extend(ProgressEvent, createjs.Event);\r\n\r\n\t/**\r\n\t * Returns a clone of the ProgressEvent instance.\r\n\t * @method clone\r\n\t * @return {ProgressEvent} a clone of the Event instance.\r\n\t **/\r\n\tp.clone = function() {\r\n\t\treturn new createjs.ProgressEvent(this.loaded, this.total);\r\n\t};\r\n\r\n\tcreatejs.ProgressEvent = createjs.promote(ProgressEvent, \"Event\");\r\n\r\n}(window));\r\n\r\n//##############################################################################\r\n// LoadItem.js\r\n//##############################################################################\r\n\r\nthis.createjs = this.createjs || {};\r\n\r\n(function () {\r\n\t\"use strict\";\r\n\r\n\t/**\r\n\t * All loaders accept an item containing the properties defined in this class. If a raw object is passed instead,\r\n\t * it will not be affected, but it must contain at least a {{#crossLink \"src:property\"}}{{/crossLink}} property. A\r\n\t * string path or HTML tag is also acceptable, but it will be automatically converted to a LoadItem using the\r\n\t * {{#crossLink \"create\"}}{{/crossLink}} method by {{#crossLink \"AbstractLoader\"}}{{/crossLink}}\r\n\t * @class LoadItem\r\n\t * @constructor\r\n\t * @since 0.6.0\r\n\t */\r\n\tfunction LoadItem() {\r\n\t\t/**\r\n\t\t * The source of the file that is being loaded. This property is <b>required</b>. The source can either be a\r\n\t\t * string (recommended), or an HTML tag.\r\n\t\t * This can also be an object, but in that case it has to include a type and be handled by a plugin.\r\n\t\t * @property src\r\n\t\t * @type {String}\r\n\t\t * @default null\r\n\t\t */\r\n\t\tthis.src = null;\r\n\r\n\t\t/**\r\n\t\t * The type file that is being loaded. The type of the file is usually inferred by the extension, but can also\r\n\t\t * be set manually. This is helpful in cases where a file does not have an extension.\r\n\t\t * @property type\r\n\t\t * @type {String}\r\n\t\t * @default null\r\n\t\t */\r\n\t\tthis.type = null;\r\n\r\n\t\t/**\r\n\t\t * A string identifier which can be used to reference the loaded object. If none is provided, this will be\r\n\t\t * automatically set to the {{#crossLink \"src:property\"}}{{/crossLink}}.\r\n\t\t * @property id\r\n\t\t * @type {String}\r\n\t\t * @default null\r\n\t\t */\r\n\t\tthis.id = null;\r\n\r\n\t\t/**\r\n\t\t * Determines if a manifest will maintain the order of this item, in relation to other items in the manifest\r\n\t\t * that have also set the `maintainOrder` property to `true`. This only applies when the max connections has\r\n\t\t * been set above 1 (using {{#crossLink \"LoadQueue/setMaxConnections\"}}{{/crossLink}}). Everything with this\r\n\t\t * property set to `false` will finish as it is loaded. Ordered items are combined with script tags loading in\r\n\t\t * order when {{#crossLink \"LoadQueue/maintainScriptOrder:property\"}}{{/crossLink}} is set to `true`.\r\n\t\t * @property maintainOrder\r\n\t\t * @type {Boolean}\r\n\t\t * @default false\r\n\t\t */\r\n\t\tthis.maintainOrder = false;\r\n\r\n\t\t/**\r\n\t\t * A callback used by JSONP requests that defines what global method to call when the JSONP content is loaded.\r\n\t\t * @property callback\r\n\t\t * @type {String}\r\n\t\t * @default null\r\n\t\t */\r\n\t\tthis.callback = null;\r\n\r\n\t\t/**\r\n\t\t * An arbitrary data object, which is included with the loaded object.\r\n\t\t * @property data\r\n\t\t * @type {Object}\r\n\t\t * @default null\r\n\t\t */\r\n\t\tthis.data = null;\r\n\r\n\t\t/**\r\n\t\t * The request method used for HTTP calls. Both {{#crossLink \"AbstractLoader/GET:property\"}}{{/crossLink}} or\r\n\t\t * {{#crossLink \"AbstractLoader/POST:property\"}}{{/crossLink}} request types are supported, and are defined as\r\n\t\t * constants on {{#crossLink \"AbstractLoader\"}}{{/crossLink}}.\r\n\t\t * @property method\r\n\t\t * @type {String}\r\n\t\t * @default get\r\n\t\t */\r\n\t\tthis.method = createjs.LoadItem.GET;\r\n\r\n\t\t/**\r\n\t\t * An object hash of name/value pairs to send to the server.\r\n\t\t * @property values\r\n\t\t * @type {Object}\r\n\t\t * @default null\r\n\t\t */\r\n\t\tthis.values = null;\r\n\r\n\t\t/**\r\n\t\t * An object hash of headers to attach to an XHR request. PreloadJS will automatically attach some default\r\n\t\t * headers when required, including \"Origin\", \"Content-Type\", and \"X-Requested-With\". You may override the\r\n\t\t * default headers by including them in your headers object.\r\n\t\t * @property headers\r\n\t\t * @type {Object}\r\n\t\t * @default null\r\n\t\t */\r\n\t\tthis.headers = null;\r\n\r\n\t\t/**\r\n\t\t * Enable credentials for XHR requests.\r\n\t\t * @property withCredentials\r\n\t\t * @type {Boolean}\r\n\t\t * @default false\r\n\t\t */\r\n\t\tthis.withCredentials = false;\r\n\r\n\t\t/**\r\n\t\t * Set the mime type of XHR-based requests. This is automatically set to \"text/plain; charset=utf-8\" for text\r\n\t\t * based files (json, xml, text, css, js).\r\n\t\t * @property mimeType\r\n\t\t * @type {String}\r\n\t\t * @default null\r\n\t\t */\r\n\t\tthis.mimeType = null;\r\n\r\n\t\t/**\r\n\t\t * Sets the crossOrigin attribute for CORS-enabled images loading cross-domain.\r\n\t\t * @property crossOrigin\r\n\t\t * @type {boolean}\r\n\t\t * @default Anonymous\r\n\t\t */\r\n\t\tthis.crossOrigin = null;\r\n\r\n\t\t/**\r\n\t\t * The duration in milliseconds to wait before a request times out. This only applies to tag-based and and XHR\r\n\t\t * (level one) loading, as XHR (level 2) provides its own timeout event.\r\n\t\t * @property loadTimeout\r\n\t\t * @type {Number}\r\n\t\t * @default 8000 (8 seconds)\r\n\t\t */\r\n\t\tthis.loadTimeout = s.LOAD_TIMEOUT_DEFAULT;\r\n\t};\r\n\r\n\tvar p = LoadItem.prototype = {};\r\n\tvar s = LoadItem;\r\n\r\n\t/**\r\n\t * Default duration in milliseconds to wait before a request times out. This only applies to tag-based and and XHR\r\n\t * (level one) loading, as XHR (level 2) provides its own timeout event.\r\n\t * @property LOAD_TIMEOUT_DEFAULT\r\n\t * @type {number}\r\n\t * @static\r\n\t */\r\n\ts.LOAD_TIMEOUT_DEFAULT = 8000;\r\n\r\n\t/**\r\n\t * Create a LoadItem.\r\n\t * <ul>\r\n\t *     <li>String-based items are converted to a LoadItem with a populated {{#crossLink \"src:property\"}}{{/crossLink}}.</li>\r\n\t *     <li>LoadItem instances are returned as-is</li>\r\n\t *     <li>Objects are returned with any needed properties added</li>\r\n\t * </ul>\r\n\t * @method create\r\n\t * @param {LoadItem|String|Object} value The load item value\r\n\t * @returns {LoadItem|Object}\r\n\t * @static\r\n\t */\r\n\ts.create = function (value) {\r\n\t\tif (typeof value == \"string\") {\r\n\t\t\tvar item = new LoadItem();\r\n\t\t\titem.src = value;\r\n\t\t\treturn item;\r\n\t\t} else if (value instanceof s) {\r\n\t\t\treturn value;\r\n\t\t} else if (value instanceof Object && value.src) {\r\n\t\t\tif (value.loadTimeout == null) {\r\n\t\t\t\tvalue.loadTimeout = s.LOAD_TIMEOUT_DEFAULT;\r\n\t\t\t}\r\n\t\t\treturn value;\r\n\t\t} else {\r\n\t\t\tthrow new Error(\"Type not recognized.\");\r\n\t\t}\r\n\t};\r\n\r\n\t/**\r\n\t * Provides a chainable shortcut method for setting a number of properties on the instance.\r\n\t *\r\n\t * <h4>Example</h4>\r\n\t *\r\n\t *      var loadItem = new createjs.LoadItem().set({src:\"image.png\", maintainOrder:true});\r\n\t *\r\n\t * @method set\r\n\t * @param {Object} props A generic object containing properties to copy to the LoadItem instance.\r\n\t * @return {LoadItem} Returns the instance the method is called on (useful for chaining calls.)\r\n\t*/\r\n\tp.set = function(props) {\r\n\t\tfor (var n in props) { this[n] = props[n]; }\r\n\t\treturn this;\r\n\t};\r\n\r\n\tcreatejs.LoadItem = s;\r\n\r\n}());\r\n\r\n//##############################################################################\r\n// RequestUtils.js\r\n//##############################################################################\r\n\r\n(function () {\r\n\r\n\t/**\r\n\t * Utilities that assist with parsing load items, and determining file types, etc.\r\n\t * @class RequestUtils\r\n\t */\r\n\tvar s = {};\r\n\r\n\t/**\r\n\t * The Regular Expression used to test file URLS for an absolute path.\r\n\t * @property ABSOLUTE_PATH\r\n\t * @type {RegExp}\r\n\t * @static\r\n\t */\r\n\ts.ABSOLUTE_PATT = /^(?:\\w+:)?\\/{2}/i;\r\n\r\n\t/**\r\n\t * The Regular Expression used to test file URLS for a relative path.\r\n\t * @property RELATIVE_PATH\r\n\t * @type {RegExp}\r\n\t * @static\r\n\t */\r\n\ts.RELATIVE_PATT = (/^[./]*?\\//i);\r\n\r\n\t/**\r\n\t * The Regular Expression used to test file URLS for an extension. Note that URIs must already have the query string\r\n\t * removed.\r\n\t * @property EXTENSION_PATT\r\n\t * @type {RegExp}\r\n\t * @static\r\n\t */\r\n\ts.EXTENSION_PATT = /\\/?[^/]+\\.(\\w{1,5})$/i;\r\n\r\n\t/**\r\n\t * Parse a file path to determine the information we need to work with it. Currently, PreloadJS needs to know:\r\n\t * <ul>\r\n\t *     <li>If the path is absolute. Absolute paths start with a protocol (such as `http://`, `file://`, or\r\n\t *     `//networkPath`)</li>\r\n\t *     <li>If the path is relative. Relative paths start with `../` or `/path` (or similar)</li>\r\n\t *     <li>The file extension. This is determined by the filename with an extension. Query strings are dropped, and\r\n\t *     the file path is expected to follow the format `name.ext`.</li>\r\n\t * </ul>\r\n\t * @method parseURI\r\n\t * @param {String} path\r\n\t * @returns {Object} An Object with an `absolute` and `relative` Boolean values, as well as an optional 'extension`\r\n\t * property, which is the lowercase extension.\r\n\t * @static\r\n\t */\r\n\ts.parseURI = function (path) {\r\n\t\tvar info = {absolute: false, relative: false};\r\n\t\tif (path == null) { return info; }\r\n\r\n\t\t// Drop the query string\r\n\t\tvar queryIndex = path.indexOf(\"?\");\r\n\t\tif (queryIndex > -1) {\r\n\t\t\tpath = path.substr(0, queryIndex);\r\n\t\t}\r\n\r\n\t\t// Absolute\r\n\t\tvar match;\r\n\t\tif (s.ABSOLUTE_PATT.test(path)) {\r\n\t\t\tinfo.absolute = true;\r\n\r\n\t\t\t// Relative\r\n\t\t} else if (s.RELATIVE_PATT.test(path)) {\r\n\t\t\tinfo.relative = true;\r\n\t\t}\r\n\r\n\t\t// Extension\r\n\t\tif (match = path.match(s.EXTENSION_PATT)) {\r\n\t\t\tinfo.extension = match[1].toLowerCase();\r\n\t\t}\r\n\t\treturn info;\r\n\t};\r\n\r\n\t/**\r\n\t * Formats an object into a query string for either a POST or GET request.\r\n\t * @method formatQueryString\r\n\t * @param {Object} data The data to convert to a query string.\r\n\t * @param {Array} [query] Existing name/value pairs to append on to this query.\r\n\t * @static\r\n\t */\r\n\ts.formatQueryString = function (data, query) {\r\n\t\tif (data == null) {\r\n\t\t\tthrow new Error('You must specify data.');\r\n\t\t}\r\n\t\tvar params = [];\r\n\t\tfor (var n in data) {\r\n\t\t\tparams.push(n + '=' + escape(data[n]));\r\n\t\t}\r\n\t\tif (query) {\r\n\t\t\tparams = params.concat(query);\r\n\t\t}\r\n\t\treturn params.join('&');\r\n\t};\r\n\r\n\t/**\r\n\t * A utility method that builds a file path using a source and a data object, and formats it into a new path.\r\n\t * @method buildPath\r\n\t * @param {String} src The source path to add values to.\r\n\t * @param {Object} [data] Object used to append values to this request as a query string. Existing parameters on the\r\n\t * path will be preserved.\r\n\t * @returns {string} A formatted string that contains the path and the supplied parameters.\r\n\t * @static\r\n\t */\r\n\ts.buildPath = function (src, data) {\r\n\t\tif (data == null) {\r\n\t\t\treturn src;\r\n\t\t}\r\n\r\n\t\tvar query = [];\r\n\t\tvar idx = src.indexOf('?');\r\n\r\n\t\tif (idx != -1) {\r\n\t\t\tvar q = src.slice(idx + 1);\r\n\t\t\tquery = query.concat(q.split('&'));\r\n\t\t}\r\n\r\n\t\tif (idx != -1) {\r\n\t\t\treturn src.slice(0, idx) + '?' + this.formatQueryString(data, query);\r\n\t\t} else {\r\n\t\t\treturn src + '?' + this.formatQueryString(data, query);\r\n\t\t}\r\n\t};\r\n\r\n\t/**\r\n\t * @method isCrossDomain\r\n\t * @param {LoadItem|Object} item A load item with a `src` property.\r\n\t * @return {Boolean} If the load item is loading from a different domain than the current location.\r\n\t * @static\r\n\t */\r\n\ts.isCrossDomain = function (item) {\r\n\t\tvar target = document.createElement(\"a\");\r\n\t\ttarget.href = item.src;\r\n\r\n\t\tvar host = document.createElement(\"a\");\r\n\t\thost.href = location.href;\r\n\r\n\t\tvar crossdomain = (target.hostname != \"\") &&\r\n\t\t\t\t\t\t  (target.port != host.port ||\r\n\t\t\t\t\t\t   target.protocol != host.protocol ||\r\n\t\t\t\t\t\t   target.hostname != host.hostname);\r\n\t\treturn crossdomain;\r\n\t};\r\n\r\n\t/**\r\n\t * @method isLocal\r\n\t * @param {LoadItem|Object} item A load item with a `src` property\r\n\t * @return {Boolean} If the load item is loading from the \"file:\" protocol. Assume that the host must be local as\r\n\t * well.\r\n\t * @static\r\n\t */\r\n\ts.isLocal = function (item) {\r\n\t\tvar target = document.createElement(\"a\");\r\n\t\ttarget.href = item.src;\r\n\t\treturn target.hostname == \"\" && target.protocol == \"file:\";\r\n\t};\r\n\r\n\t/**\r\n\t * Determine if a specific type should be loaded as a binary file. Currently, only images and items marked\r\n\t * specifically as \"binary\" are loaded as binary. Note that audio is <b>not</b> a binary type, as we can not play\r\n\t * back using an audio tag if it is loaded as binary. Plugins can change the item type to binary to ensure they get\r\n\t * a binary result to work with. Binary files are loaded using XHR2. Types are defined as static constants on\r\n\t * {{#crossLink \"AbstractLoader\"}}{{/crossLink}}.\r\n\t * @method isBinary\r\n\t * @param {String} type The item type.\r\n\t * @return {Boolean} If the specified type is binary.\r\n\t * @static\r\n\t */\r\n\ts.isBinary = function (type) {\r\n\t\tswitch (type) {\r\n\t\t\tcase createjs.AbstractLoader.IMAGE:\r\n\t\t\tcase createjs.AbstractLoader.BINARY:\r\n\t\t\t\treturn true;\r\n\t\t\tdefault:\r\n\t\t\t\treturn false;\r\n\t\t}\r\n\t};\r\n\r\n\t/**\r\n\t * Check if item is a valid HTMLImageElement\r\n\t * @method isImageTag\r\n\t * @param {Object} item\r\n\t * @returns {Boolean}\r\n\t * @static\r\n\t */\r\n\ts.isImageTag = function(item) {\r\n\t\treturn item instanceof HTMLImageElement;\r\n\t};\r\n\r\n\t/**\r\n\t * Check if item is a valid HTMLAudioElement\r\n\t * @method isAudioTag\r\n\t * @param {Object} item\r\n\t * @returns {Boolean}\r\n\t * @static\r\n\t */\r\n\ts.isAudioTag = function(item) {\r\n\t\tif (window.HTMLAudioElement) {\r\n\t\t\treturn item instanceof HTMLAudioElement;\r\n\t\t} else {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t};\r\n\r\n\t/**\r\n\t * Check if item is a valid HTMLVideoElement\r\n\t * @method isVideoTag\r\n\t * @param {Object} item\r\n\t * @returns {Boolean}\r\n\t * @static\r\n\t */\r\n\ts.isVideoTag = function(item) {\r\n\t\tif (window.HTMLVideoElement) {\r\n\t\t\treturn item instanceof HTMLVideoElement;\r\n\t\t} else {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t};\r\n\r\n\t/**\r\n\t * Determine if a specific type is a text-based asset, and should be loaded as UTF-8.\r\n\t * @method isText\r\n\t * @param {String} type The item type.\r\n\t * @return {Boolean} If the specified type is text.\r\n\t * @static\r\n\t */\r\n\ts.isText = function (type) {\r\n\t\tswitch (type) {\r\n\t\t\tcase createjs.AbstractLoader.TEXT:\r\n\t\t\tcase createjs.AbstractLoader.JSON:\r\n\t\t\tcase createjs.AbstractLoader.MANIFEST:\r\n\t\t\tcase createjs.AbstractLoader.XML:\r\n\t\t\tcase createjs.AbstractLoader.CSS:\r\n\t\t\tcase createjs.AbstractLoader.SVG:\r\n\t\t\tcase createjs.AbstractLoader.JAVASCRIPT:\r\n\t\t\tcase createjs.AbstractLoader.SPRITESHEET:\r\n\t\t\t\treturn true;\r\n\t\t\tdefault:\r\n\t\t\t\treturn false;\r\n\t\t}\r\n\t};\r\n\r\n\t/**\r\n\t * Determine the type of the object using common extensions. Note that the type can be passed in with the load item\r\n\t * if it is an unusual extension.\r\n\t * @method getTypeByExtension\r\n\t * @param {String} extension The file extension to use to determine the load type.\r\n\t * @return {String} The determined load type (for example, <code>AbstractLoader.IMAGE</code>). Will return `null` if\r\n\t * the type can not be determined by the extension.\r\n\t * @static\r\n\t */\r\n\ts.getTypeByExtension = function (extension) {\r\n\t\tif (extension == null) {\r\n\t\t\treturn createjs.AbstractLoader.TEXT;\r\n\t\t}\r\n\r\n\t\tswitch (extension.toLowerCase()) {\r\n\t\t\tcase \"jpeg\":\r\n\t\t\tcase \"jpg\":\r\n\t\t\tcase \"gif\":\r\n\t\t\tcase \"png\":\r\n\t\t\tcase \"webp\":\r\n\t\t\tcase \"bmp\":\r\n\t\t\t\treturn createjs.AbstractLoader.IMAGE;\r\n\t\t\tcase \"ogg\":\r\n\t\t\tcase \"mp3\":\r\n\t\t\tcase \"webm\":\r\n\t\t\t\treturn createjs.AbstractLoader.SOUND;\r\n\t\t\tcase \"mp4\":\r\n\t\t\tcase \"webm\":\r\n\t\t\tcase \"ts\":\r\n\t\t\t\treturn createjs.AbstractLoader.VIDEO;\r\n\t\t\tcase \"json\":\r\n\t\t\t\treturn createjs.AbstractLoader.JSON;\r\n\t\t\tcase \"xml\":\r\n\t\t\t\treturn createjs.AbstractLoader.XML;\r\n\t\t\tcase \"css\":\r\n\t\t\t\treturn createjs.AbstractLoader.CSS;\r\n\t\t\tcase \"js\":\r\n\t\t\t\treturn createjs.AbstractLoader.JAVASCRIPT;\r\n\t\t\tcase 'svg':\r\n\t\t\t\treturn createjs.AbstractLoader.SVG;\r\n\t\t\tdefault:\r\n\t\t\t\treturn createjs.AbstractLoader.TEXT;\r\n\t\t}\r\n\t};\r\n\r\n\tcreatejs.RequestUtils = s;\r\n\r\n}());\r\n\r\n//##############################################################################\r\n// AbstractLoader.js\r\n//##############################################################################\r\n\r\nthis.createjs = this.createjs || {};\r\n\r\n(function () {\r\n\t\"use strict\";\r\n\r\n// constructor\r\n\t/**\r\n\t * The base loader, which defines all the generic methods, properties, and events. All loaders extend this class,\r\n\t * including the {{#crossLink \"LoadQueue\"}}{{/crossLink}}.\r\n\t * @class AbstractLoader\r\n\t * @param {LoadItem|object|string} loadItem The item to be loaded.\r\n\t * @param {Boolean} [preferXHR] Determines if the LoadItem should <em>try</em> and load using XHR, or take a\r\n\t * tag-based approach, which can be better in cross-domain situations. Not all loaders can load using one or the\r\n\t * other, so this is a suggested directive.\r\n\t * @param {String} [type] The type of loader. Loader types are defined as constants on the AbstractLoader class,\r\n\t * such as {{#crossLink \"IMAGE:property\"}}{{/crossLink}}, {{#crossLink \"CSS:property\"}}{{/crossLink}}, etc.\r\n\t * @extends EventDispatcher\r\n\t */\r\n\tfunction AbstractLoader(loadItem, preferXHR, type) {\r\n\t\tthis.EventDispatcher_constructor();\r\n\r\n\t\t// public properties\r\n\t\t/**\r\n\t\t * If the loader has completed loading. This provides a quick check, but also ensures that the different approaches\r\n\t\t * used for loading do not pile up resulting in more than one `complete` {{#crossLink \"Event\"}}{{/crossLink}}.\r\n\t\t * @property loaded\r\n\t\t * @type {Boolean}\r\n\t\t * @default false\r\n\t\t */\r\n\t\tthis.loaded = false;\r\n\r\n\t\t/**\r\n\t\t * Determine if the loader was canceled. Canceled loads will not fire complete events. Note that this property\r\n\t\t * is readonly, so {{#crossLink \"LoadQueue\"}}{{/crossLink}} queues should be closed using {{#crossLink \"LoadQueue/close\"}}{{/crossLink}}\r\n\t\t * instead.\r\n\t\t * @property canceled\r\n\t\t * @type {Boolean}\r\n\t\t * @default false\r\n\t\t * @readonly\r\n\t\t */\r\n\t\tthis.canceled = false;\r\n\r\n\t\t/**\r\n\t\t * The current load progress (percentage) for this item. This will be a number between 0 and 1.\r\n\t\t *\r\n\t\t * <h4>Example</h4>\r\n\t\t *\r\n\t\t *     var queue = new createjs.LoadQueue();\r\n\t\t *     queue.loadFile(\"largeImage.png\");\r\n\t\t *     queue.on(\"progress\", function() {\r\n\t\t *         console.log(\"Progress:\", queue.progress, event.progress);\r\n\t\t *     });\r\n\t\t *\r\n\t\t * @property progress\r\n\t\t * @type {Number}\r\n\t\t * @default 0\r\n\t\t */\r\n\t\tthis.progress = 0;\r\n\r\n\t\t/**\r\n\t\t * The type of item this loader will load. See {{#crossLink \"AbstractLoader\"}}{{/crossLink}} for a full list of\r\n\t\t * supported types.\r\n\t\t * @property type\r\n\t\t * @type {String}\r\n\t\t */\r\n\t\tthis.type = type;\r\n\r\n\t\t/**\r\n\t\t * A formatter function that converts the loaded raw result into the final result. For example, the JSONLoader\r\n\t\t * converts a string of text into a JavaScript object. Not all loaders have a resultFormatter, and this property\r\n\t\t * can be overridden to provide custom formatting.\r\n\t\t *\r\n\t\t * Optionally, a resultFormatter can return a callback function in cases where the formatting needs to be\r\n\t\t * asynchronous, such as creating a new image. The callback function is passed 2 parameters, which are callbacks\r\n\t\t * to handle success and error conditions in the resultFormatter. Note that the resultFormatter method is\r\n\t\t * called in the current scope, as well as the success and error callbacks.\r\n\t\t *\r\n\t\t * <h4>Example asynchronous resultFormatter</h4>\r\n\t\t *\r\n\t\t * \tfunction _formatResult(loader) {\r\n\t\t * \t\treturn function(success, error) {\r\n\t\t * \t\t\tif (errorCondition) { error(errorDetailEvent); }\r\n\t\t * \t\t\tsuccess(result);\r\n\t\t * \t\t}\r\n\t\t * \t}\r\n\t\t * @property resultFormatter\r\n\t\t * @type {Function}\r\n\t\t * @default null\r\n\t\t */\r\n\t\tthis.resultFormatter = null;\r\n\r\n\t\t// protected properties\r\n\t\t/**\r\n\t\t * The {{#crossLink \"LoadItem\"}}{{/crossLink}} this loader represents. Note that this is null in a {{#crossLink \"LoadQueue\"}}{{/crossLink}},\r\n\t\t * but will be available on loaders such as {{#crossLink \"XMLLoader\"}}{{/crossLink}} and {{#crossLink \"ImageLoader\"}}{{/crossLink}}.\r\n\t\t * @property _item\r\n\t\t * @type {LoadItem|Object}\r\n\t\t * @private\r\n\t\t */\r\n\t\tif (loadItem) {\r\n\t\t\tthis._item = createjs.LoadItem.create(loadItem);\r\n\t\t} else {\r\n\t\t\tthis._item = null;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * Whether the loader will try and load content using XHR (true) or HTML tags (false).\r\n\t\t * @property _preferXHR\r\n\t\t * @type {Boolean}\r\n\t\t * @private\r\n\t\t */\r\n\t\tthis._preferXHR = preferXHR;\r\n\r\n\t\t/**\r\n\t\t * The loaded result after it is formatted by an optional {{#crossLink \"resultFormatter\"}}{{/crossLink}}. For\r\n\t\t * items that are not formatted, this will be the same as the {{#crossLink \"_rawResult:property\"}}{{/crossLink}}.\r\n\t\t * The result is accessed using the {{#crossLink \"getResult\"}}{{/crossLink}} method.\r\n\t\t * @property _result\r\n\t\t * @type {Object|String}\r\n\t\t * @private\r\n\t\t */\r\n\t\tthis._result = null;\r\n\r\n\t\t/**\r\n\t\t * The loaded result before it is formatted. The rawResult is accessed using the {{#crossLink \"getResult\"}}{{/crossLink}}\r\n\t\t * method, and passing `true`.\r\n\t\t * @property _rawResult\r\n\t\t * @type {Object|String}\r\n\t\t * @private\r\n\t\t */\r\n\t\tthis._rawResult = null;\r\n\r\n\t\t/**\r\n\t\t * A list of items that loaders load behind the scenes. This does not include the main item the loader is\r\n\t\t * responsible for loading. Examples of loaders that have sub-items include the {{#crossLink \"SpriteSheetLoader\"}}{{/crossLink}} and\r\n\t\t * {{#crossLink \"ManifestLoader\"}}{{/crossLink}}.\r\n\t\t * @property _loadItems\r\n\t\t * @type {null}\r\n\t\t * @protected\r\n\t\t */\r\n\t\tthis._loadedItems = null;\r\n\r\n\t\t/**\r\n\t\t * The attribute the items loaded using tags use for the source.\r\n\t\t * @type {string}\r\n\t\t * @default null\r\n\t\t * @private\r\n\t\t */\r\n\t\tthis._tagSrcAttribute = null;\r\n\r\n\t\t/**\r\n\t\t * An HTML tag (or similar) that a loader may use to load HTML content, such as images, scripts, etc.\r\n\t\t * @property _tag\r\n\t\t * @type {Object}\r\n\t\t * @private\r\n\t\t */\r\n\t\tthis._tag = null;\r\n\t};\r\n\r\n\tvar p = createjs.extend(AbstractLoader, createjs.EventDispatcher);\r\n\tvar s = AbstractLoader;\r\n\r\n\t// TODO: deprecated\r\n\t// p.initialize = function() {}; // searchable for devs wondering where it is. REMOVED. See docs for details.\r\n\r\n\r\n\t/**\r\n\t * Defines a POST request, use for a method value when loading data.\r\n\t * @property POST\r\n\t * @type {string}\r\n\t * @default post\r\n\t * @static\r\n\t */\r\n\ts.POST = \"POST\";\r\n\r\n\t/**\r\n\t * Defines a GET request, use for a method value when loading data.\r\n\t * @property GET\r\n\t * @type {string}\r\n\t * @default get\r\n\t * @static\r\n\t */\r\n\ts.GET = \"GET\";\r\n\r\n\t/**\r\n\t * The preload type for generic binary types. Note that images are loaded as binary files when using XHR.\r\n\t * @property BINARY\r\n\t * @type {String}\r\n\t * @default binary\r\n\t * @static\r\n\t * @since 0.6.0\r\n\t */\r\n\ts.BINARY = \"binary\";\r\n\r\n\t/**\r\n\t * The preload type for css files. CSS files are loaded using a &lt;link&gt; when loaded with XHR, or a\r\n\t * &lt;style&gt; tag when loaded with tags.\r\n\t * @property CSS\r\n\t * @type {String}\r\n\t * @default css\r\n\t * @static\r\n\t * @since 0.6.0\r\n\t */\r\n\ts.CSS = \"css\";\r\n\r\n\t/**\r\n\t * The preload type for image files, usually png, gif, or jpg/jpeg. Images are loaded into an &lt;image&gt; tag.\r\n\t * @property IMAGE\r\n\t * @type {String}\r\n\t * @default image\r\n\t * @static\r\n\t * @since 0.6.0\r\n\t */\r\n\ts.IMAGE = \"image\";\r\n\r\n\t/**\r\n\t * The preload type for javascript files, usually with the \"js\" file extension. JavaScript files are loaded into a\r\n\t * &lt;script&gt; tag.\r\n\t *\r\n\t * Since version 0.4.1+, due to how tag-loaded scripts work, all JavaScript files are automatically injected into\r\n\t * the body of the document to maintain parity between XHR and tag-loaded scripts. In version 0.4.0 and earlier,\r\n\t * only tag-loaded scripts are injected.\r\n\t * @property JAVASCRIPT\r\n\t * @type {String}\r\n\t * @default javascript\r\n\t * @static\r\n\t * @since 0.6.0\r\n\t */\r\n\ts.JAVASCRIPT = \"javascript\";\r\n\r\n\t/**\r\n\t * The preload type for json files, usually with the \"json\" file extension. JSON data is loaded and parsed into a\r\n\t * JavaScript object. Note that if a `callback` is present on the load item, the file will be loaded with JSONP,\r\n\t * no matter what the {{#crossLink \"LoadQueue/preferXHR:property\"}}{{/crossLink}} property is set to, and the JSON\r\n\t * must contain a matching wrapper function.\r\n\t * @property JSON\r\n\t * @type {String}\r\n\t * @default json\r\n\t * @static\r\n\t * @since 0.6.0\r\n\t */\r\n\ts.JSON = \"json\";\r\n\r\n\t/**\r\n\t * The preload type for jsonp files, usually with the \"json\" file extension. JSON data is loaded and parsed into a\r\n\t * JavaScript object. You are required to pass a callback parameter that matches the function wrapper in the JSON.\r\n\t * Note that JSONP will always be used if there is a callback present, no matter what the {{#crossLink \"LoadQueue/preferXHR:property\"}}{{/crossLink}}\r\n\t * property is set to.\r\n\t * @property JSONP\r\n\t * @type {String}\r\n\t * @default jsonp\r\n\t * @static\r\n\t * @since 0.6.0\r\n\t */\r\n\ts.JSONP = \"jsonp\";\r\n\r\n\t/**\r\n\t * The preload type for json-based manifest files, usually with the \"json\" file extension. The JSON data is loaded\r\n\t * and parsed into a JavaScript object. PreloadJS will then look for a \"manifest\" property in the JSON, which is an\r\n\t * Array of files to load, following the same format as the {{#crossLink \"LoadQueue/loadManifest\"}}{{/crossLink}}\r\n\t * method. If a \"callback\" is specified on the manifest object, then it will be loaded using JSONP instead,\r\n\t * regardless of what the {{#crossLink \"LoadQueue/preferXHR:property\"}}{{/crossLink}} property is set to.\r\n\t * @property MANIFEST\r\n\t * @type {String}\r\n\t * @default manifest\r\n\t * @static\r\n\t * @since 0.6.0\r\n\t */\r\n\ts.MANIFEST = \"manifest\";\r\n\r\n\t/**\r\n\t * The preload type for sound files, usually mp3, ogg, or wav. When loading via tags, audio is loaded into an\r\n\t * &lt;audio&gt; tag.\r\n\t * @property SOUND\r\n\t * @type {String}\r\n\t * @default sound\r\n\t * @static\r\n\t * @since 0.6.0\r\n\t */\r\n\ts.SOUND = \"sound\";\r\n\r\n\t/**\r\n\t * The preload type for video files, usually mp4, ts, or ogg. When loading via tags, video is loaded into an\r\n\t * &lt;video&gt; tag.\r\n\t * @property VIDEO\r\n\t * @type {String}\r\n\t * @default video\r\n\t * @static\r\n\t * @since 0.6.0\r\n\t */\r\n\ts.VIDEO = \"video\";\r\n\r\n\t/**\r\n\t * The preload type for SpriteSheet files. SpriteSheet files are JSON files that contain string image paths.\r\n\t * @property SPRITESHEET\r\n\t * @type {String}\r\n\t * @default spritesheet\r\n\t * @static\r\n\t * @since 0.6.0\r\n\t */\r\n\ts.SPRITESHEET = \"spritesheet\";\r\n\r\n\t/**\r\n\t * The preload type for SVG files.\r\n\t * @property SVG\r\n\t * @type {String}\r\n\t * @default svg\r\n\t * @static\r\n\t * @since 0.6.0\r\n\t */\r\n\ts.SVG = \"svg\";\r\n\r\n\t/**\r\n\t * The preload type for text files, which is also the default file type if the type can not be determined. Text is\r\n\t * loaded as raw text.\r\n\t * @property TEXT\r\n\t * @type {String}\r\n\t * @default text\r\n\t * @static\r\n\t * @since 0.6.0\r\n\t */\r\n\ts.TEXT = \"text\";\r\n\r\n\t/**\r\n\t * The preload type for xml files. XML is loaded into an XML document.\r\n\t * @property XML\r\n\t * @type {String}\r\n\t * @default xml\r\n\t * @static\r\n\t * @since 0.6.0\r\n\t */\r\n\ts.XML = \"xml\";\r\n\r\n// Events\r\n\t/**\r\n\t * The {{#crossLink \"ProgressEvent\"}}{{/crossLink}} that is fired when the overall progress changes. Prior to\r\n\t * version 0.6.0, this was just a regular {{#crossLink \"Event\"}}{{/crossLink}}.\r\n\t * @event progress\r\n\t * @since 0.3.0\r\n\t */\r\n\r\n\t/**\r\n\t * The {{#crossLink \"Event\"}}{{/crossLink}} that is fired when a load starts.\r\n\t * @event loadstart\r\n\t * @param {Object} target The object that dispatched the event.\r\n\t * @param {String} type The event type.\r\n\t * @since 0.3.1\r\n\t */\r\n\r\n\t/**\r\n\t * The {{#crossLink \"Event\"}}{{/crossLink}} that is fired when the entire queue has been loaded.\r\n\t * @event complete\r\n\t * @param {Object} target The object that dispatched the event.\r\n\t * @param {String} type The event type.\r\n\t * @since 0.3.0\r\n\t */\r\n\r\n\t/**\r\n\t * The {{#crossLink \"ErrorEvent\"}}{{/crossLink}} that is fired when the loader encounters an error. If the error was\r\n\t * encountered by a file, the event will contain the item that caused the error. Prior to version 0.6.0, this was\r\n\t * just a regular {{#crossLink \"Event\"}}{{/crossLink}}.\r\n\t * @event error\r\n\t * @since 0.3.0\r\n\t */\r\n\r\n\t/**\r\n\t * The {{#crossLink \"Event\"}}{{/crossLink}} that is fired when the loader encounters an internal file load error.\r\n\t * This enables loaders to maintain internal queues, and surface file load errors.\r\n\t * @event fileerror\r\n\t * @param {Object} target The object that dispatched the event.\r\n\t * @param {String} type The even type (\"fileerror\")\r\n\t * @param {LoadItem|object} The item that encountered the error\r\n\t * @since 0.6.0\r\n\t */\r\n\r\n\t/**\r\n\t * The {{#crossLink \"Event\"}}{{/crossLink}} that is fired when a loader internally loads a file. This enables\r\n\t * loaders such as {{#crossLink \"ManifestLoader\"}}{{/crossLink}} to maintain internal {{#crossLink \"LoadQueue\"}}{{/crossLink}}s\r\n\t * and notify when they have loaded a file. The {{#crossLink \"LoadQueue\"}}{{/crossLink}} class dispatches a\r\n\t * slightly different {{#crossLink \"LoadQueue/fileload:event\"}}{{/crossLink}} event.\r\n\t * @event fileload\r\n\t * @param {Object} target The object that dispatched the event.\r\n\t * @param {String} type The event type (\"fileload\")\r\n\t * @param {Object} item The file item which was specified in the {{#crossLink \"LoadQueue/loadFile\"}}{{/crossLink}}\r\n\t * or {{#crossLink \"LoadQueue/loadManifest\"}}{{/crossLink}} call. If only a string path or tag was specified, the\r\n\t * object will contain that value as a `src` property.\r\n\t * @param {Object} result The HTML tag or parsed result of the loaded item.\r\n\t * @param {Object} rawResult The unprocessed result, usually the raw text or binary data before it is converted\r\n\t * to a usable object.\r\n\t * @since 0.6.0\r\n\t */\r\n\r\n\t/**\r\n\t * The {{#crossLink \"Event\"}}{{/crossLink}} that is fired after the internal request is created, but before a load.\r\n\t * This allows updates to the loader for specific loading needs, such as binary or XHR image loading.\r\n\t * @event initialize\r\n\t * @param {Object} target The object that dispatched the event.\r\n\t * @param {String} type The event type (\"initialize\")\r\n\t * @param {AbstractLoader} loader The loader that has been initialized.\r\n\t */\r\n\r\n\r\n\t/**\r\n\t * Get a reference to the manifest item that is loaded by this loader. In some cases this will be the value that was\r\n\t * passed into {{#crossLink \"LoadQueue\"}}{{/crossLink}} using {{#crossLink \"LoadQueue/loadFile\"}}{{/crossLink}} or\r\n\t * {{#crossLink \"LoadQueue/loadManifest\"}}{{/crossLink}}. However if only a String path was passed in, then it will\r\n\t * be a {{#crossLink \"LoadItem\"}}{{/crossLink}}.\r\n\t * @method getItem\r\n\t * @return {Object} The manifest item that this loader is responsible for loading.\r\n\t * @since 0.6.0\r\n\t */\r\n\tp.getItem = function () {\r\n\t\treturn this._item;\r\n\t};\r\n\r\n\t/**\r\n\t * Get a reference to the content that was loaded by the loader (only available after the {{#crossLink \"complete:event\"}}{{/crossLink}}\r\n\t * event is dispatched.\r\n\t * @method getResult\r\n\t * @param {Boolean} [raw=false] Determines if the returned result will be the formatted content, or the raw loaded\r\n\t * data (if it exists).\r\n\t * @return {Object}\r\n\t * @since 0.6.0\r\n\t */\r\n\tp.getResult = function (raw) {\r\n\t\treturn raw ? this._rawResult : this._result;\r\n\t};\r\n\r\n\t/**\r\n\t * Return the `tag` this object creates or uses for loading.\r\n\t * @method getTag\r\n\t * @return {Object} The tag instance\r\n\t * @since 0.6.0\r\n\t */\r\n\tp.getTag = function () {\r\n\t\treturn this._tag;\r\n\t};\r\n\r\n\t/**\r\n\t * Set the `tag` this item uses for loading.\r\n\t * @method setTag\r\n\t * @param {Object} tag The tag instance\r\n\t * @since 0.6.0\r\n\t */\r\n\tp.setTag = function(tag) {\r\n\t  this._tag = tag;\r\n\t};\r\n\r\n\t/**\r\n\t * Begin loading the item. This method is required when using a loader by itself.\r\n\t *\r\n\t * <h4>Example</h4>\r\n\t *\r\n\t *      var queue = new createjs.LoadQueue();\r\n\t *      queue.on(\"complete\", handleComplete);\r\n\t *      queue.loadManifest(fileArray, false); // Note the 2nd argument that tells the queue not to start loading yet\r\n\t *      queue.load();\r\n\t *\r\n\t * @method load\r\n\t */\r\n\tp.load = function () {\r\n\t\tthis._createRequest();\r\n\r\n\t\tthis._request.on(\"complete\", this, this);\r\n\t\tthis._request.on(\"progress\", this, this);\r\n\t\tthis._request.on(\"loadStart\", this, this);\r\n\t\tthis._request.on(\"abort\", this, this);\r\n\t\tthis._request.on(\"timeout\", this, this);\r\n\t\tthis._request.on(\"error\", this, this);\r\n\r\n\t\tvar evt = new createjs.Event(\"initialize\");\r\n\t\tevt.loader = this._request;\r\n\t\tthis.dispatchEvent(evt);\r\n\r\n\t\tthis._request.load();\r\n\t};\r\n\r\n\t/**\r\n\t * Close the the item. This will stop any open requests (although downloads using HTML tags may still continue in\r\n\t * the background), but events will not longer be dispatched.\r\n\t * @method cancel\r\n\t */\r\n\tp.cancel = function () {\r\n\t\tthis.canceled = true;\r\n\t\tthis.destroy();\r\n\t};\r\n\r\n\t/**\r\n\t * Clean up the loader.\r\n\t * @method destroy\r\n\t */\r\n\tp.destroy = function() {\r\n\t\tif (this._request) {\r\n\t\t\tthis._request.removeAllEventListeners();\r\n\t\t\tthis._request.destroy();\r\n\t\t}\r\n\r\n\t\tthis._request = null;\r\n\r\n\t\tthis._item = null;\r\n\t\tthis._rawResult = null;\r\n\t\tthis._result = null;\r\n\r\n\t\tthis._loadItems = null;\r\n\r\n\t\tthis.removeAllEventListeners();\r\n\t};\r\n\r\n\t/**\r\n\t * Get any items loaded internally by the loader. The enables loaders such as {{#crossLink \"ManifestLoader\"}}{{/crossLink}}\r\n\t * to expose items it loads internally.\r\n\t * @method getLoadedItems\r\n\t * @return {Array} A list of the items loaded by the loader.\r\n\t * @since 0.6.0\r\n\t */\r\n\tp.getLoadedItems = function () {\r\n\t\treturn this._loadedItems;\r\n\t};\r\n\r\n\r\n\t// Private methods\r\n\t/**\r\n\t * Create an internal request used for loading. By default, an {{#crossLink \"XHRRequest\"}}{{/crossLink}} or\r\n\t * {{#crossLink \"TagRequest\"}}{{/crossLink}} is created, depending on the value of {{#crossLink \"preferXHR:property\"}}{{/crossLink}}.\r\n\t * Other loaders may override this to use different request types, such as {{#crossLink \"ManifestLoader\"}}{{/crossLink}},\r\n\t * which uses {{#crossLink \"JSONLoader\"}}{{/crossLink}} or {{#crossLink \"JSONPLoader\"}}{{/crossLink}} under the hood.\r\n\t * @method _createRequest\r\n\t * @protected\r\n\t */\r\n\tp._createRequest = function() {\r\n\t\tif (!this._preferXHR) {\r\n\t\t\tthis._request = new createjs.TagRequest(this._item, this._tag || this._createTag(), this._tagSrcAttribute);\r\n\t\t} else {\r\n\t\t\tthis._request = new createjs.XHRRequest(this._item);\r\n\t\t}\r\n\t};\r\n\r\n\t/**\r\n\t * Create the HTML tag used for loading. This method does nothing by default, and needs to be implemented\r\n\t * by loaders that require tag loading.\r\n\t * @method _createTag\r\n\t * @param {String} src The tag source\r\n\t * @return {HTMLElement} The tag that was created\r\n\t * @protected\r\n\t */\r\n\tp._createTag = function(src) { return null; };\r\n\r\n\t/**\r\n\t * Dispatch a loadstart {{#crossLink \"Event\"}}{{/crossLink}}. Please see the {{#crossLink \"AbstractLoader/loadstart:event\"}}{{/crossLink}}\r\n\t * event for details on the event payload.\r\n\t * @method _sendLoadStart\r\n\t * @protected\r\n\t */\r\n\tp._sendLoadStart = function () {\r\n\t\tif (this._isCanceled()) { return; }\r\n\t\tthis.dispatchEvent(\"loadstart\");\r\n\t};\r\n\r\n\t/**\r\n\t * Dispatch a {{#crossLink \"ProgressEvent\"}}{{/crossLink}}.\r\n\t * @method _sendProgress\r\n\t * @param {Number | Object} value The progress of the loaded item, or an object containing <code>loaded</code>\r\n\t * and <code>total</code> properties.\r\n\t * @protected\r\n\t */\r\n\tp._sendProgress = function (value) {\r\n\t\tif (this._isCanceled()) { return; }\r\n\t\tvar event = null;\r\n\t\tif (typeof(value) == \"number\") {\r\n\t\t\tthis.progress = value;\r\n\t\t\tevent = new createjs.ProgressEvent(this.progress);\r\n\t\t} else {\r\n\t\t\tevent = value;\r\n\t\t\tthis.progress = value.loaded / value.total;\r\n\t\t\tevent.progress = this.progress;\r\n\t\t\tif (isNaN(this.progress) || this.progress == Infinity) { this.progress = 0; }\r\n\t\t}\r\n\t\tthis.hasEventListener(\"progress\") && this.dispatchEvent(event);\r\n\t};\r\n\r\n\t/**\r\n\t * Dispatch a complete {{#crossLink \"Event\"}}{{/crossLink}}. Please see the {{#crossLink \"AbstractLoader/complete:event\"}}{{/crossLink}} event\r\n\t * @method _sendComplete\r\n\t * @protected\r\n\t */\r\n\tp._sendComplete = function () {\r\n\t\tif (this._isCanceled()) { return; }\r\n\r\n\t\tthis.loaded = true;\r\n\r\n\t\tvar event = new createjs.Event(\"complete\");\r\n\t\tevent.rawResult = this._rawResult;\r\n\r\n\t\tif (this._result != null) {\r\n\t\t\tevent.result = this._result;\r\n\t\t}\r\n\r\n\t\tthis.dispatchEvent(event);\r\n\t};\r\n\r\n\t/**\r\n\t * Dispatch an error {{#crossLink \"Event\"}}{{/crossLink}}. Please see the {{#crossLink \"AbstractLoader/error:event\"}}{{/crossLink}}\r\n\t * event for details on the event payload.\r\n\t * @method _sendError\r\n\t * @param {ErrorEvent} event The event object containing specific error properties.\r\n\t * @protected\r\n\t */\r\n\tp._sendError = function (event) {\r\n\t\tif (this._isCanceled() || !this.hasEventListener(\"error\")) { return; }\r\n\t\tif (event == null) {\r\n\t\t\tevent = new createjs.ErrorEvent(\"PRELOAD_ERROR_EMPTY\"); // TODO: Populate error\r\n\t\t}\r\n\t\tthis.dispatchEvent(event);\r\n\t};\r\n\r\n\t/**\r\n\t * Determine if the load has been canceled. This is important to ensure that method calls or asynchronous events\r\n\t * do not cause issues after the queue has been cleaned up.\r\n\t * @method _isCanceled\r\n\t * @return {Boolean} If the loader has been canceled.\r\n\t * @protected\r\n\t */\r\n\tp._isCanceled = function () {\r\n\t\tif (window.createjs == null || this.canceled) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\treturn false;\r\n\t};\r\n\r\n\t/**\r\n\t * A custom result formatter function, which is called just before a request dispatches its complete event. Most\r\n\t * loader types already have an internal formatter, but this can be user-overridden for custom formatting. The\r\n\t * formatted result will be available on Loaders using {{#crossLink \"getResult\"}}{{/crossLink}}, and passing `true`.\r\n\t * @property resultFormatter\r\n\t * @type Function\r\n\t * @return {Object} The formatted result\r\n\t * @since 0.6.0\r\n\t */\r\n\tp.resultFormatter = null;\r\n\r\n\t/**\r\n\t * Handle events from internal requests. By default, loaders will handle, and redispatch the necessary events, but\r\n\t * this method can be overridden for custom behaviours.\r\n\t * @method handleEvent\r\n\t * @param {Event} event The event that the internal request dispatches.\r\n\t * @protected\r\n\t * @since 0.6.0\r\n\t */\r\n\tp.handleEvent = function (event) {\r\n\t\tswitch (event.type) {\r\n\t\t\tcase \"complete\":\r\n\t\t\t\tthis._rawResult = event.target._response;\r\n\t\t\t\tvar result = this.resultFormatter && this.resultFormatter(this);\r\n\t\t\t\tif (result instanceof Function) {\r\n\t\t\t\t\tresult.call(this,\r\n\t\t\t\t\t\t\tcreatejs.proxy(this._resultFormatSuccess, this),\r\n\t\t\t\t\t\t\tcreatejs.proxy(this._resultFormatFailed, this)\r\n\t\t\t\t\t);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis._result =  result || this._rawResult;\r\n\t\t\t\t\tthis._sendComplete();\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"progress\":\r\n\t\t\t\tthis._sendProgress(event);\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"error\":\r\n\t\t\t\tthis._sendError(event);\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"loadstart\":\r\n\t\t\t\tthis._sendLoadStart();\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"abort\":\r\n\t\t\tcase \"timeout\":\r\n\t\t\t\tif (!this._isCanceled()) {\r\n\t\t\t\t\tthis.dispatchEvent(new createjs.ErrorEvent(\"PRELOAD_\" + event.type.toUpperCase() + \"_ERROR\"));\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t};\r\n\r\n\t/**\r\n\t * The \"success\" callback passed to {{#crossLink \"AbstractLoader/resultFormatter\"}}{{/crossLink}} asynchronous\r\n\t * functions.\r\n\t * @method _resultFormatSuccess\r\n\t * @param {Object} result The formatted result\r\n\t * @private\r\n\t */\r\n\tp._resultFormatSuccess = function (result) {\r\n\t\tthis._result = result;\r\n\t\tthis._sendComplete();\r\n\t};\r\n\r\n\t/**\r\n\t * The \"error\" callback passed to {{#crossLink \"AbstractLoader/resultFormatter\"}}{{/crossLink}} asynchronous\r\n\t * functions.\r\n\t * @method _resultFormatSuccess\r\n\t * @param {Object} error The error event\r\n\t * @private\r\n\t */\r\n\tp._resultFormatFailed = function (event) {\r\n\t\tthis._sendError(event);\r\n\t};\r\n\r\n\t/**\r\n\t * @method buildPath\r\n\t * @protected\r\n\t * @deprecated Use the {{#crossLink \"RequestUtils\"}}{{/crossLink}} method {{#crossLink \"RequestUtils/buildPath\"}}{{/crossLink}}\r\n\t * instead.\r\n\t */\r\n\tp.buildPath = function (src, data) {\r\n\t\treturn createjs.RequestUtils.buildPath(src, data);\r\n\t};\r\n\r\n\t/**\r\n\t * @method toString\r\n\t * @return {String} a string representation of the instance.\r\n\t */\r\n\tp.toString = function () {\r\n\t\treturn \"[PreloadJS AbstractLoader]\";\r\n\t};\r\n\r\n\tcreatejs.AbstractLoader = createjs.promote(AbstractLoader, \"EventDispatcher\");\r\n\r\n}());\r\n\r\n//##############################################################################\r\n// AbstractMediaLoader.js\r\n//##############################################################################\r\n\r\nthis.createjs = this.createjs || {};\r\n\r\n(function () {\r\n\t\"use strict\";\r\n\r\n\t// constructor\r\n\t/**\r\n\t * The AbstractMediaLoader is a base class that handles some of the shared methods and properties of loaders that\r\n\t * handle HTML media elements, such as Video and Audio.\r\n\t * @class AbstractMediaLoader\r\n\t * @param {LoadItem|Object} loadItem\r\n\t * @param {Boolean} preferXHR\r\n\t * @param {String} type The type of media to load. Usually \"video\" or \"audio\".\r\n\t * @extends AbstractLoader\r\n\t * @constructor\r\n\t */\r\n\tfunction AbstractMediaLoader(loadItem, preferXHR, type) {\r\n\t\tthis.AbstractLoader_constructor(loadItem, preferXHR, type);\r\n\r\n\t\t// public properties\r\n\t\tthis.resultFormatter = this._formatResult;\r\n\r\n\t\t// protected properties\r\n\t\tthis._tagSrcAttribute = \"src\";\r\n\r\n        this.on(\"initialize\", this._updateXHR, this);\r\n\t};\r\n\r\n\tvar p = createjs.extend(AbstractMediaLoader, createjs.AbstractLoader);\r\n\r\n\t// static properties\r\n\t// public methods\r\n\tp.load = function () {\r\n\t\t// TagRequest will handle most of this, but Sound / Video need a few custom properties, so just handle them here.\r\n\t\tif (!this._tag) {\r\n\t\t\tthis._tag = this._createTag(this._item.src);\r\n\t\t}\r\n\r\n\t\tthis._tag.preload = \"auto\";\r\n\t\tthis._tag.load();\r\n\r\n\t\tthis.AbstractLoader_load();\r\n\t};\r\n\r\n\t// protected methods\r\n\t/**\r\n\t * Creates a new tag for loading if it doesn't exist yet.\r\n\t * @method _createTag\r\n\t * @private\r\n\t */\r\n\tp._createTag = function () {};\r\n\r\n\r\n\tp._createRequest = function() {\r\n\t\tif (!this._preferXHR) {\r\n\t\t\tthis._request = new createjs.MediaTagRequest(this._item, this._tag || this._createTag(), this._tagSrcAttribute);\r\n\t\t} else {\r\n\t\t\tthis._request = new createjs.XHRRequest(this._item);\r\n\t\t}\r\n\t};\r\n\r\n    // protected methods\r\n    /**\r\n     * Before the item loads, set its mimeType and responseType.\r\n     * @property _updateXHR\r\n     * @param {Event} event\r\n     * @private\r\n     */\r\n    p._updateXHR = function (event) {\r\n        // Only exists for XHR\r\n        if (event.loader.setResponseType) {\r\n            event.loader.setResponseType(\"blob\");\r\n        }\r\n    };\r\n\r\n\t/**\r\n\t * The result formatter for media files.\r\n\t * @method _formatResult\r\n\t * @param {AbstractLoader} loader\r\n\t * @returns {HTMLVideoElement|HTMLAudioElement}\r\n\t * @private\r\n\t */\r\n\tp._formatResult = function (loader) {\r\n\t\tthis._tag.removeEventListener && this._tag.removeEventListener(\"canplaythrough\", this._loadedHandler);\r\n\t\tthis._tag.onstalled = null;\r\n\t\tif (this._preferXHR) {\r\n            var URL = window.URL || window.webkitURL;\r\n            var result = loader.getResult(true);\r\n\r\n\t\t\tloader.getTag().src = URL.createObjectURL(result);\r\n\t\t}\r\n\t\treturn loader.getTag();\r\n\t};\r\n\r\n\tcreatejs.AbstractMediaLoader = createjs.promote(AbstractMediaLoader, \"AbstractLoader\");\r\n\r\n}());\r\n\r\n//##############################################################################\r\n// AbstractRequest.js\r\n//##############################################################################\r\n\r\nthis.createjs = this.createjs || {};\r\n\r\n(function () {\r\n\t\"use strict\";\r\n\r\n\t/**\r\n\t * A base class for actual data requests, such as {{#crossLink \"XHRRequest\"}}{{/crossLink}}, {{#crossLink \"TagRequest\"}}{{/crossLink}},\r\n\t * and {{#crossLink \"MediaRequest\"}}{{/crossLink}}. PreloadJS loaders will typically use a data loader under the\r\n\t * hood to get data.\r\n\t * @class AbstractRequest\r\n\t * @param {LoadItem} item\r\n\t * @constructor\r\n\t */\r\n\tvar AbstractRequest = function (item) {\r\n\t\tthis._item = item;\r\n\t};\r\n\r\n\tvar p = createjs.extend(AbstractRequest, createjs.EventDispatcher);\r\n\r\n\t// public methods\r\n\t/**\r\n\t * Begin a load.\r\n\t * @method load\r\n\t */\r\n\tp.load =  function() {};\r\n\r\n\t/**\r\n\t * Clean up a request.\r\n\t * @method destroy\r\n\t */\r\n\tp.destroy = function() {};\r\n\r\n\t/**\r\n\t * Cancel an in-progress request.\r\n\t * @method cancel\r\n\t */\r\n\tp.cancel = function() {};\r\n\r\n\tcreatejs.AbstractRequest = createjs.promote(AbstractRequest, \"EventDispatcher\");\r\n\r\n}());\r\n\r\n//##############################################################################\r\n// TagRequest.js\r\n//##############################################################################\r\n\r\nthis.createjs = this.createjs || {};\r\n\r\n(function () {\r\n\t\"use strict\";\r\n\r\n\t// constructor\r\n\t/**\r\n\t * An {{#crossLink \"AbstractRequest\"}}{{/crossLink}} that loads HTML tags, such as images and scripts.\r\n\t * @class TagRequest\r\n\t * @param {LoadItem} loadItem\r\n\t * @param {HTMLElement} tag\r\n\t * @param {String} srcAttribute The tag attribute that specifies the source, such as \"src\", \"href\", etc.\r\n\t */\r\n\tfunction TagRequest(loadItem, tag, srcAttribute) {\r\n\t\tthis.AbstractRequest_constructor(loadItem);\r\n\r\n\t\t// protected properties\r\n\t\t/**\r\n\t\t * The HTML tag instance that is used to load.\r\n\t\t * @property _tag\r\n\t\t * @type {HTMLElement}\r\n\t\t * @protected\r\n\t\t */\r\n\t\tthis._tag = tag;\r\n\r\n\t\t/**\r\n\t\t * The tag attribute that specifies the source, such as \"src\", \"href\", etc.\r\n\t\t * @property _tagSrcAttribute\r\n\t\t * @type {String}\r\n\t\t * @protected\r\n\t\t */\r\n\t\tthis._tagSrcAttribute = srcAttribute;\r\n\r\n\t\t/**\r\n\t\t * A method closure used for handling the tag load event.\r\n\t\t * @property _loadedHandler\r\n\t\t * @type {Function}\r\n\t\t * @private\r\n\t\t */\r\n\t\tthis._loadedHandler = createjs.proxy(this._handleTagComplete, this);\r\n\r\n\t\t/**\r\n\t\t * Determines if the element was added to the DOM automatically by PreloadJS, so it can be cleaned up after.\r\n\t\t * @property _addedToDOM\r\n\t\t * @type {Boolean}\r\n\t\t * @private\r\n\t\t */\r\n\t\tthis._addedToDOM = false;\r\n\r\n\t\t/**\r\n\t\t * Determines what the tags initial style.visibility was, so we can set it correctly after a load.\r\n\t\t *\r\n\t\t * @type {null}\r\n\t\t * @private\r\n\t\t */\r\n\t\tthis._startTagVisibility = null;\r\n\t};\r\n\r\n\tvar p = createjs.extend(TagRequest, createjs.AbstractRequest);\r\n\r\n\t// public methods\r\n\tp.load = function () {\r\n\t\tthis._tag.onload = createjs.proxy(this._handleTagComplete, this);\r\n\t\tthis._tag.onreadystatechange = createjs.proxy(this._handleReadyStateChange, this);\r\n\t\tthis._tag.onerror = createjs.proxy(this._handleError, this);\r\n\r\n\t\tvar evt = new createjs.Event(\"initialize\");\r\n\t\tevt.loader = this._tag;\r\n\r\n\t\tthis.dispatchEvent(evt);\r\n\r\n\t\tthis._hideTag();\r\n\r\n\t\tthis._loadTimeout = setTimeout(createjs.proxy(this._handleTimeout, this), this._item.loadTimeout);\r\n\r\n\t\tthis._tag[this._tagSrcAttribute] = this._item.src;\r\n\r\n\t\t// wdg:: Append the tag AFTER setting the src, or SVG loading on iOS will fail.\r\n\t\tif (this._tag.parentNode == null) {\r\n\t\t\twindow.document.body.appendChild(this._tag);\r\n\t\t\tthis._addedToDOM = true;\r\n\t\t}\r\n\t};\r\n\r\n\tp.destroy = function() {\r\n\t\tthis._clean();\r\n\t\tthis._tag = null;\r\n\r\n\t\tthis.AbstractRequest_destroy();\r\n\t};\r\n\r\n\t// private methods\r\n\t/**\r\n\t * Handle the readyStateChange event from a tag. We need this in place of the `onload` callback (mainly SCRIPT\r\n\t * and LINK tags), but other cases may exist.\r\n\t * @method _handleReadyStateChange\r\n\t * @private\r\n\t */\r\n\tp._handleReadyStateChange = function () {\r\n\t\tclearTimeout(this._loadTimeout);\r\n\t\t// This is strictly for tags in browsers that do not support onload.\r\n\t\tvar tag = this._tag;\r\n\r\n\t\t// Complete is for old IE support.\r\n\t\tif (tag.readyState == \"loaded\" || tag.readyState == \"complete\") {\r\n\t\t\tthis._handleTagComplete();\r\n\t\t}\r\n\t};\r\n\r\n\t/**\r\n\t * Handle any error events from the tag.\r\n\t * @method _handleError\r\n\t * @protected\r\n\t */\r\n\tp._handleError = function() {\r\n\t\tthis._clean();\r\n\t\tthis.dispatchEvent(\"error\");\r\n\t};\r\n\r\n\t/**\r\n\t * Handle the tag's onload callback.\r\n\t * @method _handleTagComplete\r\n\t * @private\r\n\t */\r\n\tp._handleTagComplete = function () {\r\n\t\tthis._rawResult = this._tag;\r\n\t\tthis._result = this.resultFormatter && this.resultFormatter(this) || this._rawResult;\r\n\r\n\t\tthis._clean();\r\n\t\tthis._showTag();\r\n\r\n\t\tthis.dispatchEvent(\"complete\");\r\n\t};\r\n\r\n\t/**\r\n\t * The tag request has not loaded within the time specified in loadTimeout.\r\n\t * @method _handleError\r\n\t * @param {Object} event The XHR error event.\r\n\t * @private\r\n\t */\r\n\tp._handleTimeout = function () {\r\n\t\tthis._clean();\r\n\t\tthis.dispatchEvent(new createjs.Event(\"timeout\"));\r\n\t};\r\n\r\n\t/**\r\n\t * Remove event listeners, but don't destroy the request object\r\n\t * @method _clean\r\n\t * @private\r\n\t */\r\n\tp._clean = function() {\r\n\t\tthis._tag.onload = null;\r\n\t\tthis._tag.onreadystatechange = null;\r\n\t\tthis._tag.onerror = null;\r\n\t\tif (this._addedToDOM && this._tag.parentNode != null) {\r\n\t\t\tthis._tag.parentNode.removeChild(this._tag);\r\n\t\t}\r\n\t\tclearTimeout(this._loadTimeout);\r\n\t};\r\n\r\n\tp._hideTag = function() {\r\n\t\tthis._startTagVisibility = this._tag.style.visibility;\r\n\t\tthis._tag.style.visibility = \"hidden\";\r\n\t};\r\n\r\n\tp._showTag = function() {\r\n\t\tthis._tag.style.visibility = this._startTagVisibility;\r\n\t};\r\n\r\n\t/**\r\n\t * Handle a stalled audio event. The main place this happens is with HTMLAudio in Chrome when playing back audio\r\n\t * that is already in a load, but not complete.\r\n\t * @method _handleStalled\r\n\t * @private\r\n\t */\r\n\tp._handleStalled = function () {\r\n\t\t//Ignore, let the timeout take care of it. Sometimes its not really stopped.\r\n\t};\r\n\r\n\tcreatejs.TagRequest = createjs.promote(TagRequest, \"AbstractRequest\");\r\n\r\n}());\r\n\r\n//##############################################################################\r\n// MediaTagRequest.js\r\n//##############################################################################\r\n\r\nthis.createjs = this.createjs || {};\r\n\r\n(function () {\r\n\t\"use strict\";\r\n\r\n\t// constructor\r\n\t/**\r\n\t * An {{#crossLink \"TagRequest\"}}{{/crossLink}} that loads HTML tags for video and audio.\r\n\t * @class MediaTagRequest\r\n\t * @param {LoadItem} loadItem\r\n\t * @param {HTMLAudioElement|HTMLVideoElement} tag\r\n\t * @param {String} srcAttribute The tag attribute that specifies the source, such as \"src\", \"href\", etc.\r\n\t * @constructor\r\n\t */\r\n\tfunction MediaTagRequest(loadItem, tag, srcAttribute) {\r\n\t\tthis.AbstractRequest_constructor(loadItem);\r\n\r\n\t\t// protected properties\r\n\t\tthis._tag = tag;\r\n\t\tthis._tagSrcAttribute = srcAttribute;\r\n\t\tthis._loadedHandler = createjs.proxy(this._handleTagComplete, this);\r\n\t};\r\n\r\n\tvar p = createjs.extend(MediaTagRequest, createjs.TagRequest);\r\n\tvar s = MediaTagRequest;\r\n\r\n\t// public methods\r\n\tp.load = function () {\r\n\t\tvar sc = createjs.proxy(this._handleStalled, this);\r\n\t\tthis._stalledCallback = sc;\r\n\r\n\t\tvar pc = createjs.proxy(this._handleProgress, this);\r\n\t\tthis._handleProgress = pc;\r\n\r\n\t\tthis._tag.addEventListener(\"stalled\", sc);\r\n\t\tthis._tag.addEventListener(\"progress\", pc);\r\n\r\n\t\t// This will tell us when audio is buffered enough to play through, but not when its loaded.\r\n\t\t// The tag doesn't keep loading in Chrome once enough has buffered, and we have decided that behaviour is sufficient.\r\n\t\tthis._tag.addEventListener && this._tag.addEventListener(\"canplaythrough\", this._loadedHandler, false); // canplaythrough callback doesn't work in Chrome, so we use an event.\r\n\r\n\t\tthis.TagRequest_load();\r\n\t};\r\n\r\n\t// private methods\r\n\tp._handleReadyStateChange = function () {\r\n\t\tclearTimeout(this._loadTimeout);\r\n\t\t// This is strictly for tags in browsers that do not support onload.\r\n\t\tvar tag = this._tag;\r\n\r\n\t\t// Complete is for old IE support.\r\n\t\tif (tag.readyState == \"loaded\" || tag.readyState == \"complete\") {\r\n\t\t\tthis._handleTagComplete();\r\n\t\t}\r\n\t};\r\n\r\n\tp._handleStalled = function () {\r\n\t\t//Ignore, let the timeout take care of it. Sometimes its not really stopped.\r\n\t};\r\n\r\n\t/**\r\n\t * An XHR request has reported progress.\r\n\t * @method _handleProgress\r\n\t * @param {Object} event The XHR progress event.\r\n\t * @private\r\n\t */\r\n\tp._handleProgress = function (event) {\r\n\t\tif (!event || event.loaded > 0 && event.total == 0) {\r\n\t\t\treturn; // Sometimes we get no \"total\", so just ignore the progress event.\r\n\t\t}\r\n\r\n\t\tvar newEvent = new createjs.ProgressEvent(event.loaded, event.total);\r\n\t\tthis.dispatchEvent(newEvent);\r\n\t};\r\n\r\n\t// protected methods\r\n\tp._clean = function () {\r\n\t\tthis._tag.removeEventListener && this._tag.removeEventListener(\"canplaythrough\", this._loadedHandler);\r\n\t\tthis._tag.removeEventListener(\"stalled\", this._stalledCallback);\r\n\t\tthis._tag.removeEventListener(\"progress\", this._progressCallback);\r\n\r\n\t\tthis.TagRequest__clean();\r\n\t};\r\n\r\n\tcreatejs.MediaTagRequest = createjs.promote(MediaTagRequest, \"TagRequest\");\r\n\r\n}());\r\n\r\n//##############################################################################\r\n// XHRRequest.js\r\n//##############################################################################\r\n\r\nthis.createjs = this.createjs || {};\r\n\r\n(function () {\r\n\t\"use strict\";\r\n\r\n// constructor\r\n\t/**\r\n\t * A preloader that loads items using XHR requests, usually XMLHttpRequest. However XDomainRequests will be used\r\n\t * for cross-domain requests if possible, and older versions of IE fall back on to ActiveX objects when necessary.\r\n\t * XHR requests load the content as text or binary data, provide progress and consistent completion events, and\r\n\t * can be canceled during load. Note that XHR is not supported in IE 6 or earlier, and is not recommended for\r\n\t * cross-domain loading.\r\n\t * @class XHRRequest\r\n\t * @constructor\r\n\t * @param {Object} item The object that defines the file to load. Please see the {{#crossLink \"LoadQueue/loadFile\"}}{{/crossLink}}\r\n\t * for an overview of supported file properties.\r\n\t * @extends AbstractLoader\r\n\t */\r\n\tfunction XHRRequest (item) {\r\n\t\tthis.AbstractRequest_constructor(item);\r\n\r\n\t\t// protected properties\r\n\t\t/**\r\n\t\t * A reference to the XHR request used to load the content.\r\n\t\t * @property _request\r\n\t\t * @type {XMLHttpRequest | XDomainRequest | ActiveX.XMLHTTP}\r\n\t\t * @private\r\n\t\t */\r\n\t\tthis._request = null;\r\n\r\n\t\t/**\r\n\t\t * A manual load timeout that is used for browsers that do not support the onTimeout event on XHR (XHR level 1,\r\n\t\t * typically IE9).\r\n\t\t * @property _loadTimeout\r\n\t\t * @type {Number}\r\n\t\t * @private\r\n\t\t */\r\n\t\tthis._loadTimeout = null;\r\n\r\n\t\t/**\r\n\t\t * The browser's XHR (XMLHTTPRequest) version. Supported versions are 1 and 2. There is no official way to detect\r\n\t\t * the version, so we use capabilities to make a best guess.\r\n\t\t * @property _xhrLevel\r\n\t\t * @type {Number}\r\n\t\t * @default 1\r\n\t\t * @private\r\n\t\t */\r\n\t\tthis._xhrLevel = 1;\r\n\r\n\t\t/**\r\n\t\t * The response of a loaded file. This is set because it is expensive to look up constantly. This property will be\r\n\t\t * null until the file is loaded.\r\n\t\t * @property _response\r\n\t\t * @type {mixed}\r\n\t\t * @private\r\n\t\t */\r\n\t\tthis._response = null;\r\n\r\n\t\t/**\r\n\t\t * The response of the loaded file before it is modified. In most cases, content is converted from raw text to\r\n\t\t * an HTML tag or a formatted object which is set to the <code>result</code> property, but the developer may still\r\n\t\t * want to access the raw content as it was loaded.\r\n\t\t * @property _rawResponse\r\n\t\t * @type {String|Object}\r\n\t\t * @private\r\n\t\t */\r\n\t\tthis._rawResponse = null;\r\n\r\n\t\tthis._canceled = false;\r\n\r\n\t\t// Setup our event handlers now.\r\n\t\tthis._handleLoadStartProxy = createjs.proxy(this._handleLoadStart, this);\r\n\t\tthis._handleProgressProxy = createjs.proxy(this._handleProgress, this);\r\n\t\tthis._handleAbortProxy = createjs.proxy(this._handleAbort, this);\r\n\t\tthis._handleErrorProxy = createjs.proxy(this._handleError, this);\r\n\t\tthis._handleTimeoutProxy = createjs.proxy(this._handleTimeout, this);\r\n\t\tthis._handleLoadProxy = createjs.proxy(this._handleLoad, this);\r\n\t\tthis._handleReadyStateChangeProxy = createjs.proxy(this._handleReadyStateChange, this);\r\n\r\n\t\tif (!this._createXHR(item)) {\r\n\t\t\t//TODO: Throw error?\r\n\t\t}\r\n\t};\r\n\r\n\tvar p = createjs.extend(XHRRequest, createjs.AbstractRequest);\r\n\r\n// static properties\r\n\t/**\r\n\t * A list of XMLHTTP object IDs to try when building an ActiveX object for XHR requests in earlier versions of IE.\r\n\t * @property ACTIVEX_VERSIONS\r\n\t * @type {Array}\r\n\t * @since 0.4.2\r\n\t * @private\r\n\t */\r\n\tXHRRequest.ACTIVEX_VERSIONS = [\r\n\t\t\"Msxml2.XMLHTTP.6.0\",\r\n\t\t\"Msxml2.XMLHTTP.5.0\",\r\n\t\t\"Msxml2.XMLHTTP.4.0\",\r\n\t\t\"MSXML2.XMLHTTP.3.0\",\r\n\t\t\"MSXML2.XMLHTTP\",\r\n\t\t\"Microsoft.XMLHTTP\"\r\n\t];\r\n\r\n// Public methods\r\n\t/**\r\n\t * Look up the loaded result.\r\n\t * @method getResult\r\n\t * @param {Boolean} [raw=false] Return a raw result instead of a formatted result. This applies to content\r\n\t * loaded via XHR such as scripts, XML, CSS, and Images. If there is no raw result, the formatted result will be\r\n\t * returned instead.\r\n\t * @return {Object} A result object containing the content that was loaded, such as:\r\n\t * <ul>\r\n\t *      <li>An image tag (&lt;image /&gt;) for images</li>\r\n\t *      <li>A script tag for JavaScript (&lt;script /&gt;). Note that scripts loaded with tags may be added to the\r\n\t *      HTML head.</li>\r\n\t *      <li>A style tag for CSS (&lt;style /&gt;)</li>\r\n\t *      <li>Raw text for TEXT</li>\r\n\t *      <li>A formatted JavaScript object defined by JSON</li>\r\n\t *      <li>An XML document</li>\r\n\t *      <li>An binary arraybuffer loaded by XHR</li>\r\n\t * </ul>\r\n\t * Note that if a raw result is requested, but not found, the result will be returned instead.\r\n\t */\r\n\tp.getResult = function (raw) {\r\n\t\tif (raw && this._rawResponse) {\r\n\t\t\treturn this._rawResponse;\r\n\t\t}\r\n\t\treturn this._response;\r\n\t};\r\n\r\n\t// Overrides abstract method in AbstractRequest\r\n\tp.cancel = function () {\r\n\t\tthis.canceled = true;\r\n\t\tthis._clean();\r\n\t\tthis._request.abort();\r\n\t};\r\n\r\n\t// Overrides abstract method in AbstractLoader\r\n\tp.load = function () {\r\n\t\tif (this._request == null) {\r\n\t\t\tthis._handleError();\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t//Events\r\n\t\tif (this._request.addEventListener != null) {\r\n\t\t\tthis._request.addEventListener(\"loadstart\", this._handleLoadStartProxy, false);\r\n\t\t\tthis._request.addEventListener(\"progress\", this._handleProgressProxy, false);\r\n\t\t\tthis._request.addEventListener(\"abort\", this._handleAbortProxy, false);\r\n\t\t\tthis._request.addEventListener(\"error\", this._handleErrorProxy, false);\r\n\t\t\tthis._request.addEventListener(\"timeout\", this._handleTimeoutProxy, false);\r\n\r\n\t\t\t// Note: We don't get onload in all browsers (earlier FF and IE). onReadyStateChange handles these.\r\n\t\t\tthis._request.addEventListener(\"load\", this._handleLoadProxy, false);\r\n\t\t\tthis._request.addEventListener(\"readystatechange\", this._handleReadyStateChangeProxy, false);\r\n\t\t} else {\r\n\t\t\t// IE9 support\r\n\t\t\tthis._request.onloadstart = this._handleLoadStartProxy;\r\n\t\t\tthis._request.onprogress = this._handleProgressProxy;\r\n\t\t\tthis._request.onabort = this._handleAbortProxy;\r\n\t\t\tthis._request.onerror = this._handleErrorProxy;\r\n\t\t\tthis._request.ontimeout = this._handleTimeoutProxy;\r\n\r\n\t\t\t// Note: We don't get onload in all browsers (earlier FF and IE). onReadyStateChange handles these.\r\n\t\t\tthis._request.onload = this._handleLoadProxy;\r\n\t\t\tthis._request.onreadystatechange = this._handleReadyStateChangeProxy;\r\n\t\t}\r\n\r\n\t\t// Set up a timeout if we don't have XHR2\r\n\t\tif (this._xhrLevel == 1) {\r\n\t\t\tthis._loadTimeout = setTimeout(createjs.proxy(this._handleTimeout, this), this._item.loadTimeout);\r\n\t\t}\r\n\r\n\t\t// Sometimes we get back 404s immediately, particularly when there is a cross origin request.  // note this does not catch in Chrome\r\n\t\ttry {\r\n\t\t\tif (!this._item.values || this._item.method == createjs.AbstractLoader.GET) {\r\n\t\t\t\tthis._request.send();\r\n\t\t\t} else if (this._item.method == createjs.AbstractLoader.POST) {\r\n\t\t\t\tthis._request.send(createjs.RequestUtils.formatQueryString(this._item.values));\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t\tthis.dispatchEvent(new createjs.ErrorEvent(\"XHR_SEND\", null, error));\r\n\t\t}\r\n\t};\r\n\r\n\tp.setResponseType = function (type) {\r\n\t\t// Some old browsers doesn't support blob, so we convert arraybuffer to blob after response is downloaded\r\n\t\tif (type === 'blob') {\r\n\t\t\ttype = window.URL ? 'blob' : 'arraybuffer';\r\n\t\t\tthis._responseType = type;\r\n\t\t}\r\n\t\tthis._request.responseType = type;\r\n\t};\r\n\r\n\t/**\r\n\t * Get all the response headers from the XmlHttpRequest.\r\n\t *\r\n\t * <strong>From the docs:</strong> Return all the HTTP headers, excluding headers that are a case-insensitive match\r\n\t * for Set-Cookie or Set-Cookie2, as a single string, with each header line separated by a U+000D CR U+000A LF pair,\r\n\t * excluding the status line, and with each header name and header value separated by a U+003A COLON U+0020 SPACE\r\n\t * pair.\r\n\t * @method getAllResponseHeaders\r\n\t * @return {String}\r\n\t * @since 0.4.1\r\n\t */\r\n\tp.getAllResponseHeaders = function () {\r\n\t\tif (this._request.getAllResponseHeaders instanceof Function) {\r\n\t\t\treturn this._request.getAllResponseHeaders();\r\n\t\t} else {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t};\r\n\r\n\t/**\r\n\t * Get a specific response header from the XmlHttpRequest.\r\n\t *\r\n\t * <strong>From the docs:</strong> Returns the header field value from the response of which the field name matches\r\n\t * header, unless the field name is Set-Cookie or Set-Cookie2.\r\n\t * @method getResponseHeader\r\n\t * @param {String} header The header name to retrieve.\r\n\t * @return {String}\r\n\t * @since 0.4.1\r\n\t */\r\n\tp.getResponseHeader = function (header) {\r\n\t\tif (this._request.getResponseHeader instanceof Function) {\r\n\t\t\treturn this._request.getResponseHeader(header);\r\n\t\t} else {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t};\r\n\r\n// protected methods\r\n\t/**\r\n\t * The XHR request has reported progress.\r\n\t * @method _handleProgress\r\n\t * @param {Object} event The XHR progress event.\r\n\t * @private\r\n\t */\r\n\tp._handleProgress = function (event) {\r\n\t\tif (!event || event.loaded > 0 && event.total == 0) {\r\n\t\t\treturn; // Sometimes we get no \"total\", so just ignore the progress event.\r\n\t\t}\r\n\r\n\t\tvar newEvent = new createjs.ProgressEvent(event.loaded, event.total);\r\n\t\tthis.dispatchEvent(newEvent);\r\n\t};\r\n\r\n\t/**\r\n\t * The XHR request has reported a load start.\r\n\t * @method _handleLoadStart\r\n\t * @param {Object} event The XHR loadStart event.\r\n\t * @private\r\n\t */\r\n\tp._handleLoadStart = function (event) {\r\n\t\tclearTimeout(this._loadTimeout);\r\n\t\tthis.dispatchEvent(\"loadstart\");\r\n\t};\r\n\r\n\t/**\r\n\t * The XHR request has reported an abort event.\r\n\t * @method handleAbort\r\n\t * @param {Object} event The XHR abort event.\r\n\t * @private\r\n\t */\r\n\tp._handleAbort = function (event) {\r\n\t\tthis._clean();\r\n\t\tthis.dispatchEvent(new createjs.ErrorEvent(\"XHR_ABORTED\", null, event));\r\n\t};\r\n\r\n\t/**\r\n\t * The XHR request has reported an error event.\r\n\t * @method _handleError\r\n\t * @param {Object} event The XHR error event.\r\n\t * @private\r\n\t */\r\n\tp._handleError = function (event) {\r\n\t\tthis._clean();\r\n\t\tthis.dispatchEvent(new createjs.ErrorEvent(event.message));\r\n\t};\r\n\r\n\t/**\r\n\t * The XHR request has reported a readyState change. Note that older browsers (IE 7 & 8) do not provide an onload\r\n\t * event, so we must monitor the readyStateChange to determine if the file is loaded.\r\n\t * @method _handleReadyStateChange\r\n\t * @param {Object} event The XHR readyStateChange event.\r\n\t * @private\r\n\t */\r\n\tp._handleReadyStateChange = function (event) {\r\n\t\tif (this._request.readyState == 4) {\r\n\t\t\tthis._handleLoad();\r\n\t\t}\r\n\t};\r\n\r\n\t/**\r\n\t * The XHR request has completed. This is called by the XHR request directly, or by a readyStateChange that has\r\n\t * <code>request.readyState == 4</code>. Only the first call to this method will be processed.\r\n\t * @method _handleLoad\r\n\t * @param {Object} event The XHR load event.\r\n\t * @private\r\n\t */\r\n\tp._handleLoad = function (event) {\r\n\t\tif (this.loaded) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.loaded = true;\r\n\r\n\t\tvar error = this._checkError();\r\n\t\tif (error) {\r\n\t\t\tthis._handleError(error);\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tthis._response = this._getResponse();\r\n\t\t// Convert arraybuffer back to blob\r\n\t\tif (this._responseType === 'arraybuffer') {\r\n\t\t\ttry {\r\n\t\t\t\tthis._response = new Blob([this._response]);\r\n\t\t\t} catch (e) {\r\n\t\t\t\t// Fallback to use BlobBuilder if Blob constructor is not supported\r\n\t\t\t\t// Tested on Android 2.3 ~ 4.2 and iOS5 safari\r\n\t\t\t\twindow.BlobBuilder = window.BlobBuilder || window.WebKitBlobBuilder || window.MozBlobBuilder || window.MSBlobBuilder;\r\n\t\t\t\tif (e.name === 'TypeError' && window.BlobBuilder) {\r\n\t\t\t\t\tvar builder = new BlobBuilder();\r\n\t\t\t\t\tbuilder.append(this._response);\r\n\t\t\t\t\tthis._response = builder.getBlob();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis._clean();\r\n\r\n\t\tthis.dispatchEvent(new createjs.Event(\"complete\"));\r\n\t};\r\n\r\n\t/**\r\n\t * The XHR request has timed out. This is called by the XHR request directly, or via a <code>setTimeout</code>\r\n\t * callback.\r\n\t * @method _handleTimeout\r\n\t * @param {Object} [event] The XHR timeout event. This is occasionally null when called by the backup setTimeout.\r\n\t * @private\r\n\t */\r\n\tp._handleTimeout = function (event) {\r\n\t\tthis._clean();\r\n\r\n\t\tthis.dispatchEvent(new createjs.ErrorEvent(\"PRELOAD_TIMEOUT\", null, event));\r\n\t};\r\n\r\n// Protected\r\n\t/**\r\n\t * Determine if there is an error in the current load. This checks the status of the request for problem codes. Note\r\n\t * that this does not check for an actual response. Currently, it only checks for 404 or 0 error code.\r\n\t * @method _checkError\r\n\t * @return {int} If the request status returns an error code.\r\n\t * @private\r\n\t */\r\n\tp._checkError = function () {\r\n\t\t//LM: Probably need additional handlers here, maybe 501\r\n\t\tvar status = parseInt(this._request.status);\r\n\r\n\t\tswitch (status) {\r\n\t\t\tcase 404:   // Not Found\r\n\t\t\tcase 0:     // Not Loaded\r\n\t\t\t\treturn new Error(status);\r\n\t\t}\r\n\t\treturn null;\r\n\t};\r\n\r\n\t/**\r\n\t * Validate the response. Different browsers have different approaches, some of which throw errors when accessed\r\n\t * in other browsers. If there is no response, the <code>_response</code> property will remain null.\r\n\t * @method _getResponse\r\n\t * @private\r\n\t */\r\n\tp._getResponse = function () {\r\n\t\tif (this._response != null) {\r\n\t\t\treturn this._response;\r\n\t\t}\r\n\r\n\t\tif (this._request.response != null) {\r\n\t\t\treturn this._request.response;\r\n\t\t}\r\n\r\n\t\t// Android 2.2 uses .responseText\r\n\t\ttry {\r\n\t\t\tif (this._request.responseText != null) {\r\n\t\t\t\treturn this._request.responseText;\r\n\t\t\t}\r\n\t\t} catch (e) {\r\n\t\t}\r\n\r\n\t\t// When loading XML, IE9 does not return .response, instead it returns responseXML.xml\r\n\t\ttry {\r\n\t\t\tif (this._request.responseXML != null) {\r\n\t\t\t\treturn this._request.responseXML;\r\n\t\t\t}\r\n\t\t} catch (e) {\r\n\t\t}\r\n\r\n\t\treturn null;\r\n\t};\r\n\r\n\t/**\r\n\t * Create an XHR request. Depending on a number of factors, we get totally different results.\r\n\t * <ol><li>Some browsers get an <code>XDomainRequest</code> when loading cross-domain.</li>\r\n\t *      <li>XMLHttpRequest are created when available.</li>\r\n\t *      <li>ActiveX.XMLHTTP objects are used in older IE browsers.</li>\r\n\t *      <li>Text requests override the mime type if possible</li>\r\n\t *      <li>Origin headers are sent for crossdomain requests in some browsers.</li>\r\n\t *      <li>Binary loads set the response type to \"arraybuffer\"</li></ol>\r\n\t * @method _createXHR\r\n\t * @param {Object} item The requested item that is being loaded.\r\n\t * @return {Boolean} If an XHR request or equivalent was successfully created.\r\n\t * @private\r\n\t */\r\n\tp._createXHR = function (item) {\r\n\t\t// Check for cross-domain loads. We can't fully support them, but we can try.\r\n\t\tvar crossdomain = createjs.RequestUtils.isCrossDomain(item);\r\n\t\tvar headers = {};\r\n\r\n\t\t// Create the request. Fallback to whatever support we have.\r\n\t\tvar req = null;\r\n\t\tif (window.XMLHttpRequest) {\r\n\t\t\treq = new XMLHttpRequest();\r\n\t\t\t// This is 8 or 9, so use XDomainRequest instead.\r\n\t\t\tif (crossdomain && req.withCredentials === undefined && window.XDomainRequest) {\r\n\t\t\t\treq = new XDomainRequest();\r\n\t\t\t}\r\n\t\t} else { // Old IE versions use a different approach\r\n\t\t\tfor (var i = 0, l = s.ACTIVEX_VERSIONS.length; i < l; i++) {\r\n\t\t\t\tvar axVersion = s.ACTIVEX_VERSIONS[i];\r\n\t\t\t\ttry {\r\n\t\t\t\t\treq = new ActiveXObject(axVersion);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t} catch (e) {\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (req == null) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// Default to utf-8 for Text requests.\r\n\t\tif (item.mimeType == null && createjs.RequestUtils.isText(item.type)) {\r\n\t\t\titem.mimeType = \"text/plain; charset=utf-8\";\r\n\t\t}\r\n\r\n\t\t// IE9 doesn't support overrideMimeType(), so we need to check for it.\r\n\t\tif (item.mimeType && req.overrideMimeType) {\r\n\t\t\treq.overrideMimeType(item.mimeType);\r\n\t\t}\r\n\r\n\t\t// Determine the XHR level\r\n\t\tthis._xhrLevel = (typeof req.responseType === \"string\") ? 2 : 1;\r\n\r\n\t\tvar src = null;\r\n\t\tif (item.method == createjs.AbstractLoader.GET) {\r\n\t\t\tsrc = createjs.RequestUtils.buildPath(item.src, item.values);\r\n\t\t} else {\r\n\t\t\tsrc = item.src;\r\n\t\t}\r\n\r\n\t\t// Open the request.  Set cross-domain flags if it is supported (XHR level 1 only)\r\n\t\treq.open(item.method || createjs.AbstractLoader.GET, src, true);\r\n\r\n\t\tif (crossdomain && req instanceof XMLHttpRequest && this._xhrLevel == 1) {\r\n\t\t\theaders[\"Origin\"] = location.origin;\r\n\t\t}\r\n\r\n\t\t// To send data we need to set the Content-type header)\r\n\t\tif (item.values && item.method == createjs.AbstractLoader.POST) {\r\n\t\t\theaders[\"Content-Type\"] = \"application/x-www-form-urlencoded\";\r\n\t\t}\r\n\r\n\t\tif (!crossdomain && !headers[\"X-Requested-With\"]) {\r\n\t\t\theaders[\"X-Requested-With\"] = \"XMLHttpRequest\";\r\n\t\t}\r\n\r\n\t\tif (item.headers) {\r\n\t\t\tfor (var n in item.headers) {\r\n\t\t\t\theaders[n] = item.headers[n];\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfor (n in headers) {\r\n\t\t\treq.setRequestHeader(n, headers[n])\r\n\t\t}\r\n\r\n\t\tif (req instanceof XMLHttpRequest && item.withCredentials !== undefined) {\r\n\t\t\treq.withCredentials = item.withCredentials;\r\n\t\t}\r\n\r\n\t\tthis._request = req;\r\n\r\n\t\treturn true;\r\n\t};\r\n\r\n\t/**\r\n\t * A request has completed (or failed or canceled), and needs to be disposed.\r\n\t * @method _clean\r\n\t * @private\r\n\t */\r\n\tp._clean = function () {\r\n\t\tclearTimeout(this._loadTimeout);\r\n\r\n\t\tif (this._request.removeEventListener != null) {\r\n\t\t\tthis._request.removeEventListener(\"loadstart\", this._handleLoadStartProxy);\r\n\t\t\tthis._request.removeEventListener(\"progress\", this._handleProgressProxy);\r\n\t\t\tthis._request.removeEventListener(\"abort\", this._handleAbortProxy);\r\n\t\t\tthis._request.removeEventListener(\"error\", this._handleErrorProxy);\r\n\t\t\tthis._request.removeEventListener(\"timeout\", this._handleTimeoutProxy);\r\n\t\t\tthis._request.removeEventListener(\"load\", this._handleLoadProxy);\r\n\t\t\tthis._request.removeEventListener(\"readystatechange\", this._handleReadyStateChangeProxy);\r\n\t\t} else {\r\n\t\t\tthis._request.onloadstart = null;\r\n\t\t\tthis._request.onprogress = null;\r\n\t\t\tthis._request.onabort = null;\r\n\t\t\tthis._request.onerror = null;\r\n\t\t\tthis._request.ontimeout = null;\r\n\t\t\tthis._request.onload = null;\r\n\t\t\tthis._request.onreadystatechange = null;\r\n\t\t}\r\n\t};\r\n\r\n\tp.toString = function () {\r\n\t\treturn \"[PreloadJS XHRRequest]\";\r\n\t};\r\n\r\n\tcreatejs.XHRRequest = createjs.promote(XHRRequest, \"AbstractRequest\");\r\n\r\n}());\r\n\r\n//##############################################################################\r\n// SoundLoader.js\r\n//##############################################################################\r\n\r\nthis.createjs = this.createjs || {};\r\n\r\n(function () {\r\n\t\"use strict\";\r\n\r\n\t// constructor\r\n\t/**\r\n\t * A loader for HTML audio files. PreloadJS can not load WebAudio files, as a WebAudio context is required, which\r\n\t * should be created by either a library playing the sound (such as <a href=\"http://soundjs.com\">SoundJS</a>, or an\r\n\t * external framework that handles audio playback. To load content that can be played by WebAudio, use the\r\n\t * {{#crossLink \"BinaryLoader\"}}{{/crossLink}}, and handle the audio context decoding manually.\r\n\t * @class SoundLoader\r\n\t * @param {LoadItem|Object} loadItem\r\n\t * @param {Boolean} preferXHR\r\n\t * @extends AbstractMediaLoader\r\n\t * @constructor\r\n\t */\r\n\tfunction SoundLoader(loadItem, preferXHR) {\r\n\t\tthis.AbstractMediaLoader_constructor(loadItem, preferXHR, createjs.AbstractLoader.SOUND);\r\n\r\n\t\t// protected properties\r\n\t\tif (createjs.RequestUtils.isAudioTag(loadItem)) {\r\n\t\t\tthis._tag = loadItem;\r\n\t\t} else if (createjs.RequestUtils.isAudioTag(loadItem.src)) {\r\n\t\t\tthis._tag = loadItem;\r\n\t\t} else if (createjs.RequestUtils.isAudioTag(loadItem.tag)) {\r\n\t\t\tthis._tag = createjs.RequestUtils.isAudioTag(loadItem) ? loadItem : loadItem.src;\r\n\t\t}\r\n\r\n\t\tif (this._tag != null) {\r\n\t\t\tthis._preferXHR = false;\r\n\t\t}\r\n\t};\r\n\r\n\tvar p = createjs.extend(SoundLoader, createjs.AbstractMediaLoader);\r\n\tvar s = SoundLoader;\r\n\r\n\t// static methods\r\n\t/**\r\n\t * Determines if the loader can load a specific item. This loader can only load items that are of type\r\n\t * {{#crossLink \"AbstractLoader/SOUND:property\"}}{{/crossLink}}.\r\n\t * @method canLoadItem\r\n\t * @param {LoadItem|Object} item The LoadItem that a LoadQueue is trying to load.\r\n\t * @returns {Boolean} Whether the loader can load the item.\r\n\t * @static\r\n\t */\r\n\ts.canLoadItem = function (item) {\r\n\t\treturn item.type == createjs.AbstractLoader.SOUND;\r\n\t};\r\n\r\n\t// protected methods\r\n\tp._createTag = function (src) {\r\n\t\tvar tag = document.createElement(\"audio\");\r\n\t\ttag.autoplay = false;\r\n\t\ttag.preload = \"none\";\r\n\r\n\t\t//LM: Firefox fails when this the preload=\"none\" for other tags, but it needs to be \"none\" to ensure PreloadJS works.\r\n\t\ttag.src = src;\r\n\t\treturn tag;\r\n\t};\r\n\r\n\tcreatejs.SoundLoader = createjs.promote(SoundLoader, \"AbstractMediaLoader\");\r\n\r\n}());\r\n\r\n//##############################################################################\r\n// AudioSprite.js\r\n//##############################################################################\r\n\r\n//  NOTE this is \"Class\" is purely to document audioSprite Setup and usage.\r\n\r\n\r\n/**\r\n * <strong>Note: AudioSprite is not a class, but its usage is easily lost in the documentation, so it has been called\r\n * out here for quick reference.</strong>\r\n *\r\n * Audio sprites are much like CSS sprites or image sprite sheets: multiple audio assets grouped into a single file.\r\n * Audio sprites work around limitations in certain browsers, where only a single sound can be loaded and played at a\r\n * time. We recommend at least 300ms of silence between audio clips to deal with HTML audio tag inaccuracy, and to prevent\r\n * accidentally playing bits of the neighbouring clips.\r\n *\r\n * <strong>Benefits of Audio Sprites:</strong>\r\n * <ul>\r\n *     <li>More robust support for older browsers and devices that only allow a single audio instance, such as iOS 5.</li>\r\n *     <li>They provide a work around for the Internet Explorer 9 audio tag limit, which restricts how many different\r\n *     sounds that could be loaded at once.</li>\r\n *     <li>Faster loading by only requiring a single network request for several sounds, especially on mobile devices\r\n * where the network round trip for each file can add significant latency.</li>\r\n * </ul>\r\n *\r\n * <strong>Drawbacks of Audio Sprites</strong>\r\n * <ul>\r\n *     <li>No guarantee of smooth looping when using HTML or Flash audio. If you have a track that needs to loop\r\n * \t\tsmoothly and you are supporting non-web audio browsers, do not use audio sprites for that sound if you can avoid\r\n * \t\tit.</li>\r\n *     <li>No guarantee that HTML audio will play back immediately, especially the first time. In some browsers\r\n *     (Chrome!), HTML audio will only load enough to play through at the current download speed – so we rely on the\r\n *     `canplaythrough` event to determine if the audio is loaded. Since audio sprites must jump ahead to play specific\r\n *     sounds, the audio may not yet have downloaded fully.</li>\r\n *     <li>Audio sprites share the same core source, so if you have a sprite with 5 sounds and are limited to 2\r\n * \t\tconcurrently playing instances, you can only play 2 of the sounds at the same time.</li>\r\n * </ul>\r\n *\r\n * <h4>Example</h4>\r\n *\r\n *\t\tcreatejs.Sound.initializeDefaultPlugins();\r\n *\t\tvar assetsPath = \"./assets/\";\r\n *\t\tvar sounds = [{\r\n *\t\t\tsrc:\"MyAudioSprite.ogg\", data: {\r\n *\t\t\t\taudioSprite: [\r\n *\t\t\t\t\t{id:\"sound1\", startTime:0, duration:500},\r\n *\t\t\t\t\t{id:\"sound2\", startTime:1000, duration:400},\r\n *\t\t\t\t\t{id:\"sound3\", startTime:1700, duration: 1000}\r\n *\t\t\t\t]}\r\n *\t\t\t}\r\n *\t\t];\r\n *\t\tcreatejs.Sound.alternateExtensions = [\"mp3\"];\r\n *\t\tcreatejs.Sound.on(\"fileload\", loadSound);\r\n *\t\tcreatejs.Sound.registerSounds(sounds, assetsPath);\r\n *\t\t// after load is complete\r\n *\t\tcreatejs.Sound.play(\"sound2\");\r\n *\r\n * You can also create audio sprites on the fly by setting the startTime and duration when creating an new AbstractSoundInstance.\r\n *\r\n * \t\tcreatejs.Sound.play(\"MyAudioSprite\", {startTime: 1000, duration: 400});\r\n *\r\n * The excellent CreateJS community has created a tool to create audio sprites, available at\r\n * <a href=\"https://github.com/tonistiigi/audiosprite\" target=\"_blank\">https://github.com/tonistiigi/audiosprite</a>,\r\n * as well as a <a href=\"http://jsfiddle.net/bharat_battu/g8fFP/12/\" target=\"_blank\">jsfiddle</a> to convert the output\r\n * to SoundJS format.\r\n *\r\n * @class AudioSprite\r\n * @since 0.6.0\r\n */\r\n\r\n//##############################################################################\r\n// PlayPropsConfig.js\r\n//##############################################################################\r\n\r\nthis.createjs = this.createjs || {};\r\n\r\n(function () {\r\n\t\"use strict\";\r\n\t/**\r\n\t * A class to store the optional play properties passed in {{#crossLink \"Sound/play\"}}{{/crossLink}} and\r\n\t * {{#crossLink \"AbstractSoundInstance/play\"}}{{/crossLink}} calls.\r\n\t *\r\n\t * Optional Play Properties Include:\r\n\t * <ul>\r\n\t * <li>interrupt - How to interrupt any currently playing instances of audio with the same source,\r\n\t * if the maximum number of instances of the sound are already playing. Values are defined as <code>INTERRUPT_TYPE</code>\r\n\t * constants on the Sound class, with the default defined by {{#crossLink \"Sound/defaultInterruptBehavior:property\"}}{{/crossLink}}.</li>\r\n\t * <li>delay - The amount of time to delay the start of audio playback, in milliseconds.</li>\r\n\t * <li>offset - The offset from the start of the audio to begin playback, in milliseconds.</li>\r\n\t * <li>loop - How many times the audio loops when it reaches the end of playback. The default is 0 (no\r\n\t * loops), and -1 can be used for infinite playback.</li>\r\n\t * <li>volume - The volume of the sound, between 0 and 1. Note that the master volume is applied\r\n\t * against the individual volume.</li>\r\n\t * <li>pan - The left-right pan of the sound (if supported), between -1 (left) and 1 (right).</li>\r\n\t * <li>startTime - To create an audio sprite (with duration), the initial offset to start playback and loop from, in milliseconds.</li>\r\n\t * <li>duration - To create an audio sprite (with startTime), the amount of time to play the clip for, in milliseconds.</li>\r\n\t * </ul>\r\n\t *\r\n\t * <h4>Example</h4>\r\n\t *\r\n\t * \tvar ppc = new createjs.PlayPropsConfig().set({interrupt: createjs.Sound.INTERRUPT_ANY, loop: -1, volume: 0.5})\r\n\t * \tcreatejs.Sound.play(\"mySound\", ppc);\r\n\t * \tmySoundInstance.play(ppc);\r\n\t *\r\n\t * @class PlayPropsConfig\r\n\t * @constructor\r\n\t * @since 0.6.1\r\n\t */\r\n\t// TODO think of a better name for this class\r\n\tvar PlayPropsConfig = function () {\r\n// Public Properties\r\n\t\t/**\r\n\t\t * How to interrupt any currently playing instances of audio with the same source,\r\n\t\t * if the maximum number of instances of the sound are already playing. Values are defined as\r\n\t\t * <code>INTERRUPT_TYPE</code> constants on the Sound class, with the default defined by\r\n\t\t * {{#crossLink \"Sound/defaultInterruptBehavior:property\"}}{{/crossLink}}.\r\n\t\t * @property interrupt\r\n\t\t * @type {string}\r\n\t\t * @default null\r\n\t\t */\r\n\t\tthis.interrupt = null;\r\n\r\n\t\t/**\r\n\t\t * The amount of time to delay the start of audio playback, in milliseconds.\r\n\t\t * @property delay\r\n\t\t * @type {Number}\r\n\t\t * @default null\r\n\t\t */\r\n\t\tthis.delay = null;\r\n\r\n\t\t/**\r\n\t\t * The offset from the start of the audio to begin playback, in milliseconds.\r\n\t\t * @property offset\r\n\t\t * @type {number}\r\n\t\t * @default null\r\n\t\t */\r\n\t\tthis.offset = null;\r\n\r\n\t\t/**\r\n\t\t * How many times the audio loops when it reaches the end of playback. The default is 0 (no\r\n\t\t * loops), and -1 can be used for infinite playback.\r\n\t\t * @property loop\r\n\t\t * @type {number}\r\n\t\t * @default null\r\n\t\t */\r\n\t\tthis.loop = null;\r\n\r\n\t\t/**\r\n\t\t * The volume of the sound, between 0 and 1. Note that the master volume is applied\r\n\t\t * against the individual volume.\r\n\t\t * @property volume\r\n\t\t * @type {number}\r\n\t\t * @default null\r\n\t\t */\r\n\t\tthis.volume = null;\r\n\r\n\t\t/**\r\n\t\t * The left-right pan of the sound (if supported), between -1 (left) and 1 (right).\r\n\t\t * @property pan\r\n\t\t * @type {number}\r\n\t\t * @default null\r\n\t\t */\r\n\t\tthis.pan = null;\r\n\r\n\t\t/**\r\n\t\t * Used to create an audio sprite (with duration), the initial offset to start playback and loop from, in milliseconds.\r\n\t\t * @property startTime\r\n\t\t * @type {number}\r\n\t\t * @default null\r\n\t\t */\r\n\t\tthis.startTime = null;\r\n\r\n\t\t/**\r\n\t\t * Used to create an audio sprite (with startTime), the amount of time to play the clip for, in milliseconds.\r\n\t\t * @property duration\r\n\t\t * @type {number}\r\n\t\t * @default null\r\n\t\t */\r\n\t\tthis.duration = null;\r\n\t};\r\n\tvar p = PlayPropsConfig.prototype = {};\r\n\tvar s = PlayPropsConfig;\r\n\r\n\r\n// Static Methods\r\n\t/**\r\n\t * Creates a PlayPropsConfig from another PlayPropsConfig or an Object.\r\n\t *\r\n\t * @method create\r\n\t * @param {PlayPropsConfig|Object} value The play properties\r\n\t * @returns {PlayPropsConfig}\r\n\t * @static\r\n\t */\r\n\ts.create = function (value) {\r\n\t\tif (value instanceof s || value instanceof Object) {\r\n\t\t\tvar ppc = new createjs.PlayPropsConfig();\r\n\t\t\tppc.set(value);\r\n\t\t\treturn ppc;\r\n\t\t} else {\r\n\t\t\tthrow new Error(\"Type not recognized.\");\r\n\t\t}\r\n\t};\r\n\r\n// Public Methods\r\n\t/**\r\n\t * Provides a chainable shortcut method for setting a number of properties on the instance.\r\n\t *\r\n\t * <h4>Example</h4>\r\n\t *\r\n\t *      var PlayPropsConfig = new createjs.PlayPropsConfig().set({loop:-1, volume:0.7});\r\n\t *\r\n\t * @method set\r\n\t * @param {Object} props A generic object containing properties to copy to the PlayPropsConfig instance.\r\n\t * @return {PlayPropsConfig} Returns the instance the method is called on (useful for chaining calls.)\r\n\t*/\r\n\tp.set = function(props) {\r\n\t\tfor (var n in props) { this[n] = props[n]; }\r\n\t\treturn this;\r\n\t};\r\n\r\n\tp.toString = function() {\r\n\t\treturn \"[PlayPropsConfig]\";\r\n\t};\r\n\r\n\tcreatejs.PlayPropsConfig = s;\r\n\r\n}());\r\n\r\n//##############################################################################\r\n// Sound.js\r\n//##############################################################################\r\n\r\nthis.createjs = this.createjs || {};\r\n\r\n\r\n\r\n(function () {\r\n\t\"use strict\";\r\n\r\n\t/**\r\n\t * The Sound class is the public API for creating sounds, controlling the overall sound levels, and managing plugins.\r\n\t * All Sound APIs on this class are static.\r\n\t *\r\n\t * <b>Registering and Preloading</b><br />\r\n\t * Before you can play a sound, it <b>must</b> be registered. You can do this with {{#crossLink \"Sound/registerSound\"}}{{/crossLink}},\r\n\t * or register multiple sounds using {{#crossLink \"Sound/registerSounds\"}}{{/crossLink}}. If you don't register a\r\n\t * sound prior to attempting to play it using {{#crossLink \"Sound/play\"}}{{/crossLink}} or create it using {{#crossLink \"Sound/createInstance\"}}{{/crossLink}},\r\n\t * the sound source will be automatically registered but playback will fail as the source will not be ready. If you use\r\n\t * <a href=\"http://preloadjs.com\" target=\"_blank\">PreloadJS</a>, registration is handled for you when the sound is\r\n\t * preloaded. It is recommended to preload sounds either internally using the register functions or externally using\r\n\t * PreloadJS so they are ready when you want to use them.\r\n\t *\r\n\t * <b>Playback</b><br />\r\n\t * To play a sound once it's been registered and preloaded, use the {{#crossLink \"Sound/play\"}}{{/crossLink}} method.\r\n\t * This method returns a {{#crossLink \"AbstractSoundInstance\"}}{{/crossLink}} which can be paused, resumed, muted, etc.\r\n\t * Please see the {{#crossLink \"AbstractSoundInstance\"}}{{/crossLink}} documentation for more on the instance control APIs.\r\n\t *\r\n\t * <b>Plugins</b><br />\r\n\t * By default, the {{#crossLink \"WebAudioPlugin\"}}{{/crossLink}} or the {{#crossLink \"HTMLAudioPlugin\"}}{{/crossLink}}\r\n\t * are used (when available), although developers can change plugin priority or add new plugins (such as the\r\n\t * provided {{#crossLink \"FlashAudioPlugin\"}}{{/crossLink}}). Please see the {{#crossLink \"Sound\"}}{{/crossLink}} API\r\n\t * methods for more on the playback and plugin APIs. To install plugins, or specify a different plugin order, see\r\n\t * {{#crossLink \"Sound/installPlugins\"}}{{/crossLink}}.\r\n\t *\r\n\t * <h4>Example</h4>\r\n\t *\r\n\t *      createjs.FlashAudioPlugin.swfPath = \"../src/soundjs/flashaudio\";\r\n\t *      createjs.Sound.registerPlugins([createjs.WebAudioPlugin, createjs.FlashAudioPlugin]);\r\n\t *      createjs.Sound.alternateExtensions = [\"mp3\"];\r\n\t *      createjs.Sound.on(\"fileload\", this.loadHandler, this);\r\n\t *      createjs.Sound.registerSound(\"path/to/mySound.ogg\", \"sound\");\r\n\t *      function loadHandler(event) {\r\n     *          // This is fired for each sound that is registered.\r\n     *          var instance = createjs.Sound.play(\"sound\");  // play using id.  Could also use full source path or event.src.\r\n     *          instance.on(\"complete\", this.handleComplete, this);\r\n     *          instance.volume = 0.5;\r\n\t *      }\r\n\t *\r\n\t * The maximum number of concurrently playing instances of the same sound can be specified in the \"data\" argument\r\n\t * of {{#crossLink \"Sound/registerSound\"}}{{/crossLink}}.  Note that if not specified, the active plugin will apply\r\n\t * a default limit.  Currently HTMLAudioPlugin sets a default limit of 2, while WebAudioPlugin and FlashAudioPlugin set a\r\n\t * default limit of 100.\r\n\t *\r\n\t *      createjs.Sound.registerSound(\"sound.mp3\", \"soundId\", 4);\r\n\t *\r\n\t * Sound can be used as a plugin with PreloadJS to help preload audio properly. Audio preloaded with PreloadJS is\r\n\t * automatically registered with the Sound class. When audio is not preloaded, Sound will do an automatic internal\r\n\t * load. As a result, it may fail to play the first time play is called if the audio is not finished loading. Use\r\n\t * the {{#crossLink \"Sound/fileload:event\"}}{{/crossLink}} event to determine when a sound has finished internally\r\n\t * preloading. It is recommended that all audio is preloaded before it is played.\r\n\t *\r\n\t *      var queue = new createjs.LoadQueue();\r\n\t *\t\tqueue.installPlugin(createjs.Sound);\r\n\t *\r\n\t * <b>Audio Sprites</b><br />\r\n\t * SoundJS has added support for {{#crossLink \"AudioSprite\"}}{{/crossLink}}, available as of version 0.6.0.\r\n\t * For those unfamiliar with audio sprites, they are much like CSS sprites or sprite sheets: multiple audio assets\r\n\t * grouped into a single file.\r\n\t *\r\n\t * <h4>Example</h4>\r\n\t *\r\n\t *\t\tvar assetsPath = \"./assets/\";\r\n\t *\t\tvar sounds = [{\r\n\t *\t\t\tsrc:\"MyAudioSprite.ogg\", data: {\r\n\t *\t\t\t\taudioSprite: [\r\n\t *\t\t\t\t\t{id:\"sound1\", startTime:0, duration:500},\r\n\t *\t\t\t\t\t{id:\"sound2\", startTime:1000, duration:400},\r\n\t *\t\t\t\t\t{id:\"sound3\", startTime:1700, duration: 1000}\r\n\t *\t\t\t\t]}\r\n \t *\t\t\t}\r\n\t *\t\t];\r\n\t *\t\tcreatejs.Sound.alternateExtensions = [\"mp3\"];\r\n\t *\t\tcreatejs.Sound.on(\"fileload\", loadSound);\r\n\t *\t\tcreatejs.Sound.registerSounds(sounds, assetsPath);\r\n\t *\t\t// after load is complete\r\n\t *\t\tcreatejs.Sound.play(\"sound2\");\r\n\t *\r\n\t * <b>Mobile Playback</b><br />\r\n\t * Devices running iOS require the WebAudio context to be \"unlocked\" by playing at least one sound inside of a user-\r\n\t * initiated event (such as touch/click). Earlier versions of SoundJS included a \"MobileSafe\" sample, but this is no\r\n\t * longer necessary as of SoundJS 0.6.2.\r\n\t * <ul>\r\n\t *     <li>\r\n\t *         In SoundJS 0.4.1 and above, you can either initialize plugins or use the {{#crossLink \"WebAudioPlugin/playEmptySound\"}}{{/crossLink}}\r\n\t *         method in the call stack of a user input event to manually unlock the audio context.\r\n\t *     </li>\r\n\t *     <li>\r\n\t *         In SoundJS 0.6.2 and above, SoundJS will automatically listen for the first document-level \"mousedown\"\r\n\t *         and \"touchend\" event, and unlock WebAudio. This will continue to check these events until the WebAudio\r\n\t *         context becomes \"unlocked\" (changes from \"suspended\" to \"running\")\r\n\t *     </li>\r\n\t *     <li>\r\n\t *         Both the \"mousedown\" and \"touchend\" events can be used to unlock audio in iOS9+, the \"touchstart\" event\r\n\t *         will work in iOS8 and below. The \"touchend\" event will only work in iOS9 when the gesture is interpreted\r\n\t *         as a \"click\", so if the user long-presses the button, it will no longer work.\r\n\t *     </li>\r\n\t *     <li>\r\n\t *         When using the <a href=\"http://www.createjs.com/docs/easeljs/classes/Touch.html\">EaselJS Touch class</a>,\r\n\t *         the \"mousedown\" event will not fire when a canvas is clicked, since MouseEvents are prevented, to ensure\r\n\t *         only touch events fire. To get around this, you can either rely on \"touchend\", or:\r\n\t *         <ol>\r\n\t *             <li>Set the `allowDefault` property on the Touch class constructor to `true` (defaults to `false`).</li>\r\n\t *             <li>Set the `preventSelection` property on the EaselJS `Stage` to `false`.</li>\r\n\t *         </ol>\r\n\t *         These settings may change how your application behaves, and are not recommended.\r\n\t *     </li>\r\n\t * </ul>\r\n\t *\r\n\t * <b>Loading Alternate Paths and Extension-less Files</b><br />\r\n\t * SoundJS supports loading alternate paths and extension-less files by passing an object instead of a string for\r\n\t * the `src` property, which is a hash using the format `{extension:\"path\", extension2:\"path2\"}`. These labels are\r\n\t * how SoundJS determines if the browser will support the sound. This also enables multiple formats to live in\r\n\t * different folders, or on CDNs, which often has completely different filenames for each file.\r\n\t *\r\n\t * Priority is determined by the property order (first property is tried first).  This is supported by both internal loading\r\n\t * and loading with PreloadJS.\r\n\t *\r\n\t * <em>Note: an id is required for playback.</em>\r\n\t *\r\n\t * <h4>Example</h4>\r\n\t *\r\n\t *\t\tvar sounds = {path:\"./audioPath/\",\r\n\t * \t\t\t\tmanifest: [\r\n\t *\t\t\t\t{id: \"cool\", src: {mp3:\"mp3/awesome.mp3\", ogg:\"noExtensionOggFile\"}}\r\n\t *\t\t]};\r\n\t *\r\n\t *\t\tcreatejs.Sound.alternateExtensions = [\"mp3\"];\r\n\t *\t\tcreatejs.Sound.addEventListener(\"fileload\", handleLoad);\r\n\t *\t\tcreatejs.Sound.registerSounds(sounds);\r\n\t *\r\n\t * <h3>Known Browser and OS issues</h3>\r\n\t * <b>IE 9 HTML Audio limitations</b><br />\r\n\t * <ul><li>There is a delay in applying volume changes to tags that occurs once playback is started. So if you have\r\n\t * muted all sounds, they will all play during this delay until the mute applies internally. This happens regardless of\r\n\t * when or how you apply the volume change, as the tag seems to need to play to apply it.</li>\r\n     * <li>MP3 encoding will not always work for audio tags, particularly in Internet Explorer. We've found default\r\n\t * encoding with 64kbps works.</li>\r\n\t * <li>Occasionally very short samples will get cut off.</li>\r\n\t * <li>There is a limit to how many audio tags you can load and play at once, which appears to be determined by\r\n\t * hardware and browser settings.  See {{#crossLink \"HTMLAudioPlugin.MAX_INSTANCES\"}}{{/crossLink}} for a safe\r\n\t * estimate.</li></ul>\r\n\t *\r\n\t * <b>Firefox 25 Web Audio limitations</b>\r\n\t * <ul><li>mp3 audio files do not load properly on all windows machines, reported\r\n\t * <a href=\"https://bugzilla.mozilla.org/show_bug.cgi?id=929969\" target=\"_blank\">here</a>. </br>\r\n\t * For this reason it is recommended to pass another FF supported type (ie ogg) first until this bug is resolved, if\r\n\t * possible.</li></ul>\r\n\r\n\t * <b>Safari limitations</b><br />\r\n\t * <ul><li>Safari requires Quicktime to be installed for audio playback.</li></ul>\r\n\t *\r\n\t * <b>iOS 6 Web Audio limitations</b><br />\r\n\t * <ul><li>Sound is initially locked, and must be unlocked via a user-initiated event. Please see the section on\r\n\t * Mobile Playback above.</li>\r\n\t * <li>A bug exists that will distort un-cached web audio when a video element is present in the DOM that has audio\r\n\t * at a different sampleRate.</li>\r\n\t * </ul>\r\n\t *\r\n\t * <b>Android HTML Audio limitations</b><br />\r\n\t * <ul><li>We have no control over audio volume. Only the user can set volume on their device.</li>\r\n\t * <li>We can only play audio inside a user event (touch/click).  This currently means you cannot loop sound or use\r\n\t * a delay.</li></ul>\r\n\t *\r\n\t * <b>Web Audio and PreloadJS</b><br />\r\n\t * <ul><li>Web Audio must be loaded through XHR, therefore when used with PreloadJS, tag loading is not possible.\r\n\t * This means that tag loading can not be used to avoid cross domain issues.</li><ul>\r\n\t *\r\n\t * @class Sound\r\n\t * @static\r\n\t * @uses EventDispatcher\r\n\t */\r\n\tfunction Sound() {\r\n\t\tthrow \"Sound cannot be instantiated\";\r\n\t}\r\n\r\n\tvar s = Sound;\r\n\r\n\r\n// Static Properties\r\n\t/**\r\n\t * The interrupt value to interrupt any currently playing instance with the same source, if the maximum number of\r\n\t * instances of the sound are already playing.\r\n\t * @property INTERRUPT_ANY\r\n\t * @type {String}\r\n\t * @default any\r\n\t * @static\r\n\t */\r\n\ts.INTERRUPT_ANY = \"any\";\r\n\r\n\t/**\r\n\t * The interrupt value to interrupt the earliest currently playing instance with the same source that progressed the\r\n\t * least distance in the audio track, if the maximum number of instances of the sound are already playing.\r\n\t * @property INTERRUPT_EARLY\r\n\t * @type {String}\r\n\t * @default early\r\n\t * @static\r\n\t */\r\n\ts.INTERRUPT_EARLY = \"early\";\r\n\r\n\t/**\r\n\t * The interrupt value to interrupt the currently playing instance with the same source that progressed the most\r\n\t * distance in the audio track, if the maximum number of instances of the sound are already playing.\r\n\t * @property INTERRUPT_LATE\r\n\t * @type {String}\r\n\t * @default late\r\n\t * @static\r\n\t */\r\n\ts.INTERRUPT_LATE = \"late\";\r\n\r\n\t/**\r\n\t * The interrupt value to not interrupt any currently playing instances with the same source, if the maximum number of\r\n\t * instances of the sound are already playing.\r\n\t * @property INTERRUPT_NONE\r\n\t * @type {String}\r\n\t * @default none\r\n\t * @static\r\n\t */\r\n\ts.INTERRUPT_NONE = \"none\";\r\n\r\n\t/**\r\n\t * Defines the playState of an instance that is still initializing.\r\n\t * @property PLAY_INITED\r\n\t * @type {String}\r\n\t * @default playInited\r\n\t * @static\r\n\t */\r\n\ts.PLAY_INITED = \"playInited\";\r\n\r\n\t/**\r\n\t * Defines the playState of an instance that is currently playing or paused.\r\n\t * @property PLAY_SUCCEEDED\r\n\t * @type {String}\r\n\t * @default playSucceeded\r\n\t * @static\r\n\t */\r\n\ts.PLAY_SUCCEEDED = \"playSucceeded\";\r\n\r\n\t/**\r\n\t * Defines the playState of an instance that was interrupted by another instance.\r\n\t * @property PLAY_INTERRUPTED\r\n\t * @type {String}\r\n\t * @default playInterrupted\r\n\t * @static\r\n\t */\r\n\ts.PLAY_INTERRUPTED = \"playInterrupted\";\r\n\r\n\t/**\r\n\t * Defines the playState of an instance that completed playback.\r\n\t * @property PLAY_FINISHED\r\n\t * @type {String}\r\n\t * @default playFinished\r\n\t * @static\r\n\t */\r\n\ts.PLAY_FINISHED = \"playFinished\";\r\n\r\n\t/**\r\n\t * Defines the playState of an instance that failed to play. This is usually caused by a lack of available channels\r\n\t * when the interrupt mode was \"INTERRUPT_NONE\", the playback stalled, or the sound could not be found.\r\n\t * @property PLAY_FAILED\r\n\t * @type {String}\r\n\t * @default playFailed\r\n\t * @static\r\n\t */\r\n\ts.PLAY_FAILED = \"playFailed\";\r\n\r\n\t/**\r\n\t * A list of the default supported extensions that Sound will <i>try</i> to play. Plugins will check if the browser\r\n\t * can play these types, so modifying this list before a plugin is initialized will allow the plugins to try to\r\n\t * support additional media types.\r\n\t *\r\n\t * NOTE this does not currently work for {{#crossLink \"FlashAudioPlugin\"}}{{/crossLink}}.\r\n\t *\r\n\t * More details on file formats can be found at <a href=\"http://en.wikipedia.org/wiki/Audio_file_format\" target=\"_blank\">http://en.wikipedia.org/wiki/Audio_file_format</a>.<br />\r\n\t * A very detailed list of file formats can be found at <a href=\"http://www.fileinfo.com/filetypes/audio\" target=\"_blank\">http://www.fileinfo.com/filetypes/audio</a>.\r\n\t * @property SUPPORTED_EXTENSIONS\r\n\t * @type {Array[String]}\r\n\t * @default [\"mp3\", \"ogg\", \"opus\", \"mpeg\", \"wav\", \"m4a\", \"mp4\", \"aiff\", \"wma\", \"mid\"]\r\n\t * @since 0.4.0\r\n\t * @static\r\n\t */\r\n\ts.SUPPORTED_EXTENSIONS = [\"mp3\", \"ogg\", \"opus\", \"mpeg\", \"wav\", \"m4a\", \"mp4\", \"aiff\", \"wma\", \"mid\"];\r\n\r\n\t/**\r\n\t * Some extensions use another type of extension support to play (one of them is a codex).  This allows you to map\r\n\t * that support so plugins can accurately determine if an extension is supported.  Adding to this list can help\r\n\t * plugins determine more accurately if an extension is supported.\r\n\t *\r\n \t * A useful list of extensions for each format can be found at <a href=\"http://html5doctor.com/html5-audio-the-state-of-play/\" target=\"_blank\">http://html5doctor.com/html5-audio-the-state-of-play/</a>.\r\n\t * @property EXTENSION_MAP\r\n\t * @type {Object}\r\n\t * @since 0.4.0\r\n\t * @default {m4a:\"mp4\"}\r\n\t * @static\r\n\t */\r\n\ts.EXTENSION_MAP = {\r\n\t\tm4a:\"mp4\"\r\n\t};\r\n\r\n\t/**\r\n\t * The RegExp pattern used to parse file URIs. This supports simple file names, as well as full domain URIs with\r\n\t * query strings. The resulting match is: protocol:$1 domain:$2 path:$3 file:$4 extension:$5 query:$6.\r\n\t * @property FILE_PATTERN\r\n\t * @type {RegExp}\r\n\t * @static\r\n\t * @protected\r\n\t */\r\n\ts.FILE_PATTERN = /^(?:(\\w+:)\\/{2}(\\w+(?:\\.\\w+)*\\/?))?([/.]*?(?:[^?]+)?\\/)?((?:[^/?]+)\\.(\\w+))(?:\\?(\\S+)?)?$/;\r\n\r\n\r\n// Class Public properties\r\n\t/**\r\n\t * Determines the default behavior for interrupting other currently playing instances with the same source, if the\r\n\t * maximum number of instances of the sound are already playing.  Currently the default is {{#crossLink \"Sound/INTERRUPT_NONE:property\"}}{{/crossLink}}\r\n\t * but this can be set and will change playback behavior accordingly.  This is only used when {{#crossLink \"Sound/play\"}}{{/crossLink}}\r\n\t * is called without passing a value for interrupt.\r\n\t * @property defaultInterruptBehavior\r\n\t * @type {String}\r\n\t * @default Sound.INTERRUPT_NONE, or \"none\"\r\n\t * @static\r\n\t * @since 0.4.0\r\n\t */\r\n\ts.defaultInterruptBehavior = s.INTERRUPT_NONE;  // OJR does s.INTERRUPT_ANY make more sense as default?  Needs game dev testing to see which case makes more sense.\r\n\r\n\t/**\r\n\t * An array of extensions to attempt to use when loading sound, if the default is unsupported by the active plugin.\r\n\t * These are applied in order, so if you try to Load Thunder.ogg in a browser that does not support ogg, and your\r\n\t * extensions array is [\"mp3\", \"m4a\", \"wav\"] it will check mp3 support, then m4a, then wav. The audio files need\r\n\t * to exist in the same location, as only the extension is altered.\r\n\t *\r\n\t * Note that regardless of which file is loaded, you can call {{#crossLink \"Sound/createInstance\"}}{{/crossLink}}\r\n\t * and {{#crossLink \"Sound/play\"}}{{/crossLink}} using the same id or full source path passed for loading.\r\n\t *\r\n\t * <h4>Example</h4>\r\n\t *\r\n\t *\tvar sounds = [\r\n\t *\t\t{src:\"myPath/mySound.ogg\", id:\"example\"},\r\n\t *\t];\r\n\t *\tcreatejs.Sound.alternateExtensions = [\"mp3\"]; // now if ogg is not supported, SoundJS will try asset0.mp3\r\n\t *\tcreatejs.Sound.on(\"fileload\", handleLoad); // call handleLoad when each sound loads\r\n\t *\tcreatejs.Sound.registerSounds(sounds, assetPath);\r\n\t *\t// ...\r\n\t *\tcreatejs.Sound.play(\"myPath/mySound.ogg\"); // works regardless of what extension is supported.  Note calling with ID is a better approach\r\n\t *\r\n\t * @property alternateExtensions\r\n\t * @type {Array}\r\n\t * @since 0.5.2\r\n\t * @static\r\n\t */\r\n\ts.alternateExtensions = [];\r\n\r\n\t/**\r\n\t * The currently active plugin. If this is null, then no plugin could be initialized. If no plugin was specified,\r\n\t * Sound attempts to apply the default plugins: {{#crossLink \"WebAudioPlugin\"}}{{/crossLink}}, followed by\r\n\t * {{#crossLink \"HTMLAudioPlugin\"}}{{/crossLink}}.\r\n\t * @property activePlugin\r\n\t * @type {Object}\r\n\t * @static\r\n\t */\r\n    s.activePlugin = null;\r\n\r\n\r\n// class getter / setter properties\r\n\t/**\r\n\t * Set the master volume of Sound. The master volume is multiplied against each sound's individual volume.  For\r\n\t * example, if master volume is 0.5 and a sound's volume is 0.5, the resulting volume is 0.25. To set individual\r\n\t * sound volume, use AbstractSoundInstance {{#crossLink \"AbstractSoundInstance/volume:property\"}}{{/crossLink}} instead.\r\n\t *\r\n\t * <h4>Example</h4>\r\n\t *\r\n\t *     createjs.Sound.volume = 0.5;\r\n\t *\r\n\t *\r\n\t * @property volume\r\n\t * @type {Number}\r\n\t * @default 1\r\n\t * @since 0.6.1\r\n\t */\r\n\ts._masterVolume = 1;\r\n\tObject.defineProperty(s, \"volume\", {\r\n\t\tget: function () {return this._masterVolume;},\r\n\t\tset: function (value) {\r\n\t\t\t\tif (Number(value) == null) {return false;}\r\n\t\t\t\tvalue = Math.max(0, Math.min(1, value));\r\n\t\t\t\ts._masterVolume = value;\r\n\t\t\t\tif (!this.activePlugin || !this.activePlugin.setVolume || !this.activePlugin.setVolume(value)) {\r\n\t\t\t\t\tvar instances = this._instances;\r\n\t\t\t\t\tfor (var i = 0, l = instances.length; i < l; i++) {\r\n\t\t\t\t\t\tinstances[i].setMasterVolume(value);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t});\r\n\r\n\t/**\r\n\t * Mute/Unmute all audio. Note that muted audio still plays at 0 volume. This global mute value is maintained\r\n\t * separately and when set will override, but not change the mute property of individual instances. To mute an individual\r\n\t * instance, use AbstractSoundInstance {{#crossLink \"AbstractSoundInstance/muted:property\"}}{{/crossLink}} instead.\r\n\t *\r\n\t * <h4>Example</h4>\r\n\t *\r\n\t *     createjs.Sound.muted = true;\r\n\t *\r\n\t *\r\n\t * @property muted\r\n\t * @type {Boolean}\r\n\t * @default false\r\n\t * @since 0.6.1\r\n\t */\r\n\ts._masterMute = false;\r\n\t// OJR references to the methods were not working, so the code had to be duplicated here\r\n\tObject.defineProperty(s, \"muted\", {\r\n\t\tget: function () {return this._masterMute;},\r\n\t\tset: function (value) {\r\n\t\t\t\tif (value == null) {return false;}\r\n\r\n\t\t\t\tthis._masterMute = value;\r\n\t\t\t\tif (!this.activePlugin || !this.activePlugin.setMute || !this.activePlugin.setMute(value)) {\r\n\t\t\t\t\tvar instances = this._instances;\r\n\t\t\t\t\tfor (var i = 0, l = instances.length; i < l; i++) {\r\n\t\t\t\t\t\tinstances[i].setMasterMute(value);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t});\r\n\r\n\t/**\r\n\t * Get the active plugins capabilities, which help determine if a plugin can be used in the current environment,\r\n\t * or if the plugin supports a specific feature. Capabilities include:\r\n\t * <ul>\r\n\t *     <li><b>panning:</b> If the plugin can pan audio from left to right</li>\r\n\t *     <li><b>volume;</b> If the plugin can control audio volume.</li>\r\n\t *     <li><b>tracks:</b> The maximum number of audio tracks that can be played back at a time. This will be -1\r\n\t *     if there is no known limit.</li>\r\n\t * <br />An entry for each file type in {{#crossLink \"Sound/SUPPORTED_EXTENSIONS:property\"}}{{/crossLink}}:\r\n\t *     <li><b>mp3:</b> If MP3 audio is supported.</li>\r\n\t *     <li><b>ogg:</b> If OGG audio is supported.</li>\r\n\t *     <li><b>wav:</b> If WAV audio is supported.</li>\r\n\t *     <li><b>mpeg:</b> If MPEG audio is supported.</li>\r\n\t *     <li><b>m4a:</b> If M4A audio is supported.</li>\r\n\t *     <li><b>mp4:</b> If MP4 audio is supported.</li>\r\n\t *     <li><b>aiff:</b> If aiff audio is supported.</li>\r\n\t *     <li><b>wma:</b> If wma audio is supported.</li>\r\n\t *     <li><b>mid:</b> If mid audio is supported.</li>\r\n\t * </ul>\r\n\t *\r\n\t * You can get a specific capability of the active plugin using standard object notation\r\n\t *\r\n\t * <h4>Example</h4>\r\n\t *\r\n\t *      var mp3 = createjs.Sound.capabilities.mp3;\r\n\t *\r\n\t * Note this property is read only.\r\n\t *\r\n\t * @property capabilities\r\n\t * @type {Object}\r\n\t * @static\r\n\t * @readOnly\r\n\t * @since 0.6.1\r\n\t */\r\n\tObject.defineProperty(s, \"capabilities\", {\r\n\t\tget: function () {\r\n\t\t\t\t\tif (s.activePlugin == null) {return null;}\r\n\t\t\t\t\treturn s.activePlugin._capabilities;\r\n\t\t\t\t},\r\n\t\tset: function (value) { return false;}\r\n\t});\r\n\r\n\r\n// Class Private properties\r\n\t/**\r\n\t * Determines if the plugins have been registered. If false, the first call to play() will instantiate the default\r\n\t * plugins ({{#crossLink \"WebAudioPlugin\"}}{{/crossLink}}, followed by {{#crossLink \"HTMLAudioPlugin\"}}{{/crossLink}}).\r\n\t * If plugins have been registered, but none are applicable, then sound playback will fail.\r\n\t * @property _pluginsRegistered\r\n\t * @type {Boolean}\r\n\t * @default false\r\n\t * @static\r\n\t * @protected\r\n\t */\r\n\ts._pluginsRegistered = false;\r\n\r\n\t/**\r\n\t * Used internally to assign unique IDs to each AbstractSoundInstance.\r\n\t * @property _lastID\r\n\t * @type {Number}\r\n\t * @static\r\n\t * @protected\r\n\t */\r\n\ts._lastID = 0;\r\n\r\n\t/**\r\n\t * An array containing all currently playing instances. This allows Sound to control the volume, mute, and playback of\r\n\t * all instances when using static APIs like {{#crossLink \"Sound/stop\"}}{{/crossLink}} and {{#crossLink \"Sound/setVolume\"}}{{/crossLink}}.\r\n\t * When an instance has finished playback, it gets removed via the {{#crossLink \"Sound/finishedPlaying\"}}{{/crossLink}}\r\n\t * method. If the user replays an instance, it gets added back in via the {{#crossLink \"Sound/_beginPlaying\"}}{{/crossLink}}\r\n\t * method.\r\n\t * @property _instances\r\n\t * @type {Array}\r\n\t * @protected\r\n\t * @static\r\n\t */\r\n\ts._instances = [];\r\n\r\n\t/**\r\n\t * An object hash storing objects with sound sources, startTime, and duration via there corresponding ID.\r\n\t * @property _idHash\r\n\t * @type {Object}\r\n\t * @protected\r\n\t * @static\r\n\t */\r\n\ts._idHash = {};\r\n\r\n\t/**\r\n\t * An object hash that stores preloading sound sources via the parsed source that is passed to the plugin.  Contains the\r\n\t * source, id, and data that was passed in by the user.  Parsed sources can contain multiple instances of source, id,\r\n\t * and data.\r\n\t * @property _preloadHash\r\n\t * @type {Object}\r\n\t * @protected\r\n\t * @static\r\n\t */\r\n\ts._preloadHash = {};\r\n\r\n\t/**\r\n\t * An object hash storing {{#crossLink \"PlayPropsConfig\"}}{{/crossLink}} via the parsed source that is passed as defaultPlayProps in\r\n\t * {{#crossLink \"Sound/registerSound\"}}{{/crossLink}} and {{#crossLink \"Sound/registerSounds\"}}{{/crossLink}}.\r\n\t * @property _defaultPlayPropsHash\r\n\t * @type {Object}\r\n\t * @protected\r\n\t * @static\r\n\t * @since 0.6.1\r\n\t */\r\n\ts._defaultPlayPropsHash = {};\r\n\r\n\r\n// EventDispatcher methods:\r\n\ts.addEventListener = null;\r\n\ts.removeEventListener = null;\r\n\ts.removeAllEventListeners = null;\r\n\ts.dispatchEvent = null;\r\n\ts.hasEventListener = null;\r\n\ts._listeners = null;\r\n\r\n\tcreatejs.EventDispatcher.initialize(s); // inject EventDispatcher methods.\r\n\r\n\r\n// Events\r\n\t/**\r\n\t * This event is fired when a file finishes loading internally. This event is fired for each loaded sound,\r\n\t * so any handler methods should look up the <code>event.src</code> to handle a particular sound.\r\n\t * @event fileload\r\n\t * @param {Object} target The object that dispatched the event.\r\n\t * @param {String} type The event type.\r\n\t * @param {String} src The source of the sound that was loaded.\r\n\t * @param {String} [id] The id passed in when the sound was registered. If one was not provided, it will be null.\r\n\t * @param {Number|Object} [data] Any additional data associated with the item. If not provided, it will be undefined.\r\n\t * @since 0.4.1\r\n\t */\r\n\r\n\t/**\r\n\t * This event is fired when a file fails loading internally. This event is fired for each loaded sound,\r\n\t * so any handler methods should look up the <code>event.src</code> to handle a particular sound.\r\n\t * @event fileerror\r\n\t * @param {Object} target The object that dispatched the event.\r\n\t * @param {String} type The event type.\r\n\t * @param {String} src The source of the sound that was loaded.\r\n\t * @param {String} [id] The id passed in when the sound was registered. If one was not provided, it will be null.\r\n\t * @param {Number|Object} [data] Any additional data associated with the item. If not provided, it will be undefined.\r\n\t * @since 0.6.0\r\n\t */\r\n\r\n\r\n// Class Public Methods\r\n\t/**\r\n\t * Get the preload rules to allow Sound to be used as a plugin by <a href=\"http://preloadjs.com\" target=\"_blank\">PreloadJS</a>.\r\n\t * Any load calls that have the matching type or extension will fire the callback method, and use the resulting\r\n\t * object, which is potentially modified by Sound. This helps when determining the correct path, as well as\r\n\t * registering the audio instance(s) with Sound. This method should not be called, except by PreloadJS.\r\n\t * @method getPreloadHandlers\r\n\t * @return {Object} An object containing:\r\n\t * <ul><li>callback: A preload callback that is fired when a file is added to PreloadJS, which provides\r\n\t *      Sound a mechanism to modify the load parameters, select the correct file format, register the sound, etc.</li>\r\n\t *      <li>types: A list of file types that are supported by Sound (currently supports \"sound\").</li>\r\n\t *      <li>extensions: A list of file extensions that are supported by Sound (see {{#crossLink \"Sound/SUPPORTED_EXTENSIONS:property\"}}{{/crossLink}}).</li></ul>\r\n\t * @static\r\n\t * @protected\r\n\t */\r\n\ts.getPreloadHandlers = function () {\r\n\t\treturn {\r\n\t\t\tcallback:createjs.proxy(s.initLoad, s),\r\n\t\t\ttypes:[\"sound\"],\r\n\t\t\textensions:s.SUPPORTED_EXTENSIONS\r\n\t\t};\r\n\t};\r\n\r\n\t/**\r\n\t * Used to dispatch fileload events from internal loading.\r\n\t * @method _handleLoadComplete\r\n\t * @param event A loader event.\r\n\t * @protected\r\n\t * @static\r\n\t * @since 0.6.0\r\n\t */\r\n\ts._handleLoadComplete = function(event) {\r\n\t\tvar src = event.target.getItem().src;\r\n\t\tif (!s._preloadHash[src]) {return;}\r\n\r\n\t\tfor (var i = 0, l = s._preloadHash[src].length; i < l; i++) {\r\n\t\t\tvar item = s._preloadHash[src][i];\r\n\t\t\ts._preloadHash[src][i] = true;\r\n\r\n\t\t\tif (!s.hasEventListener(\"fileload\")) { continue; }\r\n\r\n\t\t\tvar event = new createjs.Event(\"fileload\");\r\n\t\t\tevent.src = item.src;\r\n\t\t\tevent.id = item.id;\r\n\t\t\tevent.data = item.data;\r\n\t\t\tevent.sprite = item.sprite;\r\n\r\n\t\t\ts.dispatchEvent(event);\r\n\t\t}\r\n\t};\r\n\r\n\t/**\r\n\t * Used to dispatch error events from internal preloading.\r\n\t * @param event\r\n\t * @protected\r\n\t * @since 0.6.0\r\n\t * @static\r\n\t */\r\n\ts._handleLoadError = function(event) {\r\n\t\tvar src = event.target.getItem().src;\r\n\t\tif (!s._preloadHash[src]) {return;}\r\n\r\n\t\tfor (var i = 0, l = s._preloadHash[src].length; i < l; i++) {\r\n\t\t\tvar item = s._preloadHash[src][i];\r\n\t\t\ts._preloadHash[src][i] = false;\r\n\r\n\t\t\tif (!s.hasEventListener(\"fileerror\")) { continue; }\r\n\r\n\t\t\tvar event = new createjs.Event(\"fileerror\");\r\n\t\t\tevent.src = item.src;\r\n\t\t\tevent.id = item.id;\r\n\t\t\tevent.data = item.data;\r\n\t\t\tevent.sprite = item.sprite;\r\n\r\n\t\t\ts.dispatchEvent(event);\r\n\t\t}\r\n\t};\r\n\r\n\t/**\r\n\t * Used by {{#crossLink \"Sound/registerPlugins\"}}{{/crossLink}} to register a Sound plugin.\r\n\t *\r\n\t * @method _registerPlugin\r\n\t * @param {Object} plugin The plugin class to install.\r\n\t * @return {Boolean} Whether the plugin was successfully initialized.\r\n\t * @static\r\n\t * @private\r\n\t */\r\n\ts._registerPlugin = function (plugin) {\r\n\t\t// Note: Each plugin is passed in as a class reference, but we store the activePlugin as an instance\r\n\t\tif (plugin.isSupported()) {\r\n\t\t\ts.activePlugin = new plugin();\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\treturn false;\r\n\t};\r\n\r\n\t/**\r\n\t * Register a list of Sound plugins, in order of precedence. To register a single plugin, pass a single element in the array.\r\n\t *\r\n\t * <h4>Example</h4>\r\n\t *\r\n\t *      createjs.FlashAudioPlugin.swfPath = \"../src/soundjs/flashaudio/\";\r\n\t *      createjs.Sound.registerPlugins([createjs.WebAudioPlugin, createjs.HTMLAudioPlugin, createjs.FlashAudioPlugin]);\r\n\t *\r\n\t * @method registerPlugins\r\n\t * @param {Array} plugins An array of plugins classes to install.\r\n\t * @return {Boolean} Whether a plugin was successfully initialized.\r\n\t * @static\r\n\t */\r\n\ts.registerPlugins = function (plugins) {\r\n\t\ts._pluginsRegistered = true;\r\n\t\tfor (var i = 0, l = plugins.length; i < l; i++) {\r\n\t\t\tif (s._registerPlugin(plugins[i])) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn false;\r\n\t};\r\n\r\n\t/**\r\n\t * Initialize the default plugins. This method is automatically called when any audio is played or registered before\r\n\t * the user has manually registered plugins, and enables Sound to work without manual plugin setup. Currently, the\r\n\t * default plugins are {{#crossLink \"WebAudioPlugin\"}}{{/crossLink}} followed by {{#crossLink \"HTMLAudioPlugin\"}}{{/crossLink}}.\r\n\t *\r\n\t * <h4>Example</h4>\r\n\t *\r\n\t * \tif (!createjs.initializeDefaultPlugins()) { return; }\r\n\t *\r\n\t * @method initializeDefaultPlugins\r\n\t * @returns {Boolean} True if a plugin was initialized, false otherwise.\r\n\t * @since 0.4.0\r\n\t * @static\r\n\t */\r\n\ts.initializeDefaultPlugins = function () {\r\n\t\tif (s.activePlugin != null) {return true;}\r\n\t\tif (s._pluginsRegistered) {return false;}\r\n\t\tif (s.registerPlugins([createjs.WebAudioPlugin, createjs.HTMLAudioPlugin])) {return true;}\r\n\t\treturn false;\r\n\t};\r\n\r\n\t/**\r\n\t * Determines if Sound has been initialized, and a plugin has been activated.\r\n\t *\r\n\t * <h4>Example</h4>\r\n\t * This example sets up a Flash fallback, but only if there is no plugin specified yet.\r\n\t *\r\n\t * \tif (!createjs.Sound.isReady()) {\r\n\t *\t\tcreatejs.FlashAudioPlugin.swfPath = \"../src/soundjs/flashaudio/\";\r\n\t * \t\tcreatejs.Sound.registerPlugins([createjs.WebAudioPlugin, createjs.HTMLAudioPlugin, createjs.FlashAudioPlugin]);\r\n\t *\t}\r\n\t *\r\n\t * @method isReady\r\n\t * @return {Boolean} If Sound has initialized a plugin.\r\n\t * @static\r\n\t */\r\n\ts.isReady = function () {\r\n\t\treturn (s.activePlugin != null);\r\n\t};\r\n\r\n\t/**\r\n\t * Deprecated, please use {{#crossLink \"Sound/capabilities:property\"}}{{/crossLink}} instead.\r\n\t *\r\n\t * @method getCapabilities\r\n\t * @return {Object} An object containing the capabilities of the active plugin.\r\n\t * @static\r\n\t * @deprecated\r\n\t */\r\n\ts.getCapabilities = function () {\r\n\t\tif (s.activePlugin == null) {return null;}\r\n\t\treturn s.activePlugin._capabilities;\r\n\t};\r\n\r\n\t/**\r\n\t * Deprecated, please use {{#crossLink \"Sound/capabilities:property\"}}{{/crossLink}} instead.\r\n\t *\r\n\t * @method getCapability\r\n\t * @param {String} key The capability to retrieve\r\n\t * @return {Number|Boolean} The value of the capability.\r\n\t * @static\r\n\t * @see getCapabilities\r\n\t * @deprecated\r\n\t */\r\n\ts.getCapability = function (key) {\r\n\t\tif (s.activePlugin == null) {return null;}\r\n\t\treturn s.activePlugin._capabilities[key];\r\n\t};\r\n\r\n\t/**\r\n\t * Process manifest items from <a href=\"http://preloadjs.com\" target=\"_blank\">PreloadJS</a>. This method is intended\r\n\t * for usage by a plugin, and not for direct interaction.\r\n\t * @method initLoad\r\n\t * @param {Object} src The object to load.\r\n\t * @return {Object|AbstractLoader} An instance of AbstractLoader.\r\n\t * @protected\r\n\t * @static\r\n\t */\r\n\ts.initLoad = function (loadItem) {\r\n\t\treturn s._registerSound(loadItem);\r\n\t};\r\n\r\n\t/**\r\n\t * Internal method for loading sounds.  This should not be called directly.\r\n\t *\r\n\t * @method _registerSound\r\n\t * @param {Object} src The object to load, containing src property and optionally containing id and data.\r\n\t * @return {Object} An object with the modified values that were passed in, which defines the sound.\r\n\t * Returns false if the source cannot be parsed or no plugins can be initialized.\r\n\t * Returns true if the source is already loaded.\r\n\t * @static\r\n\t * @private\r\n\t * @since 0.6.0\r\n\t */\r\n\r\n\ts._registerSound = function (loadItem) {\r\n\t\tif (!s.initializeDefaultPlugins()) {return false;}\r\n\r\n\t\tvar details;\r\n\t\tif (loadItem.src instanceof Object) {\r\n\t\t\tdetails = s._parseSrc(loadItem.src);\r\n\t\t\tdetails.src = loadItem.path + details.src;\r\n\t\t} else {\r\n\t\t\tdetails = s._parsePath(loadItem.src);\r\n\t\t}\r\n\t\tif (details == null) {return false;}\r\n\t\tloadItem.src = details.src;\r\n\t\tloadItem.type = \"sound\";\r\n\r\n\t\tvar data = loadItem.data;\r\n\t\tvar numChannels = null;\r\n\t\tif (data != null) {\r\n\t\t\tif (!isNaN(data.channels)) {\r\n\t\t\t\tnumChannels = parseInt(data.channels);\r\n\t\t\t} else if (!isNaN(data)) {\r\n\t\t\t\tnumChannels = parseInt(data);\r\n\t\t\t}\r\n\r\n\t\t\tif(data.audioSprite) {\r\n\t\t\t\tvar sp;\r\n\t\t\t\tfor(var i = data.audioSprite.length; i--; ) {\r\n\t\t\t\t\tsp = data.audioSprite[i];\r\n\t\t\t\t\ts._idHash[sp.id] = {src: loadItem.src, startTime: parseInt(sp.startTime), duration: parseInt(sp.duration)};\r\n\r\n\t\t\t\t\tif (sp.defaultPlayProps) {\r\n\t\t\t\t\t\ts._defaultPlayPropsHash[sp.id] = createjs.PlayPropsConfig.create(sp.defaultPlayProps);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (loadItem.id != null) {s._idHash[loadItem.id] = {src: loadItem.src}};\r\n\t\tvar loader = s.activePlugin.register(loadItem);\r\n\r\n\t\tSoundChannel.create(loadItem.src, numChannels);\r\n\r\n\t\t// return the number of instances to the user.  This will also be returned in the load event.\r\n\t\tif (data == null || !isNaN(data)) {\r\n\t\t\tloadItem.data = numChannels || SoundChannel.maxPerChannel();\r\n\t\t} else {\r\n\t\t\tloadItem.data.channels = numChannels || SoundChannel.maxPerChannel();\r\n\t\t}\r\n\r\n\t\tif (loader.type) {loadItem.type = loader.type;}\r\n\r\n\t\tif (loadItem.defaultPlayProps) {\r\n\t\t\ts._defaultPlayPropsHash[loadItem.src] = createjs.PlayPropsConfig.create(loadItem.defaultPlayProps);\r\n\t\t}\r\n\t\treturn loader;\r\n\t};\r\n\r\n\t/**\r\n\t * Register an audio file for loading and future playback in Sound. This is automatically called when using\r\n\t * <a href=\"http://preloadjs.com\" target=\"_blank\">PreloadJS</a>.  It is recommended to register all sounds that\r\n\t * need to be played back in order to properly prepare and preload them. Sound does internal preloading when required.\r\n\t *\r\n\t * <h4>Example</h4>\r\n\t *\r\n\t *      createjs.Sound.alternateExtensions = [\"mp3\"];\r\n\t *      createjs.Sound.on(\"fileload\", handleLoad); // add an event listener for when load is completed\r\n\t *      createjs.Sound.registerSound(\"myAudioPath/mySound.ogg\", \"myID\", 3);\r\n\t *      createjs.Sound.registerSound({ogg:\"path1/mySound.ogg\", mp3:\"path2/mySoundNoExtension\"}, \"myID\", 3);\r\n\t *\r\n\t *\r\n\t * @method registerSound\r\n\t * @param {String | Object} src The source or an Object with a \"src\" property or an Object with multiple extension labeled src properties.\r\n\t * @param {String} [id] An id specified by the user to play the sound later.  Note id is required for when src is multiple extension labeled src properties.\r\n\t * @param {Number | Object} [data] Data associated with the item. Sound uses the data parameter as the number of\r\n\t * channels for an audio instance, however a \"channels\" property can be appended to the data object if it is used\r\n\t * for other information. The audio channels will set a default based on plugin if no value is found.\r\n\t * Sound also uses the data property to hold an {{#crossLink \"AudioSprite\"}}{{/crossLink}} array of objects in the following format {id, startTime, duration}.<br/>\r\n\t *   id used to play the sound later, in the same manner as a sound src with an id.<br/>\r\n\t *   startTime is the initial offset to start playback and loop from, in milliseconds.<br/>\r\n\t *   duration is the amount of time to play the clip for, in milliseconds.<br/>\r\n\t * This allows Sound to support audio sprites that are played back by id.\r\n\t * @param {string} basePath Set a path that will be prepended to src for loading.\r\n\t * @param {Object | PlayPropsConfig} defaultPlayProps Optional Playback properties that will be set as the defaults on any new AbstractSoundInstance.\r\n\t * See {{#crossLink \"PlayPropsConfig\"}}{{/crossLink}} for options.\r\n\t * @return {Object} An object with the modified values that were passed in, which defines the sound.\r\n\t * Returns false if the source cannot be parsed or no plugins can be initialized.\r\n\t * Returns true if the source is already loaded.\r\n\t * @static\r\n\t * @since 0.4.0\r\n\t */\r\n\ts.registerSound = function (src, id, data, basePath, defaultPlayProps) {\r\n\t\tvar loadItem = {src: src, id: id, data:data, defaultPlayProps:defaultPlayProps};\r\n\t\tif (src instanceof Object && src.src) {\r\n\t\t\tbasePath = id;\r\n\t\t\tloadItem = src;\r\n\t\t}\r\n\t\tloadItem = createjs.LoadItem.create(loadItem);\r\n\t\tloadItem.path = basePath;\r\n\r\n\t\tif (basePath != null && !(loadItem.src instanceof Object)) {loadItem.src = basePath + src;}\r\n\r\n\t\tvar loader = s._registerSound(loadItem);\r\n\t\tif(!loader) {return false;}\r\n\r\n\t\tif (!s._preloadHash[loadItem.src]) { s._preloadHash[loadItem.src] = [];}\r\n\t\ts._preloadHash[loadItem.src].push(loadItem);\r\n\t\tif (s._preloadHash[loadItem.src].length == 1) {\r\n\t\t\t// OJR note this will disallow reloading a sound if loading fails or the source changes\r\n\t\t\tloader.on(\"complete\", createjs.proxy(this._handleLoadComplete, this));\r\n\t\t\tloader.on(\"error\", createjs.proxy(this._handleLoadError, this));\r\n\t\t\ts.activePlugin.preload(loader);\r\n\t\t} else {\r\n\t\t\tif (s._preloadHash[loadItem.src][0] == true) {return true;}\r\n\t\t}\r\n\r\n\t\treturn loadItem;\r\n\t};\r\n\r\n\t/**\r\n\t * Register an array of audio files for loading and future playback in Sound. It is recommended to register all\r\n\t * sounds that need to be played back in order to properly prepare and preload them. Sound does internal preloading\r\n\t * when required.\r\n\t *\r\n\t * <h4>Example</h4>\r\n\t *\r\n\t * \t\tvar assetPath = \"./myAudioPath/\";\r\n\t *      var sounds = [\r\n\t *          {src:\"asset0.ogg\", id:\"example\"},\r\n\t *          {src:\"asset1.ogg\", id:\"1\", data:6},\r\n\t *          {src:\"asset2.mp3\", id:\"works\"}\r\n\t *          {src:{mp3:\"path1/asset3.mp3\", ogg:\"path2/asset3NoExtension}, id:\"better\"}\r\n\t *      ];\r\n\t *      createjs.Sound.alternateExtensions = [\"mp3\"];\t// if the passed extension is not supported, try this extension\r\n\t *      createjs.Sound.on(\"fileload\", handleLoad); // call handleLoad when each sound loads\r\n\t *      createjs.Sound.registerSounds(sounds, assetPath);\r\n\t *\r\n\t * @method registerSounds\r\n\t * @param {Array} sounds An array of objects to load. Objects are expected to be in the format needed for\r\n\t * {{#crossLink \"Sound/registerSound\"}}{{/crossLink}}: <code>{src:srcURI, id:ID, data:Data}</code>\r\n\t * with \"id\" and \"data\" being optional.\r\n\t * You can also pass an object with path and manifest properties, where path is a basePath and manifest is an array of objects to load.\r\n\t * Note id is required if src is an object with extension labeled src properties.\r\n\t * @param {string} basePath Set a path that will be prepended to each src when loading.  When creating, playing, or removing\r\n\t * audio that was loaded with a basePath by src, the basePath must be included.\r\n\t * @return {Object} An array of objects with the modified values that were passed in, which defines each sound.\r\n\t * Like registerSound, it will return false for any values when the source cannot be parsed or if no plugins can be initialized.\r\n\t * Also, it will return true for any values when the source is already loaded.\r\n\t * @static\r\n\t * @since 0.6.0\r\n\t */\r\n\ts.registerSounds = function (sounds, basePath) {\r\n\t\tvar returnValues = [];\r\n\t\tif (sounds.path) {\r\n\t\t\tif (!basePath) {\r\n\t\t\t\tbasePath = sounds.path;\r\n\t\t\t} else {\r\n\t\t\t\tbasePath = basePath + sounds.path;\r\n\t\t\t}\r\n\t\t\tsounds = sounds.manifest;\r\n\t\t\t// TODO document this feature\r\n\t\t}\r\n\t\tfor (var i = 0, l = sounds.length; i < l; i++) {\r\n\t\t\treturnValues[i] = createjs.Sound.registerSound(sounds[i].src, sounds[i].id, sounds[i].data, basePath, sounds[i].defaultPlayProps);\r\n\t\t}\r\n\t\treturn returnValues;\r\n\t};\r\n\r\n\t/**\r\n\t * Remove a sound that has been registered with {{#crossLink \"Sound/registerSound\"}}{{/crossLink}} or\r\n\t * {{#crossLink \"Sound/registerSounds\"}}{{/crossLink}}.\r\n\t * <br />Note this will stop playback on active instances playing this sound before deleting them.\r\n\t * <br />Note if you passed in a basePath, you need to pass it or prepend it to the src here.\r\n\t *\r\n\t * <h4>Example</h4>\r\n\t *\r\n\t *      createjs.Sound.removeSound(\"myID\");\r\n\t *      createjs.Sound.removeSound(\"myAudioBasePath/mySound.ogg\");\r\n\t *      createjs.Sound.removeSound(\"myPath/myOtherSound.mp3\", \"myBasePath/\");\r\n\t *      createjs.Sound.removeSound({mp3:\"musicNoExtension\", ogg:\"music.ogg\"}, \"myBasePath/\");\r\n\t *\r\n\t * @method removeSound\r\n\t * @param {String | Object} src The src or ID of the audio, or an Object with a \"src\" property, or an Object with multiple extension labeled src properties.\r\n\t * @param {string} basePath Set a path that will be prepended to each src when removing.\r\n\t * @return {Boolean} True if sound is successfully removed.\r\n\t * @static\r\n\t * @since 0.4.1\r\n\t */\r\n\ts.removeSound = function(src, basePath) {\r\n\t\tif (s.activePlugin == null) {return false;}\r\n\r\n\t\tif (src instanceof Object && src.src) {src = src.src;}\r\n\r\n\t\tvar details;\r\n\t\tif (src instanceof Object) {\r\n\t\t\tdetails = s._parseSrc(src);\r\n\t\t} else {\r\n\t\t\tsrc = s._getSrcById(src).src;\r\n\t\t\tdetails = s._parsePath(src);\r\n\t\t}\r\n\t\tif (details == null) {return false;}\r\n\t\tsrc = details.src;\r\n\t\tif (basePath != null) {src = basePath + src;}\r\n\r\n\t\tfor(var prop in s._idHash){\r\n\t\t\tif(s._idHash[prop].src == src) {\r\n\t\t\t\tdelete(s._idHash[prop]);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// clear from SoundChannel, which also stops and deletes all instances\r\n\t\tSoundChannel.removeSrc(src);\r\n\r\n\t\tdelete(s._preloadHash[src]);\r\n\r\n\t\ts.activePlugin.removeSound(src);\r\n\r\n\t\treturn true;\r\n\t};\r\n\r\n\t/**\r\n\t * Remove an array of audio files that have been registered with {{#crossLink \"Sound/registerSound\"}}{{/crossLink}} or\r\n\t * {{#crossLink \"Sound/registerSounds\"}}{{/crossLink}}.\r\n\t * <br />Note this will stop playback on active instances playing this audio before deleting them.\r\n\t * <br />Note if you passed in a basePath, you need to pass it or prepend it to the src here.\r\n\t *\r\n\t * <h4>Example</h4>\r\n\t *\r\n\t * \t\tassetPath = \"./myPath/\";\r\n\t *      var sounds = [\r\n\t *          {src:\"asset0.ogg\", id:\"example\"},\r\n\t *          {src:\"asset1.ogg\", id:\"1\", data:6},\r\n\t *          {src:\"asset2.mp3\", id:\"works\"}\r\n\t *      ];\r\n\t *      createjs.Sound.removeSounds(sounds, assetPath);\r\n\t *\r\n\t * @method removeSounds\r\n\t * @param {Array} sounds An array of objects to remove. Objects are expected to be in the format needed for\r\n\t * {{#crossLink \"Sound/removeSound\"}}{{/crossLink}}: <code>{srcOrID:srcURIorID}</code>.\r\n\t * You can also pass an object with path and manifest properties, where path is a basePath and manifest is an array of objects to remove.\r\n\t * @param {string} basePath Set a path that will be prepended to each src when removing.\r\n\t * @return {Object} An array of Boolean values representing if the sounds with the same array index were\r\n\t * successfully removed.\r\n\t * @static\r\n\t * @since 0.4.1\r\n\t */\r\n\ts.removeSounds = function (sounds, basePath) {\r\n\t\tvar returnValues = [];\r\n\t\tif (sounds.path) {\r\n\t\t\tif (!basePath) {\r\n\t\t\t\tbasePath = sounds.path;\r\n\t\t\t} else {\r\n\t\t\t\tbasePath = basePath + sounds.path;\r\n\t\t\t}\r\n\t\t\tsounds = sounds.manifest;\r\n\t\t}\r\n\t\tfor (var i = 0, l = sounds.length; i < l; i++) {\r\n\t\t\treturnValues[i] = createjs.Sound.removeSound(sounds[i].src, basePath);\r\n\t\t}\r\n\t\treturn returnValues;\r\n\t};\r\n\r\n\t/**\r\n\t * Remove all sounds that have been registered with {{#crossLink \"Sound/registerSound\"}}{{/crossLink}} or\r\n\t * {{#crossLink \"Sound/registerSounds\"}}{{/crossLink}}.\r\n\t * <br />Note this will stop playback on all active sound instances before deleting them.\r\n\t *\r\n\t * <h4>Example</h4>\r\n\t *\r\n\t *     createjs.Sound.removeAllSounds();\r\n\t *\r\n\t * @method removeAllSounds\r\n\t * @static\r\n\t * @since 0.4.1\r\n\t */\r\n\ts.removeAllSounds = function() {\r\n\t\ts._idHash = {};\r\n\t\ts._preloadHash = {};\r\n\t\tSoundChannel.removeAll();\r\n\t\tif (s.activePlugin) {s.activePlugin.removeAllSounds();}\r\n\t};\r\n\r\n\t/**\r\n\t * Check if a source has been loaded by internal preloaders. This is necessary to ensure that sounds that are\r\n\t * not completed preloading will not kick off a new internal preload if they are played.\r\n\t *\r\n\t * <h4>Example</h4>\r\n\t *\r\n\t *     var mySound = \"assetPath/asset0.ogg\";\r\n\t *     if(createjs.Sound.loadComplete(mySound) {\r\n\t *         createjs.Sound.play(mySound);\r\n\t *     }\r\n\t *\r\n\t * @method loadComplete\r\n\t * @param {String} src The src or id that is being loaded.\r\n\t * @return {Boolean} If the src is already loaded.\r\n\t * @since 0.4.0\r\n\t * @static\r\n\t */\r\n\ts.loadComplete = function (src) {\r\n\t\tif (!s.isReady()) { return false; }\r\n\t\tvar details = s._parsePath(src);\r\n\t\tif (details) {\r\n\t\t\tsrc = s._getSrcById(details.src).src;\r\n\t\t} else {\r\n\t\t\tsrc = s._getSrcById(src).src;\r\n\t\t}\r\n\t\tif(s._preloadHash[src] == undefined) {return false;}\r\n\t\treturn (s._preloadHash[src][0] == true);  // src only loads once, so if it's true for the first it's true for all\r\n\t};\r\n\r\n\t/**\r\n\t * Parse the path of a sound. Alternate extensions will be attempted in order if the\r\n\t * current extension is not supported\r\n\t * @method _parsePath\r\n\t * @param {String} value The path to an audio source.\r\n\t * @return {Object} A formatted object that can be registered with the {{#crossLink \"Sound/activePlugin:property\"}}{{/crossLink}}\r\n\t * and returned to a preloader like <a href=\"http://preloadjs.com\" target=\"_blank\">PreloadJS</a>.\r\n\t * @protected\r\n\t * @static\r\n\t */\r\n\ts._parsePath = function (value) {\r\n\t\tif (typeof(value) != \"string\") {value = value.toString();}\r\n\r\n\t\tvar match = value.match(s.FILE_PATTERN);\r\n\t\tif (match == null) {return false;}\r\n\r\n\t\tvar name = match[4];\r\n\t\tvar ext = match[5];\r\n\t\tvar c = s.capabilities;\r\n\t\tvar i = 0;\r\n\t\twhile (!c[ext]) {\r\n\t\t\text = s.alternateExtensions[i++];\r\n\t\t\tif (i > s.alternateExtensions.length) { return null;}\t// no extensions are supported\r\n\t\t}\r\n\t\tvalue = value.replace(\".\"+match[5], \".\"+ext);\r\n\r\n\t\tvar ret = {name:name, src:value, extension:ext};\r\n\t\treturn ret;\r\n\t};\r\n\r\n\t/**\r\n\t * Parse the path of a sound based on properties of src matching with supported extensions.\r\n\t * Returns false if none of the properties are supported\r\n\t * @method _parseSrc\r\n\t * @param {Object} value The paths to an audio source, indexed by extension type.\r\n\t * @return {Object} A formatted object that can be registered with the {{#crossLink \"Sound/activePlugin:property\"}}{{/crossLink}}\r\n\t * and returned to a preloader like <a href=\"http://preloadjs.com\" target=\"_blank\">PreloadJS</a>.\r\n\t * @protected\r\n\t * @static\r\n\t */\r\n\ts._parseSrc = function (value) {\r\n\t\tvar ret = {name:undefined, src:undefined, extension:undefined};\r\n\t\tvar c = s.capabilities;\r\n\r\n\t\tfor (var prop in value) {\r\n\t\t  if(value.hasOwnProperty(prop) && c[prop]) {\r\n\t\t\t\tret.src = value[prop];\r\n\t\t\t\tret.extension = prop;\r\n\t\t\t\tbreak;\r\n\t\t  }\r\n\t\t}\r\n\t\tif (!ret.src) {return false;}\t// no matches\r\n\r\n\t\tvar i = ret.src.lastIndexOf(\"/\");\r\n\t\tif (i != -1) {\r\n\t\t\tret.name = ret.src.slice(i+1);\r\n\t\t} else {\r\n\t\t\tret.name = ret.src;\r\n\t\t}\r\n\r\n\t\treturn ret;\r\n\t};\r\n\r\n\t/* ---------------\r\n\t Static API.\r\n\t --------------- */\r\n\t/**\r\n\t * Play a sound and get a {{#crossLink \"AbstractSoundInstance\"}}{{/crossLink}} to control. If the sound fails to play, a\r\n\t * AbstractSoundInstance will still be returned, and have a playState of {{#crossLink \"Sound/PLAY_FAILED:property\"}}{{/crossLink}}.\r\n\t * Note that even on sounds with failed playback, you may still be able to call AbstractSoundInstance {{#crossLink \"AbstractSoundInstance/play\"}}{{/crossLink}},\r\n\t * since the failure could be due to lack of available channels. If the src does not have a supported extension or\r\n\t * if there is no available plugin, a default AbstractSoundInstance will be returned which will not play any audio, but will not generate errors.\r\n\t *\r\n\t * <h4>Example</h4>\r\n\t *\r\n\t *      createjs.Sound.on(\"fileload\", handleLoad);\r\n\t *      createjs.Sound.registerSound(\"myAudioPath/mySound.mp3\", \"myID\", 3);\r\n\t *      function handleLoad(event) {\r\n\t *      \tcreatejs.Sound.play(\"myID\");\r\n\t *      \t// store off AbstractSoundInstance for controlling\r\n\t *      \tvar myInstance = createjs.Sound.play(\"myID\", {interrupt: createjs.Sound.INTERRUPT_ANY, loop:-1});\r\n\t *      }\r\n\t *\r\n\t * NOTE to create an audio sprite that has not already been registered, both startTime and duration need to be set.\r\n\t * This is only when creating a new audio sprite, not when playing using the id of an already registered audio sprite.\r\n\t *\r\n\t * <b>Parameters Deprecated</b><br />\r\n\t * The parameters for this method are deprecated in favor of a single parameter that is an Object or {{#crossLink \"PlayPropsConfig\"}}{{/crossLink}}.\r\n\t *\r\n\t * @method play\r\n\t * @param {String} src The src or ID of the audio.\r\n\t * @param {String | Object} [interrupt=\"none\"|options] <b>This parameter will be renamed playProps in the next release.</b><br />\r\n\t * This parameter can be an instance of {{#crossLink \"PlayPropsConfig\"}}{{/crossLink}} or an Object that contains any or all optional properties by name,\r\n\t * including: interrupt, delay, offset, loop, volume, pan, startTime, and duration (see the above code sample).\r\n\t * <br /><strong>OR</strong><br />\r\n\t * <b>Deprecated</b> How to interrupt any currently playing instances of audio with the same source,\r\n\t * if the maximum number of instances of the sound are already playing. Values are defined as <code>INTERRUPT_TYPE</code>\r\n\t * constants on the Sound class, with the default defined by {{#crossLink \"Sound/defaultInterruptBehavior:property\"}}{{/crossLink}}.\r\n\t * @param {Number} [delay=0] <b>Deprecated</b> The amount of time to delay the start of audio playback, in milliseconds.\r\n\t * @param {Number} [offset=0] <b>Deprecated</b> The offset from the start of the audio to begin playback, in milliseconds.\r\n\t * @param {Number} [loop=0] <b>Deprecated</b> How many times the audio loops when it reaches the end of playback. The default is 0 (no\r\n\t * loops), and -1 can be used for infinite playback.\r\n\t * @param {Number} [volume=1] <b>Deprecated</b> The volume of the sound, between 0 and 1. Note that the master volume is applied\r\n\t * against the individual volume.\r\n\t * @param {Number} [pan=0] <b>Deprecated</b> The left-right pan of the sound (if supported), between -1 (left) and 1 (right).\r\n\t * @param {Number} [startTime=null] <b>Deprecated</b> To create an audio sprite (with duration), the initial offset to start playback and loop from, in milliseconds.\r\n\t * @param {Number} [duration=null] <b>Deprecated</b> To create an audio sprite (with startTime), the amount of time to play the clip for, in milliseconds.\r\n\t * @return {AbstractSoundInstance} A {{#crossLink \"AbstractSoundInstance\"}}{{/crossLink}} that can be controlled after it is created.\r\n\t * @static\r\n\t */\r\n\ts.play = function (src, interrupt, delay, offset, loop, volume, pan, startTime, duration) {\r\n\t\tvar playProps;\r\n\t\tif (interrupt instanceof Object || interrupt instanceof createjs.PlayPropsConfig) {\r\n\t\t\tplayProps = createjs.PlayPropsConfig.create(interrupt);\r\n\t\t} else {\r\n\t\t\tplayProps = createjs.PlayPropsConfig.create({interrupt:interrupt, delay:delay, offset:offset, loop:loop, volume:volume, pan:pan, startTime:startTime, duration:duration});\r\n\t\t}\r\n\t\tvar instance = s.createInstance(src, playProps.startTime, playProps.duration);\r\n\t\tvar ok = s._playInstance(instance, playProps);\r\n\t\tif (!ok) {instance._playFailed();}\r\n\t\treturn instance;\r\n\t};\r\n\r\n\t/**\r\n\t * Creates a {{#crossLink \"AbstractSoundInstance\"}}{{/crossLink}} using the passed in src. If the src does not have a\r\n\t * supported extension or if there is no available plugin, a default AbstractSoundInstance will be returned that can be\r\n\t * called safely but does nothing.\r\n\t *\r\n\t * <h4>Example</h4>\r\n\t *\r\n\t *      var myInstance = null;\r\n\t *      createjs.Sound.on(\"fileload\", handleLoad);\r\n\t *      createjs.Sound.registerSound(\"myAudioPath/mySound.mp3\", \"myID\", 3);\r\n\t *      function handleLoad(event) {\r\n\t *      \tmyInstance = createjs.Sound.createInstance(\"myID\");\r\n\t *      \t// alternately we could call the following\r\n\t *      \tmyInstance = createjs.Sound.createInstance(\"myAudioPath/mySound.mp3\");\r\n\t *      }\r\n\t *\r\n\t * NOTE to create an audio sprite that has not already been registered, both startTime and duration need to be set.\r\n\t * This is only when creating a new audio sprite, not when playing using the id of an already registered audio sprite.\r\n\t *\r\n\t * @method createInstance\r\n\t * @param {String} src The src or ID of the audio.\r\n\t * @param {Number} [startTime=null] To create an audio sprite (with duration), the initial offset to start playback and loop from, in milliseconds.\r\n\t * @param {Number} [duration=null] To create an audio sprite (with startTime), the amount of time to play the clip for, in milliseconds.\r\n\t * @return {AbstractSoundInstance} A {{#crossLink \"AbstractSoundInstance\"}}{{/crossLink}} that can be controlled after it is created.\r\n\t * Unsupported extensions will return the default AbstractSoundInstance.\r\n\t * @since 0.4.0\r\n\t * @static\r\n\t */\r\n\ts.createInstance = function (src, startTime, duration) {\r\n\t\tif (!s.initializeDefaultPlugins()) {return new createjs.DefaultSoundInstance(src, startTime, duration);}\r\n\r\n\t\tvar defaultPlayProps = s._defaultPlayPropsHash[src];\t// for audio sprites, which create and store defaults by id\r\n\t\tsrc = s._getSrcById(src);\r\n\r\n\t\tvar details = s._parsePath(src.src);\r\n\r\n\t\tvar instance = null;\r\n\t\tif (details != null && details.src != null) {\r\n\t\t\tSoundChannel.create(details.src);\r\n\t\t\tif (startTime == null) {startTime = src.startTime;}\r\n\t\t\tinstance = s.activePlugin.create(details.src, startTime, duration || src.duration);\r\n\r\n\t\t\tdefaultPlayProps = defaultPlayProps || s._defaultPlayPropsHash[details.src];\r\n\t\t\tif(defaultPlayProps) {\r\n\t\t\t\tinstance.applyPlayProps(defaultPlayProps);\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tinstance = new createjs.DefaultSoundInstance(src, startTime, duration);\r\n\t\t}\r\n\r\n\t\tinstance.uniqueId = s._lastID++;\r\n\r\n\t\treturn instance;\r\n\t};\r\n\r\n\t/**\r\n\t * Stop all audio (global stop). Stopped audio is reset, and not paused. To play audio that has been stopped,\r\n\t * call AbstractSoundInstance {{#crossLink \"AbstractSoundInstance/play\"}}{{/crossLink}}.\r\n\t *\r\n\t * <h4>Example</h4>\r\n\t *\r\n\t *     createjs.Sound.stop();\r\n\t *\r\n\t * @method stop\r\n\t * @static\r\n\t */\r\n\ts.stop = function () {\r\n\t\tvar instances = this._instances;\r\n\t\tfor (var i = instances.length; i--; ) {\r\n\t\t\tinstances[i].stop();  // NOTE stop removes instance from this._instances\r\n\t\t}\r\n\t};\r\n\r\n\t/**\r\n\t * Deprecated, please use {{#crossLink \"Sound/volume:property\"}}{{/crossLink}} instead.\r\n\t *\r\n\t * @method setVolume\r\n\t * @param {Number} value The master volume value. The acceptable range is 0-1.\r\n\t * @static\r\n\t * @deprecated\r\n\t */\r\n\ts.setVolume = function (value) {\r\n\t\tif (Number(value) == null) {return false;}\r\n\t\tvalue = Math.max(0, Math.min(1, value));\r\n\t\ts._masterVolume = value;\r\n\t\tif (!this.activePlugin || !this.activePlugin.setVolume || !this.activePlugin.setVolume(value)) {\r\n\t\t\tvar instances = this._instances;\r\n\t\t\tfor (var i = 0, l = instances.length; i < l; i++) {\r\n\t\t\t\tinstances[i].setMasterVolume(value);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\t/**\r\n\t * Deprecated, please use {{#crossLink \"Sound/volume:property\"}}{{/crossLink}} instead.\r\n\t *\r\n\t * @method getVolume\r\n\t * @return {Number} The master volume, in a range of 0-1.\r\n\t * @static\r\n\t * @deprecated\r\n\t */\r\n\ts.getVolume = function () {\r\n\t\treturn this._masterVolume;\r\n\t};\r\n\r\n\t/**\r\n\t * Deprecated, please use {{#crossLink \"Sound/muted:property\"}}{{/crossLink}} instead.\r\n\t *\r\n\t * @method setMute\r\n\t * @param {Boolean} value Whether the audio should be muted or not.\r\n\t * @return {Boolean} If the mute was set.\r\n\t * @static\r\n\t * @since 0.4.0\r\n\t * @deprecated\r\n\t */\r\n\ts.setMute = function (value) {\r\n\t\tif (value == null) {return false;}\r\n\r\n\t\tthis._masterMute = value;\r\n\t\tif (!this.activePlugin || !this.activePlugin.setMute || !this.activePlugin.setMute(value)) {\r\n\t\t\tvar instances = this._instances;\r\n\t\t\tfor (var i = 0, l = instances.length; i < l; i++) {\r\n\t\t\t\tinstances[i].setMasterMute(value);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn true;\r\n\t};\r\n\r\n\t/**\r\n\t * Deprecated, please use {{#crossLink \"Sound/muted:property\"}}{{/crossLink}} instead.\r\n\t *\r\n\t * @method getMute\r\n\t * @return {Boolean} The mute value of Sound.\r\n\t * @static\r\n\t * @since 0.4.0\r\n\t * @deprecated\r\n\t */\r\n\ts.getMute = function () {\r\n\t\treturn this._masterMute;\r\n\t};\r\n\r\n\t/**\r\n\t * Set the default playback properties for all new SoundInstances of the passed in src or ID.\r\n\t * See {{#crossLink \"PlayPropsConfig\"}}{{/crossLink}} for available properties.\r\n\t *\r\n\t * @method setDefaultPlayProps\r\n\t * @param {String} src The src or ID used to register the audio.\r\n\t * @param {Object | PlayPropsConfig} playProps The playback properties you would like to set.\r\n\t * @since 0.6.1\r\n\t */\r\n\ts.setDefaultPlayProps = function(src, playProps) {\r\n\t\tsrc = s._getSrcById(src);\r\n\t\ts._defaultPlayPropsHash[s._parsePath(src.src).src] = createjs.PlayPropsConfig.create(playProps);\r\n\t};\r\n\r\n\t/**\r\n\t * Get the default playback properties for the passed in src or ID.  These properties are applied to all\r\n\t * new SoundInstances.  Returns null if default does not exist.\r\n\t *\r\n\t * @method getDefaultPlayProps\r\n\t * @param {String} src The src or ID used to register the audio.\r\n\t * @returns {PlayPropsConfig} returns an existing PlayPropsConfig or null if one does not exist\r\n\t * @since 0.6.1\r\n\t */\r\n\ts.getDefaultPlayProps = function(src) {\r\n\t\tsrc = s._getSrcById(src);\r\n\t\treturn s._defaultPlayPropsHash[s._parsePath(src.src).src];\r\n\t};\r\n\r\n\r\n\t/* ---------------\r\n\t Internal methods\r\n\t --------------- */\r\n\t/**\r\n\t * Play an instance. This is called by the static API, as well as from plugins. This allows the core class to\r\n\t * control delays.\r\n\t * @method _playInstance\r\n\t * @param {AbstractSoundInstance} instance The {{#crossLink \"AbstractSoundInstance\"}}{{/crossLink}} to start playing.\r\n\t * @param {PlayPropsConfig} playProps A PlayPropsConfig object.\r\n\t * @return {Boolean} If the sound can start playing. Sounds that fail immediately will return false. Sounds that\r\n\t * have a delay will return true, but may still fail to play.\r\n\t * @protected\r\n\t * @static\r\n\t */\r\n\ts._playInstance = function (instance, playProps) {\r\n\t\tvar defaultPlayProps = s._defaultPlayPropsHash[instance.src] || {};\r\n\t\tif (playProps.interrupt == null) {playProps.interrupt = defaultPlayProps.interrupt || s.defaultInterruptBehavior};\r\n\t\tif (playProps.delay == null) {playProps.delay = defaultPlayProps.delay || 0;}\r\n\t\tif (playProps.offset == null) {playProps.offset = instance.getPosition();}\r\n\t\tif (playProps.loop == null) {playProps.loop = instance.loop;}\r\n\t\tif (playProps.volume == null) {playProps.volume = instance.volume;}\r\n\t\tif (playProps.pan == null) {playProps.pan = instance.pan;}\r\n\r\n\t\tif (playProps.delay == 0) {\r\n\t\t\tvar ok = s._beginPlaying(instance, playProps);\r\n\t\t\tif (!ok) {return false;}\r\n\t\t} else {\r\n\t\t\t//Note that we can't pass arguments to proxy OR setTimeout (IE only), so just wrap the function call.\r\n\t\t\t// OJR WebAudio may want to handle this differently, so it might make sense to move this functionality into the plugins in the future\r\n\t\t\tvar delayTimeoutId = setTimeout(function () {\r\n\t\t\t\ts._beginPlaying(instance, playProps);\r\n\t\t\t}, playProps.delay);\r\n\t\t\tinstance.delayTimeoutId = delayTimeoutId;\r\n\t\t}\r\n\r\n\t\tthis._instances.push(instance);\r\n\r\n\t\treturn true;\r\n\t};\r\n\r\n\t/**\r\n\t * Begin playback. This is called immediately or after delay by {{#crossLink \"Sound/playInstance\"}}{{/crossLink}}.\r\n\t * @method _beginPlaying\r\n\t * @param {AbstractSoundInstance} instance A {{#crossLink \"AbstractSoundInstance\"}}{{/crossLink}} to begin playback.\r\n\t * @param {PlayPropsConfig} playProps A PlayPropsConfig object.\r\n\t * @return {Boolean} If the sound can start playing. If there are no available channels, or the instance fails to\r\n\t * start, this will return false.\r\n\t * @protected\r\n\t * @static\r\n\t */\r\n\ts._beginPlaying = function (instance, playProps) {\r\n\t\tif (!SoundChannel.add(instance, playProps.interrupt)) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tvar result = instance._beginPlaying(playProps);\r\n\t\tif (!result) {\r\n\t\t\tvar index = createjs.indexOf(this._instances, instance);\r\n\t\t\tif (index > -1) {this._instances.splice(index, 1);}\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\treturn true;\r\n\t};\r\n\r\n\t/**\r\n\t * Get the source of a sound via the ID passed in with a register call. If no ID is found the value is returned\r\n\t * instead.\r\n\t * @method _getSrcById\r\n\t * @param {String} value The ID the sound was registered with.\r\n\t * @return {String} The source of the sound if it has been registered with this ID or the value that was passed in.\r\n\t * @protected\r\n\t * @static\r\n\t */\r\n\ts._getSrcById = function (value) {\r\n\t\treturn s._idHash[value] || {src: value};\r\n\t};\r\n\r\n\t/**\r\n\t * A sound has completed playback, been interrupted, failed, or been stopped. This method removes the instance from\r\n\t * Sound management. It will be added again, if the sound re-plays. Note that this method is called from the\r\n\t * instances themselves.\r\n\t * @method _playFinished\r\n\t * @param {AbstractSoundInstance} instance The instance that finished playback.\r\n\t * @protected\r\n\t * @static\r\n\t */\r\n\ts._playFinished = function (instance) {\r\n\t\tSoundChannel.remove(instance);\r\n\t\tvar index = createjs.indexOf(this._instances, instance);\r\n\t\tif (index > -1) {this._instances.splice(index, 1);}\t// OJR this will always be > -1, there is no way for an instance to exist without being added to this._instances\r\n\t};\r\n\r\n\tcreatejs.Sound = Sound;\r\n\r\n\t/**\r\n\t * An internal class that manages the number of active {{#crossLink \"AbstractSoundInstance\"}}{{/crossLink}} instances for\r\n\t * each sound type. This method is only used internally by the {{#crossLink \"Sound\"}}{{/crossLink}} class.\r\n\t *\r\n\t * The number of sounds is artificially limited by Sound in order to prevent over-saturation of a\r\n\t * single sound, as well as to stay within hardware limitations, although the latter may disappear with better\r\n\t * browser support.\r\n\t *\r\n\t * When a sound is played, this class ensures that there is an available instance, or interrupts an appropriate\r\n\t * sound that is already playing.\r\n\t * #class SoundChannel\r\n\t * @param {String} src The source of the instances\r\n\t * @param {Number} [max=1] The number of instances allowed\r\n\t * @constructor\r\n\t * @protected\r\n\t */\r\n\tfunction SoundChannel(src, max) {\r\n\t\tthis.init(src, max);\r\n\t}\r\n\r\n\t/* ------------\r\n\t Static API\r\n\t ------------ */\r\n\t/**\r\n\t * A hash of channel instances indexed by source.\r\n\t * #property channels\r\n\t * @type {Object}\r\n\t * @static\r\n\t */\r\n\tSoundChannel.channels = {};\r\n\r\n\t/**\r\n\t * Create a sound channel. Note that if the sound channel already exists, this will fail.\r\n\t * #method create\r\n\t * @param {String} src The source for the channel\r\n\t * @param {Number} max The maximum amount this channel holds. The default is {{#crossLink \"SoundChannel.maxDefault\"}}{{/crossLink}}.\r\n\t * @return {Boolean} If the channels were created.\r\n\t * @static\r\n\t */\r\n\tSoundChannel.create = function (src, max) {\r\n\t\tvar channel = SoundChannel.get(src);\r\n\t\tif (channel == null) {\r\n\t\t\tSoundChannel.channels[src] = new SoundChannel(src, max);\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\treturn false;\r\n\t};\r\n\t/**\r\n\t * Delete a sound channel, stop and delete all related instances. Note that if the sound channel does not exist, this will fail.\r\n\t * #method remove\r\n\t * @param {String} src The source for the channel\r\n\t * @return {Boolean} If the channels were deleted.\r\n\t * @static\r\n\t */\r\n\tSoundChannel.removeSrc = function (src) {\r\n\t\tvar channel = SoundChannel.get(src);\r\n\t\tif (channel == null) {return false;}\r\n\t\tchannel._removeAll();\t// this stops and removes all active instances\r\n\t\tdelete(SoundChannel.channels[src]);\r\n\t\treturn true;\r\n\t};\r\n\t/**\r\n\t * Delete all sound channels, stop and delete all related instances.\r\n\t * #method removeAll\r\n\t * @static\r\n\t */\r\n\tSoundChannel.removeAll = function () {\r\n\t\tfor(var channel in SoundChannel.channels) {\r\n\t\t\tSoundChannel.channels[channel]._removeAll();\t// this stops and removes all active instances\r\n\t\t}\r\n\t\tSoundChannel.channels = {};\r\n\t};\r\n\t/**\r\n\t * Add an instance to a sound channel.\r\n\t * #method add\r\n\t * @param {AbstractSoundInstance} instance The instance to add to the channel\r\n\t * @param {String} interrupt The interrupt value to use. Please see the {{#crossLink \"Sound/play\"}}{{/crossLink}}\r\n\t * for details on interrupt modes.\r\n\t * @return {Boolean} The success of the method call. If the channel is full, it will return false.\r\n\t * @static\r\n\t */\r\n\tSoundChannel.add = function (instance, interrupt) {\r\n\t\tvar channel = SoundChannel.get(instance.src);\r\n\t\tif (channel == null) {return false;}\r\n\t\treturn channel._add(instance, interrupt);\r\n\t};\r\n\t/**\r\n\t * Remove an instance from the channel.\r\n\t * #method remove\r\n\t * @param {AbstractSoundInstance} instance The instance to remove from the channel\r\n\t * @return The success of the method call. If there is no channel, it will return false.\r\n\t * @static\r\n\t */\r\n\tSoundChannel.remove = function (instance) {\r\n\t\tvar channel = SoundChannel.get(instance.src);\r\n\t\tif (channel == null) {return false;}\r\n\t\tchannel._remove(instance);\r\n\t\treturn true;\r\n\t};\r\n\t/**\r\n\t * Get the maximum number of sounds you can have in a channel.\r\n\t * #method maxPerChannel\r\n\t * @return {Number} The maximum number of sounds you can have in a channel.\r\n\t */\r\n\tSoundChannel.maxPerChannel = function () {\r\n\t\treturn p.maxDefault;\r\n\t};\r\n\t/**\r\n\t * Get a channel instance by its src.\r\n\t * #method get\r\n\t * @param {String} src The src to use to look up the channel\r\n\t * @static\r\n\t */\r\n\tSoundChannel.get = function (src) {\r\n\t\treturn SoundChannel.channels[src];\r\n\t};\r\n\r\n\tvar p = SoundChannel.prototype;\r\n\tp.constructor = SoundChannel;\r\n\r\n\t/**\r\n\t * <strong>REMOVED</strong>. Removed in favor of using `MySuperClass_constructor`.\r\n\t * See {{#crossLink \"Utility Methods/extend\"}}{{/crossLink}} and {{#crossLink \"Utility Methods/promote\"}}{{/crossLink}}\r\n\t * for details.\r\n\t *\r\n\t * There is an inheritance tutorial distributed with EaselJS in /tutorials/Inheritance.\r\n\t *\r\n\t * @method initialize\r\n\t * @protected\r\n\t * @deprecated\r\n\t */\r\n\t// p.initialize = function() {}; // searchable for devs wondering where it is.\r\n\r\n\r\n\t/**\r\n\t * The source of the channel.\r\n\t * #property src\r\n\t * @type {String}\r\n\t */\r\n\tp.src = null;\r\n\r\n\t/**\r\n\t * The maximum number of instances in this channel.  -1 indicates no limit\r\n\t * #property max\r\n\t * @type {Number}\r\n\t */\r\n\tp.max = null;\r\n\r\n\t/**\r\n\t * The default value to set for max, if it isn't passed in.  Also used if -1 is passed.\r\n\t * #property maxDefault\r\n\t * @type {Number}\r\n\t * @default 100\r\n\t * @since 0.4.0\r\n\t */\r\n\tp.maxDefault = 100;\r\n\r\n\t/**\r\n\t * The current number of active instances.\r\n\t * #property length\r\n\t * @type {Number}\r\n\t */\r\n\tp.length = 0;\r\n\r\n\t/**\r\n\t * Initialize the channel.\r\n\t * #method init\r\n\t * @param {String} src The source of the channel\r\n\t * @param {Number} max The maximum number of instances in the channel\r\n\t * @protected\r\n\t */\r\n\tp.init = function (src, max) {\r\n\t\tthis.src = src;\r\n\t\tthis.max = max || this.maxDefault;\r\n\t\tif (this.max == -1) {this.max = this.maxDefault;}\r\n\t\tthis._instances = [];\r\n\t};\r\n\r\n\t/**\r\n\t * Get an instance by index.\r\n\t * #method get\r\n\t * @param {Number} index The index to return.\r\n\t * @return {AbstractSoundInstance} The AbstractSoundInstance at a specific instance.\r\n\t */\r\n\tp._get = function (index) {\r\n\t\treturn this._instances[index];\r\n\t};\r\n\r\n\t/**\r\n\t * Add a new instance to the channel.\r\n\t * #method add\r\n\t * @param {AbstractSoundInstance} instance The instance to add.\r\n\t * @return {Boolean} The success of the method call. If the channel is full, it will return false.\r\n\t */\r\n\tp._add = function (instance, interrupt) {\r\n\t\tif (!this._getSlot(interrupt, instance)) {return false;}\r\n\t\tthis._instances.push(instance);\r\n\t\tthis.length++;\r\n\t\treturn true;\r\n\t};\r\n\r\n\t/**\r\n\t * Remove an instance from the channel, either when it has finished playing, or it has been interrupted.\r\n\t * #method remove\r\n\t * @param {AbstractSoundInstance} instance The instance to remove\r\n\t * @return {Boolean} The success of the remove call. If the instance is not found in this channel, it will\r\n\t * return false.\r\n\t */\r\n\tp._remove = function (instance) {\r\n\t\tvar index = createjs.indexOf(this._instances, instance);\r\n\t\tif (index == -1) {return false;}\r\n\t\tthis._instances.splice(index, 1);\r\n\t\tthis.length--;\r\n\t\treturn true;\r\n\t};\r\n\r\n\t/**\r\n\t * Stop playback and remove all instances from the channel.  Usually in response to a delete call.\r\n\t * #method removeAll\r\n\t */\r\n\tp._removeAll = function () {\r\n\t\t// Note that stop() removes the item from the list\r\n\t\tfor (var i=this.length-1; i>=0; i--) {\r\n\t\t\tthis._instances[i].stop();\r\n\t\t}\r\n\t};\r\n\r\n\t/**\r\n\t * Get an available slot depending on interrupt value and if slots are available.\r\n\t * #method getSlot\r\n\t * @param {String} interrupt The interrupt value to use.\r\n\t * @param {AbstractSoundInstance} instance The sound instance that will go in the channel if successful.\r\n\t * @return {Boolean} Determines if there is an available slot. Depending on the interrupt mode, if there are no slots,\r\n\t * an existing AbstractSoundInstance may be interrupted. If there are no slots, this method returns false.\r\n\t */\r\n\tp._getSlot = function (interrupt, instance) {\r\n\t\tvar target, replacement;\r\n\r\n\t\tif (interrupt != Sound.INTERRUPT_NONE) {\r\n\t\t\t// First replacement candidate\r\n\t\t\treplacement = this._get(0);\r\n\t\t\tif (replacement == null) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfor (var i = 0, l = this.max; i < l; i++) {\r\n\t\t\ttarget = this._get(i);\r\n\r\n\t\t\t// Available Space\r\n\t\t\tif (target == null) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\r\n\t\t\t// Audio is complete or not playing\r\n\t\t\tif (target.playState == Sound.PLAY_FINISHED ||\r\n\t\t\t\ttarget.playState == Sound.PLAY_INTERRUPTED ||\r\n\t\t\t\ttarget.playState == Sound.PLAY_FAILED) {\r\n\t\t\t\treplacement = target;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\r\n\t\t\tif (interrupt == Sound.INTERRUPT_NONE) {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\r\n\t\t\t// Audio is a better candidate than the current target, according to playhead\r\n\t\t\tif ((interrupt == Sound.INTERRUPT_EARLY && target.getPosition() < replacement.getPosition()) ||\r\n\t\t\t\t(interrupt == Sound.INTERRUPT_LATE && target.getPosition() > replacement.getPosition())) {\r\n\t\t\t\t\treplacement = target;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (replacement != null) {\r\n\t\t\treplacement._interrupt();\r\n\t\t\tthis._remove(replacement);\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\treturn false;\r\n\t};\r\n\r\n\tp.toString = function () {\r\n\t\treturn \"[Sound SoundChannel]\";\r\n\t};\r\n\t// do not add SoundChannel to namespace\r\n\r\n}());\r\n\r\n//##############################################################################\r\n// AbstractSoundInstance.js\r\n//##############################################################################\r\n\r\nthis.createjs = this.createjs || {};\r\n\r\n/**\r\n * A AbstractSoundInstance is created when any calls to the Sound API method {{#crossLink \"Sound/play\"}}{{/crossLink}} or\r\n * {{#crossLink \"Sound/createInstance\"}}{{/crossLink}} are made. The AbstractSoundInstance is returned by the active plugin\r\n * for control by the user.\r\n *\r\n * <h4>Example</h4>\r\n *\r\n *      var myInstance = createjs.Sound.play(\"myAssetPath/mySrcFile.mp3\");\r\n *\r\n * A number of additional parameters provide a quick way to determine how a sound is played. Please see the Sound\r\n * API method {{#crossLink \"Sound/play\"}}{{/crossLink}} for a list of arguments.\r\n *\r\n * Once a AbstractSoundInstance is created, a reference can be stored that can be used to control the audio directly through\r\n * the AbstractSoundInstance. If the reference is not stored, the AbstractSoundInstance will play out its audio (and any loops), and\r\n * is then de-referenced from the {{#crossLink \"Sound\"}}{{/crossLink}} class so that it can be cleaned up. If audio\r\n * playback has completed, a simple call to the {{#crossLink \"AbstractSoundInstance/play\"}}{{/crossLink}} instance method\r\n * will rebuild the references the Sound class need to control it.\r\n *\r\n *      var myInstance = createjs.Sound.play(\"myAssetPath/mySrcFile.mp3\", {loop:2});\r\n *      myInstance.on(\"loop\", handleLoop);\r\n *      function handleLoop(event) {\r\n *          myInstance.volume = myInstance.volume * 0.5;\r\n *      }\r\n *\r\n * Events are dispatched from the instance to notify when the sound has completed, looped, or when playback fails\r\n *\r\n *      var myInstance = createjs.Sound.play(\"myAssetPath/mySrcFile.mp3\");\r\n *      myInstance.on(\"complete\", handleComplete);\r\n *      myInstance.on(\"loop\", handleLoop);\r\n *      myInstance.on(\"failed\", handleFailed);\r\n *\r\n *\r\n * @class AbstractSoundInstance\r\n * @param {String} src The path to and file name of the sound.\r\n * @param {Number} startTime Audio sprite property used to apply an offset, in milliseconds.\r\n * @param {Number} duration Audio sprite property used to set the time the clip plays for, in milliseconds.\r\n * @param {Object} playbackResource Any resource needed by plugin to support audio playback.\r\n * @extends EventDispatcher\r\n * @constructor\r\n */\r\n\r\n(function () {\r\n\t\"use strict\";\r\n\r\n\r\n// Constructor:\r\n\tvar AbstractSoundInstance = function (src, startTime, duration, playbackResource) {\r\n\t\tthis.EventDispatcher_constructor();\r\n\r\n\r\n\t// public properties:\r\n\t\t/**\r\n\t\t * The source of the sound.\r\n\t\t * @property src\r\n\t\t * @type {String}\r\n\t\t * @default null\r\n\t\t */\r\n\t\tthis.src = src;\r\n\r\n\t\t/**\r\n\t\t * The unique ID of the instance. This is set by {{#crossLink \"Sound\"}}{{/crossLink}}.\r\n\t\t * @property uniqueId\r\n\t\t * @type {String} | Number\r\n\t\t * @default -1\r\n\t\t */\r\n\t\tthis.uniqueId = -1;\r\n\r\n\t\t/**\r\n\t\t * The play state of the sound. Play states are defined as constants on {{#crossLink \"Sound\"}}{{/crossLink}}.\r\n\t\t * @property playState\r\n\t\t * @type {String}\r\n\t\t * @default null\r\n\t\t */\r\n\t\tthis.playState = null;\r\n\r\n\t\t/**\r\n\t\t * A Timeout created by {{#crossLink \"Sound\"}}{{/crossLink}} when this AbstractSoundInstance is played with a delay.\r\n\t\t * This allows AbstractSoundInstance to remove the delay if stop, pause, or cleanup are called before playback begins.\r\n\t\t * @property delayTimeoutId\r\n\t\t * @type {timeoutVariable}\r\n\t\t * @default null\r\n\t\t * @protected\r\n\t\t * @since 0.4.0\r\n\t\t */\r\n\t\tthis.delayTimeoutId = null;\r\n\t\t// TODO consider moving delay into AbstractSoundInstance so it can be handled by plugins\r\n\r\n\r\n\t// private properties\r\n\t// Getter / Setter Properties\r\n\t\t// OJR TODO find original reason that we didn't use defined functions.  I think it was performance related\r\n\t\t/**\r\n\t\t * The volume of the sound, between 0 and 1.\r\n\t\t *\r\n\t\t * The actual output volume of a sound can be calculated using:\r\n\t\t * <code>myInstance.volume * createjs.Sound.getVolume();</code>\r\n\t\t *\r\n\t\t * @property volume\r\n\t\t * @type {Number}\r\n\t\t * @default 1\r\n\t\t */\r\n\t\tthis._volume =  1;\r\n\t\tObject.defineProperty(this, \"volume\", {\r\n\t\t\tget: this.getVolume,\r\n\t\t\tset: this.setVolume\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t * The pan of the sound, between -1 (left) and 1 (right). Note that pan is not supported by HTML Audio.\r\n\t\t *\r\n\t\t * <br />Note in WebAudioPlugin this only gives us the \"x\" value of what is actually 3D audio.\r\n\t\t *\r\n\t\t * @property pan\r\n\t\t * @type {Number}\r\n\t\t * @default 0\r\n\t\t */\r\n\t\tthis._pan =  0;\r\n\t\tObject.defineProperty(this, \"pan\", {\r\n\t\t\tget: this.getPan,\r\n\t\t\tset: this.setPan\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t * Audio sprite property used to determine the starting offset.\r\n\t\t * @property startTime\r\n\t\t * @type {Number}\r\n\t\t * @default 0\r\n\t\t * @since 0.6.1\r\n\t\t */\r\n\t\tthis._startTime = Math.max(0, startTime || 0);\r\n\t\tObject.defineProperty(this, \"startTime\", {\r\n\t\t\tget: this.getStartTime,\r\n\t\t\tset: this.setStartTime\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t * Sets or gets the length of the audio clip, value is in milliseconds.\r\n\t\t *\r\n\t\t * @property duration\r\n\t\t * @type {Number}\r\n\t\t * @default 0\r\n\t\t * @since 0.6.0\r\n\t\t */\r\n\t\tthis._duration = Math.max(0, duration || 0);\r\n\t\tObject.defineProperty(this, \"duration\", {\r\n\t\t\tget: this.getDuration,\r\n\t\t\tset: this.setDuration\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t * Object that holds plugin specific resource need for audio playback.\r\n\t\t * This is set internally by the plugin.  For example, WebAudioPlugin will set an array buffer,\r\n\t\t * HTMLAudioPlugin will set a tag, FlashAudioPlugin will set a flash reference.\r\n\t\t *\r\n\t\t * @property playbackResource\r\n\t\t * @type {Object}\r\n\t\t * @default null\r\n\t\t */\r\n\t\tthis._playbackResource = null;\r\n\t\tObject.defineProperty(this, \"playbackResource\", {\r\n\t\t\tget: this.getPlaybackResource,\r\n\t\t\tset: this.setPlaybackResource\r\n\t\t});\r\n\t\tif(playbackResource !== false && playbackResource !== true) { this.setPlaybackResource(playbackResource); }\r\n\r\n\t\t/**\r\n\t\t * The position of the playhead in milliseconds. This can be set while a sound is playing, paused, or stopped.\r\n\t\t *\r\n\t\t * @property position\r\n\t\t * @type {Number}\r\n\t\t * @default 0\r\n\t\t * @since 0.6.0\r\n\t\t */\r\n\t\tthis._position = 0;\r\n\t\tObject.defineProperty(this, \"position\", {\r\n\t\t\tget: this.getPosition,\r\n\t\t\tset: this.setPosition\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t * The number of play loops remaining. Negative values will loop infinitely.\r\n\t\t *\r\n\t\t * @property loop\r\n\t\t * @type {Number}\r\n\t\t * @default 0\r\n\t\t * @public\r\n\t\t * @since 0.6.0\r\n\t\t */\r\n\t\tthis._loop = 0;\r\n\t\tObject.defineProperty(this, \"loop\", {\r\n\t\t\tget: this.getLoop,\r\n\t\t\tset: this.setLoop\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t * Mutes or unmutes the current audio instance.\r\n\t\t *\r\n\t\t * @property muted\r\n\t\t * @type {Boolean}\r\n\t\t * @default false\r\n\t\t * @since 0.6.0\r\n\t\t */\r\n\t\tthis._muted = false;\r\n\t\tObject.defineProperty(this, \"muted\", {\r\n\t\t\tget: this.getMuted,\r\n\t\t\tset: this.setMuted\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t * Pauses or resumes the current audio instance.\r\n\t\t *\r\n\t\t * @property paused\r\n\t\t * @type {Boolean}\r\n\t\t */\r\n\t\tthis._paused = false;\r\n\t\tObject.defineProperty(this, \"paused\", {\r\n\t\t\tget: this.getPaused,\r\n\t\t\tset: this.setPaused\r\n\t\t});\r\n\r\n\r\n\t// Events\r\n\t\t/**\r\n\t\t * The event that is fired when playback has started successfully.\r\n\t\t * @event succeeded\r\n\t\t * @param {Object} target The object that dispatched the event.\r\n\t\t * @param {String} type The event type.\r\n\t\t * @since 0.4.0\r\n\t\t */\r\n\r\n\t\t/**\r\n\t\t * The event that is fired when playback is interrupted. This happens when another sound with the same\r\n\t\t * src property is played using an interrupt value that causes this instance to stop playing.\r\n\t\t * @event interrupted\r\n\t\t * @param {Object} target The object that dispatched the event.\r\n\t\t * @param {String} type The event type.\r\n\t\t * @since 0.4.0\r\n\t\t */\r\n\r\n\t\t/**\r\n\t\t * The event that is fired when playback has failed. This happens when there are too many channels with the same\r\n\t\t * src property already playing (and the interrupt value doesn't cause an interrupt of another instance), or\r\n\t\t * the sound could not be played, perhaps due to a 404 error.\r\n\t\t * @event failed\r\n\t\t * @param {Object} target The object that dispatched the event.\r\n\t\t * @param {String} type The event type.\r\n\t\t * @since 0.4.0\r\n\t\t */\r\n\r\n\t\t/**\r\n\t\t * The event that is fired when a sound has completed playing but has loops remaining.\r\n\t\t * @event loop\r\n\t\t * @param {Object} target The object that dispatched the event.\r\n\t\t * @param {String} type The event type.\r\n\t\t * @since 0.4.0\r\n\t\t */\r\n\r\n\t\t/**\r\n\t\t * The event that is fired when playback completes. This means that the sound has finished playing in its\r\n\t\t * entirety, including its loop iterations.\r\n\t\t * @event complete\r\n\t\t * @param {Object} target The object that dispatched the event.\r\n\t\t * @param {String} type The event type.\r\n\t\t * @since 0.4.0\r\n\t\t */\r\n\t};\r\n\r\n\tvar p = createjs.extend(AbstractSoundInstance, createjs.EventDispatcher);\r\n\r\n\t// TODO: deprecated\r\n\t// p.initialize = function() {}; // searchable for devs wondering where it is. REMOVED. See docs for details.\r\n\r\n\r\n// Public Methods:\r\n\t/**\r\n\t * Play an instance. This method is intended to be called on SoundInstances that already exist (created\r\n\t * with the Sound API {{#crossLink \"Sound/createInstance\"}}{{/crossLink}} or {{#crossLink \"Sound/play\"}}{{/crossLink}}).\r\n\t *\r\n\t * <h4>Example</h4>\r\n\t *\r\n\t *      var myInstance = createjs.Sound.createInstance(mySrc);\r\n\t *      myInstance.play({interrupt:createjs.Sound.INTERRUPT_ANY, loop:2, pan:0.5});\r\n\t *\r\n\t * Note that if this sound is already playing, this call will still set the passed in parameters.\r\n\r\n\t * <b>Parameters Deprecated</b><br />\r\n\t * The parameters for this method are deprecated in favor of a single parameter that is an Object or {{#crossLink \"PlayPropsConfig\"}}{{/crossLink}}.\r\n\t *\r\n\t * @method play\r\n\t * @param {String | Object} [interrupt=\"none\"|options] <b>This parameter will be renamed playProps in the next release.</b><br />\r\n\t * This parameter can be an instance of {{#crossLink \"PlayPropsConfig\"}}{{/crossLink}} or an Object that contains any or all optional properties by name,\r\n\t * including: interrupt, delay, offset, loop, volume, pan, startTime, and duration (see the above code sample).\r\n\t * <br /><strong>OR</strong><br />\r\n\t * <b>Deprecated</b> How to interrupt any currently playing instances of audio with the same source,\r\n\t * if the maximum number of instances of the sound are already playing. Values are defined as <code>INTERRUPT_TYPE</code>\r\n\t * constants on the Sound class, with the default defined by {{#crossLink \"Sound/defaultInterruptBehavior:property\"}}{{/crossLink}}.\r\n\t * @param {Number} [delay=0] <b>Deprecated</b> The amount of time to delay the start of audio playback, in milliseconds.\r\n\t * @param {Number} [offset=0] <b>Deprecated</b> The offset from the start of the audio to begin playback, in milliseconds.\r\n\t * @param {Number} [loop=0] <b>Deprecated</b> How many times the audio loops when it reaches the end of playback. The default is 0 (no\r\n\t * loops), and -1 can be used for infinite playback.\r\n\t * @param {Number} [volume=1] <b>Deprecated</b> The volume of the sound, between 0 and 1. Note that the master volume is applied\r\n\t * against the individual volume.\r\n\t * @param {Number} [pan=0] <b>Deprecated</b> The left-right pan of the sound (if supported), between -1 (left) and 1 (right).\r\n\t * Note that pan is not supported for HTML Audio.\r\n\t * @return {AbstractSoundInstance} A reference to itself, intended for chaining calls.\r\n\t */\r\n\tp.play = function (interrupt, delay, offset, loop, volume, pan) {\r\n\t\tvar playProps;\r\n\t\tif (interrupt instanceof Object || interrupt instanceof createjs.PlayPropsConfig) {\r\n\t\t\tplayProps = createjs.PlayPropsConfig.create(interrupt);\r\n\t\t} else {\r\n\t\t\tplayProps = createjs.PlayPropsConfig.create({interrupt:interrupt, delay:delay, offset:offset, loop:loop, volume:volume, pan:pan});\r\n\t\t}\r\n\r\n\t\tif (this.playState == createjs.Sound.PLAY_SUCCEEDED) {\r\n\t\t\tthis.applyPlayProps(playProps);\r\n\t\t\tif (this._paused) {\tthis.setPaused(false); }\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis._cleanUp();\r\n\t\tcreatejs.Sound._playInstance(this, playProps);\t// make this an event dispatch??\r\n\t\treturn this;\r\n\t};\r\n\r\n\t/**\r\n\t * Stop playback of the instance. Stopped sounds will reset their position to 0, and calls to {{#crossLink \"AbstractSoundInstance/resume\"}}{{/crossLink}}\r\n\t * will fail. To start playback again, call {{#crossLink \"AbstractSoundInstance/play\"}}{{/crossLink}}.\r\n     *\r\n     * If you don't want to lose your position use yourSoundInstance.paused = true instead. {{#crossLink \"AbstractSoundInstance/paused\"}}{{/crossLink}}.\r\n\t *\r\n\t * <h4>Example</h4>\r\n\t *\r\n\t *     myInstance.stop();\r\n\t *\r\n\t * @method stop\r\n\t * @return {AbstractSoundInstance} A reference to itself, intended for chaining calls.\r\n\t */\r\n\tp.stop = function () {\r\n\t\tthis._position = 0;\r\n\t\tthis._paused = false;\r\n\t\tthis._handleStop();\r\n\t\tthis._cleanUp();\r\n\t\tthis.playState = createjs.Sound.PLAY_FINISHED;\r\n\t\treturn this;\r\n\t};\r\n\r\n\t/**\r\n\t * Remove all external references and resources from AbstractSoundInstance.  Note this is irreversible and AbstractSoundInstance will no longer work\r\n\t * @method destroy\r\n\t * @since 0.6.0\r\n\t */\r\n\tp.destroy = function() {\r\n\t\tthis._cleanUp();\r\n\t\tthis.src = null;\r\n\t\tthis.playbackResource = null;\r\n\r\n\t\tthis.removeAllEventListeners();\r\n\t};\r\n\r\n\t/**\r\n\t * Takes an PlayPropsConfig or Object with the same properties and sets them on this instance.\r\n\t * @method applyPlayProps\r\n\t * @param {PlayPropsConfig | Object} playProps A PlayPropsConfig or object containing the same properties.\r\n\t * @since 0.6.1\r\n\t * @return {AbstractSoundInstance} A reference to itself, intended for chaining calls.\r\n\t */\r\n\tp.applyPlayProps = function(playProps) {\r\n\t\tif (playProps.offset != null) { this.setPosition(playProps.offset) }\r\n\t\tif (playProps.loop != null) { this.setLoop(playProps.loop); }\r\n\t\tif (playProps.volume != null) { this.setVolume(playProps.volume); }\r\n\t\tif (playProps.pan != null) { this.setPan(playProps.pan); }\r\n\t\tif (playProps.startTime != null) {\r\n\t\t\tthis.setStartTime(playProps.startTime);\r\n\t\t\tthis.setDuration(playProps.duration);\r\n\t\t}\r\n\t\treturn this;\r\n\t};\r\n\r\n\tp.toString = function () {\r\n\t\treturn \"[AbstractSoundInstance]\";\r\n\t};\r\n\r\n// get/set methods that allow support for IE8\r\n\t/**\r\n\t * DEPRECATED, please use {{#crossLink \"AbstractSoundInstance/paused:property\"}}{{/crossLink}} directly as a property,\r\n\t *\r\n\t * @deprecated\r\n\t * @method getPaused\r\n\t * @returns {boolean} If the instance is currently paused\r\n\t * @since 0.6.0\r\n\t */\r\n\tp.getPaused = function() {\r\n\t\treturn this._paused;\r\n\t};\r\n\r\n\t/**\r\n\t * DEPRECATED, please use {{#crossLink \"AbstractSoundInstance/paused:property\"}}{{/crossLink}} directly as a property\r\n\t *\r\n\t * @deprecated\r\n\t * @method setPaused\r\n\t * @param {boolean} value\r\n\t * @since 0.6.0\r\n\t * @return {AbstractSoundInstance} A reference to itself, intended for chaining calls.\r\n\t */\r\n\tp.setPaused = function (value) {\r\n\t\tif ((value !== true && value !== false) || this._paused == value) {return;}\r\n\t\tif (value == true && this.playState != createjs.Sound.PLAY_SUCCEEDED) {return;}\r\n\t\tthis._paused = value;\r\n\t\tif(value) {\r\n\t\t\tthis._pause();\r\n\t\t} else {\r\n\t\t\tthis._resume();\r\n\t\t}\r\n\t\tclearTimeout(this.delayTimeoutId);\r\n\t\treturn this;\r\n\t};\r\n\r\n\t/**\r\n\t * DEPRECATED, please use {{#crossLink \"AbstractSoundInstance/volume:property\"}}{{/crossLink}} directly as a property\r\n\t *\r\n\t * @deprecated\r\n\t * @method setVolume\r\n\t * @param {Number} value The volume to set, between 0 and 1.\r\n\t * @return {AbstractSoundInstance} A reference to itself, intended for chaining calls.\r\n\t */\r\n\tp.setVolume = function (value) {\r\n\t\tif (value == this._volume) { return this; }\r\n\t\tthis._volume = Math.max(0, Math.min(1, value));\r\n\t\tif (!this._muted) {\r\n\t\t\tthis._updateVolume();\r\n\t\t}\r\n\t\treturn this;\r\n\t};\r\n\r\n\t/**\r\n\t * DEPRECATED, please use {{#crossLink \"AbstractSoundInstance/volume:property\"}}{{/crossLink}} directly as a property\r\n\t *\r\n\t * @deprecated\r\n\t * @method getVolume\r\n\t * @return {Number} The current volume of the sound instance.\r\n\t */\r\n\tp.getVolume = function () {\r\n\t\treturn this._volume;\r\n\t};\r\n\r\n\t/**\r\n\t * DEPRECATED, please use {{#crossLink \"AbstractSoundInstance/muted:property\"}}{{/crossLink}} directly as a property\r\n\t *\r\n\t * @deprecated\r\n\t * @method setMuted\r\n\t * @param {Boolean} value If the sound should be muted.\r\n\t * @return {AbstractSoundInstance} A reference to itself, intended for chaining calls.\r\n\t * @since 0.6.0\r\n\t */\r\n\tp.setMuted = function (value) {\r\n\t\tif (value !== true && value !== false) {return;}\r\n\t\tthis._muted = value;\r\n\t\tthis._updateVolume();\r\n\t\treturn this;\r\n\t};\r\n\r\n\t/**\r\n\t * DEPRECATED, please use {{#crossLink \"AbstractSoundInstance/muted:property\"}}{{/crossLink}} directly as a property\r\n\t *\r\n\t * @deprecated\r\n\t * @method getMuted\r\n\t * @return {Boolean} If the sound is muted.\r\n\t * @since 0.6.0\r\n\t */\r\n\tp.getMuted = function () {\r\n\t\treturn this._muted;\r\n\t};\r\n\r\n\t/**\r\n\t * DEPRECATED, please use {{#crossLink \"AbstractSoundInstance/pan:property\"}}{{/crossLink}} directly as a property\r\n\t *\r\n\t * @deprecated\r\n\t * @method setPan\r\n\t * @param {Number} value The pan value, between -1 (left) and 1 (right).\r\n\t * @return {AbstractSoundInstance} Returns reference to itself for chaining calls\r\n\t */\r\n\tp.setPan = function (value) {\r\n\t\tif(value == this._pan) { return this; }\r\n\t\tthis._pan = Math.max(-1, Math.min(1, value));\r\n\t\tthis._updatePan();\r\n\t\treturn this;\r\n\t};\r\n\r\n\t/**\r\n\t * DEPRECATED, please use {{#crossLink \"AbstractSoundInstance/pan:property\"}}{{/crossLink}} directly as a property\r\n\t *\r\n\t * @deprecated\r\n\t * @method getPan\r\n\t * @return {Number} The value of the pan, between -1 (left) and 1 (right).\r\n\t */\r\n\tp.getPan = function () {\r\n\t\treturn this._pan;\r\n\t};\r\n\r\n\t/**\r\n\t * DEPRECATED, please use {{#crossLink \"AbstractSoundInstance/position:property\"}}{{/crossLink}} directly as a property\r\n\t *\r\n\t * @deprecated\r\n\t * @method getPosition\r\n\t * @return {Number} The position of the playhead in the sound, in milliseconds.\r\n\t */\r\n\tp.getPosition = function () {\r\n\t\tif (!this._paused && this.playState == createjs.Sound.PLAY_SUCCEEDED) {\r\n\t\t\tthis._position = this._calculateCurrentPosition();\r\n\t\t}\r\n\t\treturn this._position;\r\n\t};\r\n\r\n\t/**\r\n\t * DEPRECATED, please use {{#crossLink \"AbstractSoundInstance/position:property\"}}{{/crossLink}} directly as a property\r\n\t *\r\n\t * @deprecated\r\n\t * @method setPosition\r\n\t * @param {Number} value The position to place the playhead, in milliseconds.\r\n\t * @return {AbstractSoundInstance} Returns reference to itself for chaining calls\r\n\t */\r\n\tp.setPosition = function (value) {\r\n\t\tthis._position = Math.max(0, value);\r\n\t\tif (this.playState == createjs.Sound.PLAY_SUCCEEDED) {\r\n\t\t\tthis._updatePosition();\r\n\t\t}\r\n\t\treturn this;\r\n\t};\r\n\r\n\t/**\r\n\t * DEPRECATED, please use {{#crossLink \"AbstractSoundInstance/startTime:property\"}}{{/crossLink}} directly as a property\r\n\t *\r\n\t * @deprecated\r\n\t * @method getStartTime\r\n\t * @return {Number} The startTime of the sound instance in milliseconds.\r\n\t */\r\n\tp.getStartTime = function () {\r\n\t\treturn this._startTime;\r\n\t};\r\n\r\n\t/**\r\n\t * DEPRECATED, please use {{#crossLink \"AbstractSoundInstance/startTime:property\"}}{{/crossLink}} directly as a property\r\n\t *\r\n\t * @deprecated\r\n\t * @method setStartTime\r\n\t * @param {number} value The new startTime time in milli seconds.\r\n\t * @return {AbstractSoundInstance} Returns reference to itself for chaining calls\r\n\t */\r\n\tp.setStartTime = function (value) {\r\n\t\tif (value == this._startTime) { return this; }\r\n\t\tthis._startTime = Math.max(0, value || 0);\r\n\t\tthis._updateStartTime();\r\n\t\treturn this;\r\n\t};\r\n\r\n\t/**\r\n\t * DEPRECATED, please use {{#crossLink \"AbstractSoundInstance/duration:property\"}}{{/crossLink}} directly as a property\r\n\t *\r\n\t * @deprecated\r\n\t * @method getDuration\r\n\t * @return {Number} The duration of the sound instance in milliseconds.\r\n\t */\r\n\tp.getDuration = function () {\r\n\t\treturn this._duration;\r\n\t};\r\n\r\n\t/**\r\n\t * DEPRECATED, please use {{#crossLink \"AbstractSoundInstance/duration:property\"}}{{/crossLink}} directly as a property\r\n\t *\r\n\t * @deprecated\r\n\t * @method setDuration\r\n\t * @param {number} value The new duration time in milli seconds.\r\n\t * @return {AbstractSoundInstance} Returns reference to itself for chaining calls\r\n\t * @since 0.6.0\r\n\t */\r\n\tp.setDuration = function (value) {\r\n\t\tif (value == this._duration) { return this; }\r\n\t\tthis._duration = Math.max(0, value || 0);\r\n\t\tthis._updateDuration();\r\n\t\treturn this;\r\n\t};\r\n\r\n\t/**\r\n\t * DEPRECATED, please use {{#crossLink \"AbstractSoundInstance/playbackResource:property\"}}{{/crossLink}} directly as a property\r\n\t *\r\n\t * @deprecated\r\n\t * @method setPlayback\r\n\t * @param {Object} value The new playback resource.\r\n\t * @return {AbstractSoundInstance} Returns reference to itself for chaining calls\r\n\t * @since 0.6.0\r\n\t **/\r\n\tp.setPlaybackResource = function (value) {\r\n\t\tthis._playbackResource = value;\r\n\t\tif (this._duration == 0) { this._setDurationFromSource(); }\r\n\t\treturn this;\r\n\t};\r\n\r\n\t/**\r\n\t * DEPRECATED, please use {{#crossLink \"AbstractSoundInstance/playbackResource:property\"}}{{/crossLink}} directly as a property\r\n\t *\r\n\t * @deprecated\r\n\t * @method setPlayback\r\n\t * @param {Object} value The new playback resource.\r\n\t * @return {Object} playback resource used for playing audio\r\n\t * @since 0.6.0\r\n\t **/\r\n\tp.getPlaybackResource = function () {\r\n\t\treturn this._playbackResource;\r\n\t};\r\n\r\n\t/**\r\n\t * DEPRECATED, please use {{#crossLink \"AbstractSoundInstance/loop:property\"}}{{/crossLink}} directly as a property\r\n\t *\r\n\t * @deprecated\r\n\t * @method getLoop\r\n\t * @return {number}\r\n\t * @since 0.6.0\r\n\t **/\r\n\tp.getLoop = function () {\r\n\t\treturn this._loop;\r\n\t};\r\n\r\n\t/**\r\n\t * DEPRECATED, please use {{#crossLink \"AbstractSoundInstance/loop:property\"}}{{/crossLink}} directly as a property,\r\n\t *\r\n\t * @deprecated\r\n\t * @method setLoop\r\n\t * @param {number} value The number of times to loop after play.\r\n\t * @since 0.6.0\r\n\t */\r\n\tp.setLoop = function (value) {\r\n\t\tif(this._playbackResource != null) {\r\n\t\t\t// remove looping\r\n\t\t\tif (this._loop != 0 && value == 0) {\r\n\t\t\t\tthis._removeLooping(value);\r\n\t\t\t}\r\n\t\t\t// add looping\r\n\t\t\telse if (this._loop == 0 && value != 0) {\r\n\t\t\t\tthis._addLooping(value);\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis._loop = value;\r\n\t};\r\n\r\n\r\n// Private Methods:\r\n\t/**\r\n\t * A helper method that dispatches all events for AbstractSoundInstance.\r\n\t * @method _sendEvent\r\n\t * @param {String} type The event type\r\n\t * @protected\r\n\t */\r\n\tp._sendEvent = function (type) {\r\n\t\tvar event = new createjs.Event(type);\r\n\t\tthis.dispatchEvent(event);\r\n\t};\r\n\r\n\t/**\r\n\t * Clean up the instance. Remove references and clean up any additional properties such as timers.\r\n\t * @method _cleanUp\r\n\t * @protected\r\n\t */\r\n\tp._cleanUp = function () {\r\n\t\tclearTimeout(this.delayTimeoutId); // clear timeout that plays delayed sound\r\n\t\tthis._handleCleanUp();\r\n\t\tthis._paused = false;\r\n\r\n\t\tcreatejs.Sound._playFinished(this);\t// TODO change to an event\r\n\t};\r\n\r\n\t/**\r\n\t * The sound has been interrupted.\r\n\t * @method _interrupt\r\n\t * @protected\r\n\t */\r\n\tp._interrupt = function () {\r\n\t\tthis._cleanUp();\r\n\t\tthis.playState = createjs.Sound.PLAY_INTERRUPTED;\r\n\t\tthis._sendEvent(\"interrupted\");\r\n\t};\r\n\r\n\t/**\r\n\t * Called by the Sound class when the audio is ready to play (delay has completed). Starts sound playing if the\r\n\t * src is loaded, otherwise playback will fail.\r\n\t * @method _beginPlaying\r\n\t * @param {PlayPropsConfig} playProps A PlayPropsConfig object.\r\n\t * @return {Boolean} If playback succeeded.\r\n\t * @protected\r\n\t */\r\n\t// OJR FlashAudioSoundInstance overwrites\r\n\tp._beginPlaying = function (playProps) {\r\n\t\tthis.setPosition(playProps.offset);\r\n\t\tthis.setLoop(playProps.loop);\r\n\t\tthis.setVolume(playProps.volume);\r\n\t\tthis.setPan(playProps.pan);\r\n\t\tif (playProps.startTime != null) {\r\n\t\t\tthis.setStartTime(playProps.startTime);\r\n\t\t\tthis.setDuration(playProps.duration);\r\n\t\t}\r\n\r\n\t\tif (this._playbackResource != null && this._position < this._duration) {\r\n\t\t\tthis._paused = false;\r\n\t\t\tthis._handleSoundReady();\r\n\t\t\tthis.playState = createjs.Sound.PLAY_SUCCEEDED;\r\n\t\t\tthis._sendEvent(\"succeeded\");\r\n\t\t\treturn true;\r\n\t\t} else {\r\n\t\t\tthis._playFailed();\r\n\t\t\treturn false;\r\n\t\t}\r\n\t};\r\n\r\n\t/**\r\n\t * Play has failed, which can happen for a variety of reasons.\r\n\t * Cleans up instance and dispatches failed event\r\n\t * @method _playFailed\r\n\t * @private\r\n\t */\r\n\tp._playFailed = function () {\r\n\t\tthis._cleanUp();\r\n\t\tthis.playState = createjs.Sound.PLAY_FAILED;\r\n\t\tthis._sendEvent(\"failed\");\r\n\t};\r\n\r\n\t/**\r\n\t * Audio has finished playing. Manually loop it if required.\r\n\t * @method _handleSoundComplete\r\n\t * @param event\r\n\t * @protected\r\n\t */\r\n\tp._handleSoundComplete = function (event) {\r\n\t\tthis._position = 0;  // have to set this as it can be set by pause during playback\r\n\r\n\t\tif (this._loop != 0) {\r\n\t\t\tthis._loop--;  // NOTE this introduces a theoretical limit on loops = float max size x 2 - 1\r\n\t\t\tthis._handleLoop();\r\n\t\t\tthis._sendEvent(\"loop\");\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tthis._cleanUp();\r\n\t\tthis.playState = createjs.Sound.PLAY_FINISHED;\r\n\t\tthis._sendEvent(\"complete\");\r\n\t};\r\n\r\n// Plugin specific code\r\n\t/**\r\n\t * Handles starting playback when the sound is ready for playing.\r\n\t * @method _handleSoundReady\r\n\t * @protected\r\n \t */\r\n\tp._handleSoundReady = function () {\r\n\t\t// plugin specific code\r\n\t};\r\n\r\n\t/**\r\n\t * Internal function used to update the volume based on the instance volume, master volume, instance mute value,\r\n\t * and master mute value.\r\n\t * @method _updateVolume\r\n\t * @protected\r\n\t */\r\n\tp._updateVolume = function () {\r\n\t\t// plugin specific code\r\n\t};\r\n\r\n\t/**\r\n\t * Internal function used to update the pan\r\n\t * @method _updatePan\r\n\t * @protected\r\n\t * @since 0.6.0\r\n\t */\r\n\tp._updatePan = function () {\r\n\t\t// plugin specific code\r\n\t};\r\n\r\n\t/**\r\n\t * Internal function used to update the startTime of the audio.\r\n\t * @method _updateStartTime\r\n\t * @protected\r\n\t * @since 0.6.1\r\n\t */\r\n\tp._updateStartTime = function () {\r\n\t\t// plugin specific code\r\n\t};\r\n\r\n\t/**\r\n\t * Internal function used to update the duration of the audio.\r\n\t * @method _updateDuration\r\n\t * @protected\r\n\t * @since 0.6.0\r\n\t */\r\n\tp._updateDuration = function () {\r\n\t\t// plugin specific code\r\n\t};\r\n\r\n\t/**\r\n\t * Internal function used to get the duration of the audio from the source we'll be playing.\r\n\t * @method _updateDuration\r\n\t * @protected\r\n\t * @since 0.6.0\r\n\t */\r\n\tp._setDurationFromSource = function () {\r\n\t\t// plugin specific code\r\n\t};\r\n\r\n\t/**\r\n\t * Internal function that calculates the current position of the playhead and sets this._position to that value\r\n\t * @method _calculateCurrentPosition\r\n\t * @protected\r\n\t * @since 0.6.0\r\n\t */\r\n\tp._calculateCurrentPosition = function () {\r\n\t\t// plugin specific code that sets this.position\r\n\t};\r\n\r\n\t/**\r\n\t * Internal function used to update the position of the playhead.\r\n\t * @method _updatePosition\r\n\t * @protected\r\n\t * @since 0.6.0\r\n\t */\r\n\tp._updatePosition = function () {\r\n\t\t// plugin specific code\r\n\t};\r\n\r\n\t/**\r\n\t * Internal function called when looping is removed during playback.\r\n\t * @method _removeLooping\r\n\t * @param {number} value The number of times to loop after play.\r\n\t * @protected\r\n\t * @since 0.6.0\r\n\t */\r\n\tp._removeLooping = function (value) {\r\n\t\t// plugin specific code\r\n\t};\r\n\r\n\t/**\r\n\t * Internal function called when looping is added during playback.\r\n\t * @method _addLooping\r\n\t * @param {number} value The number of times to loop after play.\r\n\t * @protected\r\n\t * @since 0.6.0\r\n\t */\r\n\tp._addLooping = function (value) {\r\n\t\t// plugin specific code\r\n\t};\r\n\r\n\t/**\r\n\t * Internal function called when pausing playback\r\n\t * @method _pause\r\n\t * @protected\r\n\t * @since 0.6.0\r\n\t */\r\n\tp._pause = function () {\r\n\t\t// plugin specific code\r\n\t};\r\n\r\n\t/**\r\n\t * Internal function called when resuming playback\r\n\t * @method _resume\r\n\t * @protected\r\n\t * @since 0.6.0\r\n\t */\r\n\tp._resume = function () {\r\n\t\t// plugin specific code\r\n\t};\r\n\r\n\t/**\r\n\t * Internal function called when stopping playback\r\n\t * @method _handleStop\r\n\t * @protected\r\n\t * @since 0.6.0\r\n\t */\r\n\tp._handleStop = function() {\r\n\t\t// plugin specific code\r\n\t};\r\n\r\n\t/**\r\n\t * Internal function called when AbstractSoundInstance is being cleaned up\r\n\t * @method _handleCleanUp\r\n\t * @protected\r\n\t * @since 0.6.0\r\n\t */\r\n\tp._handleCleanUp = function() {\r\n\t\t// plugin specific code\r\n\t};\r\n\r\n\t/**\r\n\t * Internal function called when AbstractSoundInstance has played to end and is looping\r\n\t * @method _handleLoop\r\n\t * @protected\r\n\t * @since 0.6.0\r\n\t */\r\n\tp._handleLoop = function () {\r\n\t\t// plugin specific code\r\n\t};\r\n\r\n\tcreatejs.AbstractSoundInstance = createjs.promote(AbstractSoundInstance, \"EventDispatcher\");\r\n\tcreatejs.DefaultSoundInstance = createjs.AbstractSoundInstance;\t// used when no plugin is supported\r\n}());\r\n\r\n//##############################################################################\r\n// AbstractPlugin.js\r\n//##############################################################################\r\n\r\nthis.createjs = this.createjs || {};\r\n\r\n(function () {\r\n\t\"use strict\";\r\n\r\n\r\n// constructor:\r\n \t/**\r\n\t * A default plugin class used as a base for all other plugins.\r\n\t * @class AbstractPlugin\r\n\t * @constructor\r\n\t * @since 0.6.0\r\n\t */\r\n\r\n\tvar AbstractPlugin = function () {\r\n\t// private properties:\r\n\t\t/**\r\n\t\t * The capabilities of the plugin.\r\n\t\t * method and is used internally.\r\n\t\t * @property _capabilities\r\n\t\t * @type {Object}\r\n\t\t * @default null\r\n\t\t * @protected\r\n\t\t * @static\r\n\t\t */\r\n\t\tthis._capabilities = null;\r\n\r\n\t\t/**\r\n\t\t * Object hash indexed by the source URI of all created loaders, used to properly destroy them if sources are removed.\r\n\t\t * @type {Object}\r\n\t\t * @protected\r\n\t\t */\r\n\t\tthis._loaders = {};\r\n\r\n\t\t/**\r\n\t\t * Object hash indexed by the source URI of each file to indicate if an audio source has begun loading,\r\n\t\t * is currently loading, or has completed loading.  Can be used to store non boolean data after loading\r\n\t\t * is complete (for example arrayBuffers for web audio).\r\n\t\t * @property _audioSources\r\n\t\t * @type {Object}\r\n\t\t * @protected\r\n\t\t */\r\n\t\tthis._audioSources = {};\r\n\r\n\t\t/**\r\n\t\t * Object hash indexed by the source URI of all created SoundInstances, updates the playbackResource if it loads after they are created,\r\n\t\t * and properly destroy them if sources are removed\r\n\t\t * @type {Object}\r\n\t\t * @protected\r\n\t\t */\r\n\t\tthis._soundInstances = {};\r\n\r\n\t\t/**\r\n\t\t * The internal master volume value of the plugin.\r\n\t\t * @property _volume\r\n\t\t * @type {Number}\r\n\t\t * @default 1\r\n\t\t * @protected\r\n\t\t */\r\n\t\tthis._volume = 1;\r\n\r\n\t\t/**\r\n\t\t * A reference to a loader class used by a plugin that must be set.\r\n\t\t * @type {Object}\r\n\t\t * @protected\r\n\t\t */\r\n\t\tthis._loaderClass;\r\n\r\n\t\t/**\r\n\t\t * A reference to an AbstractSoundInstance class used by a plugin that must be set.\r\n\t\t * @type {Object}\r\n\t\t * @protected;\r\n\t\t */\r\n\t\tthis._soundInstanceClass;\r\n\t};\r\n\tvar p = AbstractPlugin.prototype;\r\n\r\n\t/**\r\n\t * <strong>REMOVED</strong>. Removed in favor of using `MySuperClass_constructor`.\r\n\t * See {{#crossLink \"Utility Methods/extend\"}}{{/crossLink}} and {{#crossLink \"Utility Methods/promote\"}}{{/crossLink}}\r\n\t * for details.\r\n\t *\r\n\t * There is an inheritance tutorial distributed with EaselJS in /tutorials/Inheritance.\r\n\t *\r\n\t * @method initialize\r\n\t * @protected\r\n\t * @deprecated\r\n\t */\r\n\t// p.initialize = function() {}; // searchable for devs wondering where it is.\r\n\r\n\r\n// Static Properties:\r\n// NOTE THESE PROPERTIES NEED TO BE ADDED TO EACH PLUGIN\r\n\t/**\r\n\t * The capabilities of the plugin. This is generated via the _generateCapabilities method and is used internally.\r\n\t * @property _capabilities\r\n\t * @type {Object}\r\n\t * @default null\r\n\t * @protected\r\n\t * @static\r\n\t */\r\n\tAbstractPlugin._capabilities = null;\r\n\r\n\t/**\r\n\t * Determine if the plugin can be used in the current browser/OS.\r\n\t * @method isSupported\r\n\t * @return {Boolean} If the plugin can be initialized.\r\n\t * @static\r\n\t */\r\n\tAbstractPlugin.isSupported = function () {\r\n\t\treturn true;\r\n\t};\r\n\r\n\r\n// public methods:\r\n\t/**\r\n\t * Pre-register a sound for preloading and setup. This is called by {{#crossLink \"Sound\"}}{{/crossLink}}.\r\n\t * Note all plugins provide a <code>Loader</code> instance, which <a href=\"http://preloadjs.com\" target=\"_blank\">PreloadJS</a>\r\n\t * can use to assist with preloading.\r\n\t * @method register\r\n\t * @param {String} loadItem An Object containing the source of the audio\r\n\t * Note that not every plugin will manage this value.\r\n\t * @return {Object} A result object, containing a \"tag\" for preloading purposes.\r\n\t */\r\n\tp.register = function (loadItem) {\r\n\t\tvar loader = this._loaders[loadItem.src];\r\n\t\tif(loader && !loader.canceled) {return this._loaders[loadItem.src];}\t// already loading/loaded this, so don't load twice\r\n\t\t// OJR potential issue that we won't be firing loaded event, might need to trigger if this is already loaded?\r\n\t\tthis._audioSources[loadItem.src] = true;\r\n\t\tthis._soundInstances[loadItem.src] = [];\r\n\t\tloader = new this._loaderClass(loadItem);\r\n\t\tloader.on(\"complete\", this._handlePreloadComplete, this);\r\n\t\tthis._loaders[loadItem.src] = loader;\r\n\t\treturn loader;\r\n\t};\r\n\r\n\t// note sound calls register before calling preload\r\n\t/**\r\n\t * Internally preload a sound.\r\n\t * @method preload\r\n\t * @param {Loader} loader The sound URI to load.\r\n\t */\r\n\tp.preload = function (loader) {\r\n\t\tloader.on(\"error\", this._handlePreloadError, this);\r\n\t\tloader.load();\r\n\t};\r\n\r\n\t/**\r\n\t * Checks if preloading has started for a specific source. If the source is found, we can assume it is loading,\r\n\t * or has already finished loading.\r\n\t * @method isPreloadStarted\r\n\t * @param {String} src The sound URI to check.\r\n\t * @return {Boolean}\r\n\t */\r\n\tp.isPreloadStarted = function (src) {\r\n\t\treturn (this._audioSources[src] != null);\r\n\t};\r\n\r\n\t/**\r\n\t * Checks if preloading has finished for a specific source.\r\n\t * @method isPreloadComplete\r\n\t * @param {String} src The sound URI to load.\r\n\t * @return {Boolean}\r\n\t */\r\n\tp.isPreloadComplete = function (src) {\r\n\t\treturn (!(this._audioSources[src] == null || this._audioSources[src] == true));\r\n\t};\r\n\r\n\t/**\r\n\t * Remove a sound added using {{#crossLink \"WebAudioPlugin/register\"}}{{/crossLink}}. Note this does not cancel a preload.\r\n\t * @method removeSound\r\n\t * @param {String} src The sound URI to unload.\r\n\t */\r\n\tp.removeSound = function (src) {\r\n\t\tif (!this._soundInstances[src]) { return; }\r\n\t\tfor (var i = this._soundInstances[src].length; i--; ) {\r\n\t\t\tvar item = this._soundInstances[src][i];\r\n\t\t\titem.destroy();\r\n\t\t}\r\n\t\tdelete(this._soundInstances[src]);\r\n\t\tdelete(this._audioSources[src]);\r\n\t\tif(this._loaders[src]) { this._loaders[src].destroy(); }\r\n\t\tdelete(this._loaders[src]);\r\n\t};\r\n\r\n\t/**\r\n\t * Remove all sounds added using {{#crossLink \"WebAudioPlugin/register\"}}{{/crossLink}}. Note this does not cancel a preload.\r\n\t * @method removeAllSounds\r\n\t * @param {String} src The sound URI to unload.\r\n\t */\r\n\tp.removeAllSounds = function () {\r\n\t\tfor(var key in this._audioSources) {\r\n\t\t\tthis.removeSound(key);\r\n\t\t}\r\n\t};\r\n\r\n\t/**\r\n\t * Create a sound instance. If the sound has not been preloaded, it is internally preloaded here.\r\n\t * @method create\r\n\t * @param {String} src The sound source to use.\r\n\t * @param {Number} startTime Audio sprite property used to apply an offset, in milliseconds.\r\n\t * @param {Number} duration Audio sprite property used to set the time the clip plays for, in milliseconds.\r\n\t * @return {AbstractSoundInstance} A sound instance for playback and control.\r\n\t */\r\n\tp.create = function (src, startTime, duration) {\r\n\t\tif (!this.isPreloadStarted(src)) {\r\n\t\t\tthis.preload(this.register(src));\r\n\t\t}\r\n\t\tvar si = new this._soundInstanceClass(src, startTime, duration, this._audioSources[src]);\r\n\t\tthis._soundInstances[src].push(si);\r\n\t\treturn si;\r\n\t};\r\n\r\n\t// if a plugin does not support volume and mute, it should set these to null\r\n\t/**\r\n\t * Set the master volume of the plugin, which affects all SoundInstances.\r\n\t * @method setVolume\r\n\t * @param {Number} value The volume to set, between 0 and 1.\r\n\t * @return {Boolean} If the plugin processes the setVolume call (true). The Sound class will affect all the\r\n\t * instances manually otherwise.\r\n\t */\r\n\tp.setVolume = function (value) {\r\n\t\tthis._volume = value;\r\n\t\tthis._updateVolume();\r\n\t\treturn true;\r\n\t};\r\n\r\n\t/**\r\n\t * Get the master volume of the plugin, which affects all SoundInstances.\r\n\t * @method getVolume\r\n\t * @return {Number} The volume level, between 0 and 1.\r\n\t */\r\n\tp.getVolume = function () {\r\n\t\treturn this._volume;\r\n\t};\r\n\r\n\t/**\r\n\t * Mute all sounds via the plugin.\r\n\t * @method setMute\r\n\t * @param {Boolean} value If all sound should be muted or not. Note that plugin-level muting just looks up\r\n\t * the mute value of Sound {{#crossLink \"Sound/getMute\"}}{{/crossLink}}, so this property is not used here.\r\n\t * @return {Boolean} If the mute call succeeds.\r\n\t */\r\n\tp.setMute = function (value) {\r\n\t\tthis._updateVolume();\r\n\t\treturn true;\r\n\t};\r\n\r\n\t// plugins should overwrite this method\r\n\tp.toString = function () {\r\n\t\treturn \"[AbstractPlugin]\";\r\n\t};\r\n\r\n\r\n// private methods:\r\n\t/**\r\n\t * Handles internal preload completion.\r\n\t * @method _handlePreloadComplete\r\n\t * @protected\r\n\t */\r\n\tp._handlePreloadComplete = function (event) {\r\n\t\tvar src = event.target.getItem().src;\r\n\t\tthis._audioSources[src] = event.result;\r\n\t\tfor (var i = 0, l = this._soundInstances[src].length; i < l; i++) {\r\n\t\t\tvar item = this._soundInstances[src][i];\r\n\t\t\titem.setPlaybackResource(this._audioSources[src]);\r\n\t\t\t// ToDo consider adding play call here if playstate == playfailed\r\n\t\t}\r\n\t};\r\n\r\n\t/**\r\n\t * Handles internal preload erros\r\n\t * @method _handlePreloadError\r\n\t * @param event\r\n\t * @protected\r\n\t */\r\n\tp._handlePreloadError = function(event) {\r\n\t\t//delete(this._audioSources[src]);\r\n\t};\r\n\r\n\t/**\r\n\t * Set the gain value for master audio. Should not be called externally.\r\n\t * @method _updateVolume\r\n\t * @protected\r\n\t */\r\n\tp._updateVolume = function () {\r\n\t\t// Plugin Specific code\r\n\t};\r\n\r\n\tcreatejs.AbstractPlugin = AbstractPlugin;\r\n}());\r\n\r\n//##############################################################################\r\n// WebAudioLoader.js\r\n//##############################################################################\r\n\r\nthis.createjs = this.createjs || {};\r\n\r\n(function () {\r\n\t\"use strict\";\r\n\r\n\t/**\r\n\t * Loader provides a mechanism to preload Web Audio content via PreloadJS or internally. Instances are returned to\r\n\t * the preloader, and the load method is called when the asset needs to be requested.\r\n\t *\r\n\t * @class WebAudioLoader\r\n\t * @param {String} loadItem The item to be loaded\r\n\t * @extends XHRRequest\r\n\t * @protected\r\n\t */\r\n\tfunction Loader(loadItem) {\r\n\t\tthis.AbstractLoader_constructor(loadItem, true, createjs.AbstractLoader.SOUND);\r\n\r\n\t};\r\n\tvar p = createjs.extend(Loader, createjs.AbstractLoader);\r\n\r\n\t// TODO: deprecated\r\n\t// p.initialize = function() {}; // searchable for devs wondering where it is. REMOVED. See docs for details.\r\n\r\n\r\n\t/**\r\n\t * web audio context required for decoding audio\r\n\t * @property context\r\n\t * @type {AudioContext}\r\n\t * @static\r\n\t */\r\n\tLoader.context = null;\r\n\r\n\r\n// public methods\r\n\tp.toString = function () {\r\n\t\treturn \"[WebAudioLoader]\";\r\n\t};\r\n\r\n\r\n// private methods\r\n\tp._createRequest = function() {\r\n\t\tthis._request = new createjs.XHRRequest(this._item, false);\r\n\t\tthis._request.setResponseType(\"arraybuffer\");\r\n\t};\r\n\r\n\tp._sendComplete = function (event) {\r\n\t\t// OJR we leave this wrapped in Loader because we need to reference src and the handler only receives a single argument, the decodedAudio\r\n\t\tLoader.context.decodeAudioData(this._rawResult,\r\n\t         createjs.proxy(this._handleAudioDecoded, this),\r\n\t         createjs.proxy(this._sendError, this));\r\n\t};\r\n\r\n\r\n\t/**\r\n\t* The audio has been decoded.\r\n\t* @method handleAudioDecoded\r\n\t* @param decoded\r\n\t* @protected\r\n\t*/\r\n\tp._handleAudioDecoded = function (decodedAudio) {\r\n\t\tthis._result = decodedAudio;\r\n\t\tthis.AbstractLoader__sendComplete();\r\n\t};\r\n\r\n\tcreatejs.WebAudioLoader = createjs.promote(Loader, \"AbstractLoader\");\r\n}());\r\n\r\n//##############################################################################\r\n// WebAudioSoundInstance.js\r\n//##############################################################################\r\n\r\nthis.createjs = this.createjs || {};\r\n\r\n/**\r\n * WebAudioSoundInstance extends the base api of {{#crossLink \"AbstractSoundInstance\"}}{{/crossLink}} and is used by\r\n * {{#crossLink \"WebAudioPlugin\"}}{{/crossLink}}.\r\n *\r\n * WebAudioSoundInstance exposes audioNodes for advanced users.\r\n *\r\n * @param {String} src The path to and file name of the sound.\r\n * @param {Number} startTime Audio sprite property used to apply an offset, in milliseconds.\r\n * @param {Number} duration Audio sprite property used to set the time the clip plays for, in milliseconds.\r\n * @param {Object} playbackResource Any resource needed by plugin to support audio playback.\r\n * @class WebAudioSoundInstance\r\n * @extends AbstractSoundInstance\r\n * @constructor\r\n */\r\n(function () {\r\n\t\"use strict\";\r\n\r\n\tfunction WebAudioSoundInstance(src, startTime, duration, playbackResource) {\r\n\t\tthis.AbstractSoundInstance_constructor(src, startTime, duration, playbackResource);\r\n\r\n\r\n// public properties\r\n\t\t/**\r\n\t\t * NOTE this is only intended for use by advanced users.\r\n\t\t * <br />GainNode for controlling <code>WebAudioSoundInstance</code> volume. Connected to the {{#crossLink \"WebAudioSoundInstance/destinationNode:property\"}}{{/crossLink}}.\r\n\t\t * @property gainNode\r\n\t\t * @type {AudioGainNode}\r\n\t\t * @since 0.4.0\r\n\t\t *\r\n\t\t */\r\n\t\tthis.gainNode = s.context.createGain();\r\n\r\n\t\t/**\r\n\t\t * NOTE this is only intended for use by advanced users.\r\n\t\t * <br />A panNode allowing left and right audio channel panning only. Connected to WebAudioSoundInstance {{#crossLink \"WebAudioSoundInstance/gainNode:property\"}}{{/crossLink}}.\r\n\t\t * @property panNode\r\n\t\t * @type {AudioPannerNode}\r\n\t\t * @since 0.4.0\r\n\t\t */\r\n\t\tthis.panNode = s.context.createPanner();\r\n\t\tthis.panNode.panningModel = s._panningModel;\r\n\t\tthis.panNode.connect(this.gainNode);\r\n\t\tthis._updatePan();\r\n\r\n\t\t/**\r\n\t\t * NOTE this is only intended for use by advanced users.\r\n\t\t * <br />sourceNode is the audio source. Connected to WebAudioSoundInstance {{#crossLink \"WebAudioSoundInstance/panNode:property\"}}{{/crossLink}}.\r\n\t\t * @property sourceNode\r\n\t\t * @type {AudioNode}\r\n\t\t * @since 0.4.0\r\n\t\t *\r\n\t\t */\r\n\t\tthis.sourceNode = null;\r\n\r\n\r\n// private properties\r\n\t\t/**\r\n\t\t * Timeout that is created internally to handle sound playing to completion.\r\n\t\t * Stored so we can remove it when stop, pause, or cleanup are called\r\n\t\t * @property _soundCompleteTimeout\r\n\t\t * @type {timeoutVariable}\r\n\t\t * @default null\r\n\t\t * @protected\r\n\t\t * @since 0.4.0\r\n\t\t */\r\n\t\tthis._soundCompleteTimeout = null;\r\n\r\n\t\t/**\r\n\t\t * NOTE this is only intended for use by very advanced users.\r\n\t\t * _sourceNodeNext is the audio source for the next loop, inserted in a look ahead approach to allow for smooth\r\n\t\t * looping. Connected to {{#crossLink \"WebAudioSoundInstance/gainNode:property\"}}{{/crossLink}}.\r\n\t\t * @property _sourceNodeNext\r\n\t\t * @type {AudioNode}\r\n\t\t * @default null\r\n\t\t * @protected\r\n\t\t * @since 0.4.1\r\n\t\t *\r\n\t\t */\r\n\t\tthis._sourceNodeNext = null;\r\n\r\n\t\t/**\r\n\t\t * Time audio started playback, in seconds. Used to handle set position, get position, and resuming from paused.\r\n\t\t * @property _playbackStartTime\r\n\t\t * @type {Number}\r\n\t\t * @default 0\r\n\t\t * @protected\r\n\t\t * @since 0.4.0\r\n\t\t */\r\n\t\tthis._playbackStartTime = 0;\r\n\r\n\t\t// Proxies, make removing listeners easier.\r\n\t\tthis._endedHandler = createjs.proxy(this._handleSoundComplete, this);\r\n\t};\r\n\tvar p = createjs.extend(WebAudioSoundInstance, createjs.AbstractSoundInstance);\r\n\tvar s = WebAudioSoundInstance;\r\n\r\n\t// TODO: deprecated\r\n\t// p.initialize = function() {}; // searchable for devs wondering where it is. REMOVED. See docs for details.\r\n\r\n\r\n\t/**\r\n\t * Note this is only intended for use by advanced users.\r\n\t * <br />Audio context used to create nodes.  This is and needs to be the same context used by {{#crossLink \"WebAudioPlugin\"}}{{/crossLink}}.\r\n  \t * @property context\r\n\t * @type {AudioContext}\r\n\t * @static\r\n\t * @since 0.6.0\r\n\t */\r\n\ts.context = null;\r\n\r\n\t/**\r\n\t * Note this is only intended for use by advanced users.\r\n\t * <br />The scratch buffer that will be assigned to the buffer property of a source node on close.  \r\n\t * This is and should be the same scratch buffer referenced by {{#crossLink \"WebAudioPlugin\"}}{{/crossLink}}.\r\n  \t * @property _scratchBuffer\r\n\t * @type {AudioBufferSourceNode}\r\n\t * @static\r\n\t */\r\n\ts._scratchBuffer = null;\r\n\r\n\t/**\r\n\t * Note this is only intended for use by advanced users.\r\n\t * <br /> Audio node from WebAudioPlugin that sequences to <code>context.destination</code>\r\n\t * @property destinationNode\r\n\t * @type {AudioNode}\r\n\t * @static\r\n\t * @since 0.6.0\r\n\t */\r\n\ts.destinationNode = null;\r\n\r\n\t/**\r\n\t * Value to set panning model to equal power for WebAudioSoundInstance.  Can be \"equalpower\" or 0 depending on browser implementation.\r\n\t * @property _panningModel\r\n\t * @type {Number / String}\r\n\t * @protected\r\n\t * @static\r\n\t * @since 0.6.0\r\n\t */\r\n\ts._panningModel = \"equalpower\";\r\n\r\n\r\n// Public methods\r\n\tp.destroy = function() {\r\n\t\tthis.AbstractSoundInstance_destroy();\r\n\r\n\t\tthis.panNode.disconnect(0);\r\n\t\tthis.panNode = null;\r\n\t\tthis.gainNode.disconnect(0);\r\n\t\tthis.gainNode = null;\r\n\t};\r\n\r\n\tp.toString = function () {\r\n\t\treturn \"[WebAudioSoundInstance]\";\r\n\t};\r\n\r\n\r\n// Private Methods\r\n\tp._updatePan = function() {\r\n\t\tthis.panNode.setPosition(this._pan, 0, -0.5);\r\n\t\t// z need to be -0.5 otherwise the sound only plays in left, right, or center\r\n\t};\r\n\r\n\tp._removeLooping = function(value) {\r\n\t\tthis._sourceNodeNext = this._cleanUpAudioNode(this._sourceNodeNext);\r\n\t};\r\n\r\n\tp._addLooping = function(value) {\r\n\t\tif (this.playState != createjs.Sound.PLAY_SUCCEEDED) { return; }\r\n\t\tthis._sourceNodeNext = this._createAndPlayAudioNode(this._playbackStartTime, 0);\r\n\t};\r\n\r\n\tp._setDurationFromSource = function () {\r\n\t\tthis._duration = this.playbackResource.duration * 1000;\r\n\t};\r\n\r\n\tp._handleCleanUp = function () {\r\n\t\tif (this.sourceNode && this.playState == createjs.Sound.PLAY_SUCCEEDED) {\r\n\t\t\tthis.sourceNode = this._cleanUpAudioNode(this.sourceNode);\r\n\t\t\tthis._sourceNodeNext = this._cleanUpAudioNode(this._sourceNodeNext);\r\n\t\t}\r\n\r\n\t\tif (this.gainNode.numberOfOutputs != 0) {this.gainNode.disconnect(0);}\r\n\t\t// OJR there appears to be a bug that this doesn't always work in webkit (Chrome and Safari). According to the documentation, this should work.\r\n\r\n\t\tclearTimeout(this._soundCompleteTimeout);\r\n\r\n\t\tthis._playbackStartTime = 0;\t// This is used by getPosition\r\n\t};\r\n\r\n\t/**\r\n\t * Turn off and disconnect an audioNode, then set reference to null to release it for garbage collection\r\n\t * @method _cleanUpAudioNode\r\n\t * @param audioNode\r\n\t * @return {audioNode}\r\n\t * @protected\r\n\t * @since 0.4.1\r\n\t */\r\n\tp._cleanUpAudioNode = function(audioNode) {\r\n\t\tif(audioNode) {\r\n\t\t\taudioNode.stop(0);\r\n\t\t\taudioNode.disconnect(0);\r\n\t\t\t// necessary to prevent leak on iOS Safari 7-9. will throw in almost all other\r\n\t\t\t// browser implementations.\r\n\t\t\ttry { audioNode.buffer = s._scratchBuffer; } catch(e) {}\r\n\t\t\taudioNode = null;\r\n\t\t}\r\n\t\treturn audioNode;\r\n\t};\r\n\r\n\tp._handleSoundReady = function (event) {\r\n\t\tthis.gainNode.connect(s.destinationNode);  // this line can cause a memory leak.  Nodes need to be disconnected from the audioDestination or any sequence that leads to it.\r\n\r\n\t\tvar dur = this._duration * 0.001;\r\n\t\tvar pos = this._position * 0.001;\r\n\t\tif (pos > dur) {pos = dur;}\r\n\t\tthis.sourceNode = this._createAndPlayAudioNode((s.context.currentTime - dur), pos);\r\n\t\tthis._playbackStartTime = this.sourceNode.startTime - pos;\r\n\r\n\t\tthis._soundCompleteTimeout = setTimeout(this._endedHandler, (dur - pos) * 1000);\r\n\r\n\t\tif(this._loop != 0) {\r\n\t\t\tthis._sourceNodeNext = this._createAndPlayAudioNode(this._playbackStartTime, 0);\r\n\t\t}\r\n\t};\r\n\r\n\t/**\r\n\t * Creates an audio node using the current src and context, connects it to the gain node, and starts playback.\r\n\t * @method _createAndPlayAudioNode\r\n\t * @param {Number} startTime The time to add this to the web audio context, in seconds.\r\n\t * @param {Number} offset The amount of time into the src audio to start playback, in seconds.\r\n\t * @return {audioNode}\r\n\t * @protected\r\n\t * @since 0.4.1\r\n\t */\r\n\tp._createAndPlayAudioNode = function(startTime, offset) {\r\n\t\tvar audioNode = s.context.createBufferSource();\r\n\t\taudioNode.buffer = this.playbackResource;\r\n\t\taudioNode.connect(this.panNode);\r\n\t\tvar dur = this._duration * 0.001;\r\n\t\taudioNode.startTime = startTime + dur;\r\n\t\taudioNode.start(audioNode.startTime, offset+(this._startTime*0.001), dur - offset);\r\n\t\treturn audioNode;\r\n\t};\r\n\r\n\tp._pause = function () {\r\n\t\tthis._position = (s.context.currentTime - this._playbackStartTime) * 1000;  // * 1000 to give milliseconds, lets us restart at same point\r\n\t\tthis.sourceNode = this._cleanUpAudioNode(this.sourceNode);\r\n\t\tthis._sourceNodeNext = this._cleanUpAudioNode(this._sourceNodeNext);\r\n\r\n\t\tif (this.gainNode.numberOfOutputs != 0) {this.gainNode.disconnect(0);}\r\n\r\n\t\tclearTimeout(this._soundCompleteTimeout);\r\n\t};\r\n\r\n\tp._resume = function () {\r\n\t\tthis._handleSoundReady();\r\n\t};\r\n\r\n\t/*\r\n\tp._handleStop = function () {\r\n\t\t// web audio does not need to do anything extra\r\n\t};\r\n\t*/\r\n\r\n\tp._updateVolume = function () {\r\n\t\tvar newVolume = this._muted ? 0 : this._volume;\r\n\t  \tif (newVolume != this.gainNode.gain.value) {\r\n\t\t  this.gainNode.gain.value = newVolume;\r\n  \t\t}\r\n\t};\r\n\r\n\tp._calculateCurrentPosition = function () {\r\n\t\treturn ((s.context.currentTime - this._playbackStartTime) * 1000); // pos in seconds * 1000 to give milliseconds\r\n\t};\r\n\r\n\tp._updatePosition = function () {\r\n\t\tthis.sourceNode = this._cleanUpAudioNode(this.sourceNode);\r\n\t\tthis._sourceNodeNext = this._cleanUpAudioNode(this._sourceNodeNext);\r\n\t\tclearTimeout(this._soundCompleteTimeout);\r\n\r\n\t\tif (!this._paused) {this._handleSoundReady();}\r\n\t};\r\n\r\n\t// OJR we are using a look ahead approach to ensure smooth looping.\r\n\t// We add _sourceNodeNext to the audio context so that it starts playing even if this callback is delayed.\r\n\t// This technique is described here:  http://www.html5rocks.com/en/tutorials/audio/scheduling/\r\n\t// NOTE the cost of this is that our audio loop may not always match the loop event timing precisely.\r\n\tp._handleLoop = function () {\r\n\t\tthis._cleanUpAudioNode(this.sourceNode);\r\n\t\tthis.sourceNode = this._sourceNodeNext;\r\n\t\tthis._playbackStartTime = this.sourceNode.startTime;\r\n\t\tthis._sourceNodeNext = this._createAndPlayAudioNode(this._playbackStartTime, 0);\r\n\t\tthis._soundCompleteTimeout = setTimeout(this._endedHandler, this._duration);\r\n\t};\r\n\r\n\tp._updateDuration = function () {\r\n\t\tif(this.playState == createjs.Sound.PLAY_SUCCEEDED) {\r\n\t\t\tthis._pause();\r\n\t\t\tthis._resume();\r\n\t\t}\r\n\t};\r\n\r\n\tcreatejs.WebAudioSoundInstance = createjs.promote(WebAudioSoundInstance, \"AbstractSoundInstance\");\r\n}());\r\n\r\n//##############################################################################\r\n// WebAudioPlugin.js\r\n//##############################################################################\r\n\r\nthis.createjs = this.createjs || {};\r\n\r\n(function () {\r\n\r\n\t\"use strict\";\r\n\r\n\t/**\r\n\t * Play sounds using Web Audio in the browser. The WebAudioPlugin is currently the default plugin, and will be used\r\n\t * anywhere that it is supported. To change plugin priority, check out the Sound API\r\n\t * {{#crossLink \"Sound/registerPlugins\"}}{{/crossLink}} method.\r\n\r\n\t * <h4>Known Browser and OS issues for Web Audio</h4>\r\n\t * <b>Firefox 25</b>\r\n\t * <li>\r\n\t *     mp3 audio files do not load properly on all windows machines, reported <a href=\"https://bugzilla.mozilla.org/show_bug.cgi?id=929969\" target=\"_blank\">here</a>.\r\n\t *     <br />For this reason it is recommended to pass another FireFox-supported type (i.e. ogg) as the default\r\n\t *     extension, until this bug is resolved\r\n\t * </li>\r\n\t *\r\n\t * <b>Webkit (Chrome and Safari)</b>\r\n\t * <li>\r\n\t *     AudioNode.disconnect does not always seem to work.  This can cause the file size to grow over time if you\r\n\t * \t   are playing a lot of audio files.\r\n\t * </li>\r\n\t *\r\n\t * <b>iOS 6 limitations</b>\r\n\t * <ul>\r\n\t *     <li>\r\n\t *         Sound is initially muted and will only unmute through play being called inside a user initiated event\r\n\t *         (touch/click). Please read the mobile playback notes in the the {{#crossLink \"Sound\"}}{{/crossLink}}\r\n\t *         class for a full overview of the limitations, and how to get around them.\r\n\t *     </li>\r\n\t *\t   <li>\r\n\t *\t       A bug exists that will distort un-cached audio when a video element is present in the DOM. You can avoid\r\n\t *\t       this bug by ensuring the audio and video audio share the same sample rate.\r\n\t *\t   </li>\r\n\t * </ul>\r\n\t * @class WebAudioPlugin\r\n\t * @extends AbstractPlugin\r\n\t * @constructor\r\n\t * @since 0.4.0\r\n\t */\r\n\tfunction WebAudioPlugin() {\r\n\t\tthis.AbstractPlugin_constructor();\r\n\r\n\r\n// Private Properties\r\n\t\t/**\r\n\t\t * Value to set panning model to equal power for WebAudioSoundInstance.  Can be \"equalpower\" or 0 depending on browser implementation.\r\n\t\t * @property _panningModel\r\n\t\t * @type {Number / String}\r\n\t\t * @protected\r\n\t\t */\r\n\t\tthis._panningModel = s._panningModel;;\r\n\r\n\t\t/**\r\n\t\t * The web audio context, which WebAudio uses to play audio. All nodes that interact with the WebAudioPlugin\r\n\t\t * need to be created within this context.\r\n\t\t * @property context\r\n\t\t * @type {AudioContext}\r\n\t\t */\r\n\t\tthis.context = s.context;\r\n\r\n\t\t/**\r\n\t\t * A DynamicsCompressorNode, which is used to improve sound quality and prevent audio distortion.\r\n\t\t * It is connected to <code>context.destination</code>.\r\n\t\t *\r\n\t\t * Can be accessed by advanced users through createjs.Sound.activePlugin.dynamicsCompressorNode.\r\n\t\t * @property dynamicsCompressorNode\r\n\t\t * @type {AudioNode}\r\n\t\t */\r\n\t\tthis.dynamicsCompressorNode = this.context.createDynamicsCompressor();\r\n\t\tthis.dynamicsCompressorNode.connect(this.context.destination);\r\n\r\n\t\t/**\r\n\t\t * A GainNode for controlling master volume. It is connected to {{#crossLink \"WebAudioPlugin/dynamicsCompressorNode:property\"}}{{/crossLink}}.\r\n\t\t *\r\n\t\t * Can be accessed by advanced users through createjs.Sound.activePlugin.gainNode.\r\n\t\t * @property gainNode\r\n\t\t * @type {AudioGainNode}\r\n\t\t */\r\n\t\tthis.gainNode = this.context.createGain();\r\n\t\tthis.gainNode.connect(this.dynamicsCompressorNode);\r\n\t\tcreatejs.WebAudioSoundInstance.destinationNode = this.gainNode;\r\n\r\n\t\tthis._capabilities = s._capabilities;\r\n\r\n\t\tthis._loaderClass = createjs.WebAudioLoader;\r\n\t\tthis._soundInstanceClass = createjs.WebAudioSoundInstance;\r\n\r\n\t\tthis._addPropsToClasses();\r\n\t}\r\n\tvar p = createjs.extend(WebAudioPlugin, createjs.AbstractPlugin);\r\n\r\n\t// TODO: deprecated\r\n\t// p.initialize = function() {}; // searchable for devs wondering where it is. REMOVED. See docs for details.\r\n\r\n\r\n// Static Properties\r\n\tvar s = WebAudioPlugin;\r\n\t/**\r\n\t * The capabilities of the plugin. This is generated via the {{#crossLink \"WebAudioPlugin/_generateCapabilities:method\"}}{{/crossLink}}\r\n\t * method and is used internally.\r\n\t * @property _capabilities\r\n\t * @type {Object}\r\n\t * @default null\r\n\t * @protected\r\n\t * @static\r\n\t */\r\n\ts._capabilities = null;\r\n\r\n\t/**\r\n\t * Value to set panning model to equal power for WebAudioSoundInstance.  Can be \"equalpower\" or 0 depending on browser implementation.\r\n\t * @property _panningModel\r\n\t * @type {Number / String}\r\n\t * @protected\r\n\t * @static\r\n\t */\r\n\ts._panningModel = \"equalpower\";\r\n\r\n\t/**\r\n\t * The web audio context, which WebAudio uses to play audio. All nodes that interact with the WebAudioPlugin\r\n\t * need to be created within this context.\r\n\t *\r\n\t * Advanced users can set this to an existing context, but <b>must</b> do so before they call\r\n\t * {{#crossLink \"Sound/registerPlugins\"}}{{/crossLink}} or {{#crossLink \"Sound/initializeDefaultPlugins\"}}{{/crossLink}}.\r\n\t *\r\n\t * @property context\r\n\t * @type {AudioContext}\r\n\t * @static\r\n\t */\r\n\ts.context = null;\r\n\r\n\t/**\r\n\t * The scratch buffer that will be assigned to the buffer property of a source node on close.\r\n\t * Works around an iOS Safari bug: https://github.com/CreateJS/SoundJS/issues/102\r\n\t *\r\n\t * Advanced users can set this to an existing source node, but <b>must</b> do so before they call\r\n\t * {{#crossLink \"Sound/registerPlugins\"}}{{/crossLink}} or {{#crossLink \"Sound/initializeDefaultPlugins\"}}{{/crossLink}}.\r\n\t *\r\n\t * @property _scratchBuffer\r\n\t * @type {AudioBuffer}\r\n\t * @protected\r\n\t * @static\r\n\t */\r\n\t s._scratchBuffer = null;\r\n\r\n\t/**\r\n\t * Indicated whether audio on iOS has been unlocked, which requires a touchend/mousedown event that plays an\r\n\t * empty sound.\r\n\t * @property _unlocked\r\n\t * @type {boolean}\r\n\t * @since 0.6.2\r\n\t * @private\r\n\t */\r\n\ts._unlocked = false;\r\n\r\n\r\n// Static Public Methods\r\n\t/**\r\n\t * Determine if the plugin can be used in the current browser/OS.\r\n\t * @method isSupported\r\n\t * @return {Boolean} If the plugin can be initialized.\r\n\t * @static\r\n\t */\r\n\ts.isSupported = function () {\r\n\t\t// check if this is some kind of mobile device, Web Audio works with local protocol under PhoneGap and it is unlikely someone is trying to run a local file\r\n\t\tvar isMobilePhoneGap = createjs.BrowserDetect.isIOS || createjs.BrowserDetect.isAndroid || createjs.BrowserDetect.isBlackberry;\r\n\t\t// OJR isMobile may be redundant with _isFileXHRSupported available.  Consider removing.\r\n\t\tif (location.protocol == \"file:\" && !isMobilePhoneGap && !this._isFileXHRSupported()) { return false; }  // Web Audio requires XHR, which is not usually available locally\r\n\t\ts._generateCapabilities();\r\n\t\tif (s.context == null) {return false;}\r\n\t\treturn true;\r\n\t};\r\n\r\n\t/**\r\n\t * Plays an empty sound in the web audio context.  This is used to enable web audio on iOS devices, as they\r\n\t * require the first sound to be played inside of a user initiated event (touch/click).  This is called when\r\n\t * {{#crossLink \"WebAudioPlugin\"}}{{/crossLink}} is initialized (by Sound {{#crossLink \"Sound/initializeDefaultPlugins\"}}{{/crossLink}}\r\n\t * for example).\r\n\t *\r\n\t * <h4>Example</h4>\r\n\t *\r\n\t *     function handleTouch(event) {\r\n\t *         createjs.WebAudioPlugin.playEmptySound();\r\n\t *     }\r\n\t *\r\n\t * @method playEmptySound\r\n\t * @static\r\n\t * @since 0.4.1\r\n\t */\r\n\ts.playEmptySound = function() {\r\n\t\tif (s.context == null) {return;}\r\n\t\tvar source = s.context.createBufferSource();\r\n\t\tsource.buffer = s._scratchBuffer;\r\n\t\tsource.connect(s.context.destination);\r\n\t\tsource.start(0, 0, 0);\r\n\t};\r\n\r\n\r\n// Static Private Methods\r\n\t/**\r\n\t * Determine if XHR is supported, which is necessary for web audio.\r\n\t * @method _isFileXHRSupported\r\n\t * @return {Boolean} If XHR is supported.\r\n\t * @since 0.4.2\r\n\t * @protected\r\n\t * @static\r\n\t */\r\n\ts._isFileXHRSupported = function() {\r\n\t\t// it's much easier to detect when something goes wrong, so let's start optimistically\r\n\t\tvar supported = true;\r\n\r\n\t\tvar xhr = new XMLHttpRequest();\r\n\t\ttry {\r\n\t\t\txhr.open(\"GET\", \"WebAudioPluginTest.fail\", false); // loading non-existant file triggers 404 only if it could load (synchronous call)\r\n\t\t} catch (error) {\r\n\t\t\t// catch errors in cases where the onerror is passed by\r\n\t\t\tsupported = false;\r\n\t\t\treturn supported;\r\n\t\t}\r\n\t\txhr.onerror = function() { supported = false; }; // cause irrelevant\r\n\t\t// with security turned off, we can get empty success results, which is actually a failed read (status code 0?)\r\n\t\txhr.onload = function() { supported = this.status == 404 || (this.status == 200 || (this.status == 0 && this.response != \"\")); };\r\n\t\ttry {\r\n\t\t\txhr.send();\r\n\t\t} catch (error) {\r\n\t\t\t// catch errors in cases where the onerror is passed by\r\n\t\t\tsupported = false;\r\n\t\t}\r\n\r\n\t\treturn supported;\r\n\t};\r\n\r\n\t/**\r\n\t * Determine the capabilities of the plugin. Used internally. Please see the Sound API {{#crossLink \"Sound/getCapabilities\"}}{{/crossLink}}\r\n\t * method for an overview of plugin capabilities.\r\n\t * @method _generateCapabilities\r\n\t * @static\r\n\t * @protected\r\n\t */\r\n\ts._generateCapabilities = function () {\r\n\t\tif (s._capabilities != null) {return;}\r\n\t\t// Web Audio can be in any formats supported by the audio element, from http://www.w3.org/TR/webaudio/#AudioContext-section\r\n\t\tvar t = document.createElement(\"audio\");\r\n\t\tif (t.canPlayType == null) {return null;}\r\n\r\n\t\tif (s.context == null) {\r\n\t\t\tif (window.AudioContext) {\r\n\t\t\t\ts.context = new AudioContext();\r\n\t\t\t} else if (window.webkitAudioContext) {\r\n\t\t\t\ts.context = new webkitAudioContext();\r\n\t\t\t} else {\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (s._scratchBuffer == null) {\r\n\t\t\ts._scratchBuffer = s.context.createBuffer(1, 1, 22050);\r\n\t\t}\r\n\r\n\t\ts._compatibilitySetUp();\r\n\r\n\t\t// Listen for document level clicks to unlock WebAudio on iOS. See the _unlock method.\r\n\t\tif (\"ontouchstart\" in window && s.context.state != \"running\") {\r\n\t\t\ts._unlock(); // When played inside of a touch event, this will enable audio on iOS immediately.\r\n\t\t\tdocument.addEventListener(\"mousedown\", s._unlock, true);\r\n\t\t\tdocument.addEventListener(\"touchend\", s._unlock, true);\r\n\t\t}\r\n\r\n\r\n\t\ts._capabilities = {\r\n\t\t\tpanning:true,\r\n\t\t\tvolume:true,\r\n\t\t\ttracks:-1\r\n\t\t};\r\n\r\n\t\t// determine which extensions our browser supports for this plugin by iterating through Sound.SUPPORTED_EXTENSIONS\r\n\t\tvar supportedExtensions = createjs.Sound.SUPPORTED_EXTENSIONS;\r\n\t\tvar extensionMap = createjs.Sound.EXTENSION_MAP;\r\n\t\tfor (var i = 0, l = supportedExtensions.length; i < l; i++) {\r\n\t\t\tvar ext = supportedExtensions[i];\r\n\t\t\tvar playType = extensionMap[ext] || ext;\r\n\t\t\ts._capabilities[ext] = (t.canPlayType(\"audio/\" + ext) != \"no\" && t.canPlayType(\"audio/\" + ext) != \"\") || (t.canPlayType(\"audio/\" + playType) != \"no\" && t.canPlayType(\"audio/\" + playType) != \"\");\r\n\t\t}  // OJR another way to do this might be canPlayType:\"m4a\", codex: mp4\r\n\r\n\t\t// 0=no output, 1=mono, 2=stereo, 4=surround, 6=5.1 surround.\r\n\t\t// See http://www.w3.org/TR/webaudio/#AudioChannelSplitter for more details on channels.\r\n\t\tif (s.context.destination.numberOfChannels < 2) {\r\n\t\t\ts._capabilities.panning = false;\r\n\t\t}\r\n\t};\r\n\r\n\t/**\r\n\t * Set up compatibility if only deprecated web audio calls are supported.\r\n\t * See http://www.w3.org/TR/webaudio/#DeprecationNotes\r\n\t * Needed so we can support new browsers that don't support deprecated calls (Firefox) as well as old browsers that\r\n\t * don't support new calls.\r\n\t *\r\n\t * @method _compatibilitySetUp\r\n\t * @static\r\n\t * @protected\r\n\t * @since 0.4.2\r\n\t */\r\n\ts._compatibilitySetUp = function() {\r\n\t\ts._panningModel = \"equalpower\";\r\n\t\t//assume that if one new call is supported, they all are\r\n\t\tif (s.context.createGain) { return; }\r\n\r\n\t\t// simple name change, functionality the same\r\n\t\ts.context.createGain = s.context.createGainNode;\r\n\r\n\t\t// source node, add to prototype\r\n\t\tvar audioNode = s.context.createBufferSource();\r\n\t\taudioNode.__proto__.start = audioNode.__proto__.noteGrainOn;\t// note that noteGrainOn requires all 3 parameters\r\n\t\taudioNode.__proto__.stop = audioNode.__proto__.noteOff;\r\n\r\n\t\t// panningModel\r\n\t\ts._panningModel = 0;\r\n\t};\r\n\r\n\t/**\r\n\t * Try to unlock audio on iOS. This is triggered from either WebAudio plugin setup (which will work if inside of\r\n\t * a `mousedown` or `touchend` event stack), or the first document touchend/mousedown event. If it fails (touchend\r\n\t * will fail if the user presses for too long, indicating a scroll event instead of a click event.\r\n\t *\r\n\t * Note that earlier versions of iOS supported `touchstart` for this, but iOS9 removed this functionality. Adding\r\n\t * a `touchstart` event to support older platforms may preclude a `mousedown` even from getting fired on iOS9, so we\r\n\t * stick with `mousedown` and `touchend`.\r\n\t * @method _unlock\r\n\t * @since 0.6.2\r\n\t * @private\r\n\t */\r\n\ts._unlock = function() {\r\n\t\tif (s._unlocked) { return; }\r\n\t\ts.playEmptySound();\r\n\t\tif (s.context.state == \"running\") {\r\n\t\t\tdocument.removeEventListener(\"mousedown\", s._unlock, true);\r\n\t\t\tdocument.removeEventListener(\"touchend\", s._unlock, true);\r\n\t\t\ts._unlocked = true;\r\n\t\t}\r\n\t};\r\n\r\n\r\n// Public Methods\r\n\tp.toString = function () {\r\n\t\treturn \"[WebAudioPlugin]\";\r\n\t};\r\n\r\n\r\n// Private Methods\r\n\t/**\r\n\t * Set up needed properties on supported classes WebAudioSoundInstance and WebAudioLoader.\r\n\t * @method _addPropsToClasses\r\n\t * @static\r\n\t * @protected\r\n\t * @since 0.6.0\r\n\t */\r\n\tp._addPropsToClasses = function() {\r\n\t\tvar c = this._soundInstanceClass;\r\n\t\tc.context = this.context;\r\n\t\tc._scratchBuffer = s._scratchBuffer;\r\n\t\tc.destinationNode = this.gainNode;\r\n\t\tc._panningModel = this._panningModel;\r\n\r\n\t\tthis._loaderClass.context = this.context;\r\n\t};\r\n\r\n\r\n\t/**\r\n\t * Set the gain value for master audio. Should not be called externally.\r\n\t * @method _updateVolume\r\n\t * @protected\r\n\t */\r\n\tp._updateVolume = function () {\r\n\t\tvar newVolume = createjs.Sound._masterMute ? 0 : this._volume;\r\n\t\tif (newVolume != this.gainNode.gain.value) {\r\n\t\t\tthis.gainNode.gain.value = newVolume;\r\n\t\t}\r\n\t};\r\n\r\n\tcreatejs.WebAudioPlugin = createjs.promote(WebAudioPlugin, \"AbstractPlugin\");\r\n}());\r\n\r\n//##############################################################################\r\n// HTMLAudioTagPool.js\r\n//##############################################################################\r\n\r\nthis.createjs = this.createjs || {};\r\n\r\n(function () {\r\n\t\"use strict\";\r\n\r\n\t/**\r\n\t * HTMLAudioTagPool is an object pool for HTMLAudio tag instances.\r\n\t * @class HTMLAudioTagPool\r\n\t * @param {String} src The source of the channel.\r\n\t * @protected\r\n\t */\r\n\tfunction HTMLAudioTagPool() {\r\n\t\t\tthrow \"HTMLAudioTagPool cannot be instantiated\";\r\n\t}\r\n\r\n\tvar s = HTMLAudioTagPool;\r\n\r\n// Static Properties\r\n\t/**\r\n\t * A hash lookup of each base audio tag, indexed by the audio source.\r\n\t * @property _tags\r\n\t * @type {{}}\r\n\t * @static\r\n\t * @protected\r\n\t */\r\n\ts._tags = {};\r\n\r\n\t/**\r\n\t * An object pool for html audio tags\r\n\t * @property _tagPool\r\n\t * @type {TagPool}\r\n\t * @static\r\n\t * @protected\r\n\t */\r\n\ts._tagPool = new TagPool();\r\n\r\n\t/**\r\n\t * A hash lookup of if a base audio tag is available, indexed by the audio source\r\n\t * @property _tagsUsed\r\n\t * @type {{}}\r\n\t * @protected\r\n\t * @static\r\n\t */\r\n\ts._tagUsed = {};\r\n\r\n// Static Methods\r\n\t/**\r\n\t  * Get an audio tag with the given source.\r\n\t  * @method get\r\n\t  * @param {String} src The source file used by the audio tag.\r\n\t  * @static\r\n\t  */\r\n\t s.get = function (src) {\r\n\t\tvar t = s._tags[src];\r\n\t\tif (t == null) {\r\n\t\t\t// create new base tag\r\n\t\t\tt = s._tags[src] = s._tagPool.get();\r\n\t\t\tt.src = src;\r\n\t\t} else {\r\n\t\t\t// get base or pool\r\n\t\t\tif (s._tagUsed[src]) {\r\n\t\t\t\tt = s._tagPool.get();\r\n\t\t\t\tt.src = src;\r\n\t\t\t} else {\r\n\t\t\t\ts._tagUsed[src] = true;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn t;\r\n\t };\r\n\r\n\t /**\r\n\t  * Return an audio tag to the pool.\r\n\t  * @method set\r\n\t  * @param {String} src The source file used by the audio tag.\r\n\t  * @param {HTMLElement} tag Audio tag to set.\r\n\t  * @static\r\n\t  */\r\n\t s.set = function (src, tag) {\r\n\t\t // check if this is base, if yes set boolean if not return to pool\r\n\t\t if(tag == s._tags[src]) {\r\n\t\t\t s._tagUsed[src] = false;\r\n\t\t } else {\r\n\t\t\t s._tagPool.set(tag);\r\n\t\t }\r\n\t };\r\n\r\n\t/**\r\n\t * Delete stored tag reference and return them to pool. Note that if the tag reference does not exist, this will fail.\r\n\t * @method remove\r\n\t * @param {String} src The source for the tag\r\n\t * @return {Boolean} If the TagPool was deleted.\r\n\t * @static\r\n\t */\r\n\ts.remove = function (src) {\r\n\t\tvar tag = s._tags[src];\r\n\t\tif (tag == null) {return false;}\r\n\t\ts._tagPool.set(tag);\r\n\t\tdelete(s._tags[src]);\r\n\t\tdelete(s._tagUsed[src]);\r\n\t\treturn true;\r\n\t};\r\n\r\n\t/**\r\n\t * Gets the duration of the src audio in milliseconds\r\n\t * @method getDuration\r\n\t * @param {String} src The source file used by the audio tag.\r\n\t * @return {Number} Duration of src in milliseconds\r\n\t * @static\r\n\t */\r\n\ts.getDuration= function (src) {\r\n\t\tvar t = s._tags[src];\r\n\t\tif (t == null || !t.duration) {return 0;}\t// OJR duration is NaN if loading has not completed\r\n\t\treturn t.duration * 1000;\r\n\t};\r\n\r\n\tcreatejs.HTMLAudioTagPool = HTMLAudioTagPool;\r\n\r\n\r\n// ************************************************************************************************************\r\n\t/**\r\n\t * The TagPool is an object pool for HTMLAudio tag instances.\r\n\t * #class TagPool\r\n\t * @param {String} src The source of the channel.\r\n\t * @protected\r\n\t */\r\n\tfunction TagPool(src) {\r\n\r\n// Public Properties\r\n\t\t/**\r\n\t\t * A list of all available tags in the pool.\r\n\t\t * #property tags\r\n\t\t * @type {Array}\r\n\t\t * @protected\r\n\t\t */\r\n\t\tthis._tags = [];\r\n\t};\r\n\r\n\tvar p = TagPool.prototype;\r\n\tp.constructor = TagPool;\r\n\r\n\r\n// Public Methods\r\n\t/**\r\n\t * Get an HTMLAudioElement for immediate playback. This takes it out of the pool.\r\n\t * #method get\r\n\t * @return {HTMLAudioElement} An HTML audio tag.\r\n\t */\r\n\tp.get = function () {\r\n\t\tvar tag;\r\n\t\tif (this._tags.length == 0) {\r\n\t\t\ttag = this._createTag();\r\n\t\t} else {\r\n\t\t\ttag = this._tags.pop();\r\n\t\t}\r\n\t\tif (tag.parentNode == null) {document.body.appendChild(tag);}\r\n\t\treturn tag;\r\n\t};\r\n\r\n\t/**\r\n\t * Put an HTMLAudioElement back in the pool for use.\r\n\t * #method set\r\n\t * @param {HTMLAudioElement} tag HTML audio tag\r\n\t */\r\n\tp.set = function (tag) {\r\n\t\t// OJR this first step seems unnecessary\r\n\t\tvar index = createjs.indexOf(this._tags, tag);\r\n\t\tif (index == -1) {\r\n\t\t\tthis._tags.src = null;\r\n\t\t\tthis._tags.push(tag);\r\n\t\t}\r\n\t};\r\n\r\n\tp.toString = function () {\r\n\t\treturn \"[TagPool]\";\r\n\t};\r\n\r\n\r\n// Private Methods\r\n\t/**\r\n\t * Create an HTML audio tag.\r\n\t * #method _createTag\r\n\t * @param {String} src The source file to set for the audio tag.\r\n\t * @return {HTMLElement} Returns an HTML audio tag.\r\n\t * @protected\r\n\t */\r\n\tp._createTag = function () {\r\n\t\tvar tag = document.createElement(\"audio\");\r\n\t\ttag.autoplay = false;\r\n\t\ttag.preload = \"none\";\r\n\t\t//LM: Firefox fails when this the preload=\"none\" for other tags, but it needs to be \"none\" to ensure PreloadJS works.\r\n\t\treturn tag;\r\n\t};\r\n\r\n}());\r\n\r\n//##############################################################################\r\n// HTMLAudioSoundInstance.js\r\n//##############################################################################\r\n\r\nthis.createjs = this.createjs || {};\r\n\r\n(function () {\r\n\t\"use strict\";\r\n\r\n\t/**\r\n\t * HTMLAudioSoundInstance extends the base api of {{#crossLink \"AbstractSoundInstance\"}}{{/crossLink}} and is used by\r\n\t * {{#crossLink \"HTMLAudioPlugin\"}}{{/crossLink}}.\r\n\t *\r\n\t * @param {String} src The path to and file name of the sound.\r\n\t * @param {Number} startTime Audio sprite property used to apply an offset, in milliseconds.\r\n\t * @param {Number} duration Audio sprite property used to set the time the clip plays for, in milliseconds.\r\n\t * @param {Object} playbackResource Any resource needed by plugin to support audio playback.\r\n\t * @class HTMLAudioSoundInstance\r\n\t * @extends AbstractSoundInstance\r\n\t * @constructor\r\n\t */\r\n\tfunction HTMLAudioSoundInstance(src, startTime, duration, playbackResource) {\r\n\t\tthis.AbstractSoundInstance_constructor(src, startTime, duration, playbackResource);\r\n\r\n\r\n// Private Properties\r\n\t\tthis._audioSpriteStopTime = null;\r\n\t\tthis._delayTimeoutId = null;\r\n\r\n\t\t// Proxies, make removing listeners easier.\r\n\t\tthis._endedHandler = createjs.proxy(this._handleSoundComplete, this);\r\n\t\tthis._readyHandler = createjs.proxy(this._handleTagReady, this);\r\n\t\tthis._stalledHandler = createjs.proxy(this._playFailed, this);\r\n\t\tthis._audioSpriteEndHandler = createjs.proxy(this._handleAudioSpriteLoop, this);\r\n\t\tthis._loopHandler = createjs.proxy(this._handleSoundComplete, this);\r\n\r\n\t\tif (duration) {\r\n\t\t\tthis._audioSpriteStopTime = (startTime + duration) * 0.001;\r\n\t\t} else {\r\n\t\t\tthis._duration = createjs.HTMLAudioTagPool.getDuration(this.src);\r\n\t\t}\r\n\t}\r\n\tvar p = createjs.extend(HTMLAudioSoundInstance, createjs.AbstractSoundInstance);\r\n\r\n\t// TODO: deprecated\r\n\t// p.initialize = function() {}; // searchable for devs wondering where it is. REMOVED. See docs for details.\r\n\r\n\r\n// Public Methods\r\n\t/**\r\n\t * Called by {{#crossLink \"Sound\"}}{{/crossLink}} when plugin does not handle master volume.\r\n\t * undoc'd because it is not meant to be used outside of Sound\r\n\t * #method setMasterVolume\r\n\t * @param value\r\n\t */\r\n\tp.setMasterVolume = function (value) {\r\n\t\tthis._updateVolume();\r\n\t};\r\n\r\n\t/**\r\n\t * Called by {{#crossLink \"Sound\"}}{{/crossLink}} when plugin does not handle master mute.\r\n\t * undoc'd because it is not meant to be used outside of Sound\r\n\t * #method setMasterMute\r\n\t * @param value\r\n\t */\r\n\tp.setMasterMute = function (isMuted) {\r\n\t\tthis._updateVolume();\r\n\t};\r\n\r\n\tp.toString = function () {\r\n\t\treturn \"[HTMLAudioSoundInstance]\";\r\n\t};\r\n\r\n//Private Methods\r\n\tp._removeLooping = function() {\r\n\t\tif(this._playbackResource == null) {return;}\r\n\t\tthis._playbackResource.loop = false;\r\n\t\tthis._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED, this._loopHandler, false);\r\n\t};\r\n\r\n\tp._addLooping = function() {\r\n\t\tif(this._playbackResource == null  || this._audioSpriteStopTime) {return;}\r\n\t\tthis._playbackResource.addEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED, this._loopHandler, false);\r\n\t\tthis._playbackResource.loop = true;\r\n\t};\r\n\r\n\tp._handleCleanUp = function () {\r\n\t\tvar tag = this._playbackResource;\r\n\t\tif (tag != null) {\r\n\t\t\ttag.pause();\r\n\t\t\ttag.loop = false;\r\n\t\t\ttag.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_ENDED, this._endedHandler, false);\r\n\t\t\ttag.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_READY, this._readyHandler, false);\r\n\t\t\ttag.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_STALLED, this._stalledHandler, false);\r\n\t\t\ttag.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED, this._loopHandler, false);\r\n\t\t\ttag.removeEventListener(createjs.HTMLAudioPlugin._TIME_UPDATE, this._audioSpriteEndHandler, false);\r\n\r\n\t\t\ttry {\r\n\t\t\t\ttag.currentTime = this._startTime;\r\n\t\t\t} catch (e) {\r\n\t\t\t} // Reset Position\r\n\t\t\tcreatejs.HTMLAudioTagPool.set(this.src, tag);\r\n\t\t\tthis._playbackResource = null;\r\n\t\t}\r\n\t};\r\n\r\n\tp._beginPlaying = function (playProps) {\r\n\t\tthis._playbackResource = createjs.HTMLAudioTagPool.get(this.src);\r\n\t\treturn this.AbstractSoundInstance__beginPlaying(playProps);\r\n\t};\r\n\r\n\tp._handleSoundReady = function (event) {\r\n\t\tif (this._playbackResource.readyState !== 4) {\r\n\t\t\tvar tag = this._playbackResource;\r\n\t\t\ttag.addEventListener(createjs.HTMLAudioPlugin._AUDIO_READY, this._readyHandler, false);\r\n\t\t\ttag.addEventListener(createjs.HTMLAudioPlugin._AUDIO_STALLED, this._stalledHandler, false);\r\n\t\t\ttag.preload = \"auto\"; // This is necessary for Firefox, as it won't ever \"load\" until this is set.\r\n\t\t\ttag.load();\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tthis._updateVolume();\r\n\t\tthis._playbackResource.currentTime = (this._startTime + this._position) * 0.001;\r\n\t\tif (this._audioSpriteStopTime) {\r\n\t\t\tthis._playbackResource.addEventListener(createjs.HTMLAudioPlugin._TIME_UPDATE, this._audioSpriteEndHandler, false);\r\n\t\t} else {\r\n\t\t\tthis._playbackResource.addEventListener(createjs.HTMLAudioPlugin._AUDIO_ENDED, this._endedHandler, false);\r\n\t\t\tif(this._loop != 0) {\r\n\t\t\t\tthis._playbackResource.addEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED, this._loopHandler, false);\r\n\t\t\t\tthis._playbackResource.loop = true;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis._playbackResource.play();\r\n\t};\r\n\r\n\t/**\r\n\t * Used to handle when a tag is not ready for immediate playback when it is returned from the HTMLAudioTagPool.\r\n\t * @method _handleTagReady\r\n\t * @param event\r\n\t * @protected\r\n\t */\r\n\tp._handleTagReady = function (event) {\r\n\t\tthis._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_READY, this._readyHandler, false);\r\n\t\tthis._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_STALLED, this._stalledHandler, false);\r\n\r\n\t\tthis._handleSoundReady();\r\n\t};\r\n\r\n\tp._pause = function () {\r\n\t\tthis._playbackResource.pause();\r\n\t};\r\n\r\n\tp._resume = function () {\r\n\t\tthis._playbackResource.play();\r\n\t};\r\n\r\n\tp._updateVolume = function () {\r\n\t\tif (this._playbackResource != null) {\r\n\t\t\tvar newVolume = (this._muted || createjs.Sound._masterMute) ? 0 : this._volume * createjs.Sound._masterVolume;\r\n\t\t\tif (newVolume != this._playbackResource.volume) {this._playbackResource.volume = newVolume;}\r\n\t\t}\r\n\t};\r\n\r\n\tp._calculateCurrentPosition = function() {\r\n\t\treturn (this._playbackResource.currentTime * 1000) - this._startTime;\r\n\t};\r\n\r\n\tp._updatePosition = function() {\r\n\t\tthis._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED, this._loopHandler, false);\r\n\t\tthis._playbackResource.addEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED, this._handleSetPositionSeek, false);\r\n\t\ttry {\r\n\t\t\tthis._playbackResource.currentTime = (this._position + this._startTime) * 0.001;\r\n\t\t} catch (error) { // Out of range\r\n\t\t\tthis._handleSetPositionSeek(null);\r\n\t\t}\r\n\t};\r\n\r\n\t/**\r\n\t * Used to enable setting position, as we need to wait for that seek to be done before we add back our loop handling seek listener\r\n\t * @method _handleSetPositionSeek\r\n\t * @param event\r\n\t * @protected\r\n\t */\r\n\tp._handleSetPositionSeek = function(event) {\r\n\t\tif (this._playbackResource == null) { return; }\r\n\t\tthis._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED, this._handleSetPositionSeek, false);\r\n\t\tthis._playbackResource.addEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED, this._loopHandler, false);\r\n\t};\r\n\r\n\t/**\r\n\t * Timer used to loop audio sprites.\r\n\t * NOTE because of the inaccuracies in the timeupdate event (15 - 250ms) and in setting the tag to the desired timed\r\n\t * (up to 300ms), it is strongly recommended not to loop audio sprites with HTML Audio if smooth looping is desired\r\n\t *\r\n\t * @method _handleAudioSpriteLoop\r\n\t * @param event\r\n\t * @private\r\n\t */\r\n\tp._handleAudioSpriteLoop = function (event) {\r\n\t\tif(this._playbackResource.currentTime <= this._audioSpriteStopTime) {return;}\r\n\t\tthis._playbackResource.pause();\r\n\t\tif(this._loop == 0) {\r\n\t\t\tthis._handleSoundComplete(null);\r\n\t\t} else {\r\n\t\t\tthis._position = 0;\r\n\t\t\tthis._loop--;\r\n\t\t\tthis._playbackResource.currentTime = this._startTime * 0.001;\r\n\t\t\tif(!this._paused) {this._playbackResource.play();}\r\n\t\t\tthis._sendEvent(\"loop\");\r\n\t\t}\r\n\t};\r\n\r\n\t// NOTE with this approach audio will loop as reliably as the browser allows\r\n\t// but we could end up sending the loop event after next loop playback begins\r\n\tp._handleLoop = function (event) {\r\n\t\tif(this._loop == 0) {\r\n\t\t\tthis._playbackResource.loop = false;\r\n\t\t\tthis._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED, this._loopHandler, false);\r\n\t\t}\r\n\t};\r\n\r\n\tp._updateStartTime = function () {\r\n\t\tthis._audioSpriteStopTime = (this._startTime + this._duration) * 0.001;\r\n\r\n\t\tif(this.playState == createjs.Sound.PLAY_SUCCEEDED) {\r\n\t\t\tthis._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_ENDED, this._endedHandler, false);\r\n\t\t\tthis._playbackResource.addEventListener(createjs.HTMLAudioPlugin._TIME_UPDATE, this._audioSpriteEndHandler, false);\r\n\t\t}\r\n\t};\r\n\r\n\tp._updateDuration = function () {\r\n\t\tthis._audioSpriteStopTime = (this._startTime + this._duration) * 0.001;\r\n\r\n\t\tif(this.playState == createjs.Sound.PLAY_SUCCEEDED) {\r\n\t\t\tthis._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_ENDED, this._endedHandler, false);\r\n\t\t\tthis._playbackResource.addEventListener(createjs.HTMLAudioPlugin._TIME_UPDATE, this._audioSpriteEndHandler, false);\r\n\t\t}\r\n\t};\r\n\r\n\tp._setDurationFromSource = function () {\r\n\t\tthis._duration = createjs.HTMLAudioTagPool.getDuration(this.src);\r\n\t\tthis._playbackResource = null;\r\n\t};\r\n\r\n\tcreatejs.HTMLAudioSoundInstance = createjs.promote(HTMLAudioSoundInstance, \"AbstractSoundInstance\");\r\n}());\r\n\r\n//##############################################################################\r\n// HTMLAudioPlugin.js\r\n//##############################################################################\r\n\r\nthis.createjs = this.createjs || {};\r\n\r\n(function () {\r\n\r\n\t\"use strict\";\r\n\r\n\t/**\r\n\t * Play sounds using HTML &lt;audio&gt; tags in the browser. This plugin is the second priority plugin installed\r\n\t * by default, after the {{#crossLink \"WebAudioPlugin\"}}{{/crossLink}}.  For older browsers that do not support html\r\n\t * audio, include and install the {{#crossLink \"FlashAudioPlugin\"}}{{/crossLink}}.\r\n\t *\r\n\t * <h4>Known Browser and OS issues for HTML Audio</h4>\r\n\t * <b>All browsers</b><br />\r\n\t * Testing has shown in all browsers there is a limit to how many audio tag instances you are allowed.  If you exceed\r\n\t * this limit, you can expect to see unpredictable results. Please use {{#crossLink \"Sound.MAX_INSTANCES\"}}{{/crossLink}} as\r\n\t * a guide to how many total audio tags you can safely use in all browsers.  This issue is primarily limited to IE9.\r\n\t *\r\n     * <b>IE html limitations</b><br />\r\n     * <ul><li>There is a delay in applying volume changes to tags that occurs once playback is started. So if you have\r\n     * muted all sounds, they will all play during this delay until the mute applies internally. This happens regardless of\r\n     * when or how you apply the volume change, as the tag seems to need to play to apply it.</li>\r\n     * <li>MP3 encoding will not always work for audio tags if it's not default.  We've found default encoding with\r\n     * 64kbps works.</li>\r\n\t * <li>Occasionally very short samples will get cut off.</li>\r\n\t * <li>There is a limit to how many audio tags you can load or play at once, which appears to be determined by\r\n\t * hardware and browser settings.  See {{#crossLink \"HTMLAudioPlugin.MAX_INSTANCES\"}}{{/crossLink}} for a safe estimate.\r\n\t * Note that audio sprites can be used as a solution to this issue.</li></ul>\r\n\t *\r\n\t * <b>Safari limitations</b><br />\r\n\t * <ul><li>Safari requires Quicktime to be installed for audio playback.</li></ul>\r\n\t *\r\n\t * <b>iOS 6 limitations</b><br />\r\n\t * <ul><li>can only have one &lt;audio&gt; tag</li>\r\n\t * \t\t<li>can not preload or autoplay the audio</li>\r\n\t * \t\t<li>can not cache the audio</li>\r\n\t * \t\t<li>can not play the audio except inside a user initiated event.</li>\r\n\t *\t\t<li>Note it is recommended to use {{#crossLink \"WebAudioPlugin\"}}{{/crossLink}} for iOS (6+)</li>\r\n\t * \t\t<li>audio sprites can be used to mitigate some of these issues and are strongly recommended on iOS</li>\r\n\t * </ul>\r\n\t *\r\n\t * <b>Android Native Browser limitations</b><br />\r\n\t * <ul><li>We have no control over audio volume. Only the user can set volume on their device.</li>\r\n\t *      <li>We can only play audio inside a user event (touch/click).  This currently means you cannot loop sound or use a delay.</li></ul>\r\n\t * <b> Android Chrome 26.0.1410.58 specific limitations</b><br />\r\n\t * <ul> <li>Can only play 1 sound at a time.</li>\r\n\t *      <li>Sound is not cached.</li>\r\n\t *      <li>Sound can only be loaded in a user initiated touch/click event.</li>\r\n\t *      <li>There is a delay before a sound is played, presumably while the src is loaded.</li>\r\n\t * </ul>\r\n\t *\r\n\t * See {{#crossLink \"Sound\"}}{{/crossLink}} for general notes on known issues.\r\n\t *\r\n\t * @class HTMLAudioPlugin\r\n\t * @extends AbstractPlugin\r\n\t * @constructor\r\n\t */\r\n\tfunction HTMLAudioPlugin() {\r\n\t\tthis.AbstractPlugin_constructor();\r\n\r\n\r\n\t// Public Properties\r\n\t\t/**\r\n\t\t * This is no longer needed as we are now using object pooling for tags.\r\n\t\t *\r\n\t\t * <b>NOTE this property only exists as a limitation of HTML audio.</b>\r\n\t\t * @property defaultNumChannels\r\n\t\t * @type {Number}\r\n\t\t * @default 2\r\n\t\t * @since 0.4.0\r\n\t\t * @deprecated\r\n\t\t */\r\n\t\tthis.defaultNumChannels = 2;\r\n\r\n\t\tthis._capabilities = s._capabilities;\r\n\r\n\t\tthis._loaderClass = createjs.SoundLoader;\r\n\t\tthis._soundInstanceClass = createjs.HTMLAudioSoundInstance;\r\n\t}\r\n\r\n\tvar p = createjs.extend(HTMLAudioPlugin, createjs.AbstractPlugin);\r\n\tvar s = HTMLAudioPlugin;\r\n\r\n\t// TODO: deprecated\r\n\t// p.initialize = function() {}; // searchable for devs wondering where it is. REMOVED. See docs for details.\r\n\r\n\r\n// Static Properties\r\n\t/**\r\n\t * The maximum number of instances that can be loaded or played. This is a browser limitation, primarily limited to IE9.\r\n\t * The actual number varies from browser to browser (and is largely hardware dependant), but this is a safe estimate.\r\n\t * Audio sprites work around this limitation.\r\n\t * @property MAX_INSTANCES\r\n\t * @type {Number}\r\n\t * @default 30\r\n\t * @static\r\n\t */\r\n\ts.MAX_INSTANCES = 30;\r\n\r\n\t/**\r\n\t * Event constant for the \"canPlayThrough\" event for cleaner code.\r\n\t * @property _AUDIO_READY\r\n\t * @type {String}\r\n\t * @default canplaythrough\r\n\t * @static\r\n\t * @protected\r\n\t */\r\n\ts._AUDIO_READY = \"canplaythrough\";\r\n\r\n\t/**\r\n\t * Event constant for the \"ended\" event for cleaner code.\r\n\t * @property _AUDIO_ENDED\r\n\t * @type {String}\r\n\t * @default ended\r\n\t * @static\r\n\t * @protected\r\n\t */\r\n\ts._AUDIO_ENDED = \"ended\";\r\n\r\n\t/**\r\n\t * Event constant for the \"seeked\" event for cleaner code.  We utilize this event for maintaining loop events.\r\n\t * @property _AUDIO_SEEKED\r\n\t * @type {String}\r\n\t * @default seeked\r\n\t * @static\r\n\t * @protected\r\n\t */\r\n\ts._AUDIO_SEEKED = \"seeked\";\r\n\r\n\t/**\r\n\t * Event constant for the \"stalled\" event for cleaner code.\r\n\t * @property _AUDIO_STALLED\r\n\t * @type {String}\r\n\t * @default stalled\r\n\t * @static\r\n\t * @protected\r\n\t */\r\n\ts._AUDIO_STALLED = \"stalled\";\r\n\r\n\t/**\r\n\t * Event constant for the \"timeupdate\" event for cleaner code.  Utilized for looping audio sprites.\r\n\t * This event callsback ever 15 to 250ms and can be dropped by the browser for performance.\r\n\t * @property _TIME_UPDATE\r\n\t * @type {String}\r\n\t * @default timeupdate\r\n\t * @static\r\n\t * @protected\r\n\t */\r\n\ts._TIME_UPDATE = \"timeupdate\";\r\n\r\n\t/**\r\n\t * The capabilities of the plugin. This is generated via the {{#crossLink \"HTMLAudioPlugin/_generateCapabilities\"}}{{/crossLink}}\r\n\t * method. Please see the Sound {{#crossLink \"Sound/getCapabilities\"}}{{/crossLink}} method for an overview of all\r\n\t * of the available properties.\r\n\t * @property _capabilities\r\n\t * @type {Object}\r\n\t * @protected\r\n\t * @static\r\n\t */\r\n\ts._capabilities = null;\r\n\r\n\r\n// Static Methods\r\n\t/**\r\n\t * Determine if the plugin can be used in the current browser/OS. Note that HTML audio is available in most modern\r\n\t * browsers, but is disabled in iOS because of its limitations.\r\n\t * @method isSupported\r\n\t * @return {Boolean} If the plugin can be initialized.\r\n\t * @static\r\n\t */\r\n\ts.isSupported = function () {\r\n\t\ts._generateCapabilities();\r\n\t\treturn (s._capabilities != null);\r\n\t};\r\n\r\n\t/**\r\n\t * Determine the capabilities of the plugin. Used internally. Please see the Sound API {{#crossLink \"Sound/getCapabilities\"}}{{/crossLink}}\r\n\t * method for an overview of plugin capabilities.\r\n\t * @method _generateCapabilities\r\n\t * @static\r\n\t * @protected\r\n\t */\r\n\ts._generateCapabilities = function () {\r\n\t\tif (s._capabilities != null) {return;}\r\n\t\tvar t = document.createElement(\"audio\");\r\n\t\tif (t.canPlayType == null) {return null;}\r\n\r\n\t\ts._capabilities = {\r\n\t\t\tpanning:false,\r\n\t\t\tvolume:true,\r\n\t\t\ttracks:-1\r\n\t\t};\r\n\r\n\t\t// determine which extensions our browser supports for this plugin by iterating through Sound.SUPPORTED_EXTENSIONS\r\n\t\tvar supportedExtensions = createjs.Sound.SUPPORTED_EXTENSIONS;\r\n\t\tvar extensionMap = createjs.Sound.EXTENSION_MAP;\r\n\t\tfor (var i = 0, l = supportedExtensions.length; i < l; i++) {\r\n\t\t\tvar ext = supportedExtensions[i];\r\n\t\t\tvar playType = extensionMap[ext] || ext;\r\n\t\t\ts._capabilities[ext] = (t.canPlayType(\"audio/\" + ext) != \"no\" && t.canPlayType(\"audio/\" + ext) != \"\") || (t.canPlayType(\"audio/\" + playType) != \"no\" && t.canPlayType(\"audio/\" + playType) != \"\");\r\n\t\t}  // OJR another way to do this might be canPlayType:\"m4a\", codex: mp4\r\n\t};\r\n\r\n\r\n// public methods\r\n\tp.register = function (loadItem) {\r\n\t\tvar tag = createjs.HTMLAudioTagPool.get(loadItem.src);\r\n\t\tvar loader = this.AbstractPlugin_register(loadItem);\r\n\t\tloader.setTag(tag);\r\n\r\n\t\treturn loader;\r\n\t};\r\n\r\n\tp.removeSound = function (src) {\r\n\t\tthis.AbstractPlugin_removeSound(src);\r\n\t\tcreatejs.HTMLAudioTagPool.remove(src);\r\n\t};\r\n\r\n\tp.create = function (src, startTime, duration) {\r\n\t\tvar si = this.AbstractPlugin_create(src, startTime, duration);\r\n\t\tsi.setPlaybackResource(null);\r\n\t\treturn si;\r\n\t};\r\n\r\n\tp.toString = function () {\r\n\t\treturn \"[HTMLAudioPlugin]\";\r\n\t};\r\n\r\n\t// plugin does not support these\r\n\tp.setVolume = p.getVolume = p.setMute = null;\r\n\r\n\r\n\tcreatejs.HTMLAudioPlugin = createjs.promote(HTMLAudioPlugin, \"AbstractPlugin\");\r\n}());\n}.call(window));","/* globals __webpack_amd_options__ */\r\nmodule.exports = __webpack_amd_options__;\r\n","var g;\r\n\r\n// This works in non-strict mode\r\ng = (function() {\r\n\treturn this;\r\n})();\r\n\r\ntry {\r\n\t// This works if eval is allowed (see CSP)\r\n\tg = g || Function(\"return this\")() || (1, eval)(\"this\");\r\n} catch (e) {\r\n\t// This works if the window reference is available\r\n\tif (typeof window === \"object\") g = window;\r\n}\r\n\r\n// g can still be undefined, but nothing to do about it...\r\n// We return undefined, instead of nothing here, so it's\r\n// easier to handle this case. if(!global) { ...}\r\n\r\nmodule.exports = g;\r\n","module.exports = function(module) {\r\n\tif (!module.webpackPolyfill) {\r\n\t\tmodule.deprecate = function() {};\r\n\t\tmodule.paths = [];\r\n\t\t// module.parent = undefined by default\r\n\t\tif (!module.children) module.children = [];\r\n\t\tObject.defineProperty(module, \"loaded\", {\r\n\t\t\tenumerable: true,\r\n\t\t\tget: function() {\r\n\t\t\t\treturn module.l;\r\n\t\t\t}\r\n\t\t});\r\n\t\tObject.defineProperty(module, \"id\", {\r\n\t\t\tenumerable: true,\r\n\t\t\tget: function() {\r\n\t\t\t\treturn module.i;\r\n\t\t\t}\r\n\t\t});\r\n\t\tmodule.webpackPolyfill = 1;\r\n\t}\r\n\treturn module;\r\n};\r\n","/*** IMPORTS FROM imports-loader ***/\n(function() {\n\n/*!\r\n* PreloadJS\r\n* Visit http://createjs.com/ for documentation, updates and examples.\r\n*\r\n* Copyright (c) 2010 gskinner.com, inc.\r\n*\r\n* Permission is hereby granted, free of charge, to any person\r\n* obtaining a copy of this software and associated documentation\r\n* files (the \"Software\"), to deal in the Software without\r\n* restriction, including without limitation the rights to use,\r\n* copy, modify, merge, publish, distribute, sublicense, and/or sell\r\n* copies of the Software, and to permit persons to whom the\r\n* Software is furnished to do so, subject to the following\r\n* conditions:\r\n*\r\n* The above copyright notice and this permission notice shall be\r\n* included in all copies or substantial portions of the Software.\r\n*\r\n* THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\r\n* EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES\r\n* OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\r\n* NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\r\n* HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,\r\n* WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\r\n* FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR\r\n* OTHER DEALINGS IN THE SOFTWARE.\r\n*/\r\n\r\n\r\n//##############################################################################\r\n// version.js\r\n//##############################################################################\r\n\r\nthis.createjs = this.createjs || {};\r\n\r\n(function () {\r\n\t\"use strict\";\r\n\r\n\t/**\r\n\t * Static class holding library specific information such as the version and buildDate of the library.\r\n\t * @class PreloadJS\r\n\t **/\r\n\tvar s = createjs.PreloadJS = createjs.PreloadJS || {};\r\n\r\n\t/**\r\n\t * The version string for this release.\r\n\t * @property version\r\n\t * @type {String}\r\n\t * @static\r\n\t **/\r\n\ts.version = /*=version*/\"0.6.2\"; // injected by build process\r\n\r\n\t/**\r\n\t * The build date for this release in UTC format.\r\n\t * @property buildDate\r\n\t * @type {String}\r\n\t * @static\r\n\t **/\r\n\ts.buildDate = /*=date*/\"Thu, 26 Nov 2015 20:44:31 GMT\"; // injected by build process\r\n\r\n})();\r\n\r\n//##############################################################################\r\n// extend.js\r\n//##############################################################################\r\n\r\nthis.createjs = this.createjs||{};\r\n\r\n/**\r\n * @class Utility Methods\r\n */\r\n\r\n/**\r\n * Sets up the prototype chain and constructor property for a new class.\r\n *\r\n * This should be called right after creating the class constructor.\r\n *\r\n * \tfunction MySubClass() {}\r\n * \tcreatejs.extend(MySubClass, MySuperClass);\r\n * \tMySubClass.prototype.doSomething = function() { }\r\n *\r\n * \tvar foo = new MySubClass();\r\n * \tconsole.log(foo instanceof MySuperClass); // true\r\n * \tconsole.log(foo.prototype.constructor === MySubClass); // true\r\n *\r\n * @method extend\r\n * @param {Function} subclass The subclass.\r\n * @param {Function} superclass The superclass to extend.\r\n * @return {Function} Returns the subclass's new prototype.\r\n */\r\ncreatejs.extend = function(subclass, superclass) {\r\n\t\"use strict\";\r\n\r\n\tfunction o() { this.constructor = subclass; }\r\n\to.prototype = superclass.prototype;\r\n\treturn (subclass.prototype = new o());\r\n};\r\n\r\n//##############################################################################\r\n// promote.js\r\n//##############################################################################\r\n\r\nthis.createjs = this.createjs||{};\r\n\r\n/**\r\n * @class Utility Methods\r\n */\r\n\r\n/**\r\n * Promotes any methods on the super class that were overridden, by creating an alias in the format `prefix_methodName`.\r\n * It is recommended to use the super class's name as the prefix.\r\n * An alias to the super class's constructor is always added in the format `prefix_constructor`.\r\n * This allows the subclass to call super class methods without using `function.call`, providing better performance.\r\n *\r\n * For example, if `MySubClass` extends `MySuperClass`, and both define a `draw` method, then calling `promote(MySubClass, \"MySuperClass\")`\r\n * would add a `MySuperClass_constructor` method to MySubClass and promote the `draw` method on `MySuperClass` to the\r\n * prototype of `MySubClass` as `MySuperClass_draw`.\r\n *\r\n * This should be called after the class's prototype is fully defined.\r\n *\r\n * \tfunction ClassA(name) {\r\n * \t\tthis.name = name;\r\n * \t}\r\n * \tClassA.prototype.greet = function() {\r\n * \t\treturn \"Hello \"+this.name;\r\n * \t}\r\n *\r\n * \tfunction ClassB(name, punctuation) {\r\n * \t\tthis.ClassA_constructor(name);\r\n * \t\tthis.punctuation = punctuation;\r\n * \t}\r\n * \tcreatejs.extend(ClassB, ClassA);\r\n * \tClassB.prototype.greet = function() {\r\n * \t\treturn this.ClassA_greet()+this.punctuation;\r\n * \t}\r\n * \tcreatejs.promote(ClassB, \"ClassA\");\r\n *\r\n * \tvar foo = new ClassB(\"World\", \"!?!\");\r\n * \tconsole.log(foo.greet()); // Hello World!?!\r\n *\r\n * @method promote\r\n * @param {Function} subclass The class to promote super class methods on.\r\n * @param {String} prefix The prefix to add to the promoted method names. Usually the name of the superclass.\r\n * @return {Function} Returns the subclass.\r\n */\r\ncreatejs.promote = function(subclass, prefix) {\r\n\t\"use strict\";\r\n\r\n\tvar subP = subclass.prototype, supP = (Object.getPrototypeOf&&Object.getPrototypeOf(subP))||subP.__proto__;\r\n\tif (supP) {\r\n\t\tsubP[(prefix+=\"_\") + \"constructor\"] = supP.constructor; // constructor is not always innumerable\r\n\t\tfor (var n in supP) {\r\n\t\t\tif (subP.hasOwnProperty(n) && (typeof supP[n] == \"function\")) { subP[prefix + n] = supP[n]; }\r\n\t\t}\r\n\t}\r\n\treturn subclass;\r\n};\r\n\r\n//##############################################################################\r\n// proxy.js\r\n//##############################################################################\r\n\r\nthis.createjs = this.createjs||{};\r\n\r\n/**\r\n * Various utilities that the CreateJS Suite uses. Utilities are created as separate files, and will be available on the\r\n * createjs namespace directly.\r\n *\r\n * <h4>Example</h4>\r\n *\r\n *      myObject.addEventListener(\"change\", createjs.proxy(myMethod, scope));\r\n *\r\n * @class Utility Methods\r\n * @main Utility Methods\r\n */\r\n\r\n(function() {\r\n\t\"use strict\";\r\n\r\n\t/**\r\n\t * A function proxy for methods. By default, JavaScript methods do not maintain scope, so passing a method as a\r\n\t * callback will result in the method getting called in the scope of the caller. Using a proxy ensures that the\r\n\t * method gets called in the correct scope.\r\n\t *\r\n\t * Additional arguments can be passed that will be applied to the function when it is called.\r\n\t *\r\n\t * <h4>Example</h4>\r\n\t *\r\n\t *      myObject.addEventListener(\"event\", createjs.proxy(myHandler, this, arg1, arg2));\r\n\t *\r\n\t *      function myHandler(arg1, arg2) {\r\n\t *           // This gets called when myObject.myCallback is executed.\r\n\t *      }\r\n\t *\r\n\t * @method proxy\r\n\t * @param {Function} method The function to call\r\n\t * @param {Object} scope The scope to call the method name on\r\n\t * @param {mixed} [arg] * Arguments that are appended to the callback for additional params.\r\n\t * @public\r\n\t * @static\r\n\t */\r\n\tcreatejs.proxy = function (method, scope) {\r\n\t\tvar aArgs = Array.prototype.slice.call(arguments, 2);\r\n\t\treturn function () {\r\n\t\t\treturn method.apply(scope, Array.prototype.slice.call(arguments, 0).concat(aArgs));\r\n\t\t};\r\n\t}\r\n\r\n}());\r\n\r\n//##############################################################################\r\n// indexOf.js\r\n//##############################################################################\r\n\r\nthis.createjs = this.createjs||{};\r\n\r\n/**\r\n * @class Utility Methods\r\n */\r\n\r\n/**\r\n * Finds the first occurrence of a specified value searchElement in the passed in array, and returns the index of\r\n * that value.  Returns -1 if value is not found.\r\n *\r\n *      var i = createjs.indexOf(myArray, myElementToFind);\r\n *\r\n * @method indexOf\r\n * @param {Array} array Array to search for searchElement\r\n * @param searchElement Element to find in array.\r\n * @return {Number} The first index of searchElement in array.\r\n */\r\ncreatejs.indexOf = function (array, searchElement){\r\n\t\"use strict\";\r\n\r\n\tfor (var i = 0,l=array.length; i < l; i++) {\r\n\t\tif (searchElement === array[i]) {\r\n\t\t\treturn i;\r\n\t\t}\r\n\t}\r\n\treturn -1;\r\n};\r\n\r\n//##############################################################################\r\n// Event.js\r\n//##############################################################################\r\n\r\nthis.createjs = this.createjs||{};\r\n\r\n(function() {\r\n\t\"use strict\";\r\n\r\n// constructor:\r\n\t/**\r\n\t * Contains properties and methods shared by all events for use with\r\n\t * {{#crossLink \"EventDispatcher\"}}{{/crossLink}}.\r\n\t * \r\n\t * Note that Event objects are often reused, so you should never\r\n\t * rely on an event object's state outside of the call stack it was received in.\r\n\t * @class Event\r\n\t * @param {String} type The event type.\r\n\t * @param {Boolean} bubbles Indicates whether the event will bubble through the display list.\r\n\t * @param {Boolean} cancelable Indicates whether the default behaviour of this event can be cancelled.\r\n\t * @constructor\r\n\t **/\r\n\tfunction Event(type, bubbles, cancelable) {\r\n\t\t\r\n\t\r\n\t// public properties:\r\n\t\t/**\r\n\t\t * The type of event.\r\n\t\t * @property type\r\n\t\t * @type String\r\n\t\t **/\r\n\t\tthis.type = type;\r\n\t\r\n\t\t/**\r\n\t\t * The object that generated an event.\r\n\t\t * @property target\r\n\t\t * @type Object\r\n\t\t * @default null\r\n\t\t * @readonly\r\n\t\t*/\r\n\t\tthis.target = null;\r\n\t\r\n\t\t/**\r\n\t\t * The current target that a bubbling event is being dispatched from. For non-bubbling events, this will\r\n\t\t * always be the same as target. For example, if childObj.parent = parentObj, and a bubbling event\r\n\t\t * is generated from childObj, then a listener on parentObj would receive the event with\r\n\t\t * target=childObj (the original target) and currentTarget=parentObj (where the listener was added).\r\n\t\t * @property currentTarget\r\n\t\t * @type Object\r\n\t\t * @default null\r\n\t\t * @readonly\r\n\t\t*/\r\n\t\tthis.currentTarget = null;\r\n\t\r\n\t\t/**\r\n\t\t * For bubbling events, this indicates the current event phase:<OL>\r\n\t\t * \t<LI> capture phase: starting from the top parent to the target</LI>\r\n\t\t * \t<LI> at target phase: currently being dispatched from the target</LI>\r\n\t\t * \t<LI> bubbling phase: from the target to the top parent</LI>\r\n\t\t * </OL>\r\n\t\t * @property eventPhase\r\n\t\t * @type Number\r\n\t\t * @default 0\r\n\t\t * @readonly\r\n\t\t*/\r\n\t\tthis.eventPhase = 0;\r\n\t\r\n\t\t/**\r\n\t\t * Indicates whether the event will bubble through the display list.\r\n\t\t * @property bubbles\r\n\t\t * @type Boolean\r\n\t\t * @default false\r\n\t\t * @readonly\r\n\t\t*/\r\n\t\tthis.bubbles = !!bubbles;\r\n\t\r\n\t\t/**\r\n\t\t * Indicates whether the default behaviour of this event can be cancelled via\r\n\t\t * {{#crossLink \"Event/preventDefault\"}}{{/crossLink}}. This is set via the Event constructor.\r\n\t\t * @property cancelable\r\n\t\t * @type Boolean\r\n\t\t * @default false\r\n\t\t * @readonly\r\n\t\t*/\r\n\t\tthis.cancelable = !!cancelable;\r\n\t\r\n\t\t/**\r\n\t\t * The epoch time at which this event was created.\r\n\t\t * @property timeStamp\r\n\t\t * @type Number\r\n\t\t * @default 0\r\n\t\t * @readonly\r\n\t\t*/\r\n\t\tthis.timeStamp = (new Date()).getTime();\r\n\t\r\n\t\t/**\r\n\t\t * Indicates if {{#crossLink \"Event/preventDefault\"}}{{/crossLink}} has been called\r\n\t\t * on this event.\r\n\t\t * @property defaultPrevented\r\n\t\t * @type Boolean\r\n\t\t * @default false\r\n\t\t * @readonly\r\n\t\t*/\r\n\t\tthis.defaultPrevented = false;\r\n\t\r\n\t\t/**\r\n\t\t * Indicates if {{#crossLink \"Event/stopPropagation\"}}{{/crossLink}} or\r\n\t\t * {{#crossLink \"Event/stopImmediatePropagation\"}}{{/crossLink}} has been called on this event.\r\n\t\t * @property propagationStopped\r\n\t\t * @type Boolean\r\n\t\t * @default false\r\n\t\t * @readonly\r\n\t\t*/\r\n\t\tthis.propagationStopped = false;\r\n\t\r\n\t\t/**\r\n\t\t * Indicates if {{#crossLink \"Event/stopImmediatePropagation\"}}{{/crossLink}} has been called\r\n\t\t * on this event.\r\n\t\t * @property immediatePropagationStopped\r\n\t\t * @type Boolean\r\n\t\t * @default false\r\n\t\t * @readonly\r\n\t\t*/\r\n\t\tthis.immediatePropagationStopped = false;\r\n\t\t\r\n\t\t/**\r\n\t\t * Indicates if {{#crossLink \"Event/remove\"}}{{/crossLink}} has been called on this event.\r\n\t\t * @property removed\r\n\t\t * @type Boolean\r\n\t\t * @default false\r\n\t\t * @readonly\r\n\t\t*/\r\n\t\tthis.removed = false;\r\n\t}\r\n\tvar p = Event.prototype;\r\n\r\n\t/**\r\n\t * <strong>REMOVED</strong>. Removed in favor of using `MySuperClass_constructor`.\r\n\t * See {{#crossLink \"Utility Methods/extend\"}}{{/crossLink}} and {{#crossLink \"Utility Methods/promote\"}}{{/crossLink}}\r\n\t * for details.\r\n\t *\r\n\t * There is an inheritance tutorial distributed with EaselJS in /tutorials/Inheritance.\r\n\t *\r\n\t * @method initialize\r\n\t * @protected\r\n\t * @deprecated\r\n\t */\r\n\t// p.initialize = function() {}; // searchable for devs wondering where it is.\r\n\r\n// public methods:\r\n\t/**\r\n\t * Sets {{#crossLink \"Event/defaultPrevented\"}}{{/crossLink}} to true if the event is cancelable.\r\n\t * Mirrors the DOM level 2 event standard. In general, cancelable events that have `preventDefault()` called will\r\n\t * cancel the default behaviour associated with the event.\r\n\t * @method preventDefault\r\n\t **/\r\n\tp.preventDefault = function() {\r\n\t\tthis.defaultPrevented = this.cancelable&&true;\r\n\t};\r\n\r\n\t/**\r\n\t * Sets {{#crossLink \"Event/propagationStopped\"}}{{/crossLink}} to true.\r\n\t * Mirrors the DOM event standard.\r\n\t * @method stopPropagation\r\n\t **/\r\n\tp.stopPropagation = function() {\r\n\t\tthis.propagationStopped = true;\r\n\t};\r\n\r\n\t/**\r\n\t * Sets {{#crossLink \"Event/propagationStopped\"}}{{/crossLink}} and\r\n\t * {{#crossLink \"Event/immediatePropagationStopped\"}}{{/crossLink}} to true.\r\n\t * Mirrors the DOM event standard.\r\n\t * @method stopImmediatePropagation\r\n\t **/\r\n\tp.stopImmediatePropagation = function() {\r\n\t\tthis.immediatePropagationStopped = this.propagationStopped = true;\r\n\t};\r\n\t\r\n\t/**\r\n\t * Causes the active listener to be removed via removeEventListener();\r\n\t * \r\n\t * \t\tmyBtn.addEventListener(\"click\", function(evt) {\r\n\t * \t\t\t// do stuff...\r\n\t * \t\t\tevt.remove(); // removes this listener.\r\n\t * \t\t});\r\n\t * \r\n\t * @method remove\r\n\t **/\r\n\tp.remove = function() {\r\n\t\tthis.removed = true;\r\n\t};\r\n\t\r\n\t/**\r\n\t * Returns a clone of the Event instance.\r\n\t * @method clone\r\n\t * @return {Event} a clone of the Event instance.\r\n\t **/\r\n\tp.clone = function() {\r\n\t\treturn new Event(this.type, this.bubbles, this.cancelable);\r\n\t};\r\n\t\r\n\t/**\r\n\t * Provides a chainable shortcut method for setting a number of properties on the instance.\r\n\t *\r\n\t * @method set\r\n\t * @param {Object} props A generic object containing properties to copy to the instance.\r\n\t * @return {Event} Returns the instance the method is called on (useful for chaining calls.)\r\n\t * @chainable\r\n\t*/\r\n\tp.set = function(props) {\r\n\t\tfor (var n in props) { this[n] = props[n]; }\r\n\t\treturn this;\r\n\t};\r\n\r\n\t/**\r\n\t * Returns a string representation of this object.\r\n\t * @method toString\r\n\t * @return {String} a string representation of the instance.\r\n\t **/\r\n\tp.toString = function() {\r\n\t\treturn \"[Event (type=\"+this.type+\")]\";\r\n\t};\r\n\r\n\tcreatejs.Event = Event;\r\n}());\r\n\r\n//##############################################################################\r\n// ErrorEvent.js\r\n//##############################################################################\r\n\r\nthis.createjs = this.createjs||{};\r\n\r\n(function() {\r\n\t\"use strict\";\r\n\r\n\t/**\r\n\t * A general error {{#crossLink \"Event\"}}{{/crossLink}}, that describes an error that occurred, as well as any details.\r\n\t * @class ErrorEvent\r\n\t * @param {String} [title] The error title\r\n\t * @param {String} [message] The error description\r\n\t * @param {Object} [data] Additional error data\r\n\t * @constructor\r\n\t */\r\n\tfunction ErrorEvent(title, message, data) {\r\n\t\tthis.Event_constructor(\"error\");\r\n\r\n\t\t/**\r\n\t\t * The short error title, which indicates the type of error that occurred.\r\n\t\t * @property title\r\n\t\t * @type String\r\n\t\t */\r\n\t\tthis.title = title;\r\n\r\n\t\t/**\r\n\t\t * The verbose error message, containing details about the error.\r\n\t\t * @property message\r\n\t\t * @type String\r\n\t\t */\r\n\t\tthis.message = message;\r\n\r\n\t\t/**\r\n\t\t * Additional data attached to an error.\r\n\t\t * @property data\r\n\t\t * @type {Object}\r\n\t\t */\r\n\t\tthis.data = data;\r\n\t}\r\n\r\n\tvar p = createjs.extend(ErrorEvent, createjs.Event);\r\n\r\n\tp.clone = function() {\r\n\t\treturn new createjs.ErrorEvent(this.title, this.message, this.data);\r\n\t};\r\n\r\n\tcreatejs.ErrorEvent = createjs.promote(ErrorEvent, \"Event\");\r\n\r\n}());\r\n\r\n//##############################################################################\r\n// EventDispatcher.js\r\n//##############################################################################\r\n\r\nthis.createjs = this.createjs||{};\r\n\r\n(function() {\r\n\t\"use strict\";\r\n\r\n\r\n// constructor:\r\n\t/**\r\n\t * EventDispatcher provides methods for managing queues of event listeners and dispatching events.\r\n\t *\r\n\t * You can either extend EventDispatcher or mix its methods into an existing prototype or instance by using the\r\n\t * EventDispatcher {{#crossLink \"EventDispatcher/initialize\"}}{{/crossLink}} method.\r\n\t * \r\n\t * Together with the CreateJS Event class, EventDispatcher provides an extended event model that is based on the\r\n\t * DOM Level 2 event model, including addEventListener, removeEventListener, and dispatchEvent. It supports\r\n\t * bubbling / capture, preventDefault, stopPropagation, stopImmediatePropagation, and handleEvent.\r\n\t * \r\n\t * EventDispatcher also exposes a {{#crossLink \"EventDispatcher/on\"}}{{/crossLink}} method, which makes it easier\r\n\t * to create scoped listeners, listeners that only run once, and listeners with associated arbitrary data. The \r\n\t * {{#crossLink \"EventDispatcher/off\"}}{{/crossLink}} method is merely an alias to\r\n\t * {{#crossLink \"EventDispatcher/removeEventListener\"}}{{/crossLink}}.\r\n\t * \r\n\t * Another addition to the DOM Level 2 model is the {{#crossLink \"EventDispatcher/removeAllEventListeners\"}}{{/crossLink}}\r\n\t * method, which can be used to listeners for all events, or listeners for a specific event. The Event object also \r\n\t * includes a {{#crossLink \"Event/remove\"}}{{/crossLink}} method which removes the active listener.\r\n\t *\r\n\t * <h4>Example</h4>\r\n\t * Add EventDispatcher capabilities to the \"MyClass\" class.\r\n\t *\r\n\t *      EventDispatcher.initialize(MyClass.prototype);\r\n\t *\r\n\t * Add an event (see {{#crossLink \"EventDispatcher/addEventListener\"}}{{/crossLink}}).\r\n\t *\r\n\t *      instance.addEventListener(\"eventName\", handlerMethod);\r\n\t *      function handlerMethod(event) {\r\n\t *          console.log(event.target + \" Was Clicked\");\r\n\t *      }\r\n\t *\r\n\t * <b>Maintaining proper scope</b><br />\r\n\t * Scope (ie. \"this\") can be be a challenge with events. Using the {{#crossLink \"EventDispatcher/on\"}}{{/crossLink}}\r\n\t * method to subscribe to events simplifies this.\r\n\t *\r\n\t *      instance.addEventListener(\"click\", function(event) {\r\n\t *          console.log(instance == this); // false, scope is ambiguous.\r\n\t *      });\r\n\t *      \r\n\t *      instance.on(\"click\", function(event) {\r\n\t *          console.log(instance == this); // true, \"on\" uses dispatcher scope by default.\r\n\t *      });\r\n\t * \r\n\t * If you want to use addEventListener instead, you may want to use function.bind() or a similar proxy to manage\r\n\t * scope.\r\n\t *\r\n\t * <b>Browser support</b>\r\n\t * The event model in CreateJS can be used separately from the suite in any project, however the inheritance model\r\n\t * requires modern browsers (IE9+).\r\n\t *      \r\n\t *\r\n\t * @class EventDispatcher\r\n\t * @constructor\r\n\t **/\r\n\tfunction EventDispatcher() {\r\n\t\r\n\t\r\n\t// private properties:\r\n\t\t/**\r\n\t\t * @protected\r\n\t\t * @property _listeners\r\n\t\t * @type Object\r\n\t\t **/\r\n\t\tthis._listeners = null;\r\n\t\t\r\n\t\t/**\r\n\t\t * @protected\r\n\t\t * @property _captureListeners\r\n\t\t * @type Object\r\n\t\t **/\r\n\t\tthis._captureListeners = null;\r\n\t}\r\n\tvar p = EventDispatcher.prototype;\r\n\r\n\t/**\r\n\t * <strong>REMOVED</strong>. Removed in favor of using `MySuperClass_constructor`.\r\n\t * See {{#crossLink \"Utility Methods/extend\"}}{{/crossLink}} and {{#crossLink \"Utility Methods/promote\"}}{{/crossLink}}\r\n\t * for details.\r\n\t *\r\n\t * There is an inheritance tutorial distributed with EaselJS in /tutorials/Inheritance.\r\n\t *\r\n\t * @method initialize\r\n\t * @protected\r\n\t * @deprecated\r\n\t */\r\n\t// p.initialize = function() {}; // searchable for devs wondering where it is.\r\n\r\n\r\n// static public methods:\r\n\t/**\r\n\t * Static initializer to mix EventDispatcher methods into a target object or prototype.\r\n\t * \r\n\t * \t\tEventDispatcher.initialize(MyClass.prototype); // add to the prototype of the class\r\n\t * \t\tEventDispatcher.initialize(myObject); // add to a specific instance\r\n\t * \r\n\t * @method initialize\r\n\t * @static\r\n\t * @param {Object} target The target object to inject EventDispatcher methods into. This can be an instance or a\r\n\t * prototype.\r\n\t **/\r\n\tEventDispatcher.initialize = function(target) {\r\n\t\ttarget.addEventListener = p.addEventListener;\r\n\t\ttarget.on = p.on;\r\n\t\ttarget.removeEventListener = target.off =  p.removeEventListener;\r\n\t\ttarget.removeAllEventListeners = p.removeAllEventListeners;\r\n\t\ttarget.hasEventListener = p.hasEventListener;\r\n\t\ttarget.dispatchEvent = p.dispatchEvent;\r\n\t\ttarget._dispatchEvent = p._dispatchEvent;\r\n\t\ttarget.willTrigger = p.willTrigger;\r\n\t};\r\n\t\r\n\r\n// public methods:\r\n\t/**\r\n\t * Adds the specified event listener. Note that adding multiple listeners to the same function will result in\r\n\t * multiple callbacks getting fired.\r\n\t *\r\n\t * <h4>Example</h4>\r\n\t *\r\n\t *      displayObject.addEventListener(\"click\", handleClick);\r\n\t *      function handleClick(event) {\r\n\t *         // Click happened.\r\n\t *      }\r\n\t *\r\n\t * @method addEventListener\r\n\t * @param {String} type The string type of the event.\r\n\t * @param {Function | Object} listener An object with a handleEvent method, or a function that will be called when\r\n\t * the event is dispatched.\r\n\t * @param {Boolean} [useCapture] For events that bubble, indicates whether to listen for the event in the capture or bubbling/target phase.\r\n\t * @return {Function | Object} Returns the listener for chaining or assignment.\r\n\t **/\r\n\tp.addEventListener = function(type, listener, useCapture) {\r\n\t\tvar listeners;\r\n\t\tif (useCapture) {\r\n\t\t\tlisteners = this._captureListeners = this._captureListeners||{};\r\n\t\t} else {\r\n\t\t\tlisteners = this._listeners = this._listeners||{};\r\n\t\t}\r\n\t\tvar arr = listeners[type];\r\n\t\tif (arr) { this.removeEventListener(type, listener, useCapture); }\r\n\t\tarr = listeners[type]; // remove may have deleted the array\r\n\t\tif (!arr) { listeners[type] = [listener];  }\r\n\t\telse { arr.push(listener); }\r\n\t\treturn listener;\r\n\t};\r\n\t\r\n\t/**\r\n\t * A shortcut method for using addEventListener that makes it easier to specify an execution scope, have a listener\r\n\t * only run once, associate arbitrary data with the listener, and remove the listener.\r\n\t * \r\n\t * This method works by creating an anonymous wrapper function and subscribing it with addEventListener.\r\n\t * The wrapper function is returned for use with `removeEventListener` (or `off`).\r\n\t * \r\n\t * <b>IMPORTANT:</b> To remove a listener added with `on`, you must pass in the returned wrapper function as the listener, or use\r\n\t * {{#crossLink \"Event/remove\"}}{{/crossLink}}. Likewise, each time you call `on` a NEW wrapper function is subscribed, so multiple calls\r\n\t * to `on` with the same params will create multiple listeners.\r\n\t * \r\n\t * <h4>Example</h4>\r\n\t * \r\n\t * \t\tvar listener = myBtn.on(\"click\", handleClick, null, false, {count:3});\r\n\t * \t\tfunction handleClick(evt, data) {\r\n\t * \t\t\tdata.count -= 1;\r\n\t * \t\t\tconsole.log(this == myBtn); // true - scope defaults to the dispatcher\r\n\t * \t\t\tif (data.count == 0) {\r\n\t * \t\t\t\talert(\"clicked 3 times!\");\r\n\t * \t\t\t\tmyBtn.off(\"click\", listener);\r\n\t * \t\t\t\t// alternately: evt.remove();\r\n\t * \t\t\t}\r\n\t * \t\t}\r\n\t * \r\n\t * @method on\r\n\t * @param {String} type The string type of the event.\r\n\t * @param {Function | Object} listener An object with a handleEvent method, or a function that will be called when\r\n\t * the event is dispatched.\r\n\t * @param {Object} [scope] The scope to execute the listener in. Defaults to the dispatcher/currentTarget for function listeners, and to the listener itself for object listeners (ie. using handleEvent).\r\n\t * @param {Boolean} [once=false] If true, the listener will remove itself after the first time it is triggered.\r\n\t * @param {*} [data] Arbitrary data that will be included as the second parameter when the listener is called.\r\n\t * @param {Boolean} [useCapture=false] For events that bubble, indicates whether to listen for the event in the capture or bubbling/target phase.\r\n\t * @return {Function} Returns the anonymous function that was created and assigned as the listener. This is needed to remove the listener later using .removeEventListener.\r\n\t **/\r\n\tp.on = function(type, listener, scope, once, data, useCapture) {\r\n\t\tif (listener.handleEvent) {\r\n\t\t\tscope = scope||listener;\r\n\t\t\tlistener = listener.handleEvent;\r\n\t\t}\r\n\t\tscope = scope||this;\r\n\t\treturn this.addEventListener(type, function(evt) {\r\n\t\t\t\tlistener.call(scope, evt, data);\r\n\t\t\t\tonce&&evt.remove();\r\n\t\t\t}, useCapture);\r\n\t};\r\n\r\n\t/**\r\n\t * Removes the specified event listener.\r\n\t *\r\n\t * <b>Important Note:</b> that you must pass the exact function reference used when the event was added. If a proxy\r\n\t * function, or function closure is used as the callback, the proxy/closure reference must be used - a new proxy or\r\n\t * closure will not work.\r\n\t *\r\n\t * <h4>Example</h4>\r\n\t *\r\n\t *      displayObject.removeEventListener(\"click\", handleClick);\r\n\t *\r\n\t * @method removeEventListener\r\n\t * @param {String} type The string type of the event.\r\n\t * @param {Function | Object} listener The listener function or object.\r\n\t * @param {Boolean} [useCapture] For events that bubble, indicates whether to listen for the event in the capture or bubbling/target phase.\r\n\t **/\r\n\tp.removeEventListener = function(type, listener, useCapture) {\r\n\t\tvar listeners = useCapture ? this._captureListeners : this._listeners;\r\n\t\tif (!listeners) { return; }\r\n\t\tvar arr = listeners[type];\r\n\t\tif (!arr) { return; }\r\n\t\tfor (var i=0,l=arr.length; i<l; i++) {\r\n\t\t\tif (arr[i] == listener) {\r\n\t\t\t\tif (l==1) { delete(listeners[type]); } // allows for faster checks.\r\n\t\t\t\telse { arr.splice(i,1); }\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\t\r\n\t/**\r\n\t * A shortcut to the removeEventListener method, with the same parameters and return value. This is a companion to the\r\n\t * .on method.\r\n\t * \r\n\t * <b>IMPORTANT:</b> To remove a listener added with `on`, you must pass in the returned wrapper function as the listener. See \r\n\t * {{#crossLink \"EventDispatcher/on\"}}{{/crossLink}} for an example.\r\n\t *\r\n\t * @method off\r\n\t * @param {String} type The string type of the event.\r\n\t * @param {Function | Object} listener The listener function or object.\r\n\t * @param {Boolean} [useCapture] For events that bubble, indicates whether to listen for the event in the capture or bubbling/target phase.\r\n\t **/\r\n\tp.off = p.removeEventListener;\r\n\r\n\t/**\r\n\t * Removes all listeners for the specified type, or all listeners of all types.\r\n\t *\r\n\t * <h4>Example</h4>\r\n\t *\r\n\t *      // Remove all listeners\r\n\t *      displayObject.removeAllEventListeners();\r\n\t *\r\n\t *      // Remove all click listeners\r\n\t *      displayObject.removeAllEventListeners(\"click\");\r\n\t *\r\n\t * @method removeAllEventListeners\r\n\t * @param {String} [type] The string type of the event. If omitted, all listeners for all types will be removed.\r\n\t **/\r\n\tp.removeAllEventListeners = function(type) {\r\n\t\tif (!type) { this._listeners = this._captureListeners = null; }\r\n\t\telse {\r\n\t\t\tif (this._listeners) { delete(this._listeners[type]); }\r\n\t\t\tif (this._captureListeners) { delete(this._captureListeners[type]); }\r\n\t\t}\r\n\t};\r\n\r\n\t/**\r\n\t * Dispatches the specified event to all listeners.\r\n\t *\r\n\t * <h4>Example</h4>\r\n\t *\r\n\t *      // Use a string event\r\n\t *      this.dispatchEvent(\"complete\");\r\n\t *\r\n\t *      // Use an Event instance\r\n\t *      var event = new createjs.Event(\"progress\");\r\n\t *      this.dispatchEvent(event);\r\n\t *\r\n\t * @method dispatchEvent\r\n\t * @param {Object | String | Event} eventObj An object with a \"type\" property, or a string type.\r\n\t * While a generic object will work, it is recommended to use a CreateJS Event instance. If a string is used,\r\n\t * dispatchEvent will construct an Event instance if necessary with the specified type. This latter approach can\r\n\t * be used to avoid event object instantiation for non-bubbling events that may not have any listeners.\r\n\t * @param {Boolean} [bubbles] Specifies the `bubbles` value when a string was passed to eventObj.\r\n\t * @param {Boolean} [cancelable] Specifies the `cancelable` value when a string was passed to eventObj.\r\n\t * @return {Boolean} Returns false if `preventDefault()` was called on a cancelable event, true otherwise.\r\n\t **/\r\n\tp.dispatchEvent = function(eventObj, bubbles, cancelable) {\r\n\t\tif (typeof eventObj == \"string\") {\r\n\t\t\t// skip everything if there's no listeners and it doesn't bubble:\r\n\t\t\tvar listeners = this._listeners;\r\n\t\t\tif (!bubbles && (!listeners || !listeners[eventObj])) { return true; }\r\n\t\t\teventObj = new createjs.Event(eventObj, bubbles, cancelable);\r\n\t\t} else if (eventObj.target && eventObj.clone) {\r\n\t\t\t// redispatching an active event object, so clone it:\r\n\t\t\teventObj = eventObj.clone();\r\n\t\t}\r\n\t\t\r\n\t\t// TODO: it would be nice to eliminate this. Maybe in favour of evtObj instanceof Event? Or !!evtObj.createEvent\r\n\t\ttry { eventObj.target = this; } catch (e) {} // try/catch allows redispatching of native events\r\n\r\n\t\tif (!eventObj.bubbles || !this.parent) {\r\n\t\t\tthis._dispatchEvent(eventObj, 2);\r\n\t\t} else {\r\n\t\t\tvar top=this, list=[top];\r\n\t\t\twhile (top.parent) { list.push(top = top.parent); }\r\n\t\t\tvar i, l=list.length;\r\n\r\n\t\t\t// capture & atTarget\r\n\t\t\tfor (i=l-1; i>=0 && !eventObj.propagationStopped; i--) {\r\n\t\t\t\tlist[i]._dispatchEvent(eventObj, 1+(i==0));\r\n\t\t\t}\r\n\t\t\t// bubbling\r\n\t\t\tfor (i=1; i<l && !eventObj.propagationStopped; i++) {\r\n\t\t\t\tlist[i]._dispatchEvent(eventObj, 3);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn !eventObj.defaultPrevented;\r\n\t};\r\n\r\n\t/**\r\n\t * Indicates whether there is at least one listener for the specified event type.\r\n\t * @method hasEventListener\r\n\t * @param {String} type The string type of the event.\r\n\t * @return {Boolean} Returns true if there is at least one listener for the specified event.\r\n\t **/\r\n\tp.hasEventListener = function(type) {\r\n\t\tvar listeners = this._listeners, captureListeners = this._captureListeners;\r\n\t\treturn !!((listeners && listeners[type]) || (captureListeners && captureListeners[type]));\r\n\t};\r\n\t\r\n\t/**\r\n\t * Indicates whether there is at least one listener for the specified event type on this object or any of its\r\n\t * ancestors (parent, parent's parent, etc). A return value of true indicates that if a bubbling event of the\r\n\t * specified type is dispatched from this object, it will trigger at least one listener.\r\n\t * \r\n\t * This is similar to {{#crossLink \"EventDispatcher/hasEventListener\"}}{{/crossLink}}, but it searches the entire\r\n\t * event flow for a listener, not just this object.\r\n\t * @method willTrigger\r\n\t * @param {String} type The string type of the event.\r\n\t * @return {Boolean} Returns `true` if there is at least one listener for the specified event.\r\n\t **/\r\n\tp.willTrigger = function(type) {\r\n\t\tvar o = this;\r\n\t\twhile (o) {\r\n\t\t\tif (o.hasEventListener(type)) { return true; }\r\n\t\t\to = o.parent;\r\n\t\t}\r\n\t\treturn false;\r\n\t};\r\n\r\n\t/**\r\n\t * @method toString\r\n\t * @return {String} a string representation of the instance.\r\n\t **/\r\n\tp.toString = function() {\r\n\t\treturn \"[EventDispatcher]\";\r\n\t};\r\n\r\n\r\n// private methods:\r\n\t/**\r\n\t * @method _dispatchEvent\r\n\t * @param {Object | String | Event} eventObj\r\n\t * @param {Object} eventPhase\r\n\t * @protected\r\n\t **/\r\n\tp._dispatchEvent = function(eventObj, eventPhase) {\r\n\t\tvar l, listeners = (eventPhase==1) ? this._captureListeners : this._listeners;\r\n\t\tif (eventObj && listeners) {\r\n\t\t\tvar arr = listeners[eventObj.type];\r\n\t\t\tif (!arr||!(l=arr.length)) { return; }\r\n\t\t\ttry { eventObj.currentTarget = this; } catch (e) {}\r\n\t\t\ttry { eventObj.eventPhase = eventPhase; } catch (e) {}\r\n\t\t\teventObj.removed = false;\r\n\t\t\t\r\n\t\t\tarr = arr.slice(); // to avoid issues with items being removed or added during the dispatch\r\n\t\t\tfor (var i=0; i<l && !eventObj.immediatePropagationStopped; i++) {\r\n\t\t\t\tvar o = arr[i];\r\n\t\t\t\tif (o.handleEvent) { o.handleEvent(eventObj); }\r\n\t\t\t\telse { o(eventObj); }\r\n\t\t\t\tif (eventObj.removed) {\r\n\t\t\t\t\tthis.off(eventObj.type, o, eventPhase==1);\r\n\t\t\t\t\teventObj.removed = false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\r\n\tcreatejs.EventDispatcher = EventDispatcher;\r\n}());\r\n\r\n//##############################################################################\r\n// ProgressEvent.js\r\n//##############################################################################\r\n\r\nthis.createjs = this.createjs || {};\r\n\r\n(function (scope) {\r\n\t\"use strict\";\r\n\r\n\t// constructor\r\n\t/**\r\n\t * A CreateJS {{#crossLink \"Event\"}}{{/crossLink}} that is dispatched when progress changes.\r\n\t * @class ProgressEvent\r\n\t * @param {Number} loaded The amount that has been loaded. This can be any number relative to the total.\r\n\t * @param {Number} [total=1] The total amount that will load. This will default to 1, so if the `loaded` value is\r\n\t * a percentage (between 0 and 1), it can be omitted.\r\n\t * @todo Consider having this event be a \"fileprogress\" event as well\r\n\t * @constructor\r\n\t */\r\n\tfunction ProgressEvent(loaded, total) {\r\n\t\tthis.Event_constructor(\"progress\");\r\n\r\n\t\t/**\r\n\t\t * The amount that has been loaded (out of a total amount)\r\n\t\t * @property loaded\r\n\t\t * @type {Number}\r\n\t\t */\r\n\t\tthis.loaded = loaded;\r\n\r\n\t\t/**\r\n\t\t * The total \"size\" of the load.\r\n\t\t * @property total\r\n\t\t * @type {Number}\r\n\t\t * @default 1\r\n\t\t */\r\n\t\tthis.total = (total == null) ? 1 : total;\r\n\r\n\t\t/**\r\n\t\t * The percentage (out of 1) that the load has been completed. This is calculated using `loaded/total`.\r\n\t\t * @property progress\r\n\t\t * @type {Number}\r\n\t\t * @default 0\r\n\t\t */\r\n\t\tthis.progress = (total == 0) ? 0 : this.loaded / this.total;\r\n\t};\r\n\r\n\tvar p = createjs.extend(ProgressEvent, createjs.Event);\r\n\r\n\t/**\r\n\t * Returns a clone of the ProgressEvent instance.\r\n\t * @method clone\r\n\t * @return {ProgressEvent} a clone of the Event instance.\r\n\t **/\r\n\tp.clone = function() {\r\n\t\treturn new createjs.ProgressEvent(this.loaded, this.total);\r\n\t};\r\n\r\n\tcreatejs.ProgressEvent = createjs.promote(ProgressEvent, \"Event\");\r\n\r\n}(window));\r\n\r\n//##############################################################################\r\n// json3.js\r\n//##############################################################################\r\n\r\n/*! JSON v3.3.2 | http://bestiejs.github.io/json3 | Copyright 2012-2014, Kit Cambridge | http://kit.mit-license.org */\r\n;(function () {\r\n  // Detect the `define` function exposed by asynchronous module loaders. The\r\n  // strict `define` check is necessary for compatibility with `r.js`.\r\n  var isLoader = typeof define === \"function\" && define.amd;\r\n\r\n  // A set of types used to distinguish objects from primitives.\r\n  var objectTypes = {\r\n    \"function\": true,\r\n    \"object\": true\r\n  };\r\n\r\n  // Detect the `exports` object exposed by CommonJS implementations.\r\n  var freeExports = objectTypes[typeof exports] && exports && !exports.nodeType && exports;\r\n\r\n  // Use the `global` object exposed by Node (including Browserify via\r\n  // `insert-module-globals`), Narwhal, and Ringo as the default context,\r\n  // and the `window` object in browsers. Rhino exports a `global` function\r\n  // instead.\r\n  var root = objectTypes[typeof window] && window || this,\r\n      freeGlobal = freeExports && objectTypes[typeof module] && module && !module.nodeType && typeof global == \"object\" && global;\r\n\r\n  if (freeGlobal && (freeGlobal[\"global\"] === freeGlobal || freeGlobal[\"window\"] === freeGlobal || freeGlobal[\"self\"] === freeGlobal)) {\r\n    root = freeGlobal;\r\n  }\r\n\r\n  // Public: Initializes JSON 3 using the given `context` object, attaching the\r\n  // `stringify` and `parse` functions to the specified `exports` object.\r\n  function runInContext(context, exports) {\r\n    context || (context = root[\"Object\"]());\r\n    exports || (exports = root[\"Object\"]());\r\n\r\n    // Native constructor aliases.\r\n    var Number = context[\"Number\"] || root[\"Number\"],\r\n        String = context[\"String\"] || root[\"String\"],\r\n        Object = context[\"Object\"] || root[\"Object\"],\r\n        Date = context[\"Date\"] || root[\"Date\"],\r\n        SyntaxError = context[\"SyntaxError\"] || root[\"SyntaxError\"],\r\n        TypeError = context[\"TypeError\"] || root[\"TypeError\"],\r\n        Math = context[\"Math\"] || root[\"Math\"],\r\n        nativeJSON = context[\"JSON\"] || root[\"JSON\"];\r\n\r\n    // Delegate to the native `stringify` and `parse` implementations.\r\n    if (typeof nativeJSON == \"object\" && nativeJSON) {\r\n      exports.stringify = nativeJSON.stringify;\r\n      exports.parse = nativeJSON.parse;\r\n    }\r\n\r\n    // Convenience aliases.\r\n    var objectProto = Object.prototype,\r\n        getClass = objectProto.toString,\r\n        isProperty, forEach, undef;\r\n\r\n    // Test the `Date#getUTC*` methods. Based on work by @Yaffle.\r\n    var isExtended = new Date(-3509827334573292);\r\n    try {\r\n      // The `getUTCFullYear`, `Month`, and `Date` methods return nonsensical\r\n      // results for certain dates in Opera >= 10.53.\r\n      isExtended = isExtended.getUTCFullYear() == -109252 && isExtended.getUTCMonth() === 0 && isExtended.getUTCDate() === 1 &&\r\n        // Safari < 2.0.2 stores the internal millisecond time value correctly,\r\n        // but clips the values returned by the date methods to the range of\r\n        // signed 32-bit integers ([-2 ** 31, 2 ** 31 - 1]).\r\n        isExtended.getUTCHours() == 10 && isExtended.getUTCMinutes() == 37 && isExtended.getUTCSeconds() == 6 && isExtended.getUTCMilliseconds() == 708;\r\n    } catch (exception) {}\r\n\r\n    // Internal: Determines whether the native `JSON.stringify` and `parse`\r\n    // implementations are spec-compliant. Based on work by Ken Snyder.\r\n    function has(name) {\r\n      if (has[name] !== undef) {\r\n        // Return cached feature test result.\r\n        return has[name];\r\n      }\r\n      var isSupported;\r\n      if (name == \"bug-string-char-index\") {\r\n        // IE <= 7 doesn't support accessing string characters using square\r\n        // bracket notation. IE 8 only supports this for primitives.\r\n        isSupported = \"a\"[0] != \"a\";\r\n      } else if (name == \"json\") {\r\n        // Indicates whether both `JSON.stringify` and `JSON.parse` are\r\n        // supported.\r\n        isSupported = has(\"json-stringify\") && has(\"json-parse\");\r\n      } else {\r\n        var value, serialized = '{\"a\":[1,true,false,null,\"\\\\u0000\\\\b\\\\n\\\\f\\\\r\\\\t\"]}';\r\n        // Test `JSON.stringify`.\r\n        if (name == \"json-stringify\") {\r\n          var stringify = exports.stringify, stringifySupported = typeof stringify == \"function\" && isExtended;\r\n          if (stringifySupported) {\r\n            // A test function object with a custom `toJSON` method.\r\n            (value = function () {\r\n              return 1;\r\n            }).toJSON = value;\r\n            try {\r\n              stringifySupported =\r\n                // Firefox 3.1b1 and b2 serialize string, number, and boolean\r\n                // primitives as object literals.\r\n                stringify(0) === \"0\" &&\r\n                // FF 3.1b1, b2, and JSON 2 serialize wrapped primitives as object\r\n                // literals.\r\n                stringify(new Number()) === \"0\" &&\r\n                stringify(new String()) == '\"\"' &&\r\n                // FF 3.1b1, 2 throw an error if the value is `null`, `undefined`, or\r\n                // does not define a canonical JSON representation (this applies to\r\n                // objects with `toJSON` properties as well, *unless* they are nested\r\n                // within an object or array).\r\n                stringify(getClass) === undef &&\r\n                // IE 8 serializes `undefined` as `\"undefined\"`. Safari <= 5.1.7 and\r\n                // FF 3.1b3 pass this test.\r\n                stringify(undef) === undef &&\r\n                // Safari <= 5.1.7 and FF 3.1b3 throw `Error`s and `TypeError`s,\r\n                // respectively, if the value is omitted entirely.\r\n                stringify() === undef &&\r\n                // FF 3.1b1, 2 throw an error if the given value is not a number,\r\n                // string, array, object, Boolean, or `null` literal. This applies to\r\n                // objects with custom `toJSON` methods as well, unless they are nested\r\n                // inside object or array literals. YUI 3.0.0b1 ignores custom `toJSON`\r\n                // methods entirely.\r\n                stringify(value) === \"1\" &&\r\n                stringify([value]) == \"[1]\" &&\r\n                // Prototype <= 1.6.1 serializes `[undefined]` as `\"[]\"` instead of\r\n                // `\"[null]\"`.\r\n                stringify([undef]) == \"[null]\" &&\r\n                // YUI 3.0.0b1 fails to serialize `null` literals.\r\n                stringify(null) == \"null\" &&\r\n                // FF 3.1b1, 2 halts serialization if an array contains a function:\r\n                // `[1, true, getClass, 1]` serializes as \"[1,true,],\". FF 3.1b3\r\n                // elides non-JSON values from objects and arrays, unless they\r\n                // define custom `toJSON` methods.\r\n                stringify([undef, getClass, null]) == \"[null,null,null]\" &&\r\n                // Simple serialization test. FF 3.1b1 uses Unicode escape sequences\r\n                // where character escape codes are expected (e.g., `\\b` => `\\u0008`).\r\n                stringify({ \"a\": [value, true, false, null, \"\\x00\\b\\n\\f\\r\\t\"] }) == serialized &&\r\n                // FF 3.1b1 and b2 ignore the `filter` and `width` arguments.\r\n                stringify(null, value) === \"1\" &&\r\n                stringify([1, 2], null, 1) == \"[\\n 1,\\n 2\\n]\" &&\r\n                // JSON 2, Prototype <= 1.7, and older WebKit builds incorrectly\r\n                // serialize extended years.\r\n                stringify(new Date(-8.64e15)) == '\"-271821-04-20T00:00:00.000Z\"' &&\r\n                // The milliseconds are optional in ES 5, but required in 5.1.\r\n                stringify(new Date(8.64e15)) == '\"+275760-09-13T00:00:00.000Z\"' &&\r\n                // Firefox <= 11.0 incorrectly serializes years prior to 0 as negative\r\n                // four-digit years instead of six-digit years. Credits: @Yaffle.\r\n                stringify(new Date(-621987552e5)) == '\"-000001-01-01T00:00:00.000Z\"' &&\r\n                // Safari <= 5.1.5 and Opera >= 10.53 incorrectly serialize millisecond\r\n                // values less than 1000. Credits: @Yaffle.\r\n                stringify(new Date(-1)) == '\"1969-12-31T23:59:59.999Z\"';\r\n            } catch (exception) {\r\n              stringifySupported = false;\r\n            }\r\n          }\r\n          isSupported = stringifySupported;\r\n        }\r\n        // Test `JSON.parse`.\r\n        if (name == \"json-parse\") {\r\n          var parse = exports.parse;\r\n          if (typeof parse == \"function\") {\r\n            try {\r\n              // FF 3.1b1, b2 will throw an exception if a bare literal is provided.\r\n              // Conforming implementations should also coerce the initial argument to\r\n              // a string prior to parsing.\r\n              if (parse(\"0\") === 0 && !parse(false)) {\r\n                // Simple parsing test.\r\n                value = parse(serialized);\r\n                var parseSupported = value[\"a\"].length == 5 && value[\"a\"][0] === 1;\r\n                if (parseSupported) {\r\n                  try {\r\n                    // Safari <= 5.1.2 and FF 3.1b1 allow unescaped tabs in strings.\r\n                    parseSupported = !parse('\"\\t\"');\r\n                  } catch (exception) {}\r\n                  if (parseSupported) {\r\n                    try {\r\n                      // FF 4.0 and 4.0.1 allow leading `+` signs and leading\r\n                      // decimal points. FF 4.0, 4.0.1, and IE 9-10 also allow\r\n                      // certain octal literals.\r\n                      parseSupported = parse(\"01\") !== 1;\r\n                    } catch (exception) {}\r\n                  }\r\n                  if (parseSupported) {\r\n                    try {\r\n                      // FF 4.0, 4.0.1, and Rhino 1.7R3-R4 allow trailing decimal\r\n                      // points. These environments, along with FF 3.1b1 and 2,\r\n                      // also allow trailing commas in JSON objects and arrays.\r\n                      parseSupported = parse(\"1.\") !== 1;\r\n                    } catch (exception) {}\r\n                  }\r\n                }\r\n              }\r\n            } catch (exception) {\r\n              parseSupported = false;\r\n            }\r\n          }\r\n          isSupported = parseSupported;\r\n        }\r\n      }\r\n      return has[name] = !!isSupported;\r\n    }\r\n\r\n    if (!has(\"json\")) {\r\n      // Common `[[Class]]` name aliases.\r\n      var functionClass = \"[object Function]\",\r\n          dateClass = \"[object Date]\",\r\n          numberClass = \"[object Number]\",\r\n          stringClass = \"[object String]\",\r\n          arrayClass = \"[object Array]\",\r\n          booleanClass = \"[object Boolean]\";\r\n\r\n      // Detect incomplete support for accessing string characters by index.\r\n      var charIndexBuggy = has(\"bug-string-char-index\");\r\n\r\n      // Define additional utility methods if the `Date` methods are buggy.\r\n      if (!isExtended) {\r\n        var floor = Math.floor;\r\n        // A mapping between the months of the year and the number of days between\r\n        // January 1st and the first of the respective month.\r\n        var Months = [0, 31, 59, 90, 120, 151, 181, 212, 243, 273, 304, 334];\r\n        // Internal: Calculates the number of days between the Unix epoch and the\r\n        // first day of the given month.\r\n        var getDay = function (year, month) {\r\n          return Months[month] + 365 * (year - 1970) + floor((year - 1969 + (month = +(month > 1))) / 4) - floor((year - 1901 + month) / 100) + floor((year - 1601 + month) / 400);\r\n        };\r\n      }\r\n\r\n      // Internal: Determines if a property is a direct property of the given\r\n      // object. Delegates to the native `Object#hasOwnProperty` method.\r\n      if (!(isProperty = objectProto.hasOwnProperty)) {\r\n        isProperty = function (property) {\r\n          var members = {}, constructor;\r\n          if ((members.__proto__ = null, members.__proto__ = {\r\n            // The *proto* property cannot be set multiple times in recent\r\n            // versions of Firefox and SeaMonkey.\r\n            \"toString\": 1\r\n          }, members).toString != getClass) {\r\n            // Safari <= 2.0.3 doesn't implement `Object#hasOwnProperty`, but\r\n            // supports the mutable *proto* property.\r\n            isProperty = function (property) {\r\n              // Capture and break the object's prototype chain (see section 8.6.2\r\n              // of the ES 5.1 spec). The parenthesized expression prevents an\r\n              // unsafe transformation by the Closure Compiler.\r\n              var original = this.__proto__, result = property in (this.__proto__ = null, this);\r\n              // Restore the original prototype chain.\r\n              this.__proto__ = original;\r\n              return result;\r\n            };\r\n          } else {\r\n            // Capture a reference to the top-level `Object` constructor.\r\n            constructor = members.constructor;\r\n            // Use the `constructor` property to simulate `Object#hasOwnProperty` in\r\n            // other environments.\r\n            isProperty = function (property) {\r\n              var parent = (this.constructor || constructor).prototype;\r\n              return property in this && !(property in parent && this[property] === parent[property]);\r\n            };\r\n          }\r\n          members = null;\r\n          return isProperty.call(this, property);\r\n        };\r\n      }\r\n\r\n      // Internal: Normalizes the `for...in` iteration algorithm across\r\n      // environments. Each enumerated key is yielded to a `callback` function.\r\n      forEach = function (object, callback) {\r\n        var size = 0, Properties, members, property;\r\n\r\n        // Tests for bugs in the current environment's `for...in` algorithm. The\r\n        // `valueOf` property inherits the non-enumerable flag from\r\n        // `Object.prototype` in older versions of IE, Netscape, and Mozilla.\r\n        (Properties = function () {\r\n          this.valueOf = 0;\r\n        }).prototype.valueOf = 0;\r\n\r\n        // Iterate over a new instance of the `Properties` class.\r\n        members = new Properties();\r\n        for (property in members) {\r\n          // Ignore all properties inherited from `Object.prototype`.\r\n          if (isProperty.call(members, property)) {\r\n            size++;\r\n          }\r\n        }\r\n        Properties = members = null;\r\n\r\n        // Normalize the iteration algorithm.\r\n        if (!size) {\r\n          // A list of non-enumerable properties inherited from `Object.prototype`.\r\n          members = [\"valueOf\", \"toString\", \"toLocaleString\", \"propertyIsEnumerable\", \"isPrototypeOf\", \"hasOwnProperty\", \"constructor\"];\r\n          // IE <= 8, Mozilla 1.0, and Netscape 6.2 ignore shadowed non-enumerable\r\n          // properties.\r\n          forEach = function (object, callback) {\r\n            var isFunction = getClass.call(object) == functionClass, property, length;\r\n            var hasProperty = !isFunction && typeof object.constructor != \"function\" && objectTypes[typeof object.hasOwnProperty] && object.hasOwnProperty || isProperty;\r\n            for (property in object) {\r\n              // Gecko <= 1.0 enumerates the `prototype` property of functions under\r\n              // certain conditions; IE does not.\r\n              if (!(isFunction && property == \"prototype\") && hasProperty.call(object, property)) {\r\n                callback(property);\r\n              }\r\n            }\r\n            // Manually invoke the callback for each non-enumerable property.\r\n            for (length = members.length; property = members[--length]; hasProperty.call(object, property) && callback(property));\r\n          };\r\n        } else if (size == 2) {\r\n          // Safari <= 2.0.4 enumerates shadowed properties twice.\r\n          forEach = function (object, callback) {\r\n            // Create a set of iterated properties.\r\n            var members = {}, isFunction = getClass.call(object) == functionClass, property;\r\n            for (property in object) {\r\n              // Store each property name to prevent double enumeration. The\r\n              // `prototype` property of functions is not enumerated due to cross-\r\n              // environment inconsistencies.\r\n              if (!(isFunction && property == \"prototype\") && !isProperty.call(members, property) && (members[property] = 1) && isProperty.call(object, property)) {\r\n                callback(property);\r\n              }\r\n            }\r\n          };\r\n        } else {\r\n          // No bugs detected; use the standard `for...in` algorithm.\r\n          forEach = function (object, callback) {\r\n            var isFunction = getClass.call(object) == functionClass, property, isConstructor;\r\n            for (property in object) {\r\n              if (!(isFunction && property == \"prototype\") && isProperty.call(object, property) && !(isConstructor = property === \"constructor\")) {\r\n                callback(property);\r\n              }\r\n            }\r\n            // Manually invoke the callback for the `constructor` property due to\r\n            // cross-environment inconsistencies.\r\n            if (isConstructor || isProperty.call(object, (property = \"constructor\"))) {\r\n              callback(property);\r\n            }\r\n          };\r\n        }\r\n        return forEach(object, callback);\r\n      };\r\n\r\n      // Public: Serializes a JavaScript `value` as a JSON string. The optional\r\n      // `filter` argument may specify either a function that alters how object and\r\n      // array members are serialized, or an array of strings and numbers that\r\n      // indicates which properties should be serialized. The optional `width`\r\n      // argument may be either a string or number that specifies the indentation\r\n      // level of the output.\r\n      if (!has(\"json-stringify\")) {\r\n        // Internal: A map of control characters and their escaped equivalents.\r\n        var Escapes = {\r\n          92: \"\\\\\\\\\",\r\n          34: '\\\\\"',\r\n          8: \"\\\\b\",\r\n          12: \"\\\\f\",\r\n          10: \"\\\\n\",\r\n          13: \"\\\\r\",\r\n          9: \"\\\\t\"\r\n        };\r\n\r\n        // Internal: Converts `value` into a zero-padded string such that its\r\n        // length is at least equal to `width`. The `width` must be <= 6.\r\n        var leadingZeroes = \"000000\";\r\n        var toPaddedString = function (width, value) {\r\n          // The `|| 0` expression is necessary to work around a bug in\r\n          // Opera <= 7.54u2 where `0 == -0`, but `String(-0) !== \"0\"`.\r\n          return (leadingZeroes + (value || 0)).slice(-width);\r\n        };\r\n\r\n        // Internal: Double-quotes a string `value`, replacing all ASCII control\r\n        // characters (characters with code unit values between 0 and 31) with\r\n        // their escaped equivalents. This is an implementation of the\r\n        // `Quote(value)` operation defined in ES 5.1 section 15.12.3.\r\n        var unicodePrefix = \"\\\\u00\";\r\n        var quote = function (value) {\r\n          var result = '\"', index = 0, length = value.length, useCharIndex = !charIndexBuggy || length > 10;\r\n          var symbols = useCharIndex && (charIndexBuggy ? value.split(\"\") : value);\r\n          for (; index < length; index++) {\r\n            var charCode = value.charCodeAt(index);\r\n            // If the character is a control character, append its Unicode or\r\n            // shorthand escape sequence; otherwise, append the character as-is.\r\n            switch (charCode) {\r\n              case 8: case 9: case 10: case 12: case 13: case 34: case 92:\r\n                result += Escapes[charCode];\r\n                break;\r\n              default:\r\n                if (charCode < 32) {\r\n                  result += unicodePrefix + toPaddedString(2, charCode.toString(16));\r\n                  break;\r\n                }\r\n                result += useCharIndex ? symbols[index] : value.charAt(index);\r\n            }\r\n          }\r\n          return result + '\"';\r\n        };\r\n\r\n        // Internal: Recursively serializes an object. Implements the\r\n        // `Str(key, holder)`, `JO(value)`, and `JA(value)` operations.\r\n        var serialize = function (property, object, callback, properties, whitespace, indentation, stack) {\r\n          var value, className, year, month, date, time, hours, minutes, seconds, milliseconds, results, element, index, length, prefix, result;\r\n          try {\r\n            // Necessary for host object support.\r\n            value = object[property];\r\n          } catch (exception) {}\r\n          if (typeof value == \"object\" && value) {\r\n            className = getClass.call(value);\r\n            if (className == dateClass && !isProperty.call(value, \"toJSON\")) {\r\n              if (value > -1 / 0 && value < 1 / 0) {\r\n                // Dates are serialized according to the `Date#toJSON` method\r\n                // specified in ES 5.1 section 15.9.5.44. See section 15.9.1.15\r\n                // for the ISO 8601 date time string format.\r\n                if (getDay) {\r\n                  // Manually compute the year, month, date, hours, minutes,\r\n                  // seconds, and milliseconds if the `getUTC*` methods are\r\n                  // buggy. Adapted from @Yaffle's `date-shim` project.\r\n                  date = floor(value / 864e5);\r\n                  for (year = floor(date / 365.2425) + 1970 - 1; getDay(year + 1, 0) <= date; year++);\r\n                  for (month = floor((date - getDay(year, 0)) / 30.42); getDay(year, month + 1) <= date; month++);\r\n                  date = 1 + date - getDay(year, month);\r\n                  // The `time` value specifies the time within the day (see ES\r\n                  // 5.1 section 15.9.1.2). The formula `(A % B + B) % B` is used\r\n                  // to compute `A modulo B`, as the `%` operator does not\r\n                  // correspond to the `modulo` operation for negative numbers.\r\n                  time = (value % 864e5 + 864e5) % 864e5;\r\n                  // The hours, minutes, seconds, and milliseconds are obtained by\r\n                  // decomposing the time within the day. See section 15.9.1.10.\r\n                  hours = floor(time / 36e5) % 24;\r\n                  minutes = floor(time / 6e4) % 60;\r\n                  seconds = floor(time / 1e3) % 60;\r\n                  milliseconds = time % 1e3;\r\n                } else {\r\n                  year = value.getUTCFullYear();\r\n                  month = value.getUTCMonth();\r\n                  date = value.getUTCDate();\r\n                  hours = value.getUTCHours();\r\n                  minutes = value.getUTCMinutes();\r\n                  seconds = value.getUTCSeconds();\r\n                  milliseconds = value.getUTCMilliseconds();\r\n                }\r\n                // Serialize extended years correctly.\r\n                value = (year <= 0 || year >= 1e4 ? (year < 0 ? \"-\" : \"+\") + toPaddedString(6, year < 0 ? -year : year) : toPaddedString(4, year)) +\r\n                  \"-\" + toPaddedString(2, month + 1) + \"-\" + toPaddedString(2, date) +\r\n                  // Months, dates, hours, minutes, and seconds should have two\r\n                  // digits; milliseconds should have three.\r\n                  \"T\" + toPaddedString(2, hours) + \":\" + toPaddedString(2, minutes) + \":\" + toPaddedString(2, seconds) +\r\n                  // Milliseconds are optional in ES 5.0, but required in 5.1.\r\n                  \".\" + toPaddedString(3, milliseconds) + \"Z\";\r\n              } else {\r\n                value = null;\r\n              }\r\n            } else if (typeof value.toJSON == \"function\" && ((className != numberClass && className != stringClass && className != arrayClass) || isProperty.call(value, \"toJSON\"))) {\r\n              // Prototype <= 1.6.1 adds non-standard `toJSON` methods to the\r\n              // `Number`, `String`, `Date`, and `Array` prototypes. JSON 3\r\n              // ignores all `toJSON` methods on these objects unless they are\r\n              // defined directly on an instance.\r\n              value = value.toJSON(property);\r\n            }\r\n          }\r\n          if (callback) {\r\n            // If a replacement function was provided, call it to obtain the value\r\n            // for serialization.\r\n            value = callback.call(object, property, value);\r\n          }\r\n          if (value === null) {\r\n            return \"null\";\r\n          }\r\n          className = getClass.call(value);\r\n          if (className == booleanClass) {\r\n            // Booleans are represented literally.\r\n            return \"\" + value;\r\n          } else if (className == numberClass) {\r\n            // JSON numbers must be finite. `Infinity` and `NaN` are serialized as\r\n            // `\"null\"`.\r\n            return value > -1 / 0 && value < 1 / 0 ? \"\" + value : \"null\";\r\n          } else if (className == stringClass) {\r\n            // Strings are double-quoted and escaped.\r\n            return quote(\"\" + value);\r\n          }\r\n          // Recursively serialize objects and arrays.\r\n          if (typeof value == \"object\") {\r\n            // Check for cyclic structures. This is a linear search; performance\r\n            // is inversely proportional to the number of unique nested objects.\r\n            for (length = stack.length; length--;) {\r\n              if (stack[length] === value) {\r\n                // Cyclic structures cannot be serialized by `JSON.stringify`.\r\n                throw TypeError();\r\n              }\r\n            }\r\n            // Add the object to the stack of traversed objects.\r\n            stack.push(value);\r\n            results = [];\r\n            // Save the current indentation level and indent one additional level.\r\n            prefix = indentation;\r\n            indentation += whitespace;\r\n            if (className == arrayClass) {\r\n              // Recursively serialize array elements.\r\n              for (index = 0, length = value.length; index < length; index++) {\r\n                element = serialize(index, value, callback, properties, whitespace, indentation, stack);\r\n                results.push(element === undef ? \"null\" : element);\r\n              }\r\n              result = results.length ? (whitespace ? \"[\\n\" + indentation + results.join(\",\\n\" + indentation) + \"\\n\" + prefix + \"]\" : (\"[\" + results.join(\",\") + \"]\")) : \"[]\";\r\n            } else {\r\n              // Recursively serialize object members. Members are selected from\r\n              // either a user-specified list of property names, or the object\r\n              // itself.\r\n              forEach(properties || value, function (property) {\r\n                var element = serialize(property, value, callback, properties, whitespace, indentation, stack);\r\n                if (element !== undef) {\r\n                  // According to ES 5.1 section 15.12.3: \"If `gap` {whitespace}\r\n                  // is not the empty string, let `member` {quote(property) + \":\"}\r\n                  // be the concatenation of `member` and the `space` character.\"\r\n                  // The \"`space` character\" refers to the literal space\r\n                  // character, not the `space` {width} argument provided to\r\n                  // `JSON.stringify`.\r\n                  results.push(quote(property) + \":\" + (whitespace ? \" \" : \"\") + element);\r\n                }\r\n              });\r\n              result = results.length ? (whitespace ? \"{\\n\" + indentation + results.join(\",\\n\" + indentation) + \"\\n\" + prefix + \"}\" : (\"{\" + results.join(\",\") + \"}\")) : \"{}\";\r\n            }\r\n            // Remove the object from the traversed object stack.\r\n            stack.pop();\r\n            return result;\r\n          }\r\n        };\r\n\r\n        // Public: `JSON.stringify`. See ES 5.1 section 15.12.3.\r\n        exports.stringify = function (source, filter, width) {\r\n          var whitespace, callback, properties, className;\r\n          if (objectTypes[typeof filter] && filter) {\r\n            if ((className = getClass.call(filter)) == functionClass) {\r\n              callback = filter;\r\n            } else if (className == arrayClass) {\r\n              // Convert the property names array into a makeshift set.\r\n              properties = {};\r\n              for (var index = 0, length = filter.length, value; index < length; value = filter[index++], ((className = getClass.call(value)), className == stringClass || className == numberClass) && (properties[value] = 1));\r\n            }\r\n          }\r\n          if (width) {\r\n            if ((className = getClass.call(width)) == numberClass) {\r\n              // Convert the `width` to an integer and create a string containing\r\n              // `width` number of space characters.\r\n              if ((width -= width % 1) > 0) {\r\n                for (whitespace = \"\", width > 10 && (width = 10); whitespace.length < width; whitespace += \" \");\r\n              }\r\n            } else if (className == stringClass) {\r\n              whitespace = width.length <= 10 ? width : width.slice(0, 10);\r\n            }\r\n          }\r\n          // Opera <= 7.54u2 discards the values associated with empty string keys\r\n          // (`\"\"`) only if they are used directly within an object member list\r\n          // (e.g., `!(\"\" in { \"\": 1})`).\r\n          return serialize(\"\", (value = {}, value[\"\"] = source, value), callback, properties, whitespace, \"\", []);\r\n        };\r\n      }\r\n\r\n      // Public: Parses a JSON source string.\r\n      if (!has(\"json-parse\")) {\r\n        var fromCharCode = String.fromCharCode;\r\n\r\n        // Internal: A map of escaped control characters and their unescaped\r\n        // equivalents.\r\n        var Unescapes = {\r\n          92: \"\\\\\",\r\n          34: '\"',\r\n          47: \"/\",\r\n          98: \"\\b\",\r\n          116: \"\\t\",\r\n          110: \"\\n\",\r\n          102: \"\\f\",\r\n          114: \"\\r\"\r\n        };\r\n\r\n        // Internal: Stores the parser state.\r\n        var Index, Source;\r\n\r\n        // Internal: Resets the parser state and throws a `SyntaxError`.\r\n        var abort = function () {\r\n          Index = Source = null;\r\n          throw SyntaxError();\r\n        };\r\n\r\n        // Internal: Returns the next token, or `\"$\"` if the parser has reached\r\n        // the end of the source string. A token may be a string, number, `null`\r\n        // literal, or Boolean literal.\r\n        var lex = function () {\r\n          var source = Source, length = source.length, value, begin, position, isSigned, charCode;\r\n          while (Index < length) {\r\n            charCode = source.charCodeAt(Index);\r\n            switch (charCode) {\r\n              case 9: case 10: case 13: case 32:\r\n                // Skip whitespace tokens, including tabs, carriage returns, line\r\n                // feeds, and space characters.\r\n                Index++;\r\n                break;\r\n              case 123: case 125: case 91: case 93: case 58: case 44:\r\n                // Parse a punctuator token (`{`, `}`, `[`, `]`, `:`, or `,`) at\r\n                // the current position.\r\n                value = charIndexBuggy ? source.charAt(Index) : source[Index];\r\n                Index++;\r\n                return value;\r\n              case 34:\r\n                // `\"` delimits a JSON string; advance to the next character and\r\n                // begin parsing the string. String tokens are prefixed with the\r\n                // sentinel `@` character to distinguish them from punctuators and\r\n                // end-of-string tokens.\r\n                for (value = \"@\", Index++; Index < length;) {\r\n                  charCode = source.charCodeAt(Index);\r\n                  if (charCode < 32) {\r\n                    // Unescaped ASCII control characters (those with a code unit\r\n                    // less than the space character) are not permitted.\r\n                    abort();\r\n                  } else if (charCode == 92) {\r\n                    // A reverse solidus (`\\`) marks the beginning of an escaped\r\n                    // control character (including `\"`, `\\`, and `/`) or Unicode\r\n                    // escape sequence.\r\n                    charCode = source.charCodeAt(++Index);\r\n                    switch (charCode) {\r\n                      case 92: case 34: case 47: case 98: case 116: case 110: case 102: case 114:\r\n                        // Revive escaped control characters.\r\n                        value += Unescapes[charCode];\r\n                        Index++;\r\n                        break;\r\n                      case 117:\r\n                        // `\\u` marks the beginning of a Unicode escape sequence.\r\n                        // Advance to the first character and validate the\r\n                        // four-digit code point.\r\n                        begin = ++Index;\r\n                        for (position = Index + 4; Index < position; Index++) {\r\n                          charCode = source.charCodeAt(Index);\r\n                          // A valid sequence comprises four hexdigits (case-\r\n                          // insensitive) that form a single hexadecimal value.\r\n                          if (!(charCode >= 48 && charCode <= 57 || charCode >= 97 && charCode <= 102 || charCode >= 65 && charCode <= 70)) {\r\n                            // Invalid Unicode escape sequence.\r\n                            abort();\r\n                          }\r\n                        }\r\n                        // Revive the escaped character.\r\n                        value += fromCharCode(\"0x\" + source.slice(begin, Index));\r\n                        break;\r\n                      default:\r\n                        // Invalid escape sequence.\r\n                        abort();\r\n                    }\r\n                  } else {\r\n                    if (charCode == 34) {\r\n                      // An unescaped double-quote character marks the end of the\r\n                      // string.\r\n                      break;\r\n                    }\r\n                    charCode = source.charCodeAt(Index);\r\n                    begin = Index;\r\n                    // Optimize for the common case where a string is valid.\r\n                    while (charCode >= 32 && charCode != 92 && charCode != 34) {\r\n                      charCode = source.charCodeAt(++Index);\r\n                    }\r\n                    // Append the string as-is.\r\n                    value += source.slice(begin, Index);\r\n                  }\r\n                }\r\n                if (source.charCodeAt(Index) == 34) {\r\n                  // Advance to the next character and return the revived string.\r\n                  Index++;\r\n                  return value;\r\n                }\r\n                // Unterminated string.\r\n                abort();\r\n              default:\r\n                // Parse numbers and literals.\r\n                begin = Index;\r\n                // Advance past the negative sign, if one is specified.\r\n                if (charCode == 45) {\r\n                  isSigned = true;\r\n                  charCode = source.charCodeAt(++Index);\r\n                }\r\n                // Parse an integer or floating-point value.\r\n                if (charCode >= 48 && charCode <= 57) {\r\n                  // Leading zeroes are interpreted as octal literals.\r\n                  if (charCode == 48 && ((charCode = source.charCodeAt(Index + 1)), charCode >= 48 && charCode <= 57)) {\r\n                    // Illegal octal literal.\r\n                    abort();\r\n                  }\r\n                  isSigned = false;\r\n                  // Parse the integer component.\r\n                  for (; Index < length && ((charCode = source.charCodeAt(Index)), charCode >= 48 && charCode <= 57); Index++);\r\n                  // Floats cannot contain a leading decimal point; however, this\r\n                  // case is already accounted for by the parser.\r\n                  if (source.charCodeAt(Index) == 46) {\r\n                    position = ++Index;\r\n                    // Parse the decimal component.\r\n                    for (; position < length && ((charCode = source.charCodeAt(position)), charCode >= 48 && charCode <= 57); position++);\r\n                    if (position == Index) {\r\n                      // Illegal trailing decimal.\r\n                      abort();\r\n                    }\r\n                    Index = position;\r\n                  }\r\n                  // Parse exponents. The `e` denoting the exponent is\r\n                  // case-insensitive.\r\n                  charCode = source.charCodeAt(Index);\r\n                  if (charCode == 101 || charCode == 69) {\r\n                    charCode = source.charCodeAt(++Index);\r\n                    // Skip past the sign following the exponent, if one is\r\n                    // specified.\r\n                    if (charCode == 43 || charCode == 45) {\r\n                      Index++;\r\n                    }\r\n                    // Parse the exponential component.\r\n                    for (position = Index; position < length && ((charCode = source.charCodeAt(position)), charCode >= 48 && charCode <= 57); position++);\r\n                    if (position == Index) {\r\n                      // Illegal empty exponent.\r\n                      abort();\r\n                    }\r\n                    Index = position;\r\n                  }\r\n                  // Coerce the parsed value to a JavaScript number.\r\n                  return +source.slice(begin, Index);\r\n                }\r\n                // A negative sign may only precede numbers.\r\n                if (isSigned) {\r\n                  abort();\r\n                }\r\n                // `true`, `false`, and `null` literals.\r\n                if (source.slice(Index, Index + 4) == \"true\") {\r\n                  Index += 4;\r\n                  return true;\r\n                } else if (source.slice(Index, Index + 5) == \"false\") {\r\n                  Index += 5;\r\n                  return false;\r\n                } else if (source.slice(Index, Index + 4) == \"null\") {\r\n                  Index += 4;\r\n                  return null;\r\n                }\r\n                // Unrecognized token.\r\n                abort();\r\n            }\r\n          }\r\n          // Return the sentinel `$` character if the parser has reached the end\r\n          // of the source string.\r\n          return \"$\";\r\n        };\r\n\r\n        // Internal: Parses a JSON `value` token.\r\n        var get = function (value) {\r\n          var results, hasMembers;\r\n          if (value == \"$\") {\r\n            // Unexpected end of input.\r\n            abort();\r\n          }\r\n          if (typeof value == \"string\") {\r\n            if ((charIndexBuggy ? value.charAt(0) : value[0]) == \"@\") {\r\n              // Remove the sentinel `@` character.\r\n              return value.slice(1);\r\n            }\r\n            // Parse object and array literals.\r\n            if (value == \"[\") {\r\n              // Parses a JSON array, returning a new JavaScript array.\r\n              results = [];\r\n              for (;; hasMembers || (hasMembers = true)) {\r\n                value = lex();\r\n                // A closing square bracket marks the end of the array literal.\r\n                if (value == \"]\") {\r\n                  break;\r\n                }\r\n                // If the array literal contains elements, the current token\r\n                // should be a comma separating the previous element from the\r\n                // next.\r\n                if (hasMembers) {\r\n                  if (value == \",\") {\r\n                    value = lex();\r\n                    if (value == \"]\") {\r\n                      // Unexpected trailing `,` in array literal.\r\n                      abort();\r\n                    }\r\n                  } else {\r\n                    // A `,` must separate each array element.\r\n                    abort();\r\n                  }\r\n                }\r\n                // Elisions and leading commas are not permitted.\r\n                if (value == \",\") {\r\n                  abort();\r\n                }\r\n                results.push(get(value));\r\n              }\r\n              return results;\r\n            } else if (value == \"{\") {\r\n              // Parses a JSON object, returning a new JavaScript object.\r\n              results = {};\r\n              for (;; hasMembers || (hasMembers = true)) {\r\n                value = lex();\r\n                // A closing curly brace marks the end of the object literal.\r\n                if (value == \"}\") {\r\n                  break;\r\n                }\r\n                // If the object literal contains members, the current token\r\n                // should be a comma separator.\r\n                if (hasMembers) {\r\n                  if (value == \",\") {\r\n                    value = lex();\r\n                    if (value == \"}\") {\r\n                      // Unexpected trailing `,` in object literal.\r\n                      abort();\r\n                    }\r\n                  } else {\r\n                    // A `,` must separate each object member.\r\n                    abort();\r\n                  }\r\n                }\r\n                // Leading commas are not permitted, object property names must be\r\n                // double-quoted strings, and a `:` must separate each property\r\n                // name and value.\r\n                if (value == \",\" || typeof value != \"string\" || (charIndexBuggy ? value.charAt(0) : value[0]) != \"@\" || lex() != \":\") {\r\n                  abort();\r\n                }\r\n                results[value.slice(1)] = get(lex());\r\n              }\r\n              return results;\r\n            }\r\n            // Unexpected token encountered.\r\n            abort();\r\n          }\r\n          return value;\r\n        };\r\n\r\n        // Internal: Updates a traversed object member.\r\n        var update = function (source, property, callback) {\r\n          var element = walk(source, property, callback);\r\n          if (element === undef) {\r\n            delete source[property];\r\n          } else {\r\n            source[property] = element;\r\n          }\r\n        };\r\n\r\n        // Internal: Recursively traverses a parsed JSON object, invoking the\r\n        // `callback` function for each value. This is an implementation of the\r\n        // `Walk(holder, name)` operation defined in ES 5.1 section 15.12.2.\r\n        var walk = function (source, property, callback) {\r\n          var value = source[property], length;\r\n          if (typeof value == \"object\" && value) {\r\n            // `forEach` can't be used to traverse an array in Opera <= 8.54\r\n            // because its `Object#hasOwnProperty` implementation returns `false`\r\n            // for array indices (e.g., `![1, 2, 3].hasOwnProperty(\"0\")`).\r\n            if (getClass.call(value) == arrayClass) {\r\n              for (length = value.length; length--;) {\r\n                update(value, length, callback);\r\n              }\r\n            } else {\r\n              forEach(value, function (property) {\r\n                update(value, property, callback);\r\n              });\r\n            }\r\n          }\r\n          return callback.call(source, property, value);\r\n        };\r\n\r\n        // Public: `JSON.parse`. See ES 5.1 section 15.12.2.\r\n        exports.parse = function (source, callback) {\r\n          var result, value;\r\n          Index = 0;\r\n          Source = \"\" + source;\r\n          result = get(lex());\r\n          // If a JSON string contains multiple tokens, it is invalid.\r\n          if (lex() != \"$\") {\r\n            abort();\r\n          }\r\n          // Reset the parser state.\r\n          Index = Source = null;\r\n          return callback && getClass.call(callback) == functionClass ? walk((value = {}, value[\"\"] = result, value), \"\", callback) : result;\r\n        };\r\n      }\r\n    }\r\n\r\n    exports[\"runInContext\"] = runInContext;\r\n    return exports;\r\n  }\r\n\r\n  if (freeExports && !isLoader) {\r\n    // Export for CommonJS environments.\r\n    runInContext(root, freeExports);\r\n  } else {\r\n    // Export for web browsers and JavaScript engines.\r\n    var nativeJSON = root.JSON,\r\n        previousJSON = root[\"JSON3\"],\r\n        isRestored = false;\r\n\r\n    var JSON3 = runInContext(root, (root[\"JSON3\"] = {\r\n      // Public: Restores the original value of the global `JSON` object and\r\n      // returns a reference to the `JSON3` object.\r\n      \"noConflict\": function () {\r\n        if (!isRestored) {\r\n          isRestored = true;\r\n          root.JSON = nativeJSON;\r\n          root[\"JSON3\"] = previousJSON;\r\n          nativeJSON = previousJSON = null;\r\n        }\r\n        return JSON3;\r\n      }\r\n    }));\r\n\r\n    root.JSON = {\r\n      \"parse\": JSON3.parse,\r\n      \"stringify\": JSON3.stringify\r\n    };\r\n  }\r\n\r\n  // Export for asynchronous module loaders.\r\n  if (isLoader) {\r\n    define(function () {\r\n      return JSON3;\r\n    });\r\n  }\r\n}).call(this);\r\n\r\n//##############################################################################\r\n// DomUtils.js\r\n//##############################################################################\r\n\r\n(function () {\r\n\r\n\t/**\r\n\t * A few utilities for interacting with the dom.\r\n\t * @class DomUtils\r\n\t */\r\n\tvar s = {};\r\n\r\n\ts.appendToHead = function (el) {\r\n\t\ts.getHead().appendChild(el)\r\n\t}\r\n\r\n\ts.getHead = function () {\r\n\t\treturn document.head || document.getElementsByTagName(\"head\")[0];\r\n\t}\r\n\r\n\ts.getBody = function () {\r\n\t\treturn document.body || document.getElementsByTagName(\"body\")[0];\r\n\t}\r\n\r\n\tcreatejs.DomUtils = s;\r\n\r\n}());\r\n\r\n//##############################################################################\r\n// DataUtils.js\r\n//##############################################################################\r\n\r\n(function () {\r\n\r\n\t/**\r\n\t * A few data utilities for formatting different data types.\r\n\t * @class DataUtils\r\n\t */\r\n\tvar s = {};\r\n\r\n\t// static methods\r\n\t/**\r\n\t * Parse XML using the DOM. This is required when preloading XML or SVG.\r\n\t * @method parseXML\r\n\t * @param {String} text The raw text or XML that is loaded by XHR.\r\n\t * @param {String} type The mime type of the XML. Use \"text/xml\" for XML, and  \"image/svg+xml\" for SVG parsing.\r\n\t * @return {XML} An XML document\r\n\t * @static\r\n\t */\r\n\ts.parseXML = function (text, type) {\r\n\t\tvar xml = null;\r\n\t\t// CocoonJS does not support XML parsing with either method.\r\n\r\n\t\t// Most browsers will use DOMParser\r\n\t\t// IE fails on certain SVG files, so we have a fallback below.\r\n\t\ttry {\r\n\t\t\tif (window.DOMParser) {\r\n\t\t\t\tvar parser = new DOMParser();\r\n\t\t\t\txml = parser.parseFromString(text, type);\r\n\t\t\t}\r\n\t\t} catch (e) {\r\n\t\t}\r\n\r\n\t\t// Fallback for IE support.\r\n\t\tif (!xml) {\r\n\t\t\ttry {\r\n\t\t\t\txml = new ActiveXObject(\"Microsoft.XMLDOM\");\r\n\t\t\t\txml.async = false;\r\n\t\t\t\txml.loadXML(text);\r\n\t\t\t} catch (e) {\r\n\t\t\t\txml = null;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn xml;\r\n\t};\r\n\r\n\t/**\r\n\t * Parse a string into an Object.\r\n\t * @method parseJSON\r\n\t * @param {String} value The loaded JSON string\r\n\t * @returns {Object} A JavaScript object.\r\n\t */\r\n\ts.parseJSON = function (value) {\r\n\t\tif (value == null) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\ttry {\r\n\t\t\treturn JSON.parse(value);\r\n\t\t} catch (e) {\r\n\t\t\t// TODO; Handle this with a custom error?\r\n\t\t\tthrow e;\r\n\t\t}\r\n\t};\r\n\r\n\tcreatejs.DataUtils = s;\r\n\r\n}());\r\n\r\n//##############################################################################\r\n// LoadItem.js\r\n//##############################################################################\r\n\r\nthis.createjs = this.createjs || {};\r\n\r\n(function () {\r\n\t\"use strict\";\r\n\r\n\t/**\r\n\t * All loaders accept an item containing the properties defined in this class. If a raw object is passed instead,\r\n\t * it will not be affected, but it must contain at least a {{#crossLink \"src:property\"}}{{/crossLink}} property. A\r\n\t * string path or HTML tag is also acceptable, but it will be automatically converted to a LoadItem using the\r\n\t * {{#crossLink \"create\"}}{{/crossLink}} method by {{#crossLink \"AbstractLoader\"}}{{/crossLink}}\r\n\t * @class LoadItem\r\n\t * @constructor\r\n\t * @since 0.6.0\r\n\t */\r\n\tfunction LoadItem() {\r\n\t\t/**\r\n\t\t * The source of the file that is being loaded. This property is <b>required</b>. The source can either be a\r\n\t\t * string (recommended), or an HTML tag.\r\n\t\t * This can also be an object, but in that case it has to include a type and be handled by a plugin.\r\n\t\t * @property src\r\n\t\t * @type {String}\r\n\t\t * @default null\r\n\t\t */\r\n\t\tthis.src = null;\r\n\r\n\t\t/**\r\n\t\t * The type file that is being loaded. The type of the file is usually inferred by the extension, but can also\r\n\t\t * be set manually. This is helpful in cases where a file does not have an extension.\r\n\t\t * @property type\r\n\t\t * @type {String}\r\n\t\t * @default null\r\n\t\t */\r\n\t\tthis.type = null;\r\n\r\n\t\t/**\r\n\t\t * A string identifier which can be used to reference the loaded object. If none is provided, this will be\r\n\t\t * automatically set to the {{#crossLink \"src:property\"}}{{/crossLink}}.\r\n\t\t * @property id\r\n\t\t * @type {String}\r\n\t\t * @default null\r\n\t\t */\r\n\t\tthis.id = null;\r\n\r\n\t\t/**\r\n\t\t * Determines if a manifest will maintain the order of this item, in relation to other items in the manifest\r\n\t\t * that have also set the `maintainOrder` property to `true`. This only applies when the max connections has\r\n\t\t * been set above 1 (using {{#crossLink \"LoadQueue/setMaxConnections\"}}{{/crossLink}}). Everything with this\r\n\t\t * property set to `false` will finish as it is loaded. Ordered items are combined with script tags loading in\r\n\t\t * order when {{#crossLink \"LoadQueue/maintainScriptOrder:property\"}}{{/crossLink}} is set to `true`.\r\n\t\t * @property maintainOrder\r\n\t\t * @type {Boolean}\r\n\t\t * @default false\r\n\t\t */\r\n\t\tthis.maintainOrder = false;\r\n\r\n\t\t/**\r\n\t\t * A callback used by JSONP requests that defines what global method to call when the JSONP content is loaded.\r\n\t\t * @property callback\r\n\t\t * @type {String}\r\n\t\t * @default null\r\n\t\t */\r\n\t\tthis.callback = null;\r\n\r\n\t\t/**\r\n\t\t * An arbitrary data object, which is included with the loaded object.\r\n\t\t * @property data\r\n\t\t * @type {Object}\r\n\t\t * @default null\r\n\t\t */\r\n\t\tthis.data = null;\r\n\r\n\t\t/**\r\n\t\t * The request method used for HTTP calls. Both {{#crossLink \"AbstractLoader/GET:property\"}}{{/crossLink}} or\r\n\t\t * {{#crossLink \"AbstractLoader/POST:property\"}}{{/crossLink}} request types are supported, and are defined as\r\n\t\t * constants on {{#crossLink \"AbstractLoader\"}}{{/crossLink}}.\r\n\t\t * @property method\r\n\t\t * @type {String}\r\n\t\t * @default get\r\n\t\t */\r\n\t\tthis.method = createjs.LoadItem.GET;\r\n\r\n\t\t/**\r\n\t\t * An object hash of name/value pairs to send to the server.\r\n\t\t * @property values\r\n\t\t * @type {Object}\r\n\t\t * @default null\r\n\t\t */\r\n\t\tthis.values = null;\r\n\r\n\t\t/**\r\n\t\t * An object hash of headers to attach to an XHR request. PreloadJS will automatically attach some default\r\n\t\t * headers when required, including \"Origin\", \"Content-Type\", and \"X-Requested-With\". You may override the\r\n\t\t * default headers by including them in your headers object.\r\n\t\t * @property headers\r\n\t\t * @type {Object}\r\n\t\t * @default null\r\n\t\t */\r\n\t\tthis.headers = null;\r\n\r\n\t\t/**\r\n\t\t * Enable credentials for XHR requests.\r\n\t\t * @property withCredentials\r\n\t\t * @type {Boolean}\r\n\t\t * @default false\r\n\t\t */\r\n\t\tthis.withCredentials = false;\r\n\r\n\t\t/**\r\n\t\t * Set the mime type of XHR-based requests. This is automatically set to \"text/plain; charset=utf-8\" for text\r\n\t\t * based files (json, xml, text, css, js).\r\n\t\t * @property mimeType\r\n\t\t * @type {String}\r\n\t\t * @default null\r\n\t\t */\r\n\t\tthis.mimeType = null;\r\n\r\n\t\t/**\r\n\t\t * Sets the crossOrigin attribute for CORS-enabled images loading cross-domain.\r\n\t\t * @property crossOrigin\r\n\t\t * @type {boolean}\r\n\t\t * @default Anonymous\r\n\t\t */\r\n\t\tthis.crossOrigin = null;\r\n\r\n\t\t/**\r\n\t\t * The duration in milliseconds to wait before a request times out. This only applies to tag-based and and XHR\r\n\t\t * (level one) loading, as XHR (level 2) provides its own timeout event.\r\n\t\t * @property loadTimeout\r\n\t\t * @type {Number}\r\n\t\t * @default 8000 (8 seconds)\r\n\t\t */\r\n\t\tthis.loadTimeout = s.LOAD_TIMEOUT_DEFAULT;\r\n\t};\r\n\r\n\tvar p = LoadItem.prototype = {};\r\n\tvar s = LoadItem;\r\n\r\n\t/**\r\n\t * Default duration in milliseconds to wait before a request times out. This only applies to tag-based and and XHR\r\n\t * (level one) loading, as XHR (level 2) provides its own timeout event.\r\n\t * @property LOAD_TIMEOUT_DEFAULT\r\n\t * @type {number}\r\n\t * @static\r\n\t */\r\n\ts.LOAD_TIMEOUT_DEFAULT = 8000;\r\n\r\n\t/**\r\n\t * Create a LoadItem.\r\n\t * <ul>\r\n\t *     <li>String-based items are converted to a LoadItem with a populated {{#crossLink \"src:property\"}}{{/crossLink}}.</li>\r\n\t *     <li>LoadItem instances are returned as-is</li>\r\n\t *     <li>Objects are returned with any needed properties added</li>\r\n\t * </ul>\r\n\t * @method create\r\n\t * @param {LoadItem|String|Object} value The load item value\r\n\t * @returns {LoadItem|Object}\r\n\t * @static\r\n\t */\r\n\ts.create = function (value) {\r\n\t\tif (typeof value == \"string\") {\r\n\t\t\tvar item = new LoadItem();\r\n\t\t\titem.src = value;\r\n\t\t\treturn item;\r\n\t\t} else if (value instanceof s) {\r\n\t\t\treturn value;\r\n\t\t} else if (value instanceof Object && value.src) {\r\n\t\t\tif (value.loadTimeout == null) {\r\n\t\t\t\tvalue.loadTimeout = s.LOAD_TIMEOUT_DEFAULT;\r\n\t\t\t}\r\n\t\t\treturn value;\r\n\t\t} else {\r\n\t\t\tthrow new Error(\"Type not recognized.\");\r\n\t\t}\r\n\t};\r\n\r\n\t/**\r\n\t * Provides a chainable shortcut method for setting a number of properties on the instance.\r\n\t *\r\n\t * <h4>Example</h4>\r\n\t *\r\n\t *      var loadItem = new createjs.LoadItem().set({src:\"image.png\", maintainOrder:true});\r\n\t *\r\n\t * @method set\r\n\t * @param {Object} props A generic object containing properties to copy to the LoadItem instance.\r\n\t * @return {LoadItem} Returns the instance the method is called on (useful for chaining calls.)\r\n\t*/\r\n\tp.set = function(props) {\r\n\t\tfor (var n in props) { this[n] = props[n]; }\r\n\t\treturn this;\r\n\t};\r\n\r\n\tcreatejs.LoadItem = s;\r\n\r\n}());\r\n\r\n//##############################################################################\r\n// RequestUtils.js\r\n//##############################################################################\r\n\r\n(function () {\r\n\r\n\t/**\r\n\t * Utilities that assist with parsing load items, and determining file types, etc.\r\n\t * @class RequestUtils\r\n\t */\r\n\tvar s = {};\r\n\r\n\t/**\r\n\t * The Regular Expression used to test file URLS for an absolute path.\r\n\t * @property ABSOLUTE_PATH\r\n\t * @type {RegExp}\r\n\t * @static\r\n\t */\r\n\ts.ABSOLUTE_PATT = /^(?:\\w+:)?\\/{2}/i;\r\n\r\n\t/**\r\n\t * The Regular Expression used to test file URLS for a relative path.\r\n\t * @property RELATIVE_PATH\r\n\t * @type {RegExp}\r\n\t * @static\r\n\t */\r\n\ts.RELATIVE_PATT = (/^[./]*?\\//i);\r\n\r\n\t/**\r\n\t * The Regular Expression used to test file URLS for an extension. Note that URIs must already have the query string\r\n\t * removed.\r\n\t * @property EXTENSION_PATT\r\n\t * @type {RegExp}\r\n\t * @static\r\n\t */\r\n\ts.EXTENSION_PATT = /\\/?[^/]+\\.(\\w{1,5})$/i;\r\n\r\n\t/**\r\n\t * Parse a file path to determine the information we need to work with it. Currently, PreloadJS needs to know:\r\n\t * <ul>\r\n\t *     <li>If the path is absolute. Absolute paths start with a protocol (such as `http://`, `file://`, or\r\n\t *     `//networkPath`)</li>\r\n\t *     <li>If the path is relative. Relative paths start with `../` or `/path` (or similar)</li>\r\n\t *     <li>The file extension. This is determined by the filename with an extension. Query strings are dropped, and\r\n\t *     the file path is expected to follow the format `name.ext`.</li>\r\n\t * </ul>\r\n\t * @method parseURI\r\n\t * @param {String} path\r\n\t * @returns {Object} An Object with an `absolute` and `relative` Boolean values, as well as an optional 'extension`\r\n\t * property, which is the lowercase extension.\r\n\t * @static\r\n\t */\r\n\ts.parseURI = function (path) {\r\n\t\tvar info = {absolute: false, relative: false};\r\n\t\tif (path == null) { return info; }\r\n\r\n\t\t// Drop the query string\r\n\t\tvar queryIndex = path.indexOf(\"?\");\r\n\t\tif (queryIndex > -1) {\r\n\t\t\tpath = path.substr(0, queryIndex);\r\n\t\t}\r\n\r\n\t\t// Absolute\r\n\t\tvar match;\r\n\t\tif (s.ABSOLUTE_PATT.test(path)) {\r\n\t\t\tinfo.absolute = true;\r\n\r\n\t\t\t// Relative\r\n\t\t} else if (s.RELATIVE_PATT.test(path)) {\r\n\t\t\tinfo.relative = true;\r\n\t\t}\r\n\r\n\t\t// Extension\r\n\t\tif (match = path.match(s.EXTENSION_PATT)) {\r\n\t\t\tinfo.extension = match[1].toLowerCase();\r\n\t\t}\r\n\t\treturn info;\r\n\t};\r\n\r\n\t/**\r\n\t * Formats an object into a query string for either a POST or GET request.\r\n\t * @method formatQueryString\r\n\t * @param {Object} data The data to convert to a query string.\r\n\t * @param {Array} [query] Existing name/value pairs to append on to this query.\r\n\t * @static\r\n\t */\r\n\ts.formatQueryString = function (data, query) {\r\n\t\tif (data == null) {\r\n\t\t\tthrow new Error('You must specify data.');\r\n\t\t}\r\n\t\tvar params = [];\r\n\t\tfor (var n in data) {\r\n\t\t\tparams.push(n + '=' + escape(data[n]));\r\n\t\t}\r\n\t\tif (query) {\r\n\t\t\tparams = params.concat(query);\r\n\t\t}\r\n\t\treturn params.join('&');\r\n\t};\r\n\r\n\t/**\r\n\t * A utility method that builds a file path using a source and a data object, and formats it into a new path.\r\n\t * @method buildPath\r\n\t * @param {String} src The source path to add values to.\r\n\t * @param {Object} [data] Object used to append values to this request as a query string. Existing parameters on the\r\n\t * path will be preserved.\r\n\t * @returns {string} A formatted string that contains the path and the supplied parameters.\r\n\t * @static\r\n\t */\r\n\ts.buildPath = function (src, data) {\r\n\t\tif (data == null) {\r\n\t\t\treturn src;\r\n\t\t}\r\n\r\n\t\tvar query = [];\r\n\t\tvar idx = src.indexOf('?');\r\n\r\n\t\tif (idx != -1) {\r\n\t\t\tvar q = src.slice(idx + 1);\r\n\t\t\tquery = query.concat(q.split('&'));\r\n\t\t}\r\n\r\n\t\tif (idx != -1) {\r\n\t\t\treturn src.slice(0, idx) + '?' + this.formatQueryString(data, query);\r\n\t\t} else {\r\n\t\t\treturn src + '?' + this.formatQueryString(data, query);\r\n\t\t}\r\n\t};\r\n\r\n\t/**\r\n\t * @method isCrossDomain\r\n\t * @param {LoadItem|Object} item A load item with a `src` property.\r\n\t * @return {Boolean} If the load item is loading from a different domain than the current location.\r\n\t * @static\r\n\t */\r\n\ts.isCrossDomain = function (item) {\r\n\t\tvar target = document.createElement(\"a\");\r\n\t\ttarget.href = item.src;\r\n\r\n\t\tvar host = document.createElement(\"a\");\r\n\t\thost.href = location.href;\r\n\r\n\t\tvar crossdomain = (target.hostname != \"\") &&\r\n\t\t\t\t\t\t  (target.port != host.port ||\r\n\t\t\t\t\t\t   target.protocol != host.protocol ||\r\n\t\t\t\t\t\t   target.hostname != host.hostname);\r\n\t\treturn crossdomain;\r\n\t};\r\n\r\n\t/**\r\n\t * @method isLocal\r\n\t * @param {LoadItem|Object} item A load item with a `src` property\r\n\t * @return {Boolean} If the load item is loading from the \"file:\" protocol. Assume that the host must be local as\r\n\t * well.\r\n\t * @static\r\n\t */\r\n\ts.isLocal = function (item) {\r\n\t\tvar target = document.createElement(\"a\");\r\n\t\ttarget.href = item.src;\r\n\t\treturn target.hostname == \"\" && target.protocol == \"file:\";\r\n\t};\r\n\r\n\t/**\r\n\t * Determine if a specific type should be loaded as a binary file. Currently, only images and items marked\r\n\t * specifically as \"binary\" are loaded as binary. Note that audio is <b>not</b> a binary type, as we can not play\r\n\t * back using an audio tag if it is loaded as binary. Plugins can change the item type to binary to ensure they get\r\n\t * a binary result to work with. Binary files are loaded using XHR2. Types are defined as static constants on\r\n\t * {{#crossLink \"AbstractLoader\"}}{{/crossLink}}.\r\n\t * @method isBinary\r\n\t * @param {String} type The item type.\r\n\t * @return {Boolean} If the specified type is binary.\r\n\t * @static\r\n\t */\r\n\ts.isBinary = function (type) {\r\n\t\tswitch (type) {\r\n\t\t\tcase createjs.AbstractLoader.IMAGE:\r\n\t\t\tcase createjs.AbstractLoader.BINARY:\r\n\t\t\t\treturn true;\r\n\t\t\tdefault:\r\n\t\t\t\treturn false;\r\n\t\t}\r\n\t};\r\n\r\n\t/**\r\n\t * Check if item is a valid HTMLImageElement\r\n\t * @method isImageTag\r\n\t * @param {Object} item\r\n\t * @returns {Boolean}\r\n\t * @static\r\n\t */\r\n\ts.isImageTag = function(item) {\r\n\t\treturn item instanceof HTMLImageElement;\r\n\t};\r\n\r\n\t/**\r\n\t * Check if item is a valid HTMLAudioElement\r\n\t * @method isAudioTag\r\n\t * @param {Object} item\r\n\t * @returns {Boolean}\r\n\t * @static\r\n\t */\r\n\ts.isAudioTag = function(item) {\r\n\t\tif (window.HTMLAudioElement) {\r\n\t\t\treturn item instanceof HTMLAudioElement;\r\n\t\t} else {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t};\r\n\r\n\t/**\r\n\t * Check if item is a valid HTMLVideoElement\r\n\t * @method isVideoTag\r\n\t * @param {Object} item\r\n\t * @returns {Boolean}\r\n\t * @static\r\n\t */\r\n\ts.isVideoTag = function(item) {\r\n\t\tif (window.HTMLVideoElement) {\r\n\t\t\treturn item instanceof HTMLVideoElement;\r\n\t\t} else {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t};\r\n\r\n\t/**\r\n\t * Determine if a specific type is a text-based asset, and should be loaded as UTF-8.\r\n\t * @method isText\r\n\t * @param {String} type The item type.\r\n\t * @return {Boolean} If the specified type is text.\r\n\t * @static\r\n\t */\r\n\ts.isText = function (type) {\r\n\t\tswitch (type) {\r\n\t\t\tcase createjs.AbstractLoader.TEXT:\r\n\t\t\tcase createjs.AbstractLoader.JSON:\r\n\t\t\tcase createjs.AbstractLoader.MANIFEST:\r\n\t\t\tcase createjs.AbstractLoader.XML:\r\n\t\t\tcase createjs.AbstractLoader.CSS:\r\n\t\t\tcase createjs.AbstractLoader.SVG:\r\n\t\t\tcase createjs.AbstractLoader.JAVASCRIPT:\r\n\t\t\tcase createjs.AbstractLoader.SPRITESHEET:\r\n\t\t\t\treturn true;\r\n\t\t\tdefault:\r\n\t\t\t\treturn false;\r\n\t\t}\r\n\t};\r\n\r\n\t/**\r\n\t * Determine the type of the object using common extensions. Note that the type can be passed in with the load item\r\n\t * if it is an unusual extension.\r\n\t * @method getTypeByExtension\r\n\t * @param {String} extension The file extension to use to determine the load type.\r\n\t * @return {String} The determined load type (for example, <code>AbstractLoader.IMAGE</code>). Will return `null` if\r\n\t * the type can not be determined by the extension.\r\n\t * @static\r\n\t */\r\n\ts.getTypeByExtension = function (extension) {\r\n\t\tif (extension == null) {\r\n\t\t\treturn createjs.AbstractLoader.TEXT;\r\n\t\t}\r\n\r\n\t\tswitch (extension.toLowerCase()) {\r\n\t\t\tcase \"jpeg\":\r\n\t\t\tcase \"jpg\":\r\n\t\t\tcase \"gif\":\r\n\t\t\tcase \"png\":\r\n\t\t\tcase \"webp\":\r\n\t\t\tcase \"bmp\":\r\n\t\t\t\treturn createjs.AbstractLoader.IMAGE;\r\n\t\t\tcase \"ogg\":\r\n\t\t\tcase \"mp3\":\r\n\t\t\tcase \"webm\":\r\n\t\t\t\treturn createjs.AbstractLoader.SOUND;\r\n\t\t\tcase \"mp4\":\r\n\t\t\tcase \"webm\":\r\n\t\t\tcase \"ts\":\r\n\t\t\t\treturn createjs.AbstractLoader.VIDEO;\r\n\t\t\tcase \"json\":\r\n\t\t\t\treturn createjs.AbstractLoader.JSON;\r\n\t\t\tcase \"xml\":\r\n\t\t\t\treturn createjs.AbstractLoader.XML;\r\n\t\t\tcase \"css\":\r\n\t\t\t\treturn createjs.AbstractLoader.CSS;\r\n\t\t\tcase \"js\":\r\n\t\t\t\treturn createjs.AbstractLoader.JAVASCRIPT;\r\n\t\t\tcase 'svg':\r\n\t\t\t\treturn createjs.AbstractLoader.SVG;\r\n\t\t\tdefault:\r\n\t\t\t\treturn createjs.AbstractLoader.TEXT;\r\n\t\t}\r\n\t};\r\n\r\n\tcreatejs.RequestUtils = s;\r\n\r\n}());\r\n\r\n//##############################################################################\r\n// AbstractLoader.js\r\n//##############################################################################\r\n\r\nthis.createjs = this.createjs || {};\r\n\r\n(function () {\r\n\t\"use strict\";\r\n\r\n// constructor\r\n\t/**\r\n\t * The base loader, which defines all the generic methods, properties, and events. All loaders extend this class,\r\n\t * including the {{#crossLink \"LoadQueue\"}}{{/crossLink}}.\r\n\t * @class AbstractLoader\r\n\t * @param {LoadItem|object|string} loadItem The item to be loaded.\r\n\t * @param {Boolean} [preferXHR] Determines if the LoadItem should <em>try</em> and load using XHR, or take a\r\n\t * tag-based approach, which can be better in cross-domain situations. Not all loaders can load using one or the\r\n\t * other, so this is a suggested directive.\r\n\t * @param {String} [type] The type of loader. Loader types are defined as constants on the AbstractLoader class,\r\n\t * such as {{#crossLink \"IMAGE:property\"}}{{/crossLink}}, {{#crossLink \"CSS:property\"}}{{/crossLink}}, etc.\r\n\t * @extends EventDispatcher\r\n\t */\r\n\tfunction AbstractLoader(loadItem, preferXHR, type) {\r\n\t\tthis.EventDispatcher_constructor();\r\n\r\n\t\t// public properties\r\n\t\t/**\r\n\t\t * If the loader has completed loading. This provides a quick check, but also ensures that the different approaches\r\n\t\t * used for loading do not pile up resulting in more than one `complete` {{#crossLink \"Event\"}}{{/crossLink}}.\r\n\t\t * @property loaded\r\n\t\t * @type {Boolean}\r\n\t\t * @default false\r\n\t\t */\r\n\t\tthis.loaded = false;\r\n\r\n\t\t/**\r\n\t\t * Determine if the loader was canceled. Canceled loads will not fire complete events. Note that this property\r\n\t\t * is readonly, so {{#crossLink \"LoadQueue\"}}{{/crossLink}} queues should be closed using {{#crossLink \"LoadQueue/close\"}}{{/crossLink}}\r\n\t\t * instead.\r\n\t\t * @property canceled\r\n\t\t * @type {Boolean}\r\n\t\t * @default false\r\n\t\t * @readonly\r\n\t\t */\r\n\t\tthis.canceled = false;\r\n\r\n\t\t/**\r\n\t\t * The current load progress (percentage) for this item. This will be a number between 0 and 1.\r\n\t\t *\r\n\t\t * <h4>Example</h4>\r\n\t\t *\r\n\t\t *     var queue = new createjs.LoadQueue();\r\n\t\t *     queue.loadFile(\"largeImage.png\");\r\n\t\t *     queue.on(\"progress\", function() {\r\n\t\t *         console.log(\"Progress:\", queue.progress, event.progress);\r\n\t\t *     });\r\n\t\t *\r\n\t\t * @property progress\r\n\t\t * @type {Number}\r\n\t\t * @default 0\r\n\t\t */\r\n\t\tthis.progress = 0;\r\n\r\n\t\t/**\r\n\t\t * The type of item this loader will load. See {{#crossLink \"AbstractLoader\"}}{{/crossLink}} for a full list of\r\n\t\t * supported types.\r\n\t\t * @property type\r\n\t\t * @type {String}\r\n\t\t */\r\n\t\tthis.type = type;\r\n\r\n\t\t/**\r\n\t\t * A formatter function that converts the loaded raw result into the final result. For example, the JSONLoader\r\n\t\t * converts a string of text into a JavaScript object. Not all loaders have a resultFormatter, and this property\r\n\t\t * can be overridden to provide custom formatting.\r\n\t\t *\r\n\t\t * Optionally, a resultFormatter can return a callback function in cases where the formatting needs to be\r\n\t\t * asynchronous, such as creating a new image. The callback function is passed 2 parameters, which are callbacks\r\n\t\t * to handle success and error conditions in the resultFormatter. Note that the resultFormatter method is\r\n\t\t * called in the current scope, as well as the success and error callbacks.\r\n\t\t *\r\n\t\t * <h4>Example asynchronous resultFormatter</h4>\r\n\t\t *\r\n\t\t * \tfunction _formatResult(loader) {\r\n\t\t * \t\treturn function(success, error) {\r\n\t\t * \t\t\tif (errorCondition) { error(errorDetailEvent); }\r\n\t\t * \t\t\tsuccess(result);\r\n\t\t * \t\t}\r\n\t\t * \t}\r\n\t\t * @property resultFormatter\r\n\t\t * @type {Function}\r\n\t\t * @default null\r\n\t\t */\r\n\t\tthis.resultFormatter = null;\r\n\r\n\t\t// protected properties\r\n\t\t/**\r\n\t\t * The {{#crossLink \"LoadItem\"}}{{/crossLink}} this loader represents. Note that this is null in a {{#crossLink \"LoadQueue\"}}{{/crossLink}},\r\n\t\t * but will be available on loaders such as {{#crossLink \"XMLLoader\"}}{{/crossLink}} and {{#crossLink \"ImageLoader\"}}{{/crossLink}}.\r\n\t\t * @property _item\r\n\t\t * @type {LoadItem|Object}\r\n\t\t * @private\r\n\t\t */\r\n\t\tif (loadItem) {\r\n\t\t\tthis._item = createjs.LoadItem.create(loadItem);\r\n\t\t} else {\r\n\t\t\tthis._item = null;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * Whether the loader will try and load content using XHR (true) or HTML tags (false).\r\n\t\t * @property _preferXHR\r\n\t\t * @type {Boolean}\r\n\t\t * @private\r\n\t\t */\r\n\t\tthis._preferXHR = preferXHR;\r\n\r\n\t\t/**\r\n\t\t * The loaded result after it is formatted by an optional {{#crossLink \"resultFormatter\"}}{{/crossLink}}. For\r\n\t\t * items that are not formatted, this will be the same as the {{#crossLink \"_rawResult:property\"}}{{/crossLink}}.\r\n\t\t * The result is accessed using the {{#crossLink \"getResult\"}}{{/crossLink}} method.\r\n\t\t * @property _result\r\n\t\t * @type {Object|String}\r\n\t\t * @private\r\n\t\t */\r\n\t\tthis._result = null;\r\n\r\n\t\t/**\r\n\t\t * The loaded result before it is formatted. The rawResult is accessed using the {{#crossLink \"getResult\"}}{{/crossLink}}\r\n\t\t * method, and passing `true`.\r\n\t\t * @property _rawResult\r\n\t\t * @type {Object|String}\r\n\t\t * @private\r\n\t\t */\r\n\t\tthis._rawResult = null;\r\n\r\n\t\t/**\r\n\t\t * A list of items that loaders load behind the scenes. This does not include the main item the loader is\r\n\t\t * responsible for loading. Examples of loaders that have sub-items include the {{#crossLink \"SpriteSheetLoader\"}}{{/crossLink}} and\r\n\t\t * {{#crossLink \"ManifestLoader\"}}{{/crossLink}}.\r\n\t\t * @property _loadItems\r\n\t\t * @type {null}\r\n\t\t * @protected\r\n\t\t */\r\n\t\tthis._loadedItems = null;\r\n\r\n\t\t/**\r\n\t\t * The attribute the items loaded using tags use for the source.\r\n\t\t * @type {string}\r\n\t\t * @default null\r\n\t\t * @private\r\n\t\t */\r\n\t\tthis._tagSrcAttribute = null;\r\n\r\n\t\t/**\r\n\t\t * An HTML tag (or similar) that a loader may use to load HTML content, such as images, scripts, etc.\r\n\t\t * @property _tag\r\n\t\t * @type {Object}\r\n\t\t * @private\r\n\t\t */\r\n\t\tthis._tag = null;\r\n\t};\r\n\r\n\tvar p = createjs.extend(AbstractLoader, createjs.EventDispatcher);\r\n\tvar s = AbstractLoader;\r\n\r\n\t// TODO: deprecated\r\n\t// p.initialize = function() {}; // searchable for devs wondering where it is. REMOVED. See docs for details.\r\n\r\n\r\n\t/**\r\n\t * Defines a POST request, use for a method value when loading data.\r\n\t * @property POST\r\n\t * @type {string}\r\n\t * @default post\r\n\t * @static\r\n\t */\r\n\ts.POST = \"POST\";\r\n\r\n\t/**\r\n\t * Defines a GET request, use for a method value when loading data.\r\n\t * @property GET\r\n\t * @type {string}\r\n\t * @default get\r\n\t * @static\r\n\t */\r\n\ts.GET = \"GET\";\r\n\r\n\t/**\r\n\t * The preload type for generic binary types. Note that images are loaded as binary files when using XHR.\r\n\t * @property BINARY\r\n\t * @type {String}\r\n\t * @default binary\r\n\t * @static\r\n\t * @since 0.6.0\r\n\t */\r\n\ts.BINARY = \"binary\";\r\n\r\n\t/**\r\n\t * The preload type for css files. CSS files are loaded using a &lt;link&gt; when loaded with XHR, or a\r\n\t * &lt;style&gt; tag when loaded with tags.\r\n\t * @property CSS\r\n\t * @type {String}\r\n\t * @default css\r\n\t * @static\r\n\t * @since 0.6.0\r\n\t */\r\n\ts.CSS = \"css\";\r\n\r\n\t/**\r\n\t * The preload type for image files, usually png, gif, or jpg/jpeg. Images are loaded into an &lt;image&gt; tag.\r\n\t * @property IMAGE\r\n\t * @type {String}\r\n\t * @default image\r\n\t * @static\r\n\t * @since 0.6.0\r\n\t */\r\n\ts.IMAGE = \"image\";\r\n\r\n\t/**\r\n\t * The preload type for javascript files, usually with the \"js\" file extension. JavaScript files are loaded into a\r\n\t * &lt;script&gt; tag.\r\n\t *\r\n\t * Since version 0.4.1+, due to how tag-loaded scripts work, all JavaScript files are automatically injected into\r\n\t * the body of the document to maintain parity between XHR and tag-loaded scripts. In version 0.4.0 and earlier,\r\n\t * only tag-loaded scripts are injected.\r\n\t * @property JAVASCRIPT\r\n\t * @type {String}\r\n\t * @default javascript\r\n\t * @static\r\n\t * @since 0.6.0\r\n\t */\r\n\ts.JAVASCRIPT = \"javascript\";\r\n\r\n\t/**\r\n\t * The preload type for json files, usually with the \"json\" file extension. JSON data is loaded and parsed into a\r\n\t * JavaScript object. Note that if a `callback` is present on the load item, the file will be loaded with JSONP,\r\n\t * no matter what the {{#crossLink \"LoadQueue/preferXHR:property\"}}{{/crossLink}} property is set to, and the JSON\r\n\t * must contain a matching wrapper function.\r\n\t * @property JSON\r\n\t * @type {String}\r\n\t * @default json\r\n\t * @static\r\n\t * @since 0.6.0\r\n\t */\r\n\ts.JSON = \"json\";\r\n\r\n\t/**\r\n\t * The preload type for jsonp files, usually with the \"json\" file extension. JSON data is loaded and parsed into a\r\n\t * JavaScript object. You are required to pass a callback parameter that matches the function wrapper in the JSON.\r\n\t * Note that JSONP will always be used if there is a callback present, no matter what the {{#crossLink \"LoadQueue/preferXHR:property\"}}{{/crossLink}}\r\n\t * property is set to.\r\n\t * @property JSONP\r\n\t * @type {String}\r\n\t * @default jsonp\r\n\t * @static\r\n\t * @since 0.6.0\r\n\t */\r\n\ts.JSONP = \"jsonp\";\r\n\r\n\t/**\r\n\t * The preload type for json-based manifest files, usually with the \"json\" file extension. The JSON data is loaded\r\n\t * and parsed into a JavaScript object. PreloadJS will then look for a \"manifest\" property in the JSON, which is an\r\n\t * Array of files to load, following the same format as the {{#crossLink \"LoadQueue/loadManifest\"}}{{/crossLink}}\r\n\t * method. If a \"callback\" is specified on the manifest object, then it will be loaded using JSONP instead,\r\n\t * regardless of what the {{#crossLink \"LoadQueue/preferXHR:property\"}}{{/crossLink}} property is set to.\r\n\t * @property MANIFEST\r\n\t * @type {String}\r\n\t * @default manifest\r\n\t * @static\r\n\t * @since 0.6.0\r\n\t */\r\n\ts.MANIFEST = \"manifest\";\r\n\r\n\t/**\r\n\t * The preload type for sound files, usually mp3, ogg, or wav. When loading via tags, audio is loaded into an\r\n\t * &lt;audio&gt; tag.\r\n\t * @property SOUND\r\n\t * @type {String}\r\n\t * @default sound\r\n\t * @static\r\n\t * @since 0.6.0\r\n\t */\r\n\ts.SOUND = \"sound\";\r\n\r\n\t/**\r\n\t * The preload type for video files, usually mp4, ts, or ogg. When loading via tags, video is loaded into an\r\n\t * &lt;video&gt; tag.\r\n\t * @property VIDEO\r\n\t * @type {String}\r\n\t * @default video\r\n\t * @static\r\n\t * @since 0.6.0\r\n\t */\r\n\ts.VIDEO = \"video\";\r\n\r\n\t/**\r\n\t * The preload type for SpriteSheet files. SpriteSheet files are JSON files that contain string image paths.\r\n\t * @property SPRITESHEET\r\n\t * @type {String}\r\n\t * @default spritesheet\r\n\t * @static\r\n\t * @since 0.6.0\r\n\t */\r\n\ts.SPRITESHEET = \"spritesheet\";\r\n\r\n\t/**\r\n\t * The preload type for SVG files.\r\n\t * @property SVG\r\n\t * @type {String}\r\n\t * @default svg\r\n\t * @static\r\n\t * @since 0.6.0\r\n\t */\r\n\ts.SVG = \"svg\";\r\n\r\n\t/**\r\n\t * The preload type for text files, which is also the default file type if the type can not be determined. Text is\r\n\t * loaded as raw text.\r\n\t * @property TEXT\r\n\t * @type {String}\r\n\t * @default text\r\n\t * @static\r\n\t * @since 0.6.0\r\n\t */\r\n\ts.TEXT = \"text\";\r\n\r\n\t/**\r\n\t * The preload type for xml files. XML is loaded into an XML document.\r\n\t * @property XML\r\n\t * @type {String}\r\n\t * @default xml\r\n\t * @static\r\n\t * @since 0.6.0\r\n\t */\r\n\ts.XML = \"xml\";\r\n\r\n// Events\r\n\t/**\r\n\t * The {{#crossLink \"ProgressEvent\"}}{{/crossLink}} that is fired when the overall progress changes. Prior to\r\n\t * version 0.6.0, this was just a regular {{#crossLink \"Event\"}}{{/crossLink}}.\r\n\t * @event progress\r\n\t * @since 0.3.0\r\n\t */\r\n\r\n\t/**\r\n\t * The {{#crossLink \"Event\"}}{{/crossLink}} that is fired when a load starts.\r\n\t * @event loadstart\r\n\t * @param {Object} target The object that dispatched the event.\r\n\t * @param {String} type The event type.\r\n\t * @since 0.3.1\r\n\t */\r\n\r\n\t/**\r\n\t * The {{#crossLink \"Event\"}}{{/crossLink}} that is fired when the entire queue has been loaded.\r\n\t * @event complete\r\n\t * @param {Object} target The object that dispatched the event.\r\n\t * @param {String} type The event type.\r\n\t * @since 0.3.0\r\n\t */\r\n\r\n\t/**\r\n\t * The {{#crossLink \"ErrorEvent\"}}{{/crossLink}} that is fired when the loader encounters an error. If the error was\r\n\t * encountered by a file, the event will contain the item that caused the error. Prior to version 0.6.0, this was\r\n\t * just a regular {{#crossLink \"Event\"}}{{/crossLink}}.\r\n\t * @event error\r\n\t * @since 0.3.0\r\n\t */\r\n\r\n\t/**\r\n\t * The {{#crossLink \"Event\"}}{{/crossLink}} that is fired when the loader encounters an internal file load error.\r\n\t * This enables loaders to maintain internal queues, and surface file load errors.\r\n\t * @event fileerror\r\n\t * @param {Object} target The object that dispatched the event.\r\n\t * @param {String} type The even type (\"fileerror\")\r\n\t * @param {LoadItem|object} The item that encountered the error\r\n\t * @since 0.6.0\r\n\t */\r\n\r\n\t/**\r\n\t * The {{#crossLink \"Event\"}}{{/crossLink}} that is fired when a loader internally loads a file. This enables\r\n\t * loaders such as {{#crossLink \"ManifestLoader\"}}{{/crossLink}} to maintain internal {{#crossLink \"LoadQueue\"}}{{/crossLink}}s\r\n\t * and notify when they have loaded a file. The {{#crossLink \"LoadQueue\"}}{{/crossLink}} class dispatches a\r\n\t * slightly different {{#crossLink \"LoadQueue/fileload:event\"}}{{/crossLink}} event.\r\n\t * @event fileload\r\n\t * @param {Object} target The object that dispatched the event.\r\n\t * @param {String} type The event type (\"fileload\")\r\n\t * @param {Object} item The file item which was specified in the {{#crossLink \"LoadQueue/loadFile\"}}{{/crossLink}}\r\n\t * or {{#crossLink \"LoadQueue/loadManifest\"}}{{/crossLink}} call. If only a string path or tag was specified, the\r\n\t * object will contain that value as a `src` property.\r\n\t * @param {Object} result The HTML tag or parsed result of the loaded item.\r\n\t * @param {Object} rawResult The unprocessed result, usually the raw text or binary data before it is converted\r\n\t * to a usable object.\r\n\t * @since 0.6.0\r\n\t */\r\n\r\n\t/**\r\n\t * The {{#crossLink \"Event\"}}{{/crossLink}} that is fired after the internal request is created, but before a load.\r\n\t * This allows updates to the loader for specific loading needs, such as binary or XHR image loading.\r\n\t * @event initialize\r\n\t * @param {Object} target The object that dispatched the event.\r\n\t * @param {String} type The event type (\"initialize\")\r\n\t * @param {AbstractLoader} loader The loader that has been initialized.\r\n\t */\r\n\r\n\r\n\t/**\r\n\t * Get a reference to the manifest item that is loaded by this loader. In some cases this will be the value that was\r\n\t * passed into {{#crossLink \"LoadQueue\"}}{{/crossLink}} using {{#crossLink \"LoadQueue/loadFile\"}}{{/crossLink}} or\r\n\t * {{#crossLink \"LoadQueue/loadManifest\"}}{{/crossLink}}. However if only a String path was passed in, then it will\r\n\t * be a {{#crossLink \"LoadItem\"}}{{/crossLink}}.\r\n\t * @method getItem\r\n\t * @return {Object} The manifest item that this loader is responsible for loading.\r\n\t * @since 0.6.0\r\n\t */\r\n\tp.getItem = function () {\r\n\t\treturn this._item;\r\n\t};\r\n\r\n\t/**\r\n\t * Get a reference to the content that was loaded by the loader (only available after the {{#crossLink \"complete:event\"}}{{/crossLink}}\r\n\t * event is dispatched.\r\n\t * @method getResult\r\n\t * @param {Boolean} [raw=false] Determines if the returned result will be the formatted content, or the raw loaded\r\n\t * data (if it exists).\r\n\t * @return {Object}\r\n\t * @since 0.6.0\r\n\t */\r\n\tp.getResult = function (raw) {\r\n\t\treturn raw ? this._rawResult : this._result;\r\n\t};\r\n\r\n\t/**\r\n\t * Return the `tag` this object creates or uses for loading.\r\n\t * @method getTag\r\n\t * @return {Object} The tag instance\r\n\t * @since 0.6.0\r\n\t */\r\n\tp.getTag = function () {\r\n\t\treturn this._tag;\r\n\t};\r\n\r\n\t/**\r\n\t * Set the `tag` this item uses for loading.\r\n\t * @method setTag\r\n\t * @param {Object} tag The tag instance\r\n\t * @since 0.6.0\r\n\t */\r\n\tp.setTag = function(tag) {\r\n\t  this._tag = tag;\r\n\t};\r\n\r\n\t/**\r\n\t * Begin loading the item. This method is required when using a loader by itself.\r\n\t *\r\n\t * <h4>Example</h4>\r\n\t *\r\n\t *      var queue = new createjs.LoadQueue();\r\n\t *      queue.on(\"complete\", handleComplete);\r\n\t *      queue.loadManifest(fileArray, false); // Note the 2nd argument that tells the queue not to start loading yet\r\n\t *      queue.load();\r\n\t *\r\n\t * @method load\r\n\t */\r\n\tp.load = function () {\r\n\t\tthis._createRequest();\r\n\r\n\t\tthis._request.on(\"complete\", this, this);\r\n\t\tthis._request.on(\"progress\", this, this);\r\n\t\tthis._request.on(\"loadStart\", this, this);\r\n\t\tthis._request.on(\"abort\", this, this);\r\n\t\tthis._request.on(\"timeout\", this, this);\r\n\t\tthis._request.on(\"error\", this, this);\r\n\r\n\t\tvar evt = new createjs.Event(\"initialize\");\r\n\t\tevt.loader = this._request;\r\n\t\tthis.dispatchEvent(evt);\r\n\r\n\t\tthis._request.load();\r\n\t};\r\n\r\n\t/**\r\n\t * Close the the item. This will stop any open requests (although downloads using HTML tags may still continue in\r\n\t * the background), but events will not longer be dispatched.\r\n\t * @method cancel\r\n\t */\r\n\tp.cancel = function () {\r\n\t\tthis.canceled = true;\r\n\t\tthis.destroy();\r\n\t};\r\n\r\n\t/**\r\n\t * Clean up the loader.\r\n\t * @method destroy\r\n\t */\r\n\tp.destroy = function() {\r\n\t\tif (this._request) {\r\n\t\t\tthis._request.removeAllEventListeners();\r\n\t\t\tthis._request.destroy();\r\n\t\t}\r\n\r\n\t\tthis._request = null;\r\n\r\n\t\tthis._item = null;\r\n\t\tthis._rawResult = null;\r\n\t\tthis._result = null;\r\n\r\n\t\tthis._loadItems = null;\r\n\r\n\t\tthis.removeAllEventListeners();\r\n\t};\r\n\r\n\t/**\r\n\t * Get any items loaded internally by the loader. The enables loaders such as {{#crossLink \"ManifestLoader\"}}{{/crossLink}}\r\n\t * to expose items it loads internally.\r\n\t * @method getLoadedItems\r\n\t * @return {Array} A list of the items loaded by the loader.\r\n\t * @since 0.6.0\r\n\t */\r\n\tp.getLoadedItems = function () {\r\n\t\treturn this._loadedItems;\r\n\t};\r\n\r\n\r\n\t// Private methods\r\n\t/**\r\n\t * Create an internal request used for loading. By default, an {{#crossLink \"XHRRequest\"}}{{/crossLink}} or\r\n\t * {{#crossLink \"TagRequest\"}}{{/crossLink}} is created, depending on the value of {{#crossLink \"preferXHR:property\"}}{{/crossLink}}.\r\n\t * Other loaders may override this to use different request types, such as {{#crossLink \"ManifestLoader\"}}{{/crossLink}},\r\n\t * which uses {{#crossLink \"JSONLoader\"}}{{/crossLink}} or {{#crossLink \"JSONPLoader\"}}{{/crossLink}} under the hood.\r\n\t * @method _createRequest\r\n\t * @protected\r\n\t */\r\n\tp._createRequest = function() {\r\n\t\tif (!this._preferXHR) {\r\n\t\t\tthis._request = new createjs.TagRequest(this._item, this._tag || this._createTag(), this._tagSrcAttribute);\r\n\t\t} else {\r\n\t\t\tthis._request = new createjs.XHRRequest(this._item);\r\n\t\t}\r\n\t};\r\n\r\n\t/**\r\n\t * Create the HTML tag used for loading. This method does nothing by default, and needs to be implemented\r\n\t * by loaders that require tag loading.\r\n\t * @method _createTag\r\n\t * @param {String} src The tag source\r\n\t * @return {HTMLElement} The tag that was created\r\n\t * @protected\r\n\t */\r\n\tp._createTag = function(src) { return null; };\r\n\r\n\t/**\r\n\t * Dispatch a loadstart {{#crossLink \"Event\"}}{{/crossLink}}. Please see the {{#crossLink \"AbstractLoader/loadstart:event\"}}{{/crossLink}}\r\n\t * event for details on the event payload.\r\n\t * @method _sendLoadStart\r\n\t * @protected\r\n\t */\r\n\tp._sendLoadStart = function () {\r\n\t\tif (this._isCanceled()) { return; }\r\n\t\tthis.dispatchEvent(\"loadstart\");\r\n\t};\r\n\r\n\t/**\r\n\t * Dispatch a {{#crossLink \"ProgressEvent\"}}{{/crossLink}}.\r\n\t * @method _sendProgress\r\n\t * @param {Number | Object} value The progress of the loaded item, or an object containing <code>loaded</code>\r\n\t * and <code>total</code> properties.\r\n\t * @protected\r\n\t */\r\n\tp._sendProgress = function (value) {\r\n\t\tif (this._isCanceled()) { return; }\r\n\t\tvar event = null;\r\n\t\tif (typeof(value) == \"number\") {\r\n\t\t\tthis.progress = value;\r\n\t\t\tevent = new createjs.ProgressEvent(this.progress);\r\n\t\t} else {\r\n\t\t\tevent = value;\r\n\t\t\tthis.progress = value.loaded / value.total;\r\n\t\t\tevent.progress = this.progress;\r\n\t\t\tif (isNaN(this.progress) || this.progress == Infinity) { this.progress = 0; }\r\n\t\t}\r\n\t\tthis.hasEventListener(\"progress\") && this.dispatchEvent(event);\r\n\t};\r\n\r\n\t/**\r\n\t * Dispatch a complete {{#crossLink \"Event\"}}{{/crossLink}}. Please see the {{#crossLink \"AbstractLoader/complete:event\"}}{{/crossLink}} event\r\n\t * @method _sendComplete\r\n\t * @protected\r\n\t */\r\n\tp._sendComplete = function () {\r\n\t\tif (this._isCanceled()) { return; }\r\n\r\n\t\tthis.loaded = true;\r\n\r\n\t\tvar event = new createjs.Event(\"complete\");\r\n\t\tevent.rawResult = this._rawResult;\r\n\r\n\t\tif (this._result != null) {\r\n\t\t\tevent.result = this._result;\r\n\t\t}\r\n\r\n\t\tthis.dispatchEvent(event);\r\n\t};\r\n\r\n\t/**\r\n\t * Dispatch an error {{#crossLink \"Event\"}}{{/crossLink}}. Please see the {{#crossLink \"AbstractLoader/error:event\"}}{{/crossLink}}\r\n\t * event for details on the event payload.\r\n\t * @method _sendError\r\n\t * @param {ErrorEvent} event The event object containing specific error properties.\r\n\t * @protected\r\n\t */\r\n\tp._sendError = function (event) {\r\n\t\tif (this._isCanceled() || !this.hasEventListener(\"error\")) { return; }\r\n\t\tif (event == null) {\r\n\t\t\tevent = new createjs.ErrorEvent(\"PRELOAD_ERROR_EMPTY\"); // TODO: Populate error\r\n\t\t}\r\n\t\tthis.dispatchEvent(event);\r\n\t};\r\n\r\n\t/**\r\n\t * Determine if the load has been canceled. This is important to ensure that method calls or asynchronous events\r\n\t * do not cause issues after the queue has been cleaned up.\r\n\t * @method _isCanceled\r\n\t * @return {Boolean} If the loader has been canceled.\r\n\t * @protected\r\n\t */\r\n\tp._isCanceled = function () {\r\n\t\tif (window.createjs == null || this.canceled) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\treturn false;\r\n\t};\r\n\r\n\t/**\r\n\t * A custom result formatter function, which is called just before a request dispatches its complete event. Most\r\n\t * loader types already have an internal formatter, but this can be user-overridden for custom formatting. The\r\n\t * formatted result will be available on Loaders using {{#crossLink \"getResult\"}}{{/crossLink}}, and passing `true`.\r\n\t * @property resultFormatter\r\n\t * @type Function\r\n\t * @return {Object} The formatted result\r\n\t * @since 0.6.0\r\n\t */\r\n\tp.resultFormatter = null;\r\n\r\n\t/**\r\n\t * Handle events from internal requests. By default, loaders will handle, and redispatch the necessary events, but\r\n\t * this method can be overridden for custom behaviours.\r\n\t * @method handleEvent\r\n\t * @param {Event} event The event that the internal request dispatches.\r\n\t * @protected\r\n\t * @since 0.6.0\r\n\t */\r\n\tp.handleEvent = function (event) {\r\n\t\tswitch (event.type) {\r\n\t\t\tcase \"complete\":\r\n\t\t\t\tthis._rawResult = event.target._response;\r\n\t\t\t\tvar result = this.resultFormatter && this.resultFormatter(this);\r\n\t\t\t\tif (result instanceof Function) {\r\n\t\t\t\t\tresult.call(this,\r\n\t\t\t\t\t\t\tcreatejs.proxy(this._resultFormatSuccess, this),\r\n\t\t\t\t\t\t\tcreatejs.proxy(this._resultFormatFailed, this)\r\n\t\t\t\t\t);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis._result =  result || this._rawResult;\r\n\t\t\t\t\tthis._sendComplete();\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"progress\":\r\n\t\t\t\tthis._sendProgress(event);\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"error\":\r\n\t\t\t\tthis._sendError(event);\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"loadstart\":\r\n\t\t\t\tthis._sendLoadStart();\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"abort\":\r\n\t\t\tcase \"timeout\":\r\n\t\t\t\tif (!this._isCanceled()) {\r\n\t\t\t\t\tthis.dispatchEvent(new createjs.ErrorEvent(\"PRELOAD_\" + event.type.toUpperCase() + \"_ERROR\"));\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t};\r\n\r\n\t/**\r\n\t * The \"success\" callback passed to {{#crossLink \"AbstractLoader/resultFormatter\"}}{{/crossLink}} asynchronous\r\n\t * functions.\r\n\t * @method _resultFormatSuccess\r\n\t * @param {Object} result The formatted result\r\n\t * @private\r\n\t */\r\n\tp._resultFormatSuccess = function (result) {\r\n\t\tthis._result = result;\r\n\t\tthis._sendComplete();\r\n\t};\r\n\r\n\t/**\r\n\t * The \"error\" callback passed to {{#crossLink \"AbstractLoader/resultFormatter\"}}{{/crossLink}} asynchronous\r\n\t * functions.\r\n\t * @method _resultFormatSuccess\r\n\t * @param {Object} error The error event\r\n\t * @private\r\n\t */\r\n\tp._resultFormatFailed = function (event) {\r\n\t\tthis._sendError(event);\r\n\t};\r\n\r\n\t/**\r\n\t * @method buildPath\r\n\t * @protected\r\n\t * @deprecated Use the {{#crossLink \"RequestUtils\"}}{{/crossLink}} method {{#crossLink \"RequestUtils/buildPath\"}}{{/crossLink}}\r\n\t * instead.\r\n\t */\r\n\tp.buildPath = function (src, data) {\r\n\t\treturn createjs.RequestUtils.buildPath(src, data);\r\n\t};\r\n\r\n\t/**\r\n\t * @method toString\r\n\t * @return {String} a string representation of the instance.\r\n\t */\r\n\tp.toString = function () {\r\n\t\treturn \"[PreloadJS AbstractLoader]\";\r\n\t};\r\n\r\n\tcreatejs.AbstractLoader = createjs.promote(AbstractLoader, \"EventDispatcher\");\r\n\r\n}());\r\n\r\n//##############################################################################\r\n// AbstractMediaLoader.js\r\n//##############################################################################\r\n\r\nthis.createjs = this.createjs || {};\r\n\r\n(function () {\r\n\t\"use strict\";\r\n\r\n\t// constructor\r\n\t/**\r\n\t * The AbstractMediaLoader is a base class that handles some of the shared methods and properties of loaders that\r\n\t * handle HTML media elements, such as Video and Audio.\r\n\t * @class AbstractMediaLoader\r\n\t * @param {LoadItem|Object} loadItem\r\n\t * @param {Boolean} preferXHR\r\n\t * @param {String} type The type of media to load. Usually \"video\" or \"audio\".\r\n\t * @extends AbstractLoader\r\n\t * @constructor\r\n\t */\r\n\tfunction AbstractMediaLoader(loadItem, preferXHR, type) {\r\n\t\tthis.AbstractLoader_constructor(loadItem, preferXHR, type);\r\n\r\n\t\t// public properties\r\n\t\tthis.resultFormatter = this._formatResult;\r\n\r\n\t\t// protected properties\r\n\t\tthis._tagSrcAttribute = \"src\";\r\n\r\n        this.on(\"initialize\", this._updateXHR, this);\r\n\t};\r\n\r\n\tvar p = createjs.extend(AbstractMediaLoader, createjs.AbstractLoader);\r\n\r\n\t// static properties\r\n\t// public methods\r\n\tp.load = function () {\r\n\t\t// TagRequest will handle most of this, but Sound / Video need a few custom properties, so just handle them here.\r\n\t\tif (!this._tag) {\r\n\t\t\tthis._tag = this._createTag(this._item.src);\r\n\t\t}\r\n\r\n\t\tthis._tag.preload = \"auto\";\r\n\t\tthis._tag.load();\r\n\r\n\t\tthis.AbstractLoader_load();\r\n\t};\r\n\r\n\t// protected methods\r\n\t/**\r\n\t * Creates a new tag for loading if it doesn't exist yet.\r\n\t * @method _createTag\r\n\t * @private\r\n\t */\r\n\tp._createTag = function () {};\r\n\r\n\r\n\tp._createRequest = function() {\r\n\t\tif (!this._preferXHR) {\r\n\t\t\tthis._request = new createjs.MediaTagRequest(this._item, this._tag || this._createTag(), this._tagSrcAttribute);\r\n\t\t} else {\r\n\t\t\tthis._request = new createjs.XHRRequest(this._item);\r\n\t\t}\r\n\t};\r\n\r\n    // protected methods\r\n    /**\r\n     * Before the item loads, set its mimeType and responseType.\r\n     * @property _updateXHR\r\n     * @param {Event} event\r\n     * @private\r\n     */\r\n    p._updateXHR = function (event) {\r\n        // Only exists for XHR\r\n        if (event.loader.setResponseType) {\r\n            event.loader.setResponseType(\"blob\");\r\n        }\r\n    };\r\n\r\n\t/**\r\n\t * The result formatter for media files.\r\n\t * @method _formatResult\r\n\t * @param {AbstractLoader} loader\r\n\t * @returns {HTMLVideoElement|HTMLAudioElement}\r\n\t * @private\r\n\t */\r\n\tp._formatResult = function (loader) {\r\n\t\tthis._tag.removeEventListener && this._tag.removeEventListener(\"canplaythrough\", this._loadedHandler);\r\n\t\tthis._tag.onstalled = null;\r\n\t\tif (this._preferXHR) {\r\n            var URL = window.URL || window.webkitURL;\r\n            var result = loader.getResult(true);\r\n\r\n\t\t\tloader.getTag().src = URL.createObjectURL(result);\r\n\t\t}\r\n\t\treturn loader.getTag();\r\n\t};\r\n\r\n\tcreatejs.AbstractMediaLoader = createjs.promote(AbstractMediaLoader, \"AbstractLoader\");\r\n\r\n}());\r\n\r\n//##############################################################################\r\n// AbstractRequest.js\r\n//##############################################################################\r\n\r\nthis.createjs = this.createjs || {};\r\n\r\n(function () {\r\n\t\"use strict\";\r\n\r\n\t/**\r\n\t * A base class for actual data requests, such as {{#crossLink \"XHRRequest\"}}{{/crossLink}}, {{#crossLink \"TagRequest\"}}{{/crossLink}},\r\n\t * and {{#crossLink \"MediaRequest\"}}{{/crossLink}}. PreloadJS loaders will typically use a data loader under the\r\n\t * hood to get data.\r\n\t * @class AbstractRequest\r\n\t * @param {LoadItem} item\r\n\t * @constructor\r\n\t */\r\n\tvar AbstractRequest = function (item) {\r\n\t\tthis._item = item;\r\n\t};\r\n\r\n\tvar p = createjs.extend(AbstractRequest, createjs.EventDispatcher);\r\n\r\n\t// public methods\r\n\t/**\r\n\t * Begin a load.\r\n\t * @method load\r\n\t */\r\n\tp.load =  function() {};\r\n\r\n\t/**\r\n\t * Clean up a request.\r\n\t * @method destroy\r\n\t */\r\n\tp.destroy = function() {};\r\n\r\n\t/**\r\n\t * Cancel an in-progress request.\r\n\t * @method cancel\r\n\t */\r\n\tp.cancel = function() {};\r\n\r\n\tcreatejs.AbstractRequest = createjs.promote(AbstractRequest, \"EventDispatcher\");\r\n\r\n}());\r\n\r\n//##############################################################################\r\n// TagRequest.js\r\n//##############################################################################\r\n\r\nthis.createjs = this.createjs || {};\r\n\r\n(function () {\r\n\t\"use strict\";\r\n\r\n\t// constructor\r\n\t/**\r\n\t * An {{#crossLink \"AbstractRequest\"}}{{/crossLink}} that loads HTML tags, such as images and scripts.\r\n\t * @class TagRequest\r\n\t * @param {LoadItem} loadItem\r\n\t * @param {HTMLElement} tag\r\n\t * @param {String} srcAttribute The tag attribute that specifies the source, such as \"src\", \"href\", etc.\r\n\t */\r\n\tfunction TagRequest(loadItem, tag, srcAttribute) {\r\n\t\tthis.AbstractRequest_constructor(loadItem);\r\n\r\n\t\t// protected properties\r\n\t\t/**\r\n\t\t * The HTML tag instance that is used to load.\r\n\t\t * @property _tag\r\n\t\t * @type {HTMLElement}\r\n\t\t * @protected\r\n\t\t */\r\n\t\tthis._tag = tag;\r\n\r\n\t\t/**\r\n\t\t * The tag attribute that specifies the source, such as \"src\", \"href\", etc.\r\n\t\t * @property _tagSrcAttribute\r\n\t\t * @type {String}\r\n\t\t * @protected\r\n\t\t */\r\n\t\tthis._tagSrcAttribute = srcAttribute;\r\n\r\n\t\t/**\r\n\t\t * A method closure used for handling the tag load event.\r\n\t\t * @property _loadedHandler\r\n\t\t * @type {Function}\r\n\t\t * @private\r\n\t\t */\r\n\t\tthis._loadedHandler = createjs.proxy(this._handleTagComplete, this);\r\n\r\n\t\t/**\r\n\t\t * Determines if the element was added to the DOM automatically by PreloadJS, so it can be cleaned up after.\r\n\t\t * @property _addedToDOM\r\n\t\t * @type {Boolean}\r\n\t\t * @private\r\n\t\t */\r\n\t\tthis._addedToDOM = false;\r\n\r\n\t\t/**\r\n\t\t * Determines what the tags initial style.visibility was, so we can set it correctly after a load.\r\n\t\t *\r\n\t\t * @type {null}\r\n\t\t * @private\r\n\t\t */\r\n\t\tthis._startTagVisibility = null;\r\n\t};\r\n\r\n\tvar p = createjs.extend(TagRequest, createjs.AbstractRequest);\r\n\r\n\t// public methods\r\n\tp.load = function () {\r\n\t\tthis._tag.onload = createjs.proxy(this._handleTagComplete, this);\r\n\t\tthis._tag.onreadystatechange = createjs.proxy(this._handleReadyStateChange, this);\r\n\t\tthis._tag.onerror = createjs.proxy(this._handleError, this);\r\n\r\n\t\tvar evt = new createjs.Event(\"initialize\");\r\n\t\tevt.loader = this._tag;\r\n\r\n\t\tthis.dispatchEvent(evt);\r\n\r\n\t\tthis._hideTag();\r\n\r\n\t\tthis._loadTimeout = setTimeout(createjs.proxy(this._handleTimeout, this), this._item.loadTimeout);\r\n\r\n\t\tthis._tag[this._tagSrcAttribute] = this._item.src;\r\n\r\n\t\t// wdg:: Append the tag AFTER setting the src, or SVG loading on iOS will fail.\r\n\t\tif (this._tag.parentNode == null) {\r\n\t\t\twindow.document.body.appendChild(this._tag);\r\n\t\t\tthis._addedToDOM = true;\r\n\t\t}\r\n\t};\r\n\r\n\tp.destroy = function() {\r\n\t\tthis._clean();\r\n\t\tthis._tag = null;\r\n\r\n\t\tthis.AbstractRequest_destroy();\r\n\t};\r\n\r\n\t// private methods\r\n\t/**\r\n\t * Handle the readyStateChange event from a tag. We need this in place of the `onload` callback (mainly SCRIPT\r\n\t * and LINK tags), but other cases may exist.\r\n\t * @method _handleReadyStateChange\r\n\t * @private\r\n\t */\r\n\tp._handleReadyStateChange = function () {\r\n\t\tclearTimeout(this._loadTimeout);\r\n\t\t// This is strictly for tags in browsers that do not support onload.\r\n\t\tvar tag = this._tag;\r\n\r\n\t\t// Complete is for old IE support.\r\n\t\tif (tag.readyState == \"loaded\" || tag.readyState == \"complete\") {\r\n\t\t\tthis._handleTagComplete();\r\n\t\t}\r\n\t};\r\n\r\n\t/**\r\n\t * Handle any error events from the tag.\r\n\t * @method _handleError\r\n\t * @protected\r\n\t */\r\n\tp._handleError = function() {\r\n\t\tthis._clean();\r\n\t\tthis.dispatchEvent(\"error\");\r\n\t};\r\n\r\n\t/**\r\n\t * Handle the tag's onload callback.\r\n\t * @method _handleTagComplete\r\n\t * @private\r\n\t */\r\n\tp._handleTagComplete = function () {\r\n\t\tthis._rawResult = this._tag;\r\n\t\tthis._result = this.resultFormatter && this.resultFormatter(this) || this._rawResult;\r\n\r\n\t\tthis._clean();\r\n\t\tthis._showTag();\r\n\r\n\t\tthis.dispatchEvent(\"complete\");\r\n\t};\r\n\r\n\t/**\r\n\t * The tag request has not loaded within the time specified in loadTimeout.\r\n\t * @method _handleError\r\n\t * @param {Object} event The XHR error event.\r\n\t * @private\r\n\t */\r\n\tp._handleTimeout = function () {\r\n\t\tthis._clean();\r\n\t\tthis.dispatchEvent(new createjs.Event(\"timeout\"));\r\n\t};\r\n\r\n\t/**\r\n\t * Remove event listeners, but don't destroy the request object\r\n\t * @method _clean\r\n\t * @private\r\n\t */\r\n\tp._clean = function() {\r\n\t\tthis._tag.onload = null;\r\n\t\tthis._tag.onreadystatechange = null;\r\n\t\tthis._tag.onerror = null;\r\n\t\tif (this._addedToDOM && this._tag.parentNode != null) {\r\n\t\t\tthis._tag.parentNode.removeChild(this._tag);\r\n\t\t}\r\n\t\tclearTimeout(this._loadTimeout);\r\n\t};\r\n\r\n\tp._hideTag = function() {\r\n\t\tthis._startTagVisibility = this._tag.style.visibility;\r\n\t\tthis._tag.style.visibility = \"hidden\";\r\n\t};\r\n\r\n\tp._showTag = function() {\r\n\t\tthis._tag.style.visibility = this._startTagVisibility;\r\n\t};\r\n\r\n\t/**\r\n\t * Handle a stalled audio event. The main place this happens is with HTMLAudio in Chrome when playing back audio\r\n\t * that is already in a load, but not complete.\r\n\t * @method _handleStalled\r\n\t * @private\r\n\t */\r\n\tp._handleStalled = function () {\r\n\t\t//Ignore, let the timeout take care of it. Sometimes its not really stopped.\r\n\t};\r\n\r\n\tcreatejs.TagRequest = createjs.promote(TagRequest, \"AbstractRequest\");\r\n\r\n}());\r\n\r\n//##############################################################################\r\n// MediaTagRequest.js\r\n//##############################################################################\r\n\r\nthis.createjs = this.createjs || {};\r\n\r\n(function () {\r\n\t\"use strict\";\r\n\r\n\t// constructor\r\n\t/**\r\n\t * An {{#crossLink \"TagRequest\"}}{{/crossLink}} that loads HTML tags for video and audio.\r\n\t * @class MediaTagRequest\r\n\t * @param {LoadItem} loadItem\r\n\t * @param {HTMLAudioElement|HTMLVideoElement} tag\r\n\t * @param {String} srcAttribute The tag attribute that specifies the source, such as \"src\", \"href\", etc.\r\n\t * @constructor\r\n\t */\r\n\tfunction MediaTagRequest(loadItem, tag, srcAttribute) {\r\n\t\tthis.AbstractRequest_constructor(loadItem);\r\n\r\n\t\t// protected properties\r\n\t\tthis._tag = tag;\r\n\t\tthis._tagSrcAttribute = srcAttribute;\r\n\t\tthis._loadedHandler = createjs.proxy(this._handleTagComplete, this);\r\n\t};\r\n\r\n\tvar p = createjs.extend(MediaTagRequest, createjs.TagRequest);\r\n\tvar s = MediaTagRequest;\r\n\r\n\t// public methods\r\n\tp.load = function () {\r\n\t\tvar sc = createjs.proxy(this._handleStalled, this);\r\n\t\tthis._stalledCallback = sc;\r\n\r\n\t\tvar pc = createjs.proxy(this._handleProgress, this);\r\n\t\tthis._handleProgress = pc;\r\n\r\n\t\tthis._tag.addEventListener(\"stalled\", sc);\r\n\t\tthis._tag.addEventListener(\"progress\", pc);\r\n\r\n\t\t// This will tell us when audio is buffered enough to play through, but not when its loaded.\r\n\t\t// The tag doesn't keep loading in Chrome once enough has buffered, and we have decided that behaviour is sufficient.\r\n\t\tthis._tag.addEventListener && this._tag.addEventListener(\"canplaythrough\", this._loadedHandler, false); // canplaythrough callback doesn't work in Chrome, so we use an event.\r\n\r\n\t\tthis.TagRequest_load();\r\n\t};\r\n\r\n\t// private methods\r\n\tp._handleReadyStateChange = function () {\r\n\t\tclearTimeout(this._loadTimeout);\r\n\t\t// This is strictly for tags in browsers that do not support onload.\r\n\t\tvar tag = this._tag;\r\n\r\n\t\t// Complete is for old IE support.\r\n\t\tif (tag.readyState == \"loaded\" || tag.readyState == \"complete\") {\r\n\t\t\tthis._handleTagComplete();\r\n\t\t}\r\n\t};\r\n\r\n\tp._handleStalled = function () {\r\n\t\t//Ignore, let the timeout take care of it. Sometimes its not really stopped.\r\n\t};\r\n\r\n\t/**\r\n\t * An XHR request has reported progress.\r\n\t * @method _handleProgress\r\n\t * @param {Object} event The XHR progress event.\r\n\t * @private\r\n\t */\r\n\tp._handleProgress = function (event) {\r\n\t\tif (!event || event.loaded > 0 && event.total == 0) {\r\n\t\t\treturn; // Sometimes we get no \"total\", so just ignore the progress event.\r\n\t\t}\r\n\r\n\t\tvar newEvent = new createjs.ProgressEvent(event.loaded, event.total);\r\n\t\tthis.dispatchEvent(newEvent);\r\n\t};\r\n\r\n\t// protected methods\r\n\tp._clean = function () {\r\n\t\tthis._tag.removeEventListener && this._tag.removeEventListener(\"canplaythrough\", this._loadedHandler);\r\n\t\tthis._tag.removeEventListener(\"stalled\", this._stalledCallback);\r\n\t\tthis._tag.removeEventListener(\"progress\", this._progressCallback);\r\n\r\n\t\tthis.TagRequest__clean();\r\n\t};\r\n\r\n\tcreatejs.MediaTagRequest = createjs.promote(MediaTagRequest, \"TagRequest\");\r\n\r\n}());\r\n\r\n//##############################################################################\r\n// XHRRequest.js\r\n//##############################################################################\r\n\r\nthis.createjs = this.createjs || {};\r\n\r\n(function () {\r\n\t\"use strict\";\r\n\r\n// constructor\r\n\t/**\r\n\t * A preloader that loads items using XHR requests, usually XMLHttpRequest. However XDomainRequests will be used\r\n\t * for cross-domain requests if possible, and older versions of IE fall back on to ActiveX objects when necessary.\r\n\t * XHR requests load the content as text or binary data, provide progress and consistent completion events, and\r\n\t * can be canceled during load. Note that XHR is not supported in IE 6 or earlier, and is not recommended for\r\n\t * cross-domain loading.\r\n\t * @class XHRRequest\r\n\t * @constructor\r\n\t * @param {Object} item The object that defines the file to load. Please see the {{#crossLink \"LoadQueue/loadFile\"}}{{/crossLink}}\r\n\t * for an overview of supported file properties.\r\n\t * @extends AbstractLoader\r\n\t */\r\n\tfunction XHRRequest (item) {\r\n\t\tthis.AbstractRequest_constructor(item);\r\n\r\n\t\t// protected properties\r\n\t\t/**\r\n\t\t * A reference to the XHR request used to load the content.\r\n\t\t * @property _request\r\n\t\t * @type {XMLHttpRequest | XDomainRequest | ActiveX.XMLHTTP}\r\n\t\t * @private\r\n\t\t */\r\n\t\tthis._request = null;\r\n\r\n\t\t/**\r\n\t\t * A manual load timeout that is used for browsers that do not support the onTimeout event on XHR (XHR level 1,\r\n\t\t * typically IE9).\r\n\t\t * @property _loadTimeout\r\n\t\t * @type {Number}\r\n\t\t * @private\r\n\t\t */\r\n\t\tthis._loadTimeout = null;\r\n\r\n\t\t/**\r\n\t\t * The browser's XHR (XMLHTTPRequest) version. Supported versions are 1 and 2. There is no official way to detect\r\n\t\t * the version, so we use capabilities to make a best guess.\r\n\t\t * @property _xhrLevel\r\n\t\t * @type {Number}\r\n\t\t * @default 1\r\n\t\t * @private\r\n\t\t */\r\n\t\tthis._xhrLevel = 1;\r\n\r\n\t\t/**\r\n\t\t * The response of a loaded file. This is set because it is expensive to look up constantly. This property will be\r\n\t\t * null until the file is loaded.\r\n\t\t * @property _response\r\n\t\t * @type {mixed}\r\n\t\t * @private\r\n\t\t */\r\n\t\tthis._response = null;\r\n\r\n\t\t/**\r\n\t\t * The response of the loaded file before it is modified. In most cases, content is converted from raw text to\r\n\t\t * an HTML tag or a formatted object which is set to the <code>result</code> property, but the developer may still\r\n\t\t * want to access the raw content as it was loaded.\r\n\t\t * @property _rawResponse\r\n\t\t * @type {String|Object}\r\n\t\t * @private\r\n\t\t */\r\n\t\tthis._rawResponse = null;\r\n\r\n\t\tthis._canceled = false;\r\n\r\n\t\t// Setup our event handlers now.\r\n\t\tthis._handleLoadStartProxy = createjs.proxy(this._handleLoadStart, this);\r\n\t\tthis._handleProgressProxy = createjs.proxy(this._handleProgress, this);\r\n\t\tthis._handleAbortProxy = createjs.proxy(this._handleAbort, this);\r\n\t\tthis._handleErrorProxy = createjs.proxy(this._handleError, this);\r\n\t\tthis._handleTimeoutProxy = createjs.proxy(this._handleTimeout, this);\r\n\t\tthis._handleLoadProxy = createjs.proxy(this._handleLoad, this);\r\n\t\tthis._handleReadyStateChangeProxy = createjs.proxy(this._handleReadyStateChange, this);\r\n\r\n\t\tif (!this._createXHR(item)) {\r\n\t\t\t//TODO: Throw error?\r\n\t\t}\r\n\t};\r\n\r\n\tvar p = createjs.extend(XHRRequest, createjs.AbstractRequest);\r\n\r\n// static properties\r\n\t/**\r\n\t * A list of XMLHTTP object IDs to try when building an ActiveX object for XHR requests in earlier versions of IE.\r\n\t * @property ACTIVEX_VERSIONS\r\n\t * @type {Array}\r\n\t * @since 0.4.2\r\n\t * @private\r\n\t */\r\n\tXHRRequest.ACTIVEX_VERSIONS = [\r\n\t\t\"Msxml2.XMLHTTP.6.0\",\r\n\t\t\"Msxml2.XMLHTTP.5.0\",\r\n\t\t\"Msxml2.XMLHTTP.4.0\",\r\n\t\t\"MSXML2.XMLHTTP.3.0\",\r\n\t\t\"MSXML2.XMLHTTP\",\r\n\t\t\"Microsoft.XMLHTTP\"\r\n\t];\r\n\r\n// Public methods\r\n\t/**\r\n\t * Look up the loaded result.\r\n\t * @method getResult\r\n\t * @param {Boolean} [raw=false] Return a raw result instead of a formatted result. This applies to content\r\n\t * loaded via XHR such as scripts, XML, CSS, and Images. If there is no raw result, the formatted result will be\r\n\t * returned instead.\r\n\t * @return {Object} A result object containing the content that was loaded, such as:\r\n\t * <ul>\r\n\t *      <li>An image tag (&lt;image /&gt;) for images</li>\r\n\t *      <li>A script tag for JavaScript (&lt;script /&gt;). Note that scripts loaded with tags may be added to the\r\n\t *      HTML head.</li>\r\n\t *      <li>A style tag for CSS (&lt;style /&gt;)</li>\r\n\t *      <li>Raw text for TEXT</li>\r\n\t *      <li>A formatted JavaScript object defined by JSON</li>\r\n\t *      <li>An XML document</li>\r\n\t *      <li>An binary arraybuffer loaded by XHR</li>\r\n\t * </ul>\r\n\t * Note that if a raw result is requested, but not found, the result will be returned instead.\r\n\t */\r\n\tp.getResult = function (raw) {\r\n\t\tif (raw && this._rawResponse) {\r\n\t\t\treturn this._rawResponse;\r\n\t\t}\r\n\t\treturn this._response;\r\n\t};\r\n\r\n\t// Overrides abstract method in AbstractRequest\r\n\tp.cancel = function () {\r\n\t\tthis.canceled = true;\r\n\t\tthis._clean();\r\n\t\tthis._request.abort();\r\n\t};\r\n\r\n\t// Overrides abstract method in AbstractLoader\r\n\tp.load = function () {\r\n\t\tif (this._request == null) {\r\n\t\t\tthis._handleError();\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t//Events\r\n\t\tif (this._request.addEventListener != null) {\r\n\t\t\tthis._request.addEventListener(\"loadstart\", this._handleLoadStartProxy, false);\r\n\t\t\tthis._request.addEventListener(\"progress\", this._handleProgressProxy, false);\r\n\t\t\tthis._request.addEventListener(\"abort\", this._handleAbortProxy, false);\r\n\t\t\tthis._request.addEventListener(\"error\", this._handleErrorProxy, false);\r\n\t\t\tthis._request.addEventListener(\"timeout\", this._handleTimeoutProxy, false);\r\n\r\n\t\t\t// Note: We don't get onload in all browsers (earlier FF and IE). onReadyStateChange handles these.\r\n\t\t\tthis._request.addEventListener(\"load\", this._handleLoadProxy, false);\r\n\t\t\tthis._request.addEventListener(\"readystatechange\", this._handleReadyStateChangeProxy, false);\r\n\t\t} else {\r\n\t\t\t// IE9 support\r\n\t\t\tthis._request.onloadstart = this._handleLoadStartProxy;\r\n\t\t\tthis._request.onprogress = this._handleProgressProxy;\r\n\t\t\tthis._request.onabort = this._handleAbortProxy;\r\n\t\t\tthis._request.onerror = this._handleErrorProxy;\r\n\t\t\tthis._request.ontimeout = this._handleTimeoutProxy;\r\n\r\n\t\t\t// Note: We don't get onload in all browsers (earlier FF and IE). onReadyStateChange handles these.\r\n\t\t\tthis._request.onload = this._handleLoadProxy;\r\n\t\t\tthis._request.onreadystatechange = this._handleReadyStateChangeProxy;\r\n\t\t}\r\n\r\n\t\t// Set up a timeout if we don't have XHR2\r\n\t\tif (this._xhrLevel == 1) {\r\n\t\t\tthis._loadTimeout = setTimeout(createjs.proxy(this._handleTimeout, this), this._item.loadTimeout);\r\n\t\t}\r\n\r\n\t\t// Sometimes we get back 404s immediately, particularly when there is a cross origin request.  // note this does not catch in Chrome\r\n\t\ttry {\r\n\t\t\tif (!this._item.values || this._item.method == createjs.AbstractLoader.GET) {\r\n\t\t\t\tthis._request.send();\r\n\t\t\t} else if (this._item.method == createjs.AbstractLoader.POST) {\r\n\t\t\t\tthis._request.send(createjs.RequestUtils.formatQueryString(this._item.values));\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t\tthis.dispatchEvent(new createjs.ErrorEvent(\"XHR_SEND\", null, error));\r\n\t\t}\r\n\t};\r\n\r\n\tp.setResponseType = function (type) {\r\n\t\t// Some old browsers doesn't support blob, so we convert arraybuffer to blob after response is downloaded\r\n\t\tif (type === 'blob') {\r\n\t\t\ttype = window.URL ? 'blob' : 'arraybuffer';\r\n\t\t\tthis._responseType = type;\r\n\t\t}\r\n\t\tthis._request.responseType = type;\r\n\t};\r\n\r\n\t/**\r\n\t * Get all the response headers from the XmlHttpRequest.\r\n\t *\r\n\t * <strong>From the docs:</strong> Return all the HTTP headers, excluding headers that are a case-insensitive match\r\n\t * for Set-Cookie or Set-Cookie2, as a single string, with each header line separated by a U+000D CR U+000A LF pair,\r\n\t * excluding the status line, and with each header name and header value separated by a U+003A COLON U+0020 SPACE\r\n\t * pair.\r\n\t * @method getAllResponseHeaders\r\n\t * @return {String}\r\n\t * @since 0.4.1\r\n\t */\r\n\tp.getAllResponseHeaders = function () {\r\n\t\tif (this._request.getAllResponseHeaders instanceof Function) {\r\n\t\t\treturn this._request.getAllResponseHeaders();\r\n\t\t} else {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t};\r\n\r\n\t/**\r\n\t * Get a specific response header from the XmlHttpRequest.\r\n\t *\r\n\t * <strong>From the docs:</strong> Returns the header field value from the response of which the field name matches\r\n\t * header, unless the field name is Set-Cookie or Set-Cookie2.\r\n\t * @method getResponseHeader\r\n\t * @param {String} header The header name to retrieve.\r\n\t * @return {String}\r\n\t * @since 0.4.1\r\n\t */\r\n\tp.getResponseHeader = function (header) {\r\n\t\tif (this._request.getResponseHeader instanceof Function) {\r\n\t\t\treturn this._request.getResponseHeader(header);\r\n\t\t} else {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t};\r\n\r\n// protected methods\r\n\t/**\r\n\t * The XHR request has reported progress.\r\n\t * @method _handleProgress\r\n\t * @param {Object} event The XHR progress event.\r\n\t * @private\r\n\t */\r\n\tp._handleProgress = function (event) {\r\n\t\tif (!event || event.loaded > 0 && event.total == 0) {\r\n\t\t\treturn; // Sometimes we get no \"total\", so just ignore the progress event.\r\n\t\t}\r\n\r\n\t\tvar newEvent = new createjs.ProgressEvent(event.loaded, event.total);\r\n\t\tthis.dispatchEvent(newEvent);\r\n\t};\r\n\r\n\t/**\r\n\t * The XHR request has reported a load start.\r\n\t * @method _handleLoadStart\r\n\t * @param {Object} event The XHR loadStart event.\r\n\t * @private\r\n\t */\r\n\tp._handleLoadStart = function (event) {\r\n\t\tclearTimeout(this._loadTimeout);\r\n\t\tthis.dispatchEvent(\"loadstart\");\r\n\t};\r\n\r\n\t/**\r\n\t * The XHR request has reported an abort event.\r\n\t * @method handleAbort\r\n\t * @param {Object} event The XHR abort event.\r\n\t * @private\r\n\t */\r\n\tp._handleAbort = function (event) {\r\n\t\tthis._clean();\r\n\t\tthis.dispatchEvent(new createjs.ErrorEvent(\"XHR_ABORTED\", null, event));\r\n\t};\r\n\r\n\t/**\r\n\t * The XHR request has reported an error event.\r\n\t * @method _handleError\r\n\t * @param {Object} event The XHR error event.\r\n\t * @private\r\n\t */\r\n\tp._handleError = function (event) {\r\n\t\tthis._clean();\r\n\t\tthis.dispatchEvent(new createjs.ErrorEvent(event.message));\r\n\t};\r\n\r\n\t/**\r\n\t * The XHR request has reported a readyState change. Note that older browsers (IE 7 & 8) do not provide an onload\r\n\t * event, so we must monitor the readyStateChange to determine if the file is loaded.\r\n\t * @method _handleReadyStateChange\r\n\t * @param {Object} event The XHR readyStateChange event.\r\n\t * @private\r\n\t */\r\n\tp._handleReadyStateChange = function (event) {\r\n\t\tif (this._request.readyState == 4) {\r\n\t\t\tthis._handleLoad();\r\n\t\t}\r\n\t};\r\n\r\n\t/**\r\n\t * The XHR request has completed. This is called by the XHR request directly, or by a readyStateChange that has\r\n\t * <code>request.readyState == 4</code>. Only the first call to this method will be processed.\r\n\t * @method _handleLoad\r\n\t * @param {Object} event The XHR load event.\r\n\t * @private\r\n\t */\r\n\tp._handleLoad = function (event) {\r\n\t\tif (this.loaded) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.loaded = true;\r\n\r\n\t\tvar error = this._checkError();\r\n\t\tif (error) {\r\n\t\t\tthis._handleError(error);\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tthis._response = this._getResponse();\r\n\t\t// Convert arraybuffer back to blob\r\n\t\tif (this._responseType === 'arraybuffer') {\r\n\t\t\ttry {\r\n\t\t\t\tthis._response = new Blob([this._response]);\r\n\t\t\t} catch (e) {\r\n\t\t\t\t// Fallback to use BlobBuilder if Blob constructor is not supported\r\n\t\t\t\t// Tested on Android 2.3 ~ 4.2 and iOS5 safari\r\n\t\t\t\twindow.BlobBuilder = window.BlobBuilder || window.WebKitBlobBuilder || window.MozBlobBuilder || window.MSBlobBuilder;\r\n\t\t\t\tif (e.name === 'TypeError' && window.BlobBuilder) {\r\n\t\t\t\t\tvar builder = new BlobBuilder();\r\n\t\t\t\t\tbuilder.append(this._response);\r\n\t\t\t\t\tthis._response = builder.getBlob();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis._clean();\r\n\r\n\t\tthis.dispatchEvent(new createjs.Event(\"complete\"));\r\n\t};\r\n\r\n\t/**\r\n\t * The XHR request has timed out. This is called by the XHR request directly, or via a <code>setTimeout</code>\r\n\t * callback.\r\n\t * @method _handleTimeout\r\n\t * @param {Object} [event] The XHR timeout event. This is occasionally null when called by the backup setTimeout.\r\n\t * @private\r\n\t */\r\n\tp._handleTimeout = function (event) {\r\n\t\tthis._clean();\r\n\r\n\t\tthis.dispatchEvent(new createjs.ErrorEvent(\"PRELOAD_TIMEOUT\", null, event));\r\n\t};\r\n\r\n// Protected\r\n\t/**\r\n\t * Determine if there is an error in the current load. This checks the status of the request for problem codes. Note\r\n\t * that this does not check for an actual response. Currently, it only checks for 404 or 0 error code.\r\n\t * @method _checkError\r\n\t * @return {int} If the request status returns an error code.\r\n\t * @private\r\n\t */\r\n\tp._checkError = function () {\r\n\t\t//LM: Probably need additional handlers here, maybe 501\r\n\t\tvar status = parseInt(this._request.status);\r\n\r\n\t\tswitch (status) {\r\n\t\t\tcase 404:   // Not Found\r\n\t\t\tcase 0:     // Not Loaded\r\n\t\t\t\treturn new Error(status);\r\n\t\t}\r\n\t\treturn null;\r\n\t};\r\n\r\n\t/**\r\n\t * Validate the response. Different browsers have different approaches, some of which throw errors when accessed\r\n\t * in other browsers. If there is no response, the <code>_response</code> property will remain null.\r\n\t * @method _getResponse\r\n\t * @private\r\n\t */\r\n\tp._getResponse = function () {\r\n\t\tif (this._response != null) {\r\n\t\t\treturn this._response;\r\n\t\t}\r\n\r\n\t\tif (this._request.response != null) {\r\n\t\t\treturn this._request.response;\r\n\t\t}\r\n\r\n\t\t// Android 2.2 uses .responseText\r\n\t\ttry {\r\n\t\t\tif (this._request.responseText != null) {\r\n\t\t\t\treturn this._request.responseText;\r\n\t\t\t}\r\n\t\t} catch (e) {\r\n\t\t}\r\n\r\n\t\t// When loading XML, IE9 does not return .response, instead it returns responseXML.xml\r\n\t\ttry {\r\n\t\t\tif (this._request.responseXML != null) {\r\n\t\t\t\treturn this._request.responseXML;\r\n\t\t\t}\r\n\t\t} catch (e) {\r\n\t\t}\r\n\r\n\t\treturn null;\r\n\t};\r\n\r\n\t/**\r\n\t * Create an XHR request. Depending on a number of factors, we get totally different results.\r\n\t * <ol><li>Some browsers get an <code>XDomainRequest</code> when loading cross-domain.</li>\r\n\t *      <li>XMLHttpRequest are created when available.</li>\r\n\t *      <li>ActiveX.XMLHTTP objects are used in older IE browsers.</li>\r\n\t *      <li>Text requests override the mime type if possible</li>\r\n\t *      <li>Origin headers are sent for crossdomain requests in some browsers.</li>\r\n\t *      <li>Binary loads set the response type to \"arraybuffer\"</li></ol>\r\n\t * @method _createXHR\r\n\t * @param {Object} item The requested item that is being loaded.\r\n\t * @return {Boolean} If an XHR request or equivalent was successfully created.\r\n\t * @private\r\n\t */\r\n\tp._createXHR = function (item) {\r\n\t\t// Check for cross-domain loads. We can't fully support them, but we can try.\r\n\t\tvar crossdomain = createjs.RequestUtils.isCrossDomain(item);\r\n\t\tvar headers = {};\r\n\r\n\t\t// Create the request. Fallback to whatever support we have.\r\n\t\tvar req = null;\r\n\t\tif (window.XMLHttpRequest) {\r\n\t\t\treq = new XMLHttpRequest();\r\n\t\t\t// This is 8 or 9, so use XDomainRequest instead.\r\n\t\t\tif (crossdomain && req.withCredentials === undefined && window.XDomainRequest) {\r\n\t\t\t\treq = new XDomainRequest();\r\n\t\t\t}\r\n\t\t} else { // Old IE versions use a different approach\r\n\t\t\tfor (var i = 0, l = s.ACTIVEX_VERSIONS.length; i < l; i++) {\r\n\t\t\t\tvar axVersion = s.ACTIVEX_VERSIONS[i];\r\n\t\t\t\ttry {\r\n\t\t\t\t\treq = new ActiveXObject(axVersion);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t} catch (e) {\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (req == null) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// Default to utf-8 for Text requests.\r\n\t\tif (item.mimeType == null && createjs.RequestUtils.isText(item.type)) {\r\n\t\t\titem.mimeType = \"text/plain; charset=utf-8\";\r\n\t\t}\r\n\r\n\t\t// IE9 doesn't support overrideMimeType(), so we need to check for it.\r\n\t\tif (item.mimeType && req.overrideMimeType) {\r\n\t\t\treq.overrideMimeType(item.mimeType);\r\n\t\t}\r\n\r\n\t\t// Determine the XHR level\r\n\t\tthis._xhrLevel = (typeof req.responseType === \"string\") ? 2 : 1;\r\n\r\n\t\tvar src = null;\r\n\t\tif (item.method == createjs.AbstractLoader.GET) {\r\n\t\t\tsrc = createjs.RequestUtils.buildPath(item.src, item.values);\r\n\t\t} else {\r\n\t\t\tsrc = item.src;\r\n\t\t}\r\n\r\n\t\t// Open the request.  Set cross-domain flags if it is supported (XHR level 1 only)\r\n\t\treq.open(item.method || createjs.AbstractLoader.GET, src, true);\r\n\r\n\t\tif (crossdomain && req instanceof XMLHttpRequest && this._xhrLevel == 1) {\r\n\t\t\theaders[\"Origin\"] = location.origin;\r\n\t\t}\r\n\r\n\t\t// To send data we need to set the Content-type header)\r\n\t\tif (item.values && item.method == createjs.AbstractLoader.POST) {\r\n\t\t\theaders[\"Content-Type\"] = \"application/x-www-form-urlencoded\";\r\n\t\t}\r\n\r\n\t\tif (!crossdomain && !headers[\"X-Requested-With\"]) {\r\n\t\t\theaders[\"X-Requested-With\"] = \"XMLHttpRequest\";\r\n\t\t}\r\n\r\n\t\tif (item.headers) {\r\n\t\t\tfor (var n in item.headers) {\r\n\t\t\t\theaders[n] = item.headers[n];\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfor (n in headers) {\r\n\t\t\treq.setRequestHeader(n, headers[n])\r\n\t\t}\r\n\r\n\t\tif (req instanceof XMLHttpRequest && item.withCredentials !== undefined) {\r\n\t\t\treq.withCredentials = item.withCredentials;\r\n\t\t}\r\n\r\n\t\tthis._request = req;\r\n\r\n\t\treturn true;\r\n\t};\r\n\r\n\t/**\r\n\t * A request has completed (or failed or canceled), and needs to be disposed.\r\n\t * @method _clean\r\n\t * @private\r\n\t */\r\n\tp._clean = function () {\r\n\t\tclearTimeout(this._loadTimeout);\r\n\r\n\t\tif (this._request.removeEventListener != null) {\r\n\t\t\tthis._request.removeEventListener(\"loadstart\", this._handleLoadStartProxy);\r\n\t\t\tthis._request.removeEventListener(\"progress\", this._handleProgressProxy);\r\n\t\t\tthis._request.removeEventListener(\"abort\", this._handleAbortProxy);\r\n\t\t\tthis._request.removeEventListener(\"error\", this._handleErrorProxy);\r\n\t\t\tthis._request.removeEventListener(\"timeout\", this._handleTimeoutProxy);\r\n\t\t\tthis._request.removeEventListener(\"load\", this._handleLoadProxy);\r\n\t\t\tthis._request.removeEventListener(\"readystatechange\", this._handleReadyStateChangeProxy);\r\n\t\t} else {\r\n\t\t\tthis._request.onloadstart = null;\r\n\t\t\tthis._request.onprogress = null;\r\n\t\t\tthis._request.onabort = null;\r\n\t\t\tthis._request.onerror = null;\r\n\t\t\tthis._request.ontimeout = null;\r\n\t\t\tthis._request.onload = null;\r\n\t\t\tthis._request.onreadystatechange = null;\r\n\t\t}\r\n\t};\r\n\r\n\tp.toString = function () {\r\n\t\treturn \"[PreloadJS XHRRequest]\";\r\n\t};\r\n\r\n\tcreatejs.XHRRequest = createjs.promote(XHRRequest, \"AbstractRequest\");\r\n\r\n}());\r\n\r\n//##############################################################################\r\n// LoadQueue.js\r\n//##############################################################################\r\n\r\nthis.createjs = this.createjs || {};\r\n\r\n/*\r\n TODO: WINDOWS ISSUES\r\n * No error for HTML audio in IE 678\r\n * SVG no failure error in IE 67 (maybe 8) TAGS AND XHR\r\n * No script complete handler in IE 67 TAGS (XHR is fine)\r\n * No XML/JSON in IE6 TAGS\r\n * Need to hide loading SVG in Opera TAGS\r\n * No CSS onload/readystatechange in Safari or Android TAGS (requires rule checking)\r\n * SVG no load or failure in Opera XHR\r\n * Reported issues with IE7/8\r\n */\r\n\r\n(function () {\r\n\t\"use strict\";\r\n\r\n// constructor\r\n\t/**\r\n\t * The LoadQueue class is the main API for preloading content. LoadQueue is a load manager, which can preload either\r\n\t * a single file, or queue of files.\r\n\t *\r\n\t * <b>Creating a Queue</b><br />\r\n\t * To use LoadQueue, create a LoadQueue instance. If you want to force tag loading where possible, set the preferXHR\r\n\t * argument to false.\r\n\t *\r\n\t *      var queue = new createjs.LoadQueue(true);\r\n\t *\r\n\t * <b>Listening for Events</b><br />\r\n\t * Add any listeners you want to the queue. Since PreloadJS 0.3.0, the {{#crossLink \"EventDispatcher\"}}{{/crossLink}}\r\n\t * lets you add as many listeners as you want for events. You can subscribe to the following events:<ul>\r\n\t *     <li>{{#crossLink \"AbstractLoader/complete:event\"}}{{/crossLink}}: fired when a queue completes loading all\r\n\t *     files</li>\r\n\t *     <li>{{#crossLink \"AbstractLoader/error:event\"}}{{/crossLink}}: fired when the queue encounters an error with\r\n\t *     any file.</li>\r\n\t *     <li>{{#crossLink \"AbstractLoader/progress:event\"}}{{/crossLink}}: Progress for the entire queue has\r\n\t *     changed.</li>\r\n\t *     <li>{{#crossLink \"LoadQueue/fileload:event\"}}{{/crossLink}}: A single file has completed loading.</li>\r\n\t *     <li>{{#crossLink \"LoadQueue/fileprogress:event\"}}{{/crossLink}}: Progress for a single file has changes. Note\r\n\t *     that only files loaded with XHR (or possibly by plugins) will fire progress events other than 0 or 100%.</li>\r\n\t * </ul>\r\n\t *\r\n\t *      queue.on(\"fileload\", handleFileLoad, this);\r\n\t *      queue.on(\"complete\", handleComplete, this);\r\n\t *\r\n\t * <b>Adding files and manifests</b><br />\r\n\t * Add files you want to load using {{#crossLink \"LoadQueue/loadFile\"}}{{/crossLink}} or add multiple files at a\r\n\t * time using a list or a manifest definition using {{#crossLink \"LoadQueue/loadManifest\"}}{{/crossLink}}. Files are\r\n\t * appended to the end of the active queue, so you can use these methods as many times as you like, whenever you\r\n\t * like.\r\n\t *\r\n\t *      queue.loadFile(\"filePath/file.jpg\");\r\n\t *      queue.loadFile({id:\"image\", src:\"filePath/file.jpg\"});\r\n\t *      queue.loadManifest([\"filePath/file.jpg\", {id:\"image\", src:\"filePath/file.jpg\"}]);\r\n\t *\r\n\t *      // Use an external manifest\r\n\t *      queue.loadManifest(\"path/to/manifest.json\");\r\n\t *      queue.loadManifest({src:\"manifest.json\", type:\"manifest\"});\r\n\t *\r\n\t * If you pass `false` as the `loadNow` parameter, the queue will not kick of the load of the files, but it will not\r\n\t * stop if it has already been started. Call the {{#crossLink \"AbstractLoader/load\"}}{{/crossLink}} method to begin\r\n\t * a paused queue. Note that a paused queue will automatically resume when new files are added to it with a\r\n\t * `loadNow` argument of `true`.\r\n\t *\r\n\t *      queue.load();\r\n\t *\r\n\t * <b>File Types</b><br />\r\n\t * The file type of a manifest item is auto-determined by the file extension. The pattern matching in PreloadJS\r\n\t * should handle the majority of standard file and url formats, and works with common file extensions. If you have\r\n\t * either a non-standard file extension, or are serving the file using a proxy script, then you can pass in a\r\n\t * <code>type</code> property with any manifest item.\r\n\t *\r\n\t *      queue.loadFile({src:\"path/to/myFile.mp3x\", type:createjs.AbstractLoader.SOUND});\r\n\t *\r\n\t *      // Note that PreloadJS will not read a file extension from the query string\r\n\t *      queue.loadFile({src:\"http://server.com/proxy?file=image.jpg\", type:createjs.AbstractLoader.IMAGE});\r\n\t *\r\n\t * Supported types are defined on the {{#crossLink \"AbstractLoader\"}}{{/crossLink}} class, and include:\r\n\t * <ul>\r\n\t *     <li>{{#crossLink \"AbstractLoader/BINARY:property\"}}{{/crossLink}}: Raw binary data via XHR</li>\r\n\t *     <li>{{#crossLink \"AbstractLoader/CSS:property\"}}{{/crossLink}}: CSS files</li>\r\n\t *     <li>{{#crossLink \"AbstractLoader/IMAGE:property\"}}{{/crossLink}}: Common image formats</li>\r\n\t *     <li>{{#crossLink \"AbstractLoader/JAVASCRIPT:property\"}}{{/crossLink}}: JavaScript files</li>\r\n\t *     <li>{{#crossLink \"AbstractLoader/JSON:property\"}}{{/crossLink}}: JSON data</li>\r\n\t *     <li>{{#crossLink \"AbstractLoader/JSONP:property\"}}{{/crossLink}}: JSON files cross-domain</li>\r\n\t *     <li>{{#crossLink \"AbstractLoader/MANIFEST:property\"}}{{/crossLink}}: A list of files to load in JSON format, see\r\n\t *     {{#crossLink \"AbstractLoader/loadManifest\"}}{{/crossLink}}</li>\r\n\t *     <li>{{#crossLink \"AbstractLoader/SOUND:property\"}}{{/crossLink}}: Audio file formats</li>\r\n\t *     <li>{{#crossLink \"AbstractLoader/SPRITESHEET:property\"}}{{/crossLink}}: JSON SpriteSheet definitions. This\r\n\t *     will also load sub-images, and provide a {{#crossLink \"SpriteSheet\"}}{{/crossLink}} instance.</li>\r\n\t *     <li>{{#crossLink \"AbstractLoader/SVG:property\"}}{{/crossLink}}: SVG files</li>\r\n\t *     <li>{{#crossLink \"AbstractLoader/TEXT:property\"}}{{/crossLink}}: Text files - XHR only</li>\r\n     *     <li>{{#crossLink \"AbstractLoader/VIDEO:property\"}}{{/crossLink}}: Video objects</li>\r\n\t *     <li>{{#crossLink \"AbstractLoader/XML:property\"}}{{/crossLink}}: XML data</li>\r\n\t * </ul>\r\n\t *\r\n\t * <em>Note: Loader types used to be defined on LoadQueue, but have been moved to AbstractLoader for better\r\n\t * portability of loader classes, which can be used individually now. The properties on LoadQueue still exist, but\r\n\t * are deprecated.</em>\r\n\t *\r\n\t * <b>Handling Results</b><br />\r\n\t * When a file is finished downloading, a {{#crossLink \"LoadQueue/fileload:event\"}}{{/crossLink}} event is\r\n\t * dispatched. In an example above, there is an event listener snippet for fileload. Loaded files are usually a\r\n\t * formatted object that can be used immediately, including:\r\n\t * <ul>\r\n\t *     <li>Binary: The binary loaded result</li>\r\n\t *     <li>CSS: A &lt;link /&gt; tag</li>\r\n\t *     <li>Image: An &lt;img /&gt; tag</li>\r\n\t *     <li>JavaScript: A &lt;script /&gt; tag</li>\r\n\t *     <li>JSON/JSONP: A formatted JavaScript Object</li>\r\n\t *     <li>Manifest: A JavaScript object.\r\n\t *     <li>Sound: An &lt;audio /&gt; tag</a>\r\n\t *     <li>SpriteSheet: A {{#crossLink \"SpriteSheet\"}}{{/crossLink}} instance, containing loaded images.\r\n\t *     <li>SVG: An &lt;object /&gt; tag</li>\r\n\t *     <li>Text: Raw text</li>\r\n     *     <li>Video: A Video DOM node</li>\r\n\t *     <li>XML: An XML DOM node</li>\r\n\t * </ul>\r\n\t *\r\n\t *      function handleFileLoad(event) {\r\n\t *          var item = event.item; // A reference to the item that was passed in to the LoadQueue\r\n\t *          var type = item.type;\r\n\t *\r\n\t *          // Add any images to the page body.\r\n\t *          if (type == createjs.LoadQueue.IMAGE) {\r\n\t *              document.body.appendChild(event.result);\r\n\t *          }\r\n\t *      }\r\n\t *\r\n\t * At any time after the file has been loaded (usually after the queue has completed), any result can be looked up\r\n\t * via its \"id\" using {{#crossLink \"LoadQueue/getResult\"}}{{/crossLink}}. If no id was provided, then the\r\n\t * \"src\" or file path can be used instead, including the `path` defined by a manifest, but <strong>not including</strong>\r\n\t * a base path defined on the LoadQueue. It is recommended to always pass an id if you want to look up content.\r\n\t *\r\n\t *      var image = queue.getResult(\"image\");\r\n\t *      document.body.appendChild(image);\r\n\t *\r\n\t * Raw loaded content can be accessed using the <code>rawResult</code> property of the {{#crossLink \"LoadQueue/fileload:event\"}}{{/crossLink}}\r\n\t * event, or can be looked up using {{#crossLink \"LoadQueue/getResult\"}}{{/crossLink}}, passing `true` as the 2nd\r\n\t * argument. This is only applicable for content that has been parsed for the browser, specifically: JavaScript,\r\n\t * CSS, XML, SVG, and JSON objects, or anything loaded with XHR.\r\n\t *\r\n\t *      var image = queue.getResult(\"image\", true); // load the binary image data loaded with XHR.\r\n\t *\r\n\t * <b>Plugins</b><br />\r\n\t * LoadQueue has a simple plugin architecture to help process and preload content. For example, to preload audio,\r\n\t * make sure to install the <a href=\"http://soundjs.com\">SoundJS</a> Sound class, which will help load HTML audio,\r\n\t * Flash audio, and WebAudio files. This should be installed <strong>before</strong> loading any audio files.\r\n\t *\r\n\t *      queue.installPlugin(createjs.Sound);\r\n\t *\r\n\t * <h4>Known Browser Issues</h4>\r\n\t * <ul>\r\n\t *     <li>Browsers without audio support can not load audio files.</li>\r\n\t *     <li>Safari on Mac OS X can only play HTML audio if QuickTime is installed</li>\r\n\t *     <li>HTML Audio tags will only download until their <code>canPlayThrough</code> event is fired. Browsers other\r\n\t *     than Chrome will continue to download in the background.</li>\r\n\t *     <li>When loading scripts using tags, they are automatically added to the document.</li>\r\n\t *     <li>Scripts loaded via XHR may not be properly inspectable with browser tools.</li>\r\n\t *     <li>IE6 and IE7 (and some other browsers) may not be able to load XML, Text, or JSON, since they require\r\n\t *     XHR to work.</li>\r\n\t *     <li>Content loaded via tags will not show progress, and will continue to download in the background when\r\n\t *     canceled, although no events will be dispatched.</li>\r\n\t * </ul>\r\n\t *\r\n\t * @class LoadQueue\r\n\t * @param {Boolean} [preferXHR=true] Determines whether the preload instance will favor loading with XHR (XML HTTP\r\n\t * Requests), or HTML tags. When this is `false`, the queue will use tag loading when possible, and fall back on XHR\r\n\t * when necessary.\r\n\t * @param {String} [basePath=\"\"] A path that will be prepended on to the source parameter of all items in the queue\r\n\t * before they are loaded.  Sources beginning with a protocol such as `http://` or a relative path such as `../`\r\n\t * will not receive a base path.\r\n\t * @param {String|Boolean} [crossOrigin=\"\"] An optional flag to support images loaded from a CORS-enabled server. To\r\n\t * use it, set this value to `true`, which will default the crossOrigin property on images to \"Anonymous\". Any\r\n\t * string value will be passed through, but only \"\" and \"Anonymous\" are recommended. <strong>Note: The crossOrigin\r\n\t * parameter is deprecated. Use LoadItem.crossOrigin instead</strong>\r\n\t *\r\n\t * @constructor\r\n\t * @extends AbstractLoader\r\n\t */\r\n\tfunction LoadQueue (preferXHR, basePath, crossOrigin) {\r\n\t\tthis.AbstractLoader_constructor();\r\n\r\n\t\t/**\r\n\t\t * An array of the plugins registered using {{#crossLink \"LoadQueue/installPlugin\"}}{{/crossLink}}.\r\n\t\t * @property _plugins\r\n\t\t * @type {Array}\r\n\t\t * @private\r\n\t\t * @since 0.6.1\r\n\t\t */\r\n\t\tthis._plugins = [];\r\n\r\n\t\t/**\r\n\t\t * An object hash of callbacks that are fired for each file type before the file is loaded, giving plugins the\r\n\t\t * ability to override properties of the load. Please see the {{#crossLink \"LoadQueue/installPlugin\"}}{{/crossLink}}\r\n\t\t * method for more information.\r\n\t\t * @property _typeCallbacks\r\n\t\t * @type {Object}\r\n\t\t * @private\r\n\t\t */\r\n\t\tthis._typeCallbacks = {};\r\n\r\n\t\t/**\r\n\t\t * An object hash of callbacks that are fired for each file extension before the file is loaded, giving plugins the\r\n\t\t * ability to override properties of the load. Please see the {{#crossLink \"LoadQueue/installPlugin\"}}{{/crossLink}}\r\n\t\t * method for more information.\r\n\t\t * @property _extensionCallbacks\r\n\t\t * @type {null}\r\n\t\t * @private\r\n\t\t */\r\n\t\tthis._extensionCallbacks = {};\r\n\r\n\t\t/**\r\n\t\t * The next preload queue to process when this one is complete. If an error is thrown in the current queue, and\r\n\t\t * {{#crossLink \"LoadQueue/stopOnError:property\"}}{{/crossLink}} is `true`, the next queue will not be processed.\r\n\t\t * @property next\r\n\t\t * @type {LoadQueue}\r\n\t\t * @default null\r\n\t\t */\r\n\t\tthis.next = null;\r\n\r\n\t\t/**\r\n\t\t * Ensure loaded scripts \"complete\" in the order they are specified. Loaded scripts are added to the document head\r\n\t\t * once they are loaded. Scripts loaded via tags will load one-at-a-time when this property is `true`, whereas\r\n\t\t * scripts loaded using XHR can load in any order, but will \"finish\" and be added to the document in the order\r\n\t\t * specified.\r\n\t\t *\r\n\t\t * Any items can be set to load in order by setting the {{#crossLink \"maintainOrder:property\"}}{{/crossLink}}\r\n\t\t * property on the load item, or by ensuring that only one connection can be open at a time using\r\n\t\t * {{#crossLink \"LoadQueue/setMaxConnections\"}}{{/crossLink}}. Note that when the `maintainScriptOrder` property\r\n\t\t * is set to `true`, scripts items are automatically set to `maintainOrder=true`, and changing the\r\n\t\t * `maintainScriptOrder` to `false` during a load will not change items already in a queue.\r\n\t\t *\r\n\t\t * <h4>Example</h4>\r\n\t\t *\r\n\t\t *      var queue = new createjs.LoadQueue();\r\n\t\t *      queue.setMaxConnections(3); // Set a higher number to load multiple items at once\r\n\t\t *      queue.maintainScriptOrder = true; // Ensure scripts are loaded in order\r\n\t\t *      queue.loadManifest([\r\n\t\t *          \"script1.js\",\r\n\t\t *          \"script2.js\",\r\n\t\t *          \"image.png\", // Load any time\r\n\t\t *          {src: \"image2.png\", maintainOrder: true} // Will wait for script2.js\r\n\t\t *          \"image3.png\",\r\n\t\t *          \"script3.js\" // Will wait for image2.png before loading (or completing when loading with XHR)\r\n\t\t *      ]);\r\n\t\t *\r\n\t\t * @property maintainScriptOrder\r\n\t\t * @type {Boolean}\r\n\t\t * @default true\r\n\t\t */\r\n\t\tthis.maintainScriptOrder = true;\r\n\r\n\t\t/**\r\n\t\t * Determines if the LoadQueue will stop processing the current queue when an error is encountered.\r\n\t\t * @property stopOnError\r\n\t\t * @type {Boolean}\r\n\t\t * @default false\r\n\t\t */\r\n\t\tthis.stopOnError = false;\r\n\r\n\t\t/**\r\n\t\t * The number of maximum open connections that a loadQueue tries to maintain. Please see\r\n\t\t * {{#crossLink \"LoadQueue/setMaxConnections\"}}{{/crossLink}} for more information.\r\n\t\t * @property _maxConnections\r\n\t\t * @type {Number}\r\n\t\t * @default 1\r\n\t\t * @private\r\n\t\t */\r\n\t\tthis._maxConnections = 1;\r\n\r\n\t\t/**\r\n\t\t * An internal list of all the default Loaders that are included with PreloadJS. Before an item is loaded, the\r\n\t\t * available loader list is iterated, in the order they are included, and as soon as a loader indicates it can\r\n\t\t * handle the content, it will be selected. The default loader, ({{#crossLink \"TextLoader\"}}{{/crossLink}} is\r\n\t\t * last in the list, so it will be used if no other match is found. Typically, loaders will match based on the\r\n\t\t * {{#crossLink \"LoadItem/type\"}}{{/crossLink}}, which is automatically determined using the file extension of\r\n\t\t * the {{#crossLink \"LoadItem/src:property\"}}{{/crossLink}}.\r\n\t\t *\r\n\t\t * Loaders can be removed from PreloadJS by simply not including them.\r\n\t\t *\r\n\t\t * Custom loaders installed using {{#crossLink \"registerLoader\"}}{{/crossLink}} will be prepended to this list\r\n\t\t * so that they are checked first.\r\n\t\t * @property _availableLoaders\r\n\t\t * @type {Array}\r\n\t\t * @private\r\n\t\t * @since 0.6.0\r\n\t\t */\r\n\t\tthis._availableLoaders = [\r\n\t\t\tcreatejs.ImageLoader,\r\n\t\t\tcreatejs.JavaScriptLoader,\r\n\t\t\tcreatejs.CSSLoader,\r\n\t\t\tcreatejs.JSONLoader,\r\n\t\t\tcreatejs.JSONPLoader,\r\n\t\t\tcreatejs.SoundLoader,\r\n\t\t\tcreatejs.ManifestLoader,\r\n\t\t\tcreatejs.SpriteSheetLoader,\r\n\t\t\tcreatejs.XMLLoader,\r\n\t\t\tcreatejs.SVGLoader,\r\n\t\t\tcreatejs.BinaryLoader,\r\n\t\t\tcreatejs.VideoLoader,\r\n\t\t\tcreatejs.TextLoader\r\n\t\t];\r\n\r\n\t\t/**\r\n\t\t * The number of built in loaders, so they can't be removed by {{#crossLink \"unregisterLoader\"}}{{/crossLink}.\r\n\t\t\t\t * @property _defaultLoaderLength\r\n\t\t * @type {Number}\r\n\t\t * @private\r\n\t\t * @since 0.6.0\r\n\t\t */\r\n\t\tthis._defaultLoaderLength = this._availableLoaders.length;\r\n\r\n\t\tthis.init(preferXHR, basePath, crossOrigin);\r\n\t}\r\n\r\n\tvar p = createjs.extend(LoadQueue, createjs.AbstractLoader);\r\n\tvar s = LoadQueue;\r\n\r\n\t/**\r\n\t * <strong>REMOVED</strong>. Removed in favor of using `MySuperClass_constructor`.\r\n\t * See {{#crossLink \"Utility Methods/extend\"}}{{/crossLink}} and {{#crossLink \"Utility Methods/promote\"}}{{/crossLink}}\r\n\t * for details.\r\n\t *\r\n\t * There is an inheritance tutorial distributed with EaselJS in /tutorials/Inheritance.\r\n\t *\r\n\t * @method initialize\r\n\t * @protected\r\n\t * @deprecated\r\n\t */\r\n\t// p.initialize = function() {}; // searchable for devs wondering where it is.\r\n\r\n\t/**\r\n\t * An internal initialization method, which is used for initial set up, but also to reset the LoadQueue.\r\n\t * @method init\r\n\t * @param preferXHR\r\n\t * @param basePath\r\n\t * @param crossOrigin\r\n\t * @private\r\n\t */\r\n\tp.init = function (preferXHR, basePath, crossOrigin) {\r\n\r\n\t\t// public properties\r\n\t\t/**\r\n\t\t * @property useXHR\r\n\t\t * @type {Boolean}\r\n\t\t * @readonly\r\n\t\t * @default true\r\n\t\t * @deprecated Use preferXHR instead.\r\n\t\t */\r\n\t\tthis.useXHR = true;\r\n\r\n\t\t/**\r\n\t\t * Try and use XMLHttpRequest (XHR) when possible. Note that LoadQueue will default to tag loading or XHR\r\n\t\t * loading depending on the requirements for a media type. For example, HTML audio can not be loaded with XHR,\r\n\t\t * and plain text can not be loaded with tags, so it will default the the correct type instead of using the\r\n\t\t * user-defined type.\r\n\t\t * @type {Boolean}\r\n\t\t * @default true\r\n\t\t * @since 0.6.0\r\n\t\t */\r\n\t\tthis.preferXHR = true; //TODO: Get/Set\r\n\t\tthis._preferXHR = true;\r\n\t\tthis.setPreferXHR(preferXHR);\r\n\r\n\t\t// protected properties\r\n\t\t/**\r\n\t\t * Whether the queue is currently paused or not.\r\n\t\t * @property _paused\r\n\t\t * @type {boolean}\r\n\t\t * @private\r\n\t\t */\r\n\t\tthis._paused = false;\r\n\r\n\t\t/**\r\n\t\t * A path that will be prepended on to the item's {{#crossLink \"LoadItem/src:property\"}}{{/crossLink}}. The\r\n\t\t * `_basePath` property will only be used if an item's source is relative, and does not include a protocol such\r\n\t\t * as `http://`, or a relative path such as `../`.\r\n\t\t * @property _basePath\r\n\t\t * @type {String}\r\n\t\t * @private\r\n\t\t * @since 0.3.1\r\n\t\t */\r\n\t\tthis._basePath = basePath;\r\n\r\n\t\t/**\r\n\t\t * An optional flag to set on images that are loaded using PreloadJS, which enables CORS support. Images loaded\r\n\t\t * cross-domain by servers that support CORS require the crossOrigin flag to be loaded and interacted with by\r\n\t\t * a canvas. When loading locally, or with a server with no CORS support, this flag can cause other security issues,\r\n\t\t * so it is recommended to only set it if you are sure the server supports it. Currently, supported values are \"\"\r\n\t\t * and \"Anonymous\".\r\n\t\t * @property _crossOrigin\r\n\t\t * @type {String}\r\n\t\t * @default \"\"\r\n\t\t * @private\r\n\t\t * @since 0.4.1\r\n\t\t */\r\n\t\tthis._crossOrigin = crossOrigin;\r\n\r\n\t\t/**\r\n\t\t * Determines if the loadStart event was dispatched already. This event is only fired one time, when the first\r\n\t\t * file is requested.\r\n\t\t * @property _loadStartWasDispatched\r\n\t\t * @type {Boolean}\r\n\t\t * @default false\r\n\t\t * @private\r\n\t\t */\r\n\t\tthis._loadStartWasDispatched = false;\r\n\r\n\t\t/**\r\n\t\t * Determines if there is currently a script loading. This helps ensure that only a single script loads at once when\r\n\t\t * using a script tag to do preloading.\r\n\t\t * @property _currentlyLoadingScript\r\n\t\t * @type {Boolean}\r\n\t\t * @private\r\n\t\t */\r\n\t\tthis._currentlyLoadingScript = null;\r\n\r\n\t\t/**\r\n\t\t * An array containing the currently downloading files.\r\n\t\t * @property _currentLoads\r\n\t\t * @type {Array}\r\n\t\t * @private\r\n\t\t */\r\n\t\tthis._currentLoads = [];\r\n\r\n\t\t/**\r\n\t\t * An array containing the queued items that have not yet started downloading.\r\n\t\t * @property _loadQueue\r\n\t\t * @type {Array}\r\n\t\t * @private\r\n\t\t */\r\n\t\tthis._loadQueue = [];\r\n\r\n\t\t/**\r\n\t\t * An array containing downloads that have not completed, so that the LoadQueue can be properly reset.\r\n\t\t * @property _loadQueueBackup\r\n\t\t * @type {Array}\r\n\t\t * @private\r\n\t\t */\r\n\t\tthis._loadQueueBackup = [];\r\n\r\n\t\t/**\r\n\t\t * An object hash of items that have finished downloading, indexed by the {{#crossLink \"LoadItem\"}}{{/crossLink}}\r\n\t\t * id.\r\n\t\t * @property _loadItemsById\r\n\t\t * @type {Object}\r\n\t\t * @private\r\n\t\t */\r\n\t\tthis._loadItemsById = {};\r\n\r\n\t\t/**\r\n\t\t * An object hash of items that have finished downloading, indexed by {{#crossLink \"LoadItem\"}}{{/crossLink}}\r\n\t\t * source.\r\n\t\t * @property _loadItemsBySrc\r\n\t\t * @type {Object}\r\n\t\t * @private\r\n\t\t */\r\n\t\tthis._loadItemsBySrc = {};\r\n\r\n\t\t/**\r\n\t\t * An object hash of loaded items, indexed by the ID of the {{#crossLink \"LoadItem\"}}{{/crossLink}}.\r\n\t\t * @property _loadedResults\r\n\t\t * @type {Object}\r\n\t\t * @private\r\n\t\t */\r\n\t\tthis._loadedResults = {};\r\n\r\n\t\t/**\r\n\t\t * An object hash of un-parsed loaded items, indexed by the ID of the {{#crossLink \"LoadItem\"}}{{/crossLink}}.\r\n\t\t * @property _loadedRawResults\r\n\t\t * @type {Object}\r\n\t\t * @private\r\n\t\t */\r\n\t\tthis._loadedRawResults = {};\r\n\r\n\t\t/**\r\n\t\t * The number of items that have been requested. This helps manage an overall progress without knowing how large\r\n\t\t * the files are before they are downloaded. This does not include items inside of loaders such as the\r\n\t\t * {{#crossLink \"ManifestLoader\"}}{{/crossLink}}.\r\n\t\t * @property _numItems\r\n\t\t * @type {Number}\r\n\t\t * @default 0\r\n\t\t * @private\r\n\t\t */\r\n\t\tthis._numItems = 0;\r\n\r\n\t\t/**\r\n\t\t * The number of items that have completed loaded. This helps manage an overall progress without knowing how large\r\n\t\t * the files are before they are downloaded.\r\n\t\t * @property _numItemsLoaded\r\n\t\t * @type {Number}\r\n\t\t * @default 0\r\n\t\t * @private\r\n\t\t */\r\n\t\tthis._numItemsLoaded = 0;\r\n\r\n\t\t/**\r\n\t\t * A list of scripts in the order they were requested. This helps ensure that scripts are \"completed\" in the right\r\n\t\t * order.\r\n\t\t * @property _scriptOrder\r\n\t\t * @type {Array}\r\n\t\t * @private\r\n\t\t */\r\n\t\tthis._scriptOrder = [];\r\n\r\n\t\t/**\r\n\t\t * A list of scripts that have been loaded. Items are added to this list as <code>null</code> when they are\r\n\t\t * requested, contain the loaded item if it has completed, but not been dispatched to the user, and <code>true</true>\r\n\t\t * once they are complete and have been dispatched.\r\n\t\t * @property _loadedScripts\r\n\t\t * @type {Array}\r\n\t\t * @private\r\n\t\t */\r\n\t\tthis._loadedScripts = [];\r\n\r\n\t\t/**\r\n\t\t * The last progress amount. This is used to suppress duplicate progress events.\r\n\t\t * @property _lastProgress\r\n\t\t * @type {Number}\r\n\t\t * @private\r\n\t\t * @since 0.6.0\r\n\t\t */\r\n\t\tthis._lastProgress = NaN;\r\n\r\n\t};\r\n\r\n// static properties\r\n\t/**\r\n\t * The time in milliseconds to assume a load has failed. An {{#crossLink \"AbstractLoader/error:event\"}}{{/crossLink}}\r\n\t * event is dispatched if the timeout is reached before any data is received.\r\n\t * @property loadTimeout\r\n\t * @type {Number}\r\n\t * @default 8000\r\n\t * @static\r\n\t * @since 0.4.1\r\n\t * @deprecated In favour of {{#crossLink \"LoadItem/LOAD_TIMEOUT_DEFAULT:property}}{{/crossLink}} property.\r\n\t */\r\n\ts.loadTimeout = 8000;\r\n\r\n\t/**\r\n\t * The time in milliseconds to assume a load has failed.\r\n\t * @property LOAD_TIMEOUT\r\n\t * @type {Number}\r\n\t * @default 0\r\n\t * @deprecated in favor of the {{#crossLink \"LoadQueue/loadTimeout:property\"}}{{/crossLink}} property.\r\n\t */\r\n\ts.LOAD_TIMEOUT = 0;\r\n\r\n// Preload Types\r\n\t/**\r\n\t * @property BINARY\r\n\t * @type {String}\r\n\t * @default binary\r\n\t * @static\r\n\t * @deprecated Use the AbstractLoader {{#crossLink \"AbstractLoader/BINARY:property\"}}{{/crossLink}} instead.\r\n\t */\r\n\ts.BINARY = createjs.AbstractLoader.BINARY;\r\n\r\n\t/**\r\n\t * @property CSS\r\n\t * @type {String}\r\n\t * @default css\r\n\t * @static\r\n\t * @deprecated Use the AbstractLoader {{#crossLink \"AbstractLoader/CSS:property\"}}{{/crossLink}} instead.\r\n\t */\r\n\ts.CSS = createjs.AbstractLoader.CSS;\r\n\r\n\t/**\r\n\t * @property IMAGE\r\n\t * @type {String}\r\n\t * @default image\r\n\t * @static\r\n\t * @deprecated Use the AbstractLoader {{#crossLink \"AbstractLoader/CSS:property\"}}{{/crossLink}} instead.\r\n\t */\r\n\ts.IMAGE = createjs.AbstractLoader.IMAGE;\r\n\r\n\t/**\r\n\t * @property JAVASCRIPT\r\n\t * @type {String}\r\n\t * @default javascript\r\n\t * @static\r\n\t * @deprecated Use the AbstractLoader {{#crossLink \"AbstractLoader/JAVASCRIPT:property\"}}{{/crossLink}} instead.\r\n\t */\r\n\ts.JAVASCRIPT = createjs.AbstractLoader.JAVASCRIPT;\r\n\r\n\t/**\r\n\t * @property JSON\r\n\t * @type {String}\r\n\t * @default json\r\n\t * @static\r\n\t * @deprecated Use the AbstractLoader {{#crossLink \"AbstractLoader/JSON:property\"}}{{/crossLink}} instead.\r\n\t */\r\n\ts.JSON = createjs.AbstractLoader.JSON;\r\n\r\n\t/**\r\n\t * @property JSONP\r\n\t * @type {String}\r\n\t * @default jsonp\r\n\t * @static\r\n\t * @deprecated Use the AbstractLoader {{#crossLink \"AbstractLoader/JSONP:property\"}}{{/crossLink}} instead.\r\n\t */\r\n\ts.JSONP = createjs.AbstractLoader.JSONP;\r\n\r\n\t/**\r\n\t * @property MANIFEST\r\n\t * @type {String}\r\n\t * @default manifest\r\n\t * @static\r\n\t * @since 0.4.1\r\n\t * @deprecated Use the AbstractLoader {{#crossLink \"AbstractLoader/MANIFEST:property\"}}{{/crossLink}} instead.\r\n\t */\r\n\ts.MANIFEST = createjs.AbstractLoader.MANIFEST;\r\n\r\n\t/**\r\n\t * @property SOUND\r\n\t * @type {String}\r\n\t * @default sound\r\n\t * @static\r\n\t * @deprecated Use the AbstractLoader {{#crossLink \"AbstractLoader/JAVASCRIPT:property\"}}{{/crossLink}} instead.\r\n\t */\r\n\ts.SOUND = createjs.AbstractLoader.SOUND;\r\n\r\n\t/**\r\n\t * @property VIDEO\r\n\t * @type {String}\r\n\t * @default video\r\n\t * @static\r\n\t * @deprecated Use the AbstractLoader {{#crossLink \"AbstractLoader/JAVASCRIPT:property\"}}{{/crossLink}} instead.\r\n\t */\r\n\ts.VIDEO = createjs.AbstractLoader.VIDEO;\r\n\r\n\t/**\r\n\t * @property SVG\r\n\t * @type {String}\r\n\t * @default svg\r\n\t * @static\r\n\t * @deprecated Use the AbstractLoader {{#crossLink \"AbstractLoader/SVG:property\"}}{{/crossLink}} instead.\r\n\t */\r\n\ts.SVG = createjs.AbstractLoader.SVG;\r\n\r\n\t/**\r\n\t * @property TEXT\r\n\t * @type {String}\r\n\t * @default text\r\n\t * @static\r\n\t * @deprecated Use the AbstractLoader {{#crossLink \"AbstractLoader/TEXT:property\"}}{{/crossLink}} instead.\r\n\t */\r\n\ts.TEXT = createjs.AbstractLoader.TEXT;\r\n\r\n\t/**\r\n\t * @property XML\r\n\t * @type {String}\r\n\t * @default xml\r\n\t * @static\r\n\t * @deprecated Use the AbstractLoader {{#crossLink \"AbstractLoader/XML:property\"}}{{/crossLink}} instead.\r\n\t */\r\n\ts.XML = createjs.AbstractLoader.XML;\r\n\r\n\t/**\r\n\t * @property POST\r\n\t * @type {string}\r\n\t * @deprecated Use the AbstractLoader {{#crossLink \"AbstractLoader/POST:property\"}}{{/crossLink}} instead.\r\n\t */\r\n\ts.POST = createjs.AbstractLoader.POST;\r\n\r\n\t/**\r\n\t * @property GET\r\n\t * @type {string}\r\n\t * @deprecated Use the AbstractLoader {{#crossLink \"AbstractLoader/GET:property\"}}{{/crossLink}} instead.\r\n\t */\r\n\ts.GET = createjs.AbstractLoader.GET;\r\n\r\n// events\r\n\t/**\r\n\t * This event is fired when an individual file has loaded, and been processed.\r\n\t * @event fileload\r\n\t * @param {Object} target The object that dispatched the event.\r\n\t * @param {String} type The event type.\r\n\t * @param {Object} item The file item which was specified in the {{#crossLink \"LoadQueue/loadFile\"}}{{/crossLink}}\r\n\t * or {{#crossLink \"LoadQueue/loadManifest\"}}{{/crossLink}} call. If only a string path or tag was specified, the\r\n\t * object will contain that value as a `src` property.\r\n\t * @param {Object} result The HTML tag or parsed result of the loaded item.\r\n\t * @param {Object} rawResult The unprocessed result, usually the raw text or binary data before it is converted\r\n\t * to a usable object.\r\n\t * @since 0.3.0\r\n\t */\r\n\r\n\t/**\r\n\t * This {{#crossLink \"ProgressEvent\"}}{{/crossLink}} that is fired when an an individual file's progress changes.\r\n\t * @event fileprogress\r\n\t * @since 0.3.0\r\n\t */\r\n\r\n\t/**\r\n\t * This event is fired when an individual file starts to load.\r\n\t * @event filestart\r\n\t * @param {Object} The object that dispatched the event.\r\n\t * @param {String} type The event type.\r\n\t * @param {Object} item The file item which was specified in the {{#crossLink \"LoadQueue/loadFile\"}}{{/crossLink}}\r\n\t * or {{#crossLink \"LoadQueue/loadManifest\"}}{{/crossLink}} call. If only a string path or tag was specified, the\r\n\t * object will contain that value as a property.\r\n\t */\r\n\r\n\t/**\r\n\t * Although it extends {{#crossLink \"AbstractLoader\"}}{{/crossLink}}, the `initialize` event is never fired from\r\n\t * a LoadQueue instance.\r\n\t * @event initialize\r\n\t * @private\r\n\t */\r\n\r\n// public methods\r\n\t/**\r\n\t * Register a custom loaders class. New loaders are given precedence over loaders added earlier and default loaders.\r\n\t * It is recommended that loaders extend {{#crossLink \"AbstractLoader\"}}{{/crossLink}}. Loaders can only be added\r\n\t * once, and will be prepended to the list of available loaders.\r\n\t * @method registerLoader\r\n\t * @param {Function|AbstractLoader} loader The AbstractLoader class to add.\r\n\t * @since 0.6.0\r\n\t */\r\n\tp.registerLoader = function (loader) {\r\n\t\tif (!loader || !loader.canLoadItem) {\r\n\t\t\tthrow new Error(\"loader is of an incorrect type.\");\r\n\t\t} else if (this._availableLoaders.indexOf(loader) != -1) {\r\n\t\t\tthrow new Error(\"loader already exists.\"); //LM: Maybe just silently fail here\r\n\t\t}\r\n\r\n\t\tthis._availableLoaders.unshift(loader);\r\n\t};\r\n\r\n\t/**\r\n\t * Remove a custom loader added using {{#crossLink \"registerLoader\"}}{{/crossLink}}. Only custom loaders can be\r\n\t * unregistered, the default loaders will always be available.\r\n\t * @method unregisterLoader\r\n\t * @param {Function|AbstractLoader} loader The AbstractLoader class to remove\r\n\t */\r\n\tp.unregisterLoader = function (loader) {\r\n\t\tvar idx = this._availableLoaders.indexOf(loader);\r\n\t\tif (idx != -1 && idx < this._defaultLoaderLength - 1) {\r\n\t\t\tthis._availableLoaders.splice(idx, 1);\r\n\t\t}\r\n\t};\r\n\r\n\t/**\r\n\t * @method setUseXHR\r\n\t * @param {Boolean} value The new useXHR value to set.\r\n\t * @return {Boolean} The new useXHR value. If XHR is not supported by the browser, this will return false, even if\r\n\t * the provided value argument was true.\r\n\t * @since 0.3.0\r\n\t * @deprecated use the {{#crossLink \"LoadQueue/preferXHR:property\"}}{{/crossLink}} property, or the\r\n\t * {{#crossLink \"LoadQueue/setUseXHR\"}}{{/crossLink}} method instead.\r\n\t */\r\n\tp.setUseXHR = function (value) {\r\n\t\treturn this.setPreferXHR(value);\r\n\t};\r\n\r\n\t/**\r\n\t * Change the {{#crossLink \"preferXHR:property\"}}{{/crossLink}} value. Note that if this is set to `true`, it may\r\n\t * fail, or be ignored depending on the browser's capabilities and the load type.\r\n\t * @method setPreferXHR\r\n\t * @param {Boolean} value\r\n\t * @returns {Boolean} The value of {{#crossLink \"preferXHR\"}}{{/crossLink}} that was successfully set.\r\n\t * @since 0.6.0\r\n\t */\r\n\tp.setPreferXHR = function (value) {\r\n\t\t// Determine if we can use XHR. XHR defaults to TRUE, but the browser may not support it.\r\n\t\t//TODO: Should we be checking for the other XHR types? Might have to do a try/catch on the different types similar to createXHR.\r\n\t\tthis.preferXHR = (value != false && window.XMLHttpRequest != null);\r\n\t\treturn this.preferXHR;\r\n\t};\r\n\r\n\t/**\r\n\t * Stops all queued and loading items, and clears the queue. This also removes all internal references to loaded\r\n\t * content, and allows the queue to be used again.\r\n\t * @method removeAll\r\n\t * @since 0.3.0\r\n\t */\r\n\tp.removeAll = function () {\r\n\t\tthis.remove();\r\n\t};\r\n\r\n\t/**\r\n\t * Stops an item from being loaded, and removes it from the queue. If nothing is passed, all items are removed.\r\n\t * This also removes internal references to loaded item(s).\r\n\t *\r\n\t * <h4>Example</h4>\r\n\t *\r\n\t *      queue.loadManifest([\r\n\t *          {src:\"test.png\", id:\"png\"},\r\n\t *          {src:\"test.jpg\", id:\"jpg\"},\r\n\t *          {src:\"test.mp3\", id:\"mp3\"}\r\n\t *      ]);\r\n\t *      queue.remove(\"png\"); // Single item by ID\r\n\t *      queue.remove(\"png\", \"test.jpg\"); // Items as arguments. Mixed id and src.\r\n\t *      queue.remove([\"test.png\", \"jpg\"]); // Items in an Array. Mixed id and src.\r\n\t *\r\n\t * @method remove\r\n\t * @param {String | Array} idsOrUrls* The id or ids to remove from this queue. You can pass an item, an array of\r\n\t * items, or multiple items as arguments.\r\n\t * @since 0.3.0\r\n\t */\r\n\tp.remove = function (idsOrUrls) {\r\n\t\tvar args = null;\r\n\r\n\t\tif (idsOrUrls && !Array.isArray(idsOrUrls)) {\r\n\t\t\targs = [idsOrUrls];\r\n\t\t} else if (idsOrUrls) {\r\n\t\t\targs = idsOrUrls;\r\n\t\t} else if (arguments.length > 0) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar itemsWereRemoved = false;\r\n\r\n\t\t// Destroy everything\r\n\t\tif (!args) {\r\n\t\t\tthis.close();\r\n\t\t\tfor (var n in this._loadItemsById) {\r\n\t\t\t\tthis._disposeItem(this._loadItemsById[n]);\r\n\t\t\t}\r\n\t\t\tthis.init(this.preferXHR, this._basePath);\r\n\r\n\t\t\t// Remove specific items\r\n\t\t} else {\r\n\t\t\twhile (args.length) {\r\n\t\t\t\tvar item = args.pop();\r\n\t\t\t\tvar r = this.getResult(item);\r\n\r\n\t\t\t\t//Remove from the main load Queue\r\n\t\t\t\tfor (i = this._loadQueue.length - 1; i >= 0; i--) {\r\n\t\t\t\t\tloadItem = this._loadQueue[i].getItem();\r\n\t\t\t\t\tif (loadItem.id == item || loadItem.src == item) {\r\n\t\t\t\t\t\tthis._loadQueue.splice(i, 1)[0].cancel();\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//Remove from the backup queue\r\n\t\t\t\tfor (i = this._loadQueueBackup.length - 1; i >= 0; i--) {\r\n\t\t\t\t\tloadItem = this._loadQueueBackup[i].getItem();\r\n\t\t\t\t\tif (loadItem.id == item || loadItem.src == item) {\r\n\t\t\t\t\t\tthis._loadQueueBackup.splice(i, 1)[0].cancel();\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (r) {\r\n\t\t\t\t\tthis._disposeItem(this.getItem(item));\r\n\t\t\t\t} else {\r\n\t\t\t\t\tfor (var i = this._currentLoads.length - 1; i >= 0; i--) {\r\n\t\t\t\t\t\tvar loadItem = this._currentLoads[i].getItem();\r\n\t\t\t\t\t\tif (loadItem.id == item || loadItem.src == item) {\r\n\t\t\t\t\t\t\tthis._currentLoads.splice(i, 1)[0].cancel();\r\n\t\t\t\t\t\t\titemsWereRemoved = true;\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// If this was called during a load, try to load the next item.\r\n\t\t\tif (itemsWereRemoved) {\r\n\t\t\t\tthis._loadNext();\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\t/**\r\n\t * Stops all open loads, destroys any loaded items, and resets the queue, so all items can\r\n\t * be reloaded again by calling {{#crossLink \"AbstractLoader/load\"}}{{/crossLink}}. Items are not removed from the\r\n\t * queue. To remove items use the {{#crossLink \"LoadQueue/remove\"}}{{/crossLink}} or\r\n\t * {{#crossLink \"LoadQueue/removeAll\"}}{{/crossLink}} method.\r\n\t * @method reset\r\n\t * @since 0.3.0\r\n\t */\r\n\tp.reset = function () {\r\n\t\tthis.close();\r\n\t\tfor (var n in this._loadItemsById) {\r\n\t\t\tthis._disposeItem(this._loadItemsById[n]);\r\n\t\t}\r\n\r\n\t\t//Reset the queue to its start state\r\n\t\tvar a = [];\r\n\t\tfor (var i = 0, l = this._loadQueueBackup.length; i < l; i++) {\r\n\t\t\ta.push(this._loadQueueBackup[i].getItem());\r\n\t\t}\r\n\r\n\t\tthis.loadManifest(a, false);\r\n\t};\r\n\r\n\t/**\r\n\t * Register a plugin. Plugins can map to load types (sound, image, etc), or specific extensions (png, mp3, etc).\r\n\t * Currently, only one plugin can exist per type/extension.\r\n\t *\r\n\t * When a plugin is installed, a <code>getPreloadHandlers()</code> method will be called on it. For more information\r\n\t * on this method, check out the {{#crossLink \"SamplePlugin/getPreloadHandlers\"}}{{/crossLink}} method in the\r\n\t * {{#crossLink \"SamplePlugin\"}}{{/crossLink}} class.\r\n\t *\r\n\t * Before a file is loaded, a matching plugin has an opportunity to modify the load. If a `callback` is returned\r\n\t * from the {{#crossLink \"SamplePlugin/getPreloadHandlers\"}}{{/crossLink}} method, it will be invoked first, and its\r\n\t * result may cancel or modify the item. The callback method can also return a `completeHandler` to be fired when\r\n\t * the file is loaded, or a `tag` object, which will manage the actual download. For more information on these\r\n\t * methods, check out the {{#crossLink \"SamplePlugin/preloadHandler\"}}{{/crossLink}} and {{#crossLink \"SamplePlugin/fileLoadHandler\"}}{{/crossLink}}\r\n\t * methods on the {{#crossLink \"SamplePlugin\"}}{{/crossLink}}.\r\n\t *\r\n\t * @method installPlugin\r\n\t * @param {Function} plugin The plugin class to install.\r\n\t */\r\n\tp.installPlugin = function (plugin) {\r\n\t\tif (plugin == null) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif (plugin.getPreloadHandlers != null) {\r\n\t\t\tthis._plugins.push(plugin);\r\n\t\t\tvar map = plugin.getPreloadHandlers();\r\n\t\t\tmap.scope = plugin;\r\n\r\n\t\t\tif (map.types != null) {\r\n\t\t\t\tfor (var i = 0, l = map.types.length; i < l; i++) {\r\n\t\t\t\t\tthis._typeCallbacks[map.types[i]] = map;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (map.extensions != null) {\r\n\t\t\t\tfor (i = 0, l = map.extensions.length; i < l; i++) {\r\n\t\t\t\t\tthis._extensionCallbacks[map.extensions[i]] = map;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\t/**\r\n\t * Set the maximum number of concurrent connections. Note that browsers and servers may have a built-in maximum\r\n\t * number of open connections, so any additional connections may remain in a pending state until the browser\r\n\t * opens the connection. When loading scripts using tags, and when {{#crossLink \"LoadQueue/maintainScriptOrder:property\"}}{{/crossLink}}\r\n\t * is `true`, only one script is loaded at a time due to browser limitations.\r\n\t *\r\n\t * <h4>Example</h4>\r\n\t *\r\n\t *      var queue = new createjs.LoadQueue();\r\n\t *      queue.setMaxConnections(10); // Allow 10 concurrent loads\r\n\t *\r\n\t * @method setMaxConnections\r\n\t * @param {Number} value The number of concurrent loads to allow. By default, only a single connection per LoadQueue\r\n\t * is open at any time.\r\n\t */\r\n\tp.setMaxConnections = function (value) {\r\n\t\tthis._maxConnections = value;\r\n\t\tif (!this._paused && this._loadQueue.length > 0) {\r\n\t\t\tthis._loadNext();\r\n\t\t}\r\n\t};\r\n\r\n\t/**\r\n\t * Load a single file. To add multiple files at once, use the {{#crossLink \"LoadQueue/loadManifest\"}}{{/crossLink}}\r\n\t * method.\r\n\t *\r\n\t * Files are always appended to the current queue, so this method can be used multiple times to add files.\r\n\t * To clear the queue first, use the {{#crossLink \"AbstractLoader/close\"}}{{/crossLink}} method.\r\n\t * @method loadFile\r\n\t * @param {LoadItem|Object|String} file The file object or path to load. A file can be either\r\n\t * <ul>\r\n\t *     <li>A {{#crossLink \"LoadItem\"}}{{/crossLink}} instance</li>\r\n\t *     <li>An object containing properties defined by {{#crossLink \"LoadItem\"}}{{/crossLink}}</li>\r\n\t *     <li>OR A string path to a resource. Note that this kind of load item will be converted to a {{#crossLink \"LoadItem\"}}{{/crossLink}}\r\n\t *     in the background.</li>\r\n\t * </ul>\r\n\t * @param {Boolean} [loadNow=true] Kick off an immediate load (true) or wait for a load call (false). The default\r\n\t * value is true. If the queue is paused using {{#crossLink \"LoadQueue/setPaused\"}}{{/crossLink}}, and the value is\r\n\t * `true`, the queue will resume automatically.\r\n\t * @param {String} [basePath] A base path that will be prepended to each file. The basePath argument overrides the\r\n\t * path specified in the constructor. Note that if you load a manifest using a file of type {{#crossLink \"AbstractLoader/MANIFEST:property\"}}{{/crossLink}},\r\n\t * its files will <strong>NOT</strong> use the basePath parameter. <strong>The basePath parameter is deprecated.</strong>\r\n\t * This parameter will be removed in a future version. Please either use the `basePath` parameter in the LoadQueue\r\n\t * constructor, or a `path` property in a manifest definition.\r\n\t */\r\n\tp.loadFile = function (file, loadNow, basePath) {\r\n\t\tif (file == null) {\r\n\t\t\tvar event = new createjs.ErrorEvent(\"PRELOAD_NO_FILE\");\r\n\t\t\tthis._sendError(event);\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis._addItem(file, null, basePath);\r\n\r\n\t\tif (loadNow !== false) {\r\n\t\t\tthis.setPaused(false);\r\n\t\t} else {\r\n\t\t\tthis.setPaused(true);\r\n\t\t}\r\n\t};\r\n\r\n\t/**\r\n\t * Load an array of files. To load a single file, use the {{#crossLink \"LoadQueue/loadFile\"}}{{/crossLink}} method.\r\n\t * The files in the manifest are requested in the same order, but may complete in a different order if the max\r\n\t * connections are set above 1 using {{#crossLink \"LoadQueue/setMaxConnections\"}}{{/crossLink}}. Scripts will load\r\n\t * in the right order as long as {{#crossLink \"LoadQueue/maintainScriptOrder\"}}{{/crossLink}} is true (which is\r\n\t * default).\r\n\t *\r\n\t * Files are always appended to the current queue, so this method can be used multiple times to add files.\r\n\t * To clear the queue first, use the {{#crossLink \"AbstractLoader/close\"}}{{/crossLink}} method.\r\n\t * @method loadManifest\r\n\t * @param {Array|String|Object} manifest An list of files to load. The loadManifest call supports four types of\r\n\t * manifests:\r\n\t * <ol>\r\n\t *     <li>A string path, which points to a manifest file, which is a JSON file that contains a \"manifest\" property,\r\n\t *     which defines the list of files to load, and can optionally contain a \"path\" property, which will be\r\n\t *     prepended to each file in the list.</li>\r\n\t *     <li>An object which defines a \"src\", which is a JSON or JSONP file. A \"callback\" can be defined for JSONP\r\n\t *     file. The JSON/JSONP file should contain a \"manifest\" property, which defines the list of files to load,\r\n\t *     and can optionally contain a \"path\" property, which will be prepended to each file in the list.</li>\r\n\t *     <li>An object which contains a \"manifest\" property, which defines the list of files to load, and can\r\n\t *     optionally contain a \"path\" property, which will be prepended to each file in the list.</li>\r\n\t *     <li>An Array of files to load.</li>\r\n\t * </ol>\r\n\t *\r\n\t * Each \"file\" in a manifest can be either:\r\n\t * <ul>\r\n\t *     <li>A {{#crossLink \"LoadItem\"}}{{/crossLink}} instance</li>\r\n\t *     <li>An object containing properties defined by {{#crossLink \"LoadItem\"}}{{/crossLink}}</li>\r\n\t *     <li>OR A string path to a resource. Note that this kind of load item will be converted to a {{#crossLink \"LoadItem\"}}{{/crossLink}}\r\n\t *     in the background.</li>\r\n\t * </ul>\r\n\t *\r\n\t * @param {Boolean} [loadNow=true] Kick off an immediate load (true) or wait for a load call (false). The default\r\n\t * value is true. If the queue is paused using {{#crossLink \"LoadQueue/setPaused\"}}{{/crossLink}} and this value is\r\n\t * `true`, the queue will resume automatically.\r\n\t * @param {String} [basePath] A base path that will be prepended to each file. The basePath argument overrides the\r\n\t * path specified in the constructor. Note that if you load a manifest using a file of type {{#crossLink \"LoadQueue/MANIFEST:property\"}}{{/crossLink}},\r\n\t * its files will <strong>NOT</strong> use the basePath parameter. <strong>The basePath parameter is deprecated.</strong>\r\n\t * This parameter will be removed in a future version. Please either use the `basePath` parameter in the LoadQueue\r\n\t * constructor, or a `path` property in a manifest definition.\r\n\t */\r\n\tp.loadManifest = function (manifest, loadNow, basePath) {\r\n\t\tvar fileList = null;\r\n\t\tvar path = null;\r\n\r\n\t\t// Array-based list of items\r\n\t\tif (Array.isArray(manifest)) {\r\n\t\t\tif (manifest.length == 0) {\r\n\t\t\t\tvar event = new createjs.ErrorEvent(\"PRELOAD_MANIFEST_EMPTY\");\r\n\t\t\t\tthis._sendError(event);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tfileList = manifest;\r\n\r\n\t\t\t// String-based. Only file manifests can be specified this way. Any other types will cause an error when loaded.\r\n\t\t} else if (typeof(manifest) === \"string\") {\r\n\t\t\tfileList = [\r\n\t\t\t\t{\r\n\t\t\t\t\tsrc: manifest,\r\n\t\t\t\t\ttype: s.MANIFEST\r\n\t\t\t\t}\r\n\t\t\t];\r\n\r\n\t\t} else if (typeof(manifest) == \"object\") {\r\n\r\n\t\t\t// An object that defines a manifest path\r\n\t\t\tif (manifest.src !== undefined) {\r\n\t\t\t\tif (manifest.type == null) {\r\n\t\t\t\t\tmanifest.type = s.MANIFEST;\r\n\t\t\t\t} else if (manifest.type != s.MANIFEST) {\r\n\t\t\t\t\tvar event = new createjs.ErrorEvent(\"PRELOAD_MANIFEST_TYPE\");\r\n\t\t\t\t\tthis._sendError(event);\r\n\t\t\t\t}\r\n\t\t\t\tfileList = [manifest];\r\n\r\n\t\t\t\t// An object that defines a manifest\r\n\t\t\t} else if (manifest.manifest !== undefined) {\r\n\t\t\t\tfileList = manifest.manifest;\r\n\t\t\t\tpath = manifest.path;\r\n\t\t\t}\r\n\r\n\t\t\t// Unsupported. This will throw an error.\r\n\t\t} else {\r\n\t\t\tvar event = new createjs.ErrorEvent(\"PRELOAD_MANIFEST_NULL\");\r\n\t\t\tthis._sendError(event);\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tfor (var i = 0, l = fileList.length; i < l; i++) {\r\n\t\t\tthis._addItem(fileList[i], path, basePath);\r\n\t\t}\r\n\r\n\t\tif (loadNow !== false) {\r\n\t\t\tthis.setPaused(false);\r\n\t\t} else {\r\n\t\t\tthis.setPaused(true);\r\n\t\t}\r\n\r\n\t};\r\n\r\n\t/**\r\n\t * Start a LoadQueue that was created, but not automatically started.\r\n\t * @method load\r\n\t */\r\n\tp.load = function () {\r\n\t\tthis.setPaused(false);\r\n\t};\r\n\r\n\t/**\r\n\t * Look up a {{#crossLink \"LoadItem\"}}{{/crossLink}} using either the \"id\" or \"src\" that was specified when loading it. Note that if no \"id\" was\r\n\t * supplied with the load item, the ID will be the \"src\", including a `path` property defined by a manifest. The\r\n\t * `basePath` will not be part of the ID.\r\n\t * @method getItem\r\n\t * @param {String} value The <code>id</code> or <code>src</code> of the load item.\r\n\t * @return {Object} The load item that was initially requested using {{#crossLink \"LoadQueue/loadFile\"}}{{/crossLink}}\r\n\t * or {{#crossLink \"LoadQueue/loadManifest\"}}{{/crossLink}}. This object is also returned via the {{#crossLink \"LoadQueue/fileload:event\"}}{{/crossLink}}\r\n\t * event as the `item` parameter.\r\n\t */\r\n\tp.getItem = function (value) {\r\n\t\treturn this._loadItemsById[value] || this._loadItemsBySrc[value];\r\n\t};\r\n\r\n\t/**\r\n\t * Look up a loaded result using either the \"id\" or \"src\" that was specified when loading it. Note that if no \"id\"\r\n\t * was supplied with the load item, the ID will be the \"src\", including a `path` property defined by a manifest. The\r\n\t * `basePath` will not be part of the ID.\r\n\t * @method getResult\r\n\t * @param {String} value The <code>id</code> or <code>src</code> of the load item.\r\n\t * @param {Boolean} [rawResult=false] Return a raw result instead of a formatted result. This applies to content\r\n\t * loaded via XHR such as scripts, XML, CSS, and Images. If there is no raw result, the formatted result will be\r\n\t * returned instead.\r\n\t * @return {Object} A result object containing the content that was loaded, such as:\r\n\t * <ul>\r\n\t *      <li>An image tag (&lt;image /&gt;) for images</li>\r\n\t *      <li>A script tag for JavaScript (&lt;script /&gt;). Note that scripts are automatically added to the HTML\r\n\t *      DOM.</li>\r\n\t *      <li>A style tag for CSS (&lt;style /&gt; or &lt;link &gt;)</li>\r\n\t *      <li>Raw text for TEXT</li>\r\n\t *      <li>A formatted JavaScript object defined by JSON</li>\r\n\t *      <li>An XML document</li>\r\n\t *      <li>A binary arraybuffer loaded by XHR</li>\r\n\t *      <li>An audio tag (&lt;audio &gt;) for HTML audio. Note that it is recommended to use SoundJS APIs to play\r\n\t *      loaded audio. Specifically, audio loaded by Flash and WebAudio will return a loader object using this method\r\n\t *      which can not be used to play audio back.</li>\r\n\t * </ul>\r\n\t * This object is also returned via the {{#crossLink \"LoadQueue/fileload:event\"}}{{/crossLink}} event as the 'item`\r\n\t * parameter. Note that if a raw result is requested, but not found, the result will be returned instead.\r\n\t */\r\n\tp.getResult = function (value, rawResult) {\r\n\t\tvar item = this._loadItemsById[value] || this._loadItemsBySrc[value];\r\n\t\tif (item == null) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\tvar id = item.id;\r\n\t\tif (rawResult && this._loadedRawResults[id]) {\r\n\t\t\treturn this._loadedRawResults[id];\r\n\t\t}\r\n\t\treturn this._loadedResults[id];\r\n\t};\r\n\r\n\t/**\r\n\t * Generate an list of items loaded by this queue.\r\n\t * @method getItems\r\n\t * @param {Boolean} loaded Determines if only items that have been loaded should be returned. If false, in-progress\r\n\t * and failed load items will also be included.\r\n\t * @returns {Array} A list of objects that have been loaded. Each item includes the {{#crossLink \"LoadItem\"}}{{/crossLink}},\r\n\t * result, and rawResult.\r\n\t * @since 0.6.0\r\n\t */\r\n\tp.getItems = function (loaded) {\r\n\t\tvar arr = [];\r\n\t\tfor (var n in this._loadItemsById) {\r\n\t\t\tvar item = this._loadItemsById[n];\r\n\t\t\tvar result = this.getResult(n);\r\n\t\t\tif (loaded === true && result == null) {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\t\t\tarr.push({\r\n\t\t\t\titem: item,\r\n\t\t\t\tresult: result,\r\n\t\t\t\trawResult: this.getResult(n, true)\r\n\t\t\t});\r\n\t\t}\r\n\t\treturn arr;\r\n\t};\r\n\r\n\t/**\r\n\t * Pause or resume the current load. Active loads will not be cancelled, but the next items in the queue will not\r\n\t * be processed when active loads complete. LoadQueues are not paused by default.\r\n\t *\r\n\t * Note that if new items are added to the queue using {{#crossLink \"LoadQueue/loadFile\"}}{{/crossLink}} or\r\n\t * {{#crossLink \"LoadQueue/loadManifest\"}}{{/crossLink}}, a paused queue will be resumed, unless the `loadNow`\r\n\t * argument is `false`.\r\n\t * @method setPaused\r\n\t * @param {Boolean} value Whether the queue should be paused or not.\r\n\t */\r\n\tp.setPaused = function (value) {\r\n\t\tthis._paused = value;\r\n\t\tif (!this._paused) {\r\n\t\t\tthis._loadNext();\r\n\t\t}\r\n\t};\r\n\r\n\t/**\r\n\t * Close the active queue. Closing a queue completely empties the queue, and prevents any remaining items from\r\n\t * starting to download. Note that currently any active loads will remain open, and events may be processed.\r\n\t *\r\n\t * To stop and restart a queue, use the {{#crossLink \"LoadQueue/setPaused\"}}{{/crossLink}} method instead.\r\n\t * @method close\r\n\t */\r\n\tp.close = function () {\r\n\t\twhile (this._currentLoads.length) {\r\n\t\t\tthis._currentLoads.pop().cancel();\r\n\t\t}\r\n\t\tthis._scriptOrder.length = 0;\r\n\t\tthis._loadedScripts.length = 0;\r\n\t\tthis.loadStartWasDispatched = false;\r\n\t\tthis._itemCount = 0;\r\n\t\tthis._lastProgress = NaN;\r\n\t};\r\n\r\n// protected methods\r\n\t/**\r\n\t * Add an item to the queue. Items are formatted into a usable object containing all the properties necessary to\r\n\t * load the content. The load queue is populated with the loader instance that handles preloading, and not the load\r\n\t * item that was passed in by the user. To look up the load item by id or src, use the {{#crossLink \"LoadQueue.getItem\"}}{{/crossLink}}\r\n\t * method.\r\n\t * @method _addItem\r\n\t * @param {String|Object} value The item to add to the queue.\r\n\t * @param {String} [path] An optional path prepended to the `src`. The path will only be prepended if the src is\r\n\t * relative, and does not start with a protocol such as `http://`, or a path like `../`. If the LoadQueue was\r\n\t * provided a {{#crossLink \"_basePath\"}}{{/crossLink}}, then it will optionally be prepended after.\r\n\t * @param {String} [basePath] <strong>Deprecated</strong>An optional basePath passed into a {{#crossLink \"LoadQueue/loadManifest\"}}{{/crossLink}}\r\n\t * or {{#crossLink \"LoadQueue/loadFile\"}}{{/crossLink}} call. This parameter will be removed in a future tagged\r\n\t * version.\r\n\t * @private\r\n\t */\r\n\tp._addItem = function (value, path, basePath) {\r\n\t\tvar item = this._createLoadItem(value, path, basePath); // basePath and manifest path are added to the src.\r\n\t\tif (item == null) {\r\n\t\t\treturn;\r\n\t\t} // Sometimes plugins or types should be skipped.\r\n\t\tvar loader = this._createLoader(item);\r\n\t\tif (loader != null) {\r\n\t\t\tif (\"plugins\" in loader) {\r\n\t\t\t\tloader.plugins = this._plugins;\r\n\t\t\t}\r\n\t\t\titem._loader = loader;\r\n\t\t\tthis._loadQueue.push(loader);\r\n\t\t\tthis._loadQueueBackup.push(loader);\r\n\r\n\t\t\tthis._numItems++;\r\n\t\t\tthis._updateProgress();\r\n\r\n\t\t\t// Only worry about script order when using XHR to load scripts. Tags are only loading one at a time.\r\n\t\t\tif ((this.maintainScriptOrder\r\n\t\t\t\t\t&& item.type == createjs.LoadQueue.JAVASCRIPT\r\n\t\t\t\t\t\t//&& loader instanceof createjs.XHRLoader //NOTE: Have to track all JS files this way\r\n\t\t\t\t\t)\r\n\t\t\t\t\t|| item.maintainOrder === true) {\r\n\t\t\t\tthis._scriptOrder.push(item);\r\n\t\t\t\tthis._loadedScripts.push(null);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\t/**\r\n\t * Create a refined {{#crossLink \"LoadItem\"}}{{/crossLink}}, which contains all the required properties. The type of\r\n\t * item is determined by browser support, requirements based on the file type, and developer settings. For example,\r\n\t * XHR is only used for file types that support it in new browsers.\r\n\t *\r\n\t * Before the item is returned, any plugins registered to handle the type or extension will be fired, which may\r\n\t * alter the load item.\r\n\t * @method _createLoadItem\r\n\t * @param {String | Object | HTMLAudioElement | HTMLImageElement} value The item that needs to be preloaded.\r\n\t * @param {String} [path] A path to prepend to the item's source. Sources beginning with http:// or similar will\r\n\t * not receive a path. Since PreloadJS 0.4.1, the src will be modified to include the `path` and {{#crossLink \"LoadQueue/_basePath:property\"}}{{/crossLink}}\r\n\t * when it is added.\r\n\t * @param {String} [basePath] <strong>Deprectated</strong> A base path to prepend to the items source in addition to\r\n\t * the path argument.\r\n\t * @return {Object} The loader instance that will be used.\r\n\t * @private\r\n\t */\r\n\tp._createLoadItem = function (value, path, basePath) {\r\n\t\tvar item = createjs.LoadItem.create(value);\r\n\t\tif (item == null) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\tvar bp = \"\"; // Store the generated basePath\r\n\t\tvar useBasePath = basePath || this._basePath;\r\n\r\n\t\tif (item.src instanceof Object) {\r\n\t\t\tif (!item.type) {\r\n\t\t\t\treturn null;\r\n\t\t\t} // the the src is an object, type is required to pass off to plugin\r\n\t\t\tif (path) {\r\n\t\t\t\tbp = path;\r\n\t\t\t\tvar pathMatch = createjs.RequestUtils.parseURI(path);\r\n\t\t\t\t// Also append basePath\r\n\t\t\t\tif (useBasePath != null && !pathMatch.absolute && !pathMatch.relative) {\r\n\t\t\t\t\tbp = useBasePath + bp;\r\n\t\t\t\t}\r\n\t\t\t} else if (useBasePath != null) {\r\n\t\t\t\tbp = useBasePath;\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\t// Determine Extension, etc.\r\n\t\t\tvar match = createjs.RequestUtils.parseURI(item.src);\r\n\t\t\tif (match.extension) {\r\n\t\t\t\titem.ext = match.extension;\r\n\t\t\t}\r\n\t\t\tif (item.type == null) {\r\n\t\t\t\titem.type = createjs.RequestUtils.getTypeByExtension(item.ext);\r\n\t\t\t}\r\n\r\n\t\t\t// Inject path & basePath\r\n\t\t\tvar autoId = item.src;\r\n\t\t\tif (!match.absolute && !match.relative) {\r\n\t\t\t\tif (path) {\r\n\t\t\t\t\tbp = path;\r\n\t\t\t\t\tvar pathMatch = createjs.RequestUtils.parseURI(path);\r\n\t\t\t\t\tautoId = path + autoId;\r\n\t\t\t\t\t// Also append basePath\r\n\t\t\t\t\tif (useBasePath != null && !pathMatch.absolute && !pathMatch.relative) {\r\n\t\t\t\t\t\tbp = useBasePath + bp;\r\n\t\t\t\t\t}\r\n\t\t\t\t} else if (useBasePath != null) {\r\n\t\t\t\t\tbp = useBasePath;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\titem.src = bp + item.src;\r\n\t\t}\r\n\t\titem.path = bp;\r\n\r\n\t\t// If there's no id, set one now.\r\n\t\tif (item.id === undefined || item.id === null || item.id === \"\") {\r\n\t\t\titem.id = autoId;\r\n\t\t}\r\n\r\n\t\t// Give plugins a chance to modify the loadItem:\r\n\t\tvar customHandler = this._typeCallbacks[item.type] || this._extensionCallbacks[item.ext];\r\n\t\tif (customHandler) {\r\n\t\t\t// Plugins are now passed both the full source, as well as a combined path+basePath (appropriately)\r\n\t\t\tvar result = customHandler.callback.call(customHandler.scope, item, this);\r\n\r\n\t\t\t// The plugin will handle the load, or has canceled it. Ignore it.\r\n\t\t\tif (result === false) {\r\n\t\t\t\treturn null;\r\n\r\n\t\t\t\t// Load as normal:\r\n\t\t\t} else if (result === true) {\r\n\t\t\t\t// Do Nothing\r\n\r\n\t\t\t\t// Result is a loader class:\r\n\t\t\t} else if (result != null) {\r\n\t\t\t\titem._loader = result;\r\n\t\t\t}\r\n\r\n\t\t\t// Update the extension in case the type changed:\r\n\t\t\tmatch = createjs.RequestUtils.parseURI(item.src);\r\n\t\t\tif (match.extension != null) {\r\n\t\t\t\titem.ext = match.extension;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// Store the item for lookup. This also helps clean-up later.\r\n\t\tthis._loadItemsById[item.id] = item;\r\n\t\tthis._loadItemsBySrc[item.src] = item;\r\n\r\n\t\tif (item.crossOrigin == null) {\r\n\t\t\titem.crossOrigin = this._crossOrigin;\r\n\t\t}\r\n\r\n\t\treturn item;\r\n\t};\r\n\r\n\t/**\r\n\t * Create a loader for a load item.\r\n\t * @method _createLoader\r\n\t * @param {Object} item A formatted load item that can be used to generate a loader.\r\n\t * @return {AbstractLoader} A loader that can be used to load content.\r\n\t * @private\r\n\t */\r\n\tp._createLoader = function (item) {\r\n\t\tif (item._loader != null) { // A plugin already specified a loader\r\n\t\t\treturn item._loader;\r\n\t\t}\r\n\r\n\t\t// Initially, try and use the provided/supported XHR mode:\r\n\t\tvar preferXHR = this.preferXHR;\r\n\r\n\t\tfor (var i = 0; i < this._availableLoaders.length; i++) {\r\n\t\t\tvar loader = this._availableLoaders[i];\r\n\t\t\tif (loader && loader.canLoadItem(item)) {\r\n\t\t\t\treturn new loader(item, preferXHR);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// TODO: Log error (requires createjs.log)\r\n\t\treturn null;\r\n\t};\r\n\r\n\t/**\r\n\t * Load the next item in the queue. If the queue is empty (all items have been loaded), then the complete event\r\n\t * is processed. The queue will \"fill up\" any empty slots, up to the max connection specified using\r\n\t * {{#crossLink \"LoadQueue.setMaxConnections\"}}{{/crossLink}} method. The only exception is scripts that are loaded\r\n\t * using tags, which have to be loaded one at a time to maintain load order.\r\n\t * @method _loadNext\r\n\t * @private\r\n\t */\r\n\tp._loadNext = function () {\r\n\t\tif (this._paused) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// Only dispatch loadstart event when the first file is loaded.\r\n\t\tif (!this._loadStartWasDispatched) {\r\n\t\t\tthis._sendLoadStart();\r\n\t\t\tthis._loadStartWasDispatched = true;\r\n\t\t}\r\n\r\n\t\t// The queue has completed.\r\n\t\tif (this._numItems == this._numItemsLoaded) {\r\n\t\t\tthis.loaded = true;\r\n\t\t\tthis._sendComplete();\r\n\r\n\t\t\t// Load the next queue, if it has been defined.\r\n\t\t\tif (this.next && this.next.load) {\r\n\t\t\t\tthis.next.load();\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tthis.loaded = false;\r\n\t\t}\r\n\r\n\t\t// Must iterate forwards to load in the right order.\r\n\t\tfor (var i = 0; i < this._loadQueue.length; i++) {\r\n\t\t\tif (this._currentLoads.length >= this._maxConnections) {\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tvar loader = this._loadQueue[i];\r\n\r\n\t\t\t// Determine if we should be only loading one tag-script at a time:\r\n\t\t\t// Note: maintainOrder items don't do anything here because we can hold onto their loaded value\r\n\t\t\tif (!this._canStartLoad(loader)) {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\t\t\tthis._loadQueue.splice(i, 1);\r\n\t\t\ti--;\r\n\t\t\tthis._loadItem(loader);\r\n\t\t}\r\n\t};\r\n\r\n\t/**\r\n\t * Begin loading an item. Event listeners are not added to the loaders until the load starts.\r\n\t * @method _loadItem\r\n\t * @param {AbstractLoader} loader The loader instance to start. Currently, this will be an XHRLoader or TagLoader.\r\n\t * @private\r\n\t */\r\n\tp._loadItem = function (loader) {\r\n\t\tloader.on(\"fileload\", this._handleFileLoad, this);\r\n\t\tloader.on(\"progress\", this._handleProgress, this);\r\n\t\tloader.on(\"complete\", this._handleFileComplete, this);\r\n\t\tloader.on(\"error\", this._handleError, this);\r\n\t\tloader.on(\"fileerror\", this._handleFileError, this);\r\n\t\tthis._currentLoads.push(loader);\r\n\t\tthis._sendFileStart(loader.getItem());\r\n\t\tloader.load();\r\n\t};\r\n\r\n\t/**\r\n\t * The callback that is fired when a loader loads a file. This enables loaders like {{#crossLink \"ManifestLoader\"}}{{/crossLink}}\r\n\t * to maintain internal queues, but for this queue to dispatch the {{#crossLink \"fileload:event\"}}{{/crossLink}}\r\n\t * events.\r\n\t * @param {Event} event The {{#crossLink \"AbstractLoader/fileload:event\"}}{{/crossLink}} event from the loader.\r\n\t * @private\r\n\t * @since 0.6.0\r\n\t */\r\n\tp._handleFileLoad = function (event) {\r\n\t\tevent.target = null;\r\n\t\tthis.dispatchEvent(event);\r\n\t};\r\n\r\n\t/**\r\n\t * The callback that is fired when a loader encounters an error from an internal file load operation. This enables\r\n\t * loaders like M\r\n\t * @param event\r\n\t * @private\r\n\t */\r\n\tp._handleFileError = function (event) {\r\n\t\tvar newEvent = new createjs.ErrorEvent(\"FILE_LOAD_ERROR\", null, event.item);\r\n\t\tthis._sendError(newEvent);\r\n\t};\r\n\r\n\t/**\r\n\t * The callback that is fired when a loader encounters an error. The queue will continue loading unless {{#crossLink \"LoadQueue/stopOnError:property\"}}{{/crossLink}}\r\n\t * is set to `true`.\r\n\t * @method _handleError\r\n\t * @param {ErrorEvent} event The error event, containing relevant error information.\r\n\t * @private\r\n\t */\r\n\tp._handleError = function (event) {\r\n\t\tvar loader = event.target;\r\n\t\tthis._numItemsLoaded++;\r\n\r\n\t\tthis._finishOrderedItem(loader, true);\r\n\t\tthis._updateProgress();\r\n\r\n\t\tvar newEvent = new createjs.ErrorEvent(\"FILE_LOAD_ERROR\", null, loader.getItem());\r\n\t\t// TODO: Propagate actual error message.\r\n\r\n\t\tthis._sendError(newEvent);\r\n\r\n\t\tif (!this.stopOnError) {\r\n\t\t\tthis._removeLoadItem(loader);\r\n\t\t\tthis._cleanLoadItem(loader);\r\n\t\t\tthis._loadNext();\r\n\t\t} else {\r\n\t\t\tthis.setPaused(true);\r\n\t\t}\r\n\t};\r\n\r\n\t/**\r\n\t * An item has finished loading. We can assume that it is totally loaded, has been parsed for immediate use, and\r\n\t * is available as the \"result\" property on the load item. The raw text result for a parsed item (such as JSON, XML,\r\n\t * CSS, JavaScript, etc) is available as the \"rawResult\" property, and can also be looked up using {{#crossLink \"LoadQueue/getResult\"}}{{/crossLink}}.\r\n\t * @method _handleFileComplete\r\n\t * @param {Event} event The event object from the loader.\r\n\t * @private\r\n\t */\r\n\tp._handleFileComplete = function (event) {\r\n\t\tvar loader = event.target;\r\n\t\tvar item = loader.getItem();\r\n\r\n\t\tvar result = loader.getResult();\r\n\t\tthis._loadedResults[item.id] = result;\r\n\t\tvar rawResult = loader.getResult(true);\r\n\t\tif (rawResult != null && rawResult !== result) {\r\n\t\t\tthis._loadedRawResults[item.id] = rawResult;\r\n\t\t}\r\n\r\n\t\tthis._saveLoadedItems(loader);\r\n\r\n\t\t// Remove the load item\r\n\t\tthis._removeLoadItem(loader);\r\n\r\n\t\tif (!this._finishOrderedItem(loader)) {\r\n\t\t\t// The item was NOT managed, so process it now\r\n\t\t\tthis._processFinishedLoad(item, loader);\r\n\t\t}\r\n\r\n\t\t// Clean up the load item\r\n\t\tthis._cleanLoadItem(loader);\r\n\t};\r\n\r\n\t/**\r\n\t * Some loaders might load additional content, other than the item they were passed (such as {{#crossLink \"ManifestLoader\"}}{{/crossLink}}).\r\n\t * Any items exposed by the loader using {{#crossLink \"AbstractLoader/getLoadItems\"}}{{/crossLink}} are added to the\r\n\t * LoadQueue's look-ups, including {{#crossLink \"getItem\"}}{{/crossLink}} and {{#crossLink \"getResult\"}}{{/crossLink}}\r\n\t * methods.\r\n\t * @method _saveLoadedItems\r\n\t * @param {AbstractLoader} loader\r\n\t * @protected\r\n\t * @since 0.6.0\r\n\t */\r\n\tp._saveLoadedItems = function (loader) {\r\n\t\t// TODO: Not sure how to handle this. Would be nice to expose the items.\r\n\t\t// Loaders may load sub-items. This adds them to this queue\r\n\t\tvar list = loader.getLoadedItems();\r\n\t\tif (list === null) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tfor (var i = 0; i < list.length; i++) {\r\n\t\t\tvar item = list[i].item;\r\n\r\n\t\t\t// Store item lookups\r\n\t\t\tthis._loadItemsBySrc[item.src] = item;\r\n\t\t\tthis._loadItemsById[item.id] = item;\r\n\r\n\t\t\t// Store loaded content\r\n\t\t\tthis._loadedResults[item.id] = list[i].result;\r\n\t\t\tthis._loadedRawResults[item.id] = list[i].rawResult;\r\n\t\t}\r\n\t};\r\n\r\n\t/**\r\n\t * Flag an item as finished. If the item's order is being managed, then ensure that it is allowed to finish, and if\r\n\t * so, trigger prior items to trigger as well.\r\n\t * @method _finishOrderedItem\r\n\t * @param {AbstractLoader} loader\r\n\t * @param {Boolean} loadFailed\r\n\t * @return {Boolean} If the item's order is being managed. This allows the caller to take an alternate\r\n\t * behaviour if it is.\r\n\t * @private\r\n\t */\r\n\tp._finishOrderedItem = function (loader, loadFailed) {\r\n\t\tvar item = loader.getItem();\r\n\r\n\t\tif ((this.maintainScriptOrder && item.type == createjs.LoadQueue.JAVASCRIPT)\r\n\t\t\t\t|| item.maintainOrder) {\r\n\r\n\t\t\t//TODO: Evaluate removal of the _currentlyLoadingScript\r\n\t\t\tif (loader instanceof createjs.JavaScriptLoader) {\r\n\t\t\t\tthis._currentlyLoadingScript = false;\r\n\t\t\t}\r\n\r\n\t\t\tvar index = createjs.indexOf(this._scriptOrder, item);\r\n\t\t\tif (index == -1) {\r\n\t\t\t\treturn false;\r\n\t\t\t} // This loader no longer exists\r\n\t\t\tthis._loadedScripts[index] = (loadFailed === true) ? true : item;\r\n\r\n\t\t\tthis._checkScriptLoadOrder();\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\t};\r\n\r\n\t/**\r\n\t * Ensure the scripts load and dispatch in the correct order. When using XHR, scripts are stored in an array in the\r\n\t * order they were added, but with a \"null\" value. When they are completed, the value is set to the load item,\r\n\t * and then when they are processed and dispatched, the value is set to `true`. This method simply\r\n\t * iterates the array, and ensures that any loaded items that are not preceded by a `null` value are\r\n\t * dispatched.\r\n\t * @method _checkScriptLoadOrder\r\n\t * @private\r\n\t */\r\n\tp._checkScriptLoadOrder = function () {\r\n\t\tvar l = this._loadedScripts.length;\r\n\r\n\t\tfor (var i = 0; i < l; i++) {\r\n\t\t\tvar item = this._loadedScripts[i];\r\n\t\t\tif (item === null) {\r\n\t\t\t\tbreak;\r\n\t\t\t} // This is still loading. Do not process further.\r\n\t\t\tif (item === true) {\r\n\t\t\t\tcontinue;\r\n\t\t\t} // This has completed, and been processed. Move on.\r\n\r\n\t\t\tvar loadItem = this._loadedResults[item.id];\r\n\t\t\tif (item.type == createjs.LoadQueue.JAVASCRIPT) {\r\n\t\t\t\t// Append script tags to the head automatically.\r\n\t\t\t\tcreatejs.DomUtils.appendToHead(loadItem);\r\n\t\t\t}\r\n\r\n\t\t\tvar loader = item._loader;\r\n\t\t\tthis._processFinishedLoad(item, loader);\r\n\t\t\tthis._loadedScripts[i] = true;\r\n\t\t}\r\n\t};\r\n\r\n\t/**\r\n\t * A file has completed loading, and the LoadQueue can move on. This triggers the complete event, and kick-starts\r\n\t * the next item.\r\n\t * @method _processFinishedLoad\r\n\t * @param {LoadItem|Object} item\r\n\t * @param {AbstractLoader} loader\r\n\t * @protected\r\n\t */\r\n\tp._processFinishedLoad = function (item, loader) {\r\n\t\tthis._numItemsLoaded++;\r\n\r\n\t\t// Since LoadQueue needs maintain order, we can't append scripts in the loader.\r\n\t\t// So we do it here instead. Or in _checkScriptLoadOrder();\r\n\t\tif (!this.maintainScriptOrder && item.type == createjs.LoadQueue.JAVASCRIPT) {\r\n\t\t\tvar tag = loader.getTag();\r\n\t\t\tcreatejs.DomUtils.appendToHead(tag);\r\n\t\t}\r\n\r\n\t\tthis._updateProgress();\r\n\t\tthis._sendFileComplete(item, loader);\r\n\t\tthis._loadNext();\r\n\t};\r\n\r\n\t/**\r\n\t * Ensure items with `maintainOrder=true` that are before the specified item have loaded. This only applies to\r\n\t * JavaScript items that are being loaded with a TagLoader, since they have to be loaded and completed <strong>before</strong>\r\n\t * the script can even be started, since it exist in the DOM while loading.\r\n\t * @method _canStartLoad\r\n\t * @param {AbstractLoader} loader The loader for the item\r\n\t * @return {Boolean} Whether the item can start a load or not.\r\n\t * @private\r\n\t */\r\n\tp._canStartLoad = function (loader) {\r\n\t\tif (!this.maintainScriptOrder || loader.preferXHR) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\tvar item = loader.getItem();\r\n\t\tif (item.type != createjs.LoadQueue.JAVASCRIPT) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\tif (this._currentlyLoadingScript) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tvar index = this._scriptOrder.indexOf(item);\r\n\t\tvar i = 0;\r\n\t\twhile (i < index) {\r\n\t\t\tvar checkItem = this._loadedScripts[i];\r\n\t\t\tif (checkItem == null) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\ti++;\r\n\t\t}\r\n\t\tthis._currentlyLoadingScript = true;\r\n\t\treturn true;\r\n\t};\r\n\r\n\t/**\r\n\t * A load item is completed or was canceled, and needs to be removed from the LoadQueue.\r\n\t * @method _removeLoadItem\r\n\t * @param {AbstractLoader} loader A loader instance to remove.\r\n\t * @private\r\n\t */\r\n\tp._removeLoadItem = function (loader) {\r\n\t\tvar l = this._currentLoads.length;\r\n\t\tfor (var i = 0; i < l; i++) {\r\n\t\t\tif (this._currentLoads[i] == loader) {\r\n\t\t\t\tthis._currentLoads.splice(i, 1);\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\t/**\r\n\t * Remove unneeded references from a loader.\r\n\t *\r\n\t * @param loader\r\n\t * @private\r\n\t */\r\n\tp._cleanLoadItem = function(loader) {\r\n\t\tvar item = loader.getItem();\r\n\t\tif (item) {\r\n\t\t\tdelete item._loader;\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * An item has dispatched progress. Propagate that progress, and update the LoadQueue's overall progress.\r\n\t * @method _handleProgress\r\n\t * @param {ProgressEvent} event The progress event from the item.\r\n\t * @private\r\n\t */\r\n\tp._handleProgress = function (event) {\r\n\t\tvar loader = event.target;\r\n\t\tthis._sendFileProgress(loader.getItem(), loader.progress);\r\n\t\tthis._updateProgress();\r\n\t};\r\n\r\n\t/**\r\n\t * Overall progress has changed, so determine the new progress amount and dispatch it. This changes any time an\r\n\t * item dispatches progress or completes. Note that since we don't always know the actual filesize of items before\r\n\t * they are loaded. In this case, we define a \"slot\" for each item (1 item in 10 would get 10%), and then append\r\n\t * loaded progress on top of the already-loaded items.\r\n\t *\r\n\t * For example, if 5/10 items have loaded, and item 6 is 20% loaded, the total progress would be:\r\n\t * <ul>\r\n\t *      <li>5/10 of the items in the queue (50%)</li>\r\n\t *      <li>plus 20% of item 6's slot (2%)</li>\r\n\t *      <li>equals 52%</li>\r\n\t * </ul>\r\n\t * @method _updateProgress\r\n\t * @private\r\n\t */\r\n\tp._updateProgress = function () {\r\n\t\tvar loaded = this._numItemsLoaded / this._numItems; // Fully Loaded Progress\r\n\t\tvar remaining = this._numItems - this._numItemsLoaded;\r\n\t\tif (remaining > 0) {\r\n\t\t\tvar chunk = 0;\r\n\t\t\tfor (var i = 0, l = this._currentLoads.length; i < l; i++) {\r\n\t\t\t\tchunk += this._currentLoads[i].progress;\r\n\t\t\t}\r\n\t\t\tloaded += (chunk / remaining) * (remaining / this._numItems);\r\n\t\t}\r\n\r\n\t\tif (this._lastProgress != loaded) {\r\n\t\t\tthis._sendProgress(loaded);\r\n\t\t\tthis._lastProgress = loaded;\r\n\t\t}\r\n\t};\r\n\r\n\t/**\r\n\t * Clean out item results, to free them from memory. Mainly, the loaded item and results are cleared from internal\r\n\t * hashes.\r\n\t * @method _disposeItem\r\n\t * @param {LoadItem|Object} item The item that was passed in for preloading.\r\n\t * @private\r\n\t */\r\n\tp._disposeItem = function (item) {\r\n\t\tdelete this._loadedResults[item.id];\r\n\t\tdelete this._loadedRawResults[item.id];\r\n\t\tdelete this._loadItemsById[item.id];\r\n\t\tdelete this._loadItemsBySrc[item.src];\r\n\t};\r\n\r\n\t/**\r\n\t * Dispatch a \"fileprogress\" {{#crossLink \"Event\"}}{{/crossLink}}. Please see the LoadQueue {{#crossLink \"LoadQueue/fileprogress:event\"}}{{/crossLink}}\r\n\t * event for details on the event payload.\r\n\t * @method _sendFileProgress\r\n\t * @param {LoadItem|Object} item The item that is being loaded.\r\n\t * @param {Number} progress The amount the item has been loaded (between 0 and 1).\r\n\t * @protected\r\n\t */\r\n\tp._sendFileProgress = function (item, progress) {\r\n\t\tif (this._isCanceled() || this._paused) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif (!this.hasEventListener(\"fileprogress\")) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t//LM: Rework ProgressEvent to support this?\r\n\t\tvar event = new createjs.Event(\"fileprogress\");\r\n\t\tevent.progress = progress;\r\n\t\tevent.loaded = progress;\r\n\t\tevent.total = 1;\r\n\t\tevent.item = item;\r\n\r\n\t\tthis.dispatchEvent(event);\r\n\t};\r\n\r\n\t/**\r\n\t * Dispatch a fileload {{#crossLink \"Event\"}}{{/crossLink}}. Please see the {{#crossLink \"LoadQueue/fileload:event\"}}{{/crossLink}} event for\r\n\t * details on the event payload.\r\n\t * @method _sendFileComplete\r\n\t * @param {LoadItemObject} item The item that is being loaded.\r\n\t * @param {AbstractLoader} loader\r\n\t * @protected\r\n\t */\r\n\tp._sendFileComplete = function (item, loader) {\r\n\t\tif (this._isCanceled() || this._paused) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar event = new createjs.Event(\"fileload\");\r\n\t\tevent.loader = loader;\r\n\t\tevent.item = item;\r\n\t\tevent.result = this._loadedResults[item.id];\r\n\t\tevent.rawResult = this._loadedRawResults[item.id];\r\n\r\n\t\t// This calls a handler specified on the actual load item. Currently, the SoundJS plugin uses this.\r\n\t\tif (item.completeHandler) {\r\n\t\t\titem.completeHandler(event);\r\n\t\t}\r\n\r\n\t\tthis.hasEventListener(\"fileload\") && this.dispatchEvent(event);\r\n\t};\r\n\r\n\t/**\r\n\t * Dispatch a filestart {{#crossLink \"Event\"}}{{/crossLink}} immediately before a file starts to load. Please see\r\n\t * the {{#crossLink \"LoadQueue/filestart:event\"}}{{/crossLink}} event for details on the event payload.\r\n\t * @method _sendFileStart\r\n\t * @param {LoadItem|Object} item The item that is being loaded.\r\n\t * @protected\r\n\t */\r\n\tp._sendFileStart = function (item) {\r\n\t\tvar event = new createjs.Event(\"filestart\");\r\n\t\tevent.item = item;\r\n\t\tthis.hasEventListener(\"filestart\") && this.dispatchEvent(event);\r\n\t};\r\n\r\n\tp.toString = function () {\r\n\t\treturn \"[PreloadJS LoadQueue]\";\r\n\t};\r\n\r\n\tcreatejs.LoadQueue = createjs.promote(LoadQueue, \"AbstractLoader\");\r\n}());\r\n\r\n//##############################################################################\r\n// TextLoader.js\r\n//##############################################################################\r\n\r\nthis.createjs = this.createjs || {};\r\n\r\n(function () {\r\n\t\"use strict\";\r\n\r\n\t// constructor\r\n\t/**\r\n\t * A loader for Text files.\r\n\t * @class TextLoader\r\n\t * @param {LoadItem|Object} loadItem\r\n\t * @extends AbstractLoader\r\n\t * @constructor\r\n\t */\r\n\tfunction TextLoader(loadItem) {\r\n\t\tthis.AbstractLoader_constructor(loadItem, true, createjs.AbstractLoader.TEXT);\r\n\t};\r\n\r\n\tvar p = createjs.extend(TextLoader, createjs.AbstractLoader);\r\n\tvar s = TextLoader;\r\n\r\n\t// static methods\r\n\t/**\r\n\t * Determines if the loader can load a specific item. This loader loads items that are of type {{#crossLink \"AbstractLoader/TEXT:property\"}}{{/crossLink}},\r\n\t * but is also the default loader if a file type can not be determined.\r\n\t * @method canLoadItem\r\n\t * @param {LoadItem|Object} item The LoadItem that a LoadQueue is trying to load.\r\n\t * @returns {Boolean} Whether the loader can load the item.\r\n\t * @static\r\n\t */\r\n\ts.canLoadItem = function (item) {\r\n\t\treturn item.type == createjs.AbstractLoader.TEXT;\r\n\t};\r\n\r\n\tcreatejs.TextLoader = createjs.promote(TextLoader, \"AbstractLoader\");\r\n\r\n}());\r\n\r\n//##############################################################################\r\n// BinaryLoader.js\r\n//##############################################################################\r\n\r\nthis.createjs = this.createjs || {};\r\n\r\n(function () {\r\n\t\"use strict\";\r\n\r\n\t// constructor\r\n\t/**\r\n\t * A loader for binary files. This is useful for loading web audio, or content that requires an ArrayBuffer.\r\n\t * @class BinaryLoader\r\n\t * @param {LoadItem|Object} loadItem\r\n\t * @extends AbstractLoader\r\n\t * @constructor\r\n\t */\r\n\tfunction BinaryLoader(loadItem) {\r\n\t\tthis.AbstractLoader_constructor(loadItem, true, createjs.AbstractLoader.BINARY);\r\n\t\tthis.on(\"initialize\", this._updateXHR, this);\r\n\t};\r\n\r\n\tvar p = createjs.extend(BinaryLoader, createjs.AbstractLoader);\r\n\tvar s = BinaryLoader;\r\n\r\n\t// static methods\r\n\t/**\r\n\t * Determines if the loader can load a specific item. This loader can only load items that are of type\r\n\t * {{#crossLink \"AbstractLoader/BINARY:property\"}}{{/crossLink}}\r\n\t * @method canLoadItem\r\n\t * @param {LoadItem|Object} item The LoadItem that a LoadQueue is trying to load.\r\n\t * @returns {Boolean} Whether the loader can load the item.\r\n\t * @static\r\n\t */\r\n\ts.canLoadItem = function (item) {\r\n\t\treturn item.type == createjs.AbstractLoader.BINARY;\r\n\t};\r\n\r\n\t// private methods\r\n\t/**\r\n\t * Before the item loads, set the response type to \"arraybuffer\"\r\n\t * @property _updateXHR\r\n\t * @param {Event} event\r\n\t * @private\r\n\t */\r\n\tp._updateXHR = function (event) {\r\n\t\tevent.loader.setResponseType(\"arraybuffer\");\r\n\t};\r\n\r\n\tcreatejs.BinaryLoader = createjs.promote(BinaryLoader, \"AbstractLoader\");\r\n\r\n}());\r\n\r\n//##############################################################################\r\n// CSSLoader.js\r\n//##############################################################################\r\n\r\nthis.createjs = this.createjs || {};\r\n\r\n(function () {\r\n\t\"use strict\";\r\n\r\n\t// constructor\r\n\t/**\r\n\t * A loader for CSS files.\r\n\t * @class CSSLoader\r\n\t * @param {LoadItem|Object} loadItem\r\n\t * @param {Boolean} preferXHR\r\n\t * @extends AbstractLoader\r\n\t * @constructor\r\n\t */\r\n\tfunction CSSLoader(loadItem, preferXHR) {\r\n\t\tthis.AbstractLoader_constructor(loadItem, preferXHR, createjs.AbstractLoader.CSS);\r\n\r\n\t\t// public properties\r\n\t\tthis.resultFormatter = this._formatResult;\r\n\r\n\t\t// protected properties\r\n\t\tthis._tagSrcAttribute = \"href\";\r\n\r\n\t\tif (preferXHR) {\r\n\t\t\tthis._tag = document.createElement(\"style\");\r\n\t\t} else {\r\n\t\t\tthis._tag = document.createElement(\"link\");\r\n\t\t}\r\n\r\n\t\tthis._tag.rel = \"stylesheet\";\r\n\t\tthis._tag.type = \"text/css\";\r\n\t};\r\n\r\n\tvar p = createjs.extend(CSSLoader, createjs.AbstractLoader);\r\n\tvar s = CSSLoader;\r\n\r\n\t// static methods\r\n\t/**\r\n\t * Determines if the loader can load a specific item. This loader can only load items that are of type\r\n\t * {{#crossLink \"AbstractLoader/CSS:property\"}}{{/crossLink}}.\r\n\t * @method canLoadItem\r\n\t * @param {LoadItem|Object} item The LoadItem that a LoadQueue is trying to load.\r\n\t * @returns {Boolean} Whether the loader can load the item.\r\n\t * @static\r\n\t */\r\n\ts.canLoadItem = function (item) {\r\n\t\treturn item.type == createjs.AbstractLoader.CSS;\r\n\t};\r\n\r\n\t// protected methods\r\n\t/**\r\n\t * The result formatter for CSS files.\r\n\t * @method _formatResult\r\n\t * @param {AbstractLoader} loader\r\n\t * @returns {HTMLLinkElement|HTMLStyleElement}\r\n\t * @private\r\n\t */\r\n\tp._formatResult = function (loader) {\r\n\t\tif (this._preferXHR) {\r\n\t\t\tvar tag = loader.getTag();\r\n\r\n\t\t\tif (tag.styleSheet) { // IE\r\n\t\t\t\ttag.styleSheet.cssText = loader.getResult(true);\r\n\t\t\t} else {\r\n\t\t\t\tvar textNode = document.createTextNode(loader.getResult(true));\r\n\t\t\t\ttag.appendChild(textNode);\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\ttag = this._tag;\r\n\t\t}\r\n\r\n\t\tcreatejs.DomUtils.appendToHead(tag);\r\n\r\n\t\treturn tag;\r\n\t};\r\n\r\n\tcreatejs.CSSLoader = createjs.promote(CSSLoader, \"AbstractLoader\");\r\n\r\n}());\r\n\r\n//##############################################################################\r\n// ImageLoader.js\r\n//##############################################################################\r\n\r\nthis.createjs = this.createjs || {};\r\n\r\n(function () {\r\n\t\"use strict\";\r\n\r\n\t// constructor\r\n\t/**\r\n\t * A loader for image files.\r\n\t * @class ImageLoader\r\n\t * @param {LoadItem|Object} loadItem\r\n\t * @param {Boolean} preferXHR\r\n\t * @extends AbstractLoader\r\n\t * @constructor\r\n\t */\r\n\tfunction ImageLoader (loadItem, preferXHR) {\r\n\t\tthis.AbstractLoader_constructor(loadItem, preferXHR, createjs.AbstractLoader.IMAGE);\r\n\r\n\t\t// public properties\r\n\t\tthis.resultFormatter = this._formatResult;\r\n\r\n\t\t// protected properties\r\n\t\tthis._tagSrcAttribute = \"src\";\r\n\r\n\t\t// Check if the preload item is already a tag.\r\n\t\tif (createjs.RequestUtils.isImageTag(loadItem)) {\r\n\t\t\tthis._tag = loadItem;\r\n\t\t} else if (createjs.RequestUtils.isImageTag(loadItem.src)) {\r\n\t\t\tthis._tag = loadItem.src;\r\n\t\t} else if (createjs.RequestUtils.isImageTag(loadItem.tag)) {\r\n\t\t\tthis._tag = loadItem.tag;\r\n\t\t}\r\n\r\n\t\tif (this._tag != null) {\r\n\t\t\tthis._preferXHR = false;\r\n\t\t} else {\r\n\t\t\tthis._tag = document.createElement(\"img\");\r\n\t\t}\r\n\r\n\t\tthis.on(\"initialize\", this._updateXHR, this);\r\n\t};\r\n\r\n\tvar p = createjs.extend(ImageLoader, createjs.AbstractLoader);\r\n\tvar s = ImageLoader;\r\n\r\n\t// static methods\r\n\t/**\r\n\t * Determines if the loader can load a specific item. This loader can only load items that are of type\r\n\t * {{#crossLink \"AbstractLoader/IMAGE:property\"}}{{/crossLink}}.\r\n\t * @method canLoadItem\r\n\t * @param {LoadItem|Object} item The LoadItem that a LoadQueue is trying to load.\r\n\t * @returns {Boolean} Whether the loader can load the item.\r\n\t * @static\r\n\t */\r\n\ts.canLoadItem = function (item) {\r\n\t\treturn item.type == createjs.AbstractLoader.IMAGE;\r\n\t};\r\n\r\n\t// public methods\r\n\tp.load = function () {\r\n\t\tif (this._tag.src != \"\" && this._tag.complete) {\r\n\t\t\tthis._sendComplete();\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar crossOrigin = this._item.crossOrigin;\r\n\t\tif (crossOrigin == true) { crossOrigin = \"Anonymous\"; }\r\n\t\tif (crossOrigin != null && !createjs.RequestUtils.isLocal(this._item.src)) {\r\n\t\t\tthis._tag.crossOrigin = crossOrigin;\r\n\t\t}\r\n\r\n\t\tthis.AbstractLoader_load();\r\n\t};\r\n\r\n\t// protected methods\r\n\t/**\r\n\t * Before the item loads, set its mimeType and responseType.\r\n\t * @property _updateXHR\r\n\t * @param {Event} event\r\n\t * @private\r\n\t */\r\n\tp._updateXHR = function (event) {\r\n\t\tevent.loader.mimeType = 'text/plain; charset=x-user-defined-binary';\r\n\r\n\t\t// Only exists for XHR\r\n\t\tif (event.loader.setResponseType) {\r\n\t\t\tevent.loader.setResponseType(\"blob\");\r\n\t\t}\r\n\t};\r\n\r\n\t/**\r\n\t * The result formatter for Image files.\r\n\t * @method _formatResult\r\n\t * @param {AbstractLoader} loader\r\n\t * @returns {HTMLImageElement}\r\n\t * @private\r\n\t */\r\n\tp._formatResult = function (loader) {\r\n\t\treturn this._formatImage;\r\n\t};\r\n\r\n\t/**\r\n\t * The asynchronous image formatter function. This is required because images have\r\n\t * a short delay before they are ready.\r\n\t * @method _formatImage\r\n\t * @param {Function} successCallback The method to call when the result has finished formatting\r\n\t * @param {Function} errorCallback The method to call if an error occurs during formatting\r\n\t * @private\r\n\t */\r\n\tp._formatImage = function (successCallback, errorCallback) {\r\n\t\tvar tag = this._tag;\r\n\t\tvar URL = window.URL || window.webkitURL;\r\n\r\n\t\tif (!this._preferXHR) {\r\n\t\t\t//document.body.removeChild(tag);\r\n\t\t} else if (URL) {\r\n\t\t\tvar objURL = URL.createObjectURL(this.getResult(true));\r\n\t\t\ttag.src = objURL;\r\n\r\n\t\t\ttag.addEventListener(\"load\", this._cleanUpURL, false);\r\n\t\t\ttag.addEventListener(\"error\", this._cleanUpURL, false);\r\n\t\t} else {\r\n\t\t\ttag.src = this._item.src;\r\n\t\t}\r\n\r\n\t\tif (tag.complete) {\r\n\t\t\tsuccessCallback(tag);\r\n\t\t} else {\r\n            tag.onload = createjs.proxy(function() {\r\n                successCallback(this._tag);\r\n            }, this);\r\n\r\n            tag.onerror = createjs.proxy(function() {\r\n                errorCallback(_this._tag);\r\n            }, this);\r\n\t\t}\r\n\t};\r\n\r\n\t/**\r\n\t * Clean up the ObjectURL, the tag is done with it. Note that this function is run\r\n\t * as an event listener without a proxy/closure, as it doesn't require it - so do not\r\n\t * include any functionality that requires scope without changing it.\r\n\t * @method _cleanUpURL\r\n\t * @param event\r\n\t * @private\r\n\t */\r\n\tp._cleanUpURL = function (event) {\r\n\t\tvar URL = window.URL || window.webkitURL;\r\n\t\tURL.revokeObjectURL(event.target.src);\r\n\t};\r\n\r\n\tcreatejs.ImageLoader = createjs.promote(ImageLoader, \"AbstractLoader\");\r\n\r\n}());\r\n\r\n//##############################################################################\r\n// JavaScriptLoader.js\r\n//##############################################################################\r\n\r\nthis.createjs = this.createjs || {};\r\n\r\n(function () {\r\n\t\"use strict\";\r\n\r\n\t// constructor\r\n\t/**\r\n\t * A loader for JavaScript files.\r\n\t * @class JavaScriptLoader\r\n\t * @param {LoadItem|Object} loadItem\r\n\t * @param {Boolean} preferXHR\r\n\t * @extends AbstractLoader\r\n\t * @constructor\r\n\t */\r\n\tfunction JavaScriptLoader(loadItem, preferXHR) {\r\n\t\tthis.AbstractLoader_constructor(loadItem, preferXHR, createjs.AbstractLoader.JAVASCRIPT);\r\n\r\n\t\t// public properties\r\n\t\tthis.resultFormatter = this._formatResult;\r\n\r\n\t\t// protected properties\r\n\t\tthis._tagSrcAttribute = \"src\";\r\n\t\tthis.setTag(document.createElement(\"script\"));\r\n\t};\r\n\r\n\tvar p = createjs.extend(JavaScriptLoader, createjs.AbstractLoader);\r\n\tvar s = JavaScriptLoader;\r\n\r\n\t// static methods\r\n\t/**\r\n\t * Determines if the loader can load a specific item. This loader can only load items that are of type\r\n\t * {{#crossLink \"AbstractLoader/JAVASCRIPT:property\"}}{{/crossLink}}\r\n\t * @method canLoadItem\r\n\t * @param {LoadItem|Object} item The LoadItem that a LoadQueue is trying to load.\r\n\t * @returns {Boolean} Whether the loader can load the item.\r\n\t * @static\r\n\t */\r\n\ts.canLoadItem = function (item) {\r\n\t\treturn item.type == createjs.AbstractLoader.JAVASCRIPT;\r\n\t};\r\n\r\n\t// protected methods\r\n\t/**\r\n\t * The result formatter for JavaScript files.\r\n\t * @method _formatResult\r\n\t * @param {AbstractLoader} loader\r\n\t * @returns {HTMLLinkElement|HTMLStyleElement}\r\n\t * @private\r\n\t */\r\n\tp._formatResult = function (loader) {\r\n\t\tvar tag = loader.getTag();\r\n\t\tif (this._preferXHR) {\r\n\t\t\ttag.text = loader.getResult(true);\r\n\t\t}\r\n\t\treturn tag;\r\n\t};\r\n\r\n\tcreatejs.JavaScriptLoader = createjs.promote(JavaScriptLoader, \"AbstractLoader\");\r\n\r\n}());\r\n\r\n//##############################################################################\r\n// JSONLoader.js\r\n//##############################################################################\r\n\r\nthis.createjs = this.createjs || {};\r\n\r\n(function () {\r\n\t\"use strict\";\r\n\r\n\t// constructor\r\n\t/**\r\n\t * A loader for JSON files. To load JSON cross-domain, use JSONP and the {{#crossLink \"JSONPLoader\"}}{{/crossLink}}\r\n\t * instead. To load JSON-formatted manifests, use {{#crossLink \"ManifestLoader\"}}{{/crossLink}}, and to\r\n\t * load EaselJS SpriteSheets, use {{#crossLink \"SpriteSheetLoader\"}}{{/crossLink}}.\r\n\t * @class JSONLoader\r\n\t * @param {LoadItem|Object} loadItem\r\n\t * @extends AbstractLoader\r\n\t * @constructor\r\n\t */\r\n\tfunction JSONLoader(loadItem) {\r\n\t\tthis.AbstractLoader_constructor(loadItem, true, createjs.AbstractLoader.JSON);\r\n\r\n\t\t// public properties\r\n\t\tthis.resultFormatter = this._formatResult;\r\n\t};\r\n\r\n\tvar p = createjs.extend(JSONLoader, createjs.AbstractLoader);\r\n\tvar s = JSONLoader;\r\n\r\n\t// static methods\r\n\t/**\r\n\t * Determines if the loader can load a specific item. This loader can only load items that are of type\r\n\t * {{#crossLink \"AbstractLoader/JSON:property\"}}{{/crossLink}}.\r\n\t * @method canLoadItem\r\n\t * @param {LoadItem|Object} item The LoadItem that a LoadQueue is trying to load.\r\n\t * @returns {Boolean} Whether the loader can load the item.\r\n\t * @static\r\n\t */\r\n\ts.canLoadItem = function (item) {\r\n\t\treturn item.type == createjs.AbstractLoader.JSON;\r\n\t};\r\n\r\n\t// protected methods\r\n\t/**\r\n\t * The result formatter for JSON files.\r\n\t * @method _formatResult\r\n\t * @param {AbstractLoader} loader\r\n\t * @returns {HTMLLinkElement|HTMLStyleElement}\r\n\t * @private\r\n\t */\r\n\tp._formatResult = function (loader) {\r\n\t\tvar json = null;\r\n\t\ttry {\r\n\t\t\tjson = createjs.DataUtils.parseJSON(loader.getResult(true));\r\n\t\t} catch (e) {\r\n\t\t\tvar event = new createjs.ErrorEvent(\"JSON_FORMAT\", null, e);\r\n\t\t\tthis._sendError(event);\r\n\t\t\treturn e;\r\n\t\t}\r\n\r\n\t\treturn json;\r\n\t};\r\n\r\n\tcreatejs.JSONLoader = createjs.promote(JSONLoader, \"AbstractLoader\");\r\n\r\n}());\r\n\r\n//##############################################################################\r\n// JSONPLoader.js\r\n//##############################################################################\r\n\r\nthis.createjs = this.createjs || {};\r\n\r\n(function () {\r\n\t\"use strict\";\r\n\r\n\t// constructor\r\n\t/**\r\n\t * A loader for JSONP files, which are JSON-formatted text files, wrapped in a callback. To load regular JSON\r\n\t * without a callback use the {{#crossLink \"JSONLoader\"}}{{/crossLink}} instead. To load JSON-formatted manifests,\r\n\t * use {{#crossLink \"ManifestLoader\"}}{{/crossLink}}, and to load EaselJS SpriteSheets, use\r\n\t * {{#crossLink \"SpriteSheetLoader\"}}{{/crossLink}}.\r\n\t *\r\n\t * JSONP is a format that provides a solution for loading JSON files cross-domain <em>without</em> requiring CORS.\r\n\t * JSONP files are loaded as JavaScript, and the \"callback\" is executed once they are loaded. The callback in the\r\n\t * JSONP must match the callback passed to the loadItem.\r\n\t *\r\n\t * <h4>Example JSONP</h4>\r\n\t *\r\n\t * \t\tcallbackName({\r\n\t * \t\t\t\"name\": \"value\",\r\n\t *\t \t\t\"num\": 3,\r\n\t *\t\t\t\"obj\": { \"bool\":true }\r\n\t * \t\t});\r\n\t *\r\n\t * <h4>Example</h4>\r\n\t *\r\n\t * \t\tvar loadItem = {id:\"json\", type:\"jsonp\", src:\"http://server.com/text.json\", callback:\"callbackName\"}\r\n\t * \t\tvar queue = new createjs.LoadQueue();\r\n\t * \t\tqueue.on(\"complete\", handleComplete);\r\n\t * \t\tqueue.loadItem(loadItem);\r\n\t *\r\n\t * \t\tfunction handleComplete(event) }\r\n\t * \t\t\tvar json = queue.getResult(\"json\");\r\n\t * \t\t\tconsole.log(json.obj.bool); // true\r\n\t * \t\t}\r\n\t *\r\n\t * Note that JSONP files loaded concurrently require a <em>unique</em> callback. To ensure JSONP files are loaded\r\n\t * in order, either use the {{#crossLink \"LoadQueue/setMaxConnections\"}}{{/crossLink}} method (set to 1),\r\n\t * or set {{#crossLink \"LoadItem/maintainOrder:property\"}}{{/crossLink}} on items with the same callback.\r\n\t *\r\n\t * @class JSONPLoader\r\n\t * @param {LoadItem|Object} loadItem\r\n\t * @extends AbstractLoader\r\n\t * @constructor\r\n\t */\r\n\tfunction JSONPLoader(loadItem) {\r\n\t\tthis.AbstractLoader_constructor(loadItem, false, createjs.AbstractLoader.JSONP);\r\n\t\tthis.setTag(document.createElement(\"script\"));\r\n\t\tthis.getTag().type = \"text/javascript\";\r\n\t};\r\n\r\n\tvar p = createjs.extend(JSONPLoader, createjs.AbstractLoader);\r\n\tvar s = JSONPLoader;\r\n\r\n\r\n\t// static methods\r\n\t/**\r\n\t * Determines if the loader can load a specific item. This loader can only load items that are of type\r\n\t * {{#crossLink \"AbstractLoader/JSONP:property\"}}{{/crossLink}}.\r\n\t * @method canLoadItem\r\n\t * @param {LoadItem|Object} item The LoadItem that a LoadQueue is trying to load.\r\n\t * @returns {Boolean} Whether the loader can load the item.\r\n\t * @static\r\n\t */\r\n\ts.canLoadItem = function (item) {\r\n\t\treturn item.type == createjs.AbstractLoader.JSONP;\r\n\t};\r\n\r\n\t// public methods\r\n\tp.cancel = function () {\r\n\t\tthis.AbstractLoader_cancel();\r\n\t\tthis._dispose();\r\n\t};\r\n\r\n\t/**\r\n\t * Loads the JSONp file.  Because of the unique loading needs of JSONp\r\n\t * we don't use the AbstractLoader.load() method.\r\n\t *\r\n\t * @method load\r\n\t *\r\n\t */\r\n\tp.load = function () {\r\n\t\tif (this._item.callback == null) {\r\n\t\t\tthrow new Error('callback is required for loading JSONP requests.');\r\n\t\t}\r\n\r\n\t\t// TODO: Look into creating our own iFrame to handle the load\r\n\t\t// In the first attempt, FF did not get the result\r\n\t\t//   result instanceof Object did not work either\r\n\t\t//   so we would need to clone the result.\r\n\t\tif (window[this._item.callback] != null) {\r\n\t\t\tthrow new Error(\r\n\t\t\t\t\"JSONP callback '\" +\r\n\t\t\t\tthis._item.callback +\r\n\t\t\t\t\"' already exists on window. You need to specify a different callback or re-name the current one.\");\r\n\t\t}\r\n\r\n\t\twindow[this._item.callback] = createjs.proxy(this._handleLoad, this);\r\n\t\twindow.document.body.appendChild(this._tag);\r\n\r\n\t\tthis._loadTimeout = setTimeout(createjs.proxy(this._handleTimeout, this), this._item.loadTimeout);\r\n\r\n\t\t// Load the tag\r\n\t\tthis._tag.src = this._item.src;\r\n\t};\r\n\r\n\t// private methods\r\n\t/**\r\n\t * Handle the JSONP callback, which is a public method defined on `window`.\r\n\t * @method _handleLoad\r\n\t * @param {Object} data The formatted JSON data.\r\n\t * @private\r\n\t */\r\n\tp._handleLoad = function (data) {\r\n\t\tthis._result = this._rawResult = data;\r\n\t\tthis._sendComplete();\r\n\r\n\t\tthis._dispose();\r\n\t};\r\n\r\n\t/**\r\n\t * The tag request has not loaded within the time specfied in loadTimeout.\r\n\t * @method _handleError\r\n\t * @param {Object} event The XHR error event.\r\n\t * @private\r\n\t */\r\n\tp._handleTimeout = function () {\r\n\t\tthis._dispose();\r\n\t\tthis.dispatchEvent(new createjs.ErrorEvent(\"timeout\"));\r\n\t};\r\n\r\n\t/**\r\n\t * Clean up the JSONP load. This clears out the callback and script tag that this loader creates.\r\n\t * @method _dispose\r\n\t * @private\r\n\t */\r\n\tp._dispose = function () {\r\n\t\twindow.document.body.removeChild(this._tag);\r\n\t\tdelete window[this._item.callback];\r\n\r\n\t\tclearTimeout(this._loadTimeout);\r\n\t};\r\n\r\n\tcreatejs.JSONPLoader = createjs.promote(JSONPLoader, \"AbstractLoader\");\r\n\r\n}());\r\n\r\n//##############################################################################\r\n// ManifestLoader.js\r\n//##############################################################################\r\n\r\nthis.createjs = this.createjs || {};\r\n\r\n(function () {\r\n\t\"use strict\";\r\n\r\n\t// constructor\r\n\t/**\r\n\t * A loader for JSON manifests. Items inside the manifest are loaded before the loader completes. To load manifests\r\n\t * using JSONP, specify a {{#crossLink \"LoadItem/callback:property\"}}{{/crossLink}} as part of the\r\n\t * {{#crossLink \"LoadItem\"}}{{/crossLink}}.\r\n\t *\r\n\t * The list of files in the manifest must be defined on the top-level JSON object in a `manifest` property. This\r\n\t * example shows a sample manifest definition, as well as how to to include a sub-manifest.\r\n\t *\r\n\t * \t\t{\r\n\t * \t\t\t\"path\": \"assets/\",\r\n\t *\t \t    \"manifest\": [\r\n\t *\t\t\t\t\"image.png\",\r\n\t *\t\t\t\t{\"src\": \"image2.png\", \"id\":\"image2\"},\r\n\t *\t\t\t\t{\"src\": \"sub-manifest.json\", \"type\":\"manifest\", \"callback\":\"jsonCallback\"}\r\n\t *\t \t    ]\r\n\t *\t \t}\r\n\t *\r\n\t * When a ManifestLoader has completed loading, the parent loader (usually a {{#crossLink \"LoadQueue\"}}{{/crossLink}},\r\n\t * but could also be another ManifestLoader) will inherit all the loaded items, so you can access them directly.\r\n\t *\r\n\t * Note that the {{#crossLink \"JSONLoader\"}}{{/crossLink}} and {{#crossLink \"JSONPLoader\"}}{{/crossLink}} are\r\n\t * higher priority loaders, so manifests <strong>must</strong> set the {{#crossLink \"LoadItem\"}}{{/crossLink}}\r\n\t * {{#crossLink \"LoadItem/type:property\"}}{{/crossLink}} property to {{#crossLink \"AbstractLoader/MANIFEST:property\"}}{{/crossLink}}.\r\n\t * @class ManifestLoader\r\n\t * @param {LoadItem|Object} loadItem\r\n\t * @extends AbstractLoader\r\n\t * @constructor\r\n\t */\r\n\tfunction ManifestLoader(loadItem) {\r\n\t\tthis.AbstractLoader_constructor(loadItem, null, createjs.AbstractLoader.MANIFEST);\r\n\r\n\t// Public Properties\r\n\t\t/**\r\n\t\t * An array of the plugins registered using {{#crossLink \"LoadQueue/installPlugin\"}}{{/crossLink}},\r\n\t\t * used to pass plugins to new LoadQueues that may be created.\r\n\t\t * @property _plugins\r\n\t\t * @type {Array}\r\n\t\t * @private\r\n\t\t * @since 0.6.1\r\n\t\t */\r\n\t\tthis.plugins = null;\r\n\r\n\r\n\t// Protected Properties\r\n\t\t/**\r\n\t\t * An internal {{#crossLink \"LoadQueue\"}}{{/crossLink}} that loads the contents of the manifest.\r\n\t\t * @property _manifestQueue\r\n\t\t * @type {LoadQueue}\r\n\t\t * @private\r\n\t\t */\r\n\t\tthis._manifestQueue = null;\r\n\t};\r\n\r\n\tvar p = createjs.extend(ManifestLoader, createjs.AbstractLoader);\r\n\tvar s = ManifestLoader;\r\n\r\n\t// static properties\r\n\t/**\r\n\t * The amount of progress that the manifest itself takes up.\r\n\t * @property MANIFEST_PROGRESS\r\n\t * @type {number}\r\n\t * @default 0.25 (25%)\r\n\t * @private\r\n\t * @static\r\n\t */\r\n\ts.MANIFEST_PROGRESS = 0.25;\r\n\r\n\t// static methods\r\n\t/**\r\n\t * Determines if the loader can load a specific item. This loader can only load items that are of type\r\n\t * {{#crossLink \"AbstractLoader/MANIFEST:property\"}}{{/crossLink}}\r\n\t * @method canLoadItem\r\n\t * @param {LoadItem|Object} item The LoadItem that a LoadQueue is trying to load.\r\n\t * @returns {Boolean} Whether the loader can load the item.\r\n\t * @static\r\n\t */\r\n\ts.canLoadItem = function (item) {\r\n\t\treturn item.type == createjs.AbstractLoader.MANIFEST;\r\n\t};\r\n\r\n\t// public methods\r\n\tp.load = function () {\r\n\t\tthis.AbstractLoader_load();\r\n\t};\r\n\r\n\t// protected methods\r\n\tp._createRequest = function() {\r\n\t\tvar callback = this._item.callback;\r\n\t\tif (callback != null) {\r\n\t\t\tthis._request = new createjs.JSONPLoader(this._item);\r\n\t\t} else {\r\n\t\t\tthis._request = new createjs.JSONLoader(this._item);\r\n\t\t}\r\n\t};\r\n\r\n\tp.handleEvent = function (event) {\r\n\t\tswitch (event.type) {\r\n\t\t\tcase \"complete\":\r\n\t\t\t\tthis._rawResult = event.target.getResult(true);\r\n\t\t\t\tthis._result = event.target.getResult();\r\n\t\t\t\tthis._sendProgress(s.MANIFEST_PROGRESS);\r\n\t\t\t\tthis._loadManifest(this._result);\r\n\t\t\t\treturn;\r\n\t\t\tcase \"progress\":\r\n\t\t\t\tevent.loaded *= s.MANIFEST_PROGRESS;\r\n\t\t\t\tthis.progress = event.loaded / event.total;\r\n\t\t\t\tif (isNaN(this.progress) || this.progress == Infinity) { this.progress = 0; }\r\n\t\t\t\tthis._sendProgress(event);\r\n\t\t\t\treturn;\r\n\t\t}\r\n\t\tthis.AbstractLoader_handleEvent(event);\r\n\t};\r\n\r\n\tp.destroy = function() {\r\n\t\tthis.AbstractLoader_destroy();\r\n\t\tthis._manifestQueue.close();\r\n\t};\r\n\r\n\t/**\r\n\t * Create and load the manifest items once the actual manifest has been loaded.\r\n\t * @method _loadManifest\r\n\t * @param {Object} json\r\n\t * @private\r\n\t */\r\n\tp._loadManifest = function (json) {\r\n\t\tif (json && json.manifest) {\r\n\t\t\tvar queue = this._manifestQueue = new createjs.LoadQueue();\r\n\t\t\tqueue.on(\"fileload\", this._handleManifestFileLoad, this);\r\n\t\t\tqueue.on(\"progress\", this._handleManifestProgress, this);\r\n\t\t\tqueue.on(\"complete\", this._handleManifestComplete, this, true);\r\n\t\t\tqueue.on(\"error\", this._handleManifestError, this, true);\r\n\t\t\tfor(var i = 0, l = this.plugins.length; i < l; i++) {\t// conserve order of plugins\r\n\t\t\t\tqueue.installPlugin(this.plugins[i]);\r\n\t\t\t}\r\n\t\t\tqueue.loadManifest(json);\r\n\t\t} else {\r\n\t\t\tthis._sendComplete();\r\n\t\t}\r\n\t};\r\n\r\n\t/**\r\n\t * An item from the {{#crossLink \"_manifestQueue:property\"}}{{/crossLink}} has completed.\r\n\t * @method _handleManifestFileLoad\r\n\t * @param {Event} event\r\n\t * @private\r\n\t */\r\n\tp._handleManifestFileLoad = function (event) {\r\n\t\tevent.target = null;\r\n\t\tthis.dispatchEvent(event);\r\n\t};\r\n\r\n\t/**\r\n\t * The manifest has completed loading. This triggers the {{#crossLink \"AbstractLoader/complete:event\"}}{{/crossLink}}\r\n\t * {{#crossLink \"Event\"}}{{/crossLink}} from the ManifestLoader.\r\n\t * @method _handleManifestComplete\r\n\t * @param {Event} event\r\n\t * @private\r\n\t */\r\n\tp._handleManifestComplete = function (event) {\r\n\t\tthis._loadedItems = this._manifestQueue.getItems(true);\r\n\t\tthis._sendComplete();\r\n\t};\r\n\r\n\t/**\r\n\t * The manifest has reported progress.\r\n\t * @method _handleManifestProgress\r\n\t * @param {ProgressEvent} event\r\n\t * @private\r\n\t */\r\n\tp._handleManifestProgress = function (event) {\r\n\t\tthis.progress = event.progress * (1 - s.MANIFEST_PROGRESS) + s.MANIFEST_PROGRESS;\r\n\t\tthis._sendProgress(this.progress);\r\n\t};\r\n\r\n\t/**\r\n\t * The manifest has reported an error with one of the files.\r\n\t * @method _handleManifestError\r\n\t * @param {ErrorEvent} event\r\n\t * @private\r\n\t */\r\n\tp._handleManifestError = function (event) {\r\n\t\tvar newEvent = new createjs.Event(\"fileerror\");\r\n\t\tnewEvent.item = event.data;\r\n\t\tthis.dispatchEvent(newEvent);\r\n\t};\r\n\r\n\tcreatejs.ManifestLoader = createjs.promote(ManifestLoader, \"AbstractLoader\");\r\n\r\n}());\r\n\r\n//##############################################################################\r\n// SoundLoader.js\r\n//##############################################################################\r\n\r\nthis.createjs = this.createjs || {};\r\n\r\n(function () {\r\n\t\"use strict\";\r\n\r\n\t// constructor\r\n\t/**\r\n\t * A loader for HTML audio files. PreloadJS can not load WebAudio files, as a WebAudio context is required, which\r\n\t * should be created by either a library playing the sound (such as <a href=\"http://soundjs.com\">SoundJS</a>, or an\r\n\t * external framework that handles audio playback. To load content that can be played by WebAudio, use the\r\n\t * {{#crossLink \"BinaryLoader\"}}{{/crossLink}}, and handle the audio context decoding manually.\r\n\t * @class SoundLoader\r\n\t * @param {LoadItem|Object} loadItem\r\n\t * @param {Boolean} preferXHR\r\n\t * @extends AbstractMediaLoader\r\n\t * @constructor\r\n\t */\r\n\tfunction SoundLoader(loadItem, preferXHR) {\r\n\t\tthis.AbstractMediaLoader_constructor(loadItem, preferXHR, createjs.AbstractLoader.SOUND);\r\n\r\n\t\t// protected properties\r\n\t\tif (createjs.RequestUtils.isAudioTag(loadItem)) {\r\n\t\t\tthis._tag = loadItem;\r\n\t\t} else if (createjs.RequestUtils.isAudioTag(loadItem.src)) {\r\n\t\t\tthis._tag = loadItem;\r\n\t\t} else if (createjs.RequestUtils.isAudioTag(loadItem.tag)) {\r\n\t\t\tthis._tag = createjs.RequestUtils.isAudioTag(loadItem) ? loadItem : loadItem.src;\r\n\t\t}\r\n\r\n\t\tif (this._tag != null) {\r\n\t\t\tthis._preferXHR = false;\r\n\t\t}\r\n\t};\r\n\r\n\tvar p = createjs.extend(SoundLoader, createjs.AbstractMediaLoader);\r\n\tvar s = SoundLoader;\r\n\r\n\t// static methods\r\n\t/**\r\n\t * Determines if the loader can load a specific item. This loader can only load items that are of type\r\n\t * {{#crossLink \"AbstractLoader/SOUND:property\"}}{{/crossLink}}.\r\n\t * @method canLoadItem\r\n\t * @param {LoadItem|Object} item The LoadItem that a LoadQueue is trying to load.\r\n\t * @returns {Boolean} Whether the loader can load the item.\r\n\t * @static\r\n\t */\r\n\ts.canLoadItem = function (item) {\r\n\t\treturn item.type == createjs.AbstractLoader.SOUND;\r\n\t};\r\n\r\n\t// protected methods\r\n\tp._createTag = function (src) {\r\n\t\tvar tag = document.createElement(\"audio\");\r\n\t\ttag.autoplay = false;\r\n\t\ttag.preload = \"none\";\r\n\r\n\t\t//LM: Firefox fails when this the preload=\"none\" for other tags, but it needs to be \"none\" to ensure PreloadJS works.\r\n\t\ttag.src = src;\r\n\t\treturn tag;\r\n\t};\r\n\r\n\tcreatejs.SoundLoader = createjs.promote(SoundLoader, \"AbstractMediaLoader\");\r\n\r\n}());\r\n\r\n//##############################################################################\r\n// VideoLoader.js\r\n//##############################################################################\r\n\r\nthis.createjs = this.createjs || {};\r\n\r\n(function () {\r\n\t\"use strict\";\r\n\r\n\t// constructor\r\n\t/**\r\n\t * A loader for video files.\r\n\t * @class VideoLoader\r\n\t * @param {LoadItem|Object} loadItem\r\n\t * @param {Boolean} preferXHR\r\n\t * @extends AbstractMediaLoader\r\n\t * @constructor\r\n\t */\r\n\tfunction VideoLoader(loadItem, preferXHR) {\r\n\t\tthis.AbstractMediaLoader_constructor(loadItem, preferXHR, createjs.AbstractLoader.VIDEO);\r\n\r\n\t\tif (createjs.RequestUtils.isVideoTag(loadItem) || createjs.RequestUtils.isVideoTag(loadItem.src)) {\r\n\t\t\tthis.setTag(createjs.RequestUtils.isVideoTag(loadItem)?loadItem:loadItem.src);\r\n\r\n\t\t\t// We can't use XHR for a tag that's passed in.\r\n\t\t\tthis._preferXHR = false;\r\n\t\t} else {\r\n\t\t\tthis.setTag(this._createTag());\r\n\t\t}\r\n\t};\r\n\r\n\tvar p = createjs.extend(VideoLoader, createjs.AbstractMediaLoader);\r\n\tvar s = VideoLoader;\r\n\r\n\t/**\r\n\t * Create a new video tag\r\n\t *\r\n\t * @returns {HTMLElement}\r\n\t * @private\r\n\t */\r\n\tp._createTag = function () {\r\n\t\treturn document.createElement(\"video\");\r\n\t};\r\n\r\n\t// static methods\r\n\t/**\r\n\t * Determines if the loader can load a specific item. This loader can only load items that are of type\r\n\t * {{#crossLink \"AbstractLoader/VIDEO:property\"}}{{/crossLink}}.\r\n\t * @method canLoadItem\r\n\t * @param {LoadItem|Object} item The LoadItem that a LoadQueue is trying to load.\r\n\t * @returns {Boolean} Whether the loader can load the item.\r\n\t * @static\r\n\t */\r\n\ts.canLoadItem = function (item) {\r\n\t\treturn item.type == createjs.AbstractLoader.VIDEO;\r\n\t};\r\n\r\n\tcreatejs.VideoLoader = createjs.promote(VideoLoader, \"AbstractMediaLoader\");\r\n\r\n}());\r\n\r\n//##############################################################################\r\n// SpriteSheetLoader.js\r\n//##############################################################################\r\n\r\nthis.createjs = this.createjs || {};\r\n\r\n(function () {\r\n\t\"use strict\";\r\n\r\n\t// constructor\r\n\t/**\r\n\t * A loader for EaselJS SpriteSheets. Images inside the spritesheet definition are loaded before the loader\r\n\t * completes. To load SpriteSheets using JSONP, specify a {{#crossLink \"LoadItem/callback:property\"}}{{/crossLink}}\r\n\t * as part of the {{#crossLink \"LoadItem\"}}{{/crossLink}}. Note that the {{#crossLink \"JSONLoader\"}}{{/crossLink}}\r\n\t * and {{#crossLink \"JSONPLoader\"}}{{/crossLink}} are higher priority loaders, so SpriteSheets <strong>must</strong>\r\n\t * set the {{#crossLink \"LoadItem\"}}{{/crossLink}} {{#crossLink \"LoadItem/type:property\"}}{{/crossLink}} property\r\n\t * to {{#crossLink \"AbstractLoader/SPRITESHEET:property\"}}{{/crossLink}}.\r\n\t *\r\n\t * The {{#crossLink \"LoadItem\"}}{{/crossLink}} {{#crossLink \"LoadItem/crossOrigin:property\"}}{{/crossLink}} as well\r\n\t * as the {{#crossLink \"LoadQueue's\"}}{{/crossLink}} `basePath` argument and {{#crossLink \"LoadQueue/_preferXHR\"}}{{/crossLink}}\r\n\t * property supplied to the {{#crossLink \"LoadQueue\"}}{{/crossLink}} are passed on to the sub-manifest that loads\r\n\t * the SpriteSheet images.\r\n\t *\r\n\t * Note that the SpriteSheet JSON does not respect the {{#crossLink \"LoadQueue/_preferXHR:property\"}}{{/crossLink}}\r\n\t * property, which should instead be determined by the presence of a {{#crossLink \"LoadItem/callback:property\"}}{{/crossLink}}\r\n\t * property on the SpriteSheet load item. This is because the JSON loaded will have a different format depending on\r\n\t * if it is loaded as JSON, so just changing `preferXHR` is not enough to change how it is loaded.\r\n\t * @class SpriteSheetLoader\r\n\t * @param {LoadItem|Object} loadItem\r\n\t * @extends AbstractLoader\r\n\t * @constructor\r\n\t */\r\n\tfunction SpriteSheetLoader(loadItem, preferXHR) {\r\n\t\tthis.AbstractLoader_constructor(loadItem, preferXHR, createjs.AbstractLoader.SPRITESHEET);\r\n\r\n\t\t// protected properties\r\n\t\t/**\r\n\t\t * An internal queue which loads the SpriteSheet's images.\r\n\t\t * @method _manifestQueue\r\n\t\t * @type {LoadQueue}\r\n\t\t * @private\r\n\t\t */\r\n\t\tthis._manifestQueue = null;\r\n\t}\r\n\r\n\tvar p = createjs.extend(SpriteSheetLoader, createjs.AbstractLoader);\r\n\tvar s = SpriteSheetLoader;\r\n\r\n\t// static properties\r\n\t/**\r\n\t * The amount of progress that the manifest itself takes up.\r\n\t * @property SPRITESHEET_PROGRESS\r\n\t * @type {number}\r\n\t * @default 0.25 (25%)\r\n\t * @private\r\n\t * @static\r\n\t */\r\n\ts.SPRITESHEET_PROGRESS = 0.25;\r\n\r\n\t// static methods\r\n\t/**\r\n\t * Determines if the loader can load a specific item. This loader can only load items that are of type\r\n\t * {{#crossLink \"AbstractLoader/SPRITESHEET:property\"}}{{/crossLink}}\r\n\t * @method canLoadItem\r\n\t * @param {LoadItem|Object} item The LoadItem that a LoadQueue is trying to load.\r\n\t * @returns {Boolean} Whether the loader can load the item.\r\n\t * @static\r\n\t */\r\n\ts.canLoadItem = function (item) {\r\n\t\treturn item.type == createjs.AbstractLoader.SPRITESHEET;\r\n\t};\r\n\r\n\t// public methods\r\n\tp.destroy = function() {\r\n\t\tthis.AbstractLoader_destroy;\r\n\t\tthis._manifestQueue.close();\r\n\t};\r\n\r\n\t// protected methods\r\n\tp._createRequest = function() {\r\n\t\tvar callback = this._item.callback;\r\n\t\tif (callback != null) {\r\n\t\t\tthis._request = new createjs.JSONPLoader(this._item);\r\n\t\t} else {\r\n\t\t\tthis._request = new createjs.JSONLoader(this._item);\r\n\t\t}\r\n\t};\r\n\r\n\tp.handleEvent = function (event) {\r\n\t\tswitch (event.type) {\r\n\t\t\tcase \"complete\":\r\n\t\t\t\tthis._rawResult = event.target.getResult(true);\r\n\t\t\t\tthis._result = event.target.getResult();\r\n\t\t\t\tthis._sendProgress(s.SPRITESHEET_PROGRESS);\r\n\t\t\t\tthis._loadManifest(this._result);\r\n\t\t\t\treturn;\r\n\t\t\tcase \"progress\":\r\n\t\t\t\tevent.loaded *= s.SPRITESHEET_PROGRESS;\r\n\t\t\t\tthis.progress = event.loaded / event.total;\r\n\t\t\t\tif (isNaN(this.progress) || this.progress == Infinity) { this.progress = 0; }\r\n\t\t\t\tthis._sendProgress(event);\r\n\t\t\t\treturn;\r\n\t\t}\r\n\t\tthis.AbstractLoader_handleEvent(event);\r\n\t};\r\n\r\n\t/**\r\n\t * Create and load the images once the SpriteSheet JSON has been loaded.\r\n\t * @method _loadManifest\r\n\t * @param {Object} json\r\n\t * @private\r\n\t */\r\n\tp._loadManifest = function (json) {\r\n\t\tif (json && json.images) {\r\n\t\t\tvar queue = this._manifestQueue = new createjs.LoadQueue(this._preferXHR, this._item.path, this._item.crossOrigin);\r\n\t\t\tqueue.on(\"complete\", this._handleManifestComplete, this, true);\r\n\t\t\tqueue.on(\"fileload\", this._handleManifestFileLoad, this);\r\n\t\t\tqueue.on(\"progress\", this._handleManifestProgress, this);\r\n\t\t\tqueue.on(\"error\", this._handleManifestError, this, true);\r\n\t\t\tqueue.loadManifest(json.images);\r\n\t\t}\r\n\t};\r\n\r\n\t/**\r\n\t * An item from the {{#crossLink \"_manifestQueue:property\"}}{{/crossLink}} has completed.\r\n\t * @method _handleManifestFileLoad\r\n\t * @param {Event} event\r\n\t * @private\r\n\t */\r\n\tp._handleManifestFileLoad = function (event) {\r\n\t\tvar image = event.result;\r\n\t\tif (image != null) {\r\n\t\t\tvar images = this.getResult().images;\r\n\t\t\tvar pos = images.indexOf(event.item.src);\r\n\t\t\timages[pos] = image;\r\n\t\t}\r\n\t};\r\n\r\n\t/**\r\n\t * The images have completed loading. This triggers the {{#crossLink \"AbstractLoader/complete:event\"}}{{/crossLink}}\r\n\t * {{#crossLink \"Event\"}}{{/crossLink}} from the SpriteSheetLoader.\r\n\t * @method _handleManifestComplete\r\n\t * @param {Event} event\r\n\t * @private\r\n\t */\r\n\tp._handleManifestComplete = function (event) {\r\n\t\tthis._result = new createjs.SpriteSheet(this._result);\r\n\t\tthis._loadedItems = this._manifestQueue.getItems(true);\r\n\t\tthis._sendComplete();\r\n\t};\r\n\r\n\t/**\r\n\t * The images {{#crossLink \"LoadQueue\"}}{{/crossLink}} has reported progress.\r\n\t * @method _handleManifestProgress\r\n\t * @param {ProgressEvent} event\r\n\t * @private\r\n\t */\r\n\tp._handleManifestProgress = function (event) {\r\n\t\tthis.progress = event.progress * (1 - s.SPRITESHEET_PROGRESS) + s.SPRITESHEET_PROGRESS;\r\n\t\tthis._sendProgress(this.progress);\r\n\t};\r\n\r\n\t/**\r\n\t * An image has reported an error.\r\n\t * @method _handleManifestError\r\n\t * @param {ErrorEvent} event\r\n\t * @private\r\n\t */\r\n\tp._handleManifestError = function (event) {\r\n\t\tvar newEvent = new createjs.Event(\"fileerror\");\r\n\t\tnewEvent.item = event.data;\r\n\t\tthis.dispatchEvent(newEvent);\r\n\t};\r\n\r\n\tcreatejs.SpriteSheetLoader = createjs.promote(SpriteSheetLoader, \"AbstractLoader\");\r\n\r\n}());\r\n\r\n//##############################################################################\r\n// SVGLoader.js\r\n//##############################################################################\r\n\r\nthis.createjs = this.createjs || {};\r\n\r\n(function () {\r\n\t\"use strict\";\r\n\r\n\t// constructor\r\n\t/**\r\n\t * A loader for SVG files.\r\n\t * @class SVGLoader\r\n\t * @param {LoadItem|Object} loadItem\r\n\t * @param {Boolean} preferXHR\r\n\t * @extends AbstractLoader\r\n\t * @constructor\r\n\t */\r\n\tfunction SVGLoader(loadItem, preferXHR) {\r\n\t\tthis.AbstractLoader_constructor(loadItem, preferXHR, createjs.AbstractLoader.SVG);\r\n\r\n\t\t// public properties\r\n\t\tthis.resultFormatter = this._formatResult;\r\n\r\n\t\t// protected properties\r\n\t\tthis._tagSrcAttribute = \"data\";\r\n\r\n\t\tif (preferXHR) {\r\n\t\t\tthis.setTag(document.createElement(\"svg\"));\r\n\t\t} else {\r\n\t\t\tthis.setTag(document.createElement(\"object\"));\r\n\t\t\tthis.getTag().type = \"image/svg+xml\";\r\n\t\t}\r\n\t};\r\n\r\n\tvar p = createjs.extend(SVGLoader, createjs.AbstractLoader);\r\n\tvar s = SVGLoader;\r\n\r\n\t// static methods\r\n\t/**\r\n\t * Determines if the loader can load a specific item. This loader can only load items that are of type\r\n\t * {{#crossLink \"AbstractLoader/SVG:property\"}}{{/crossLink}}\r\n\t * @method canLoadItem\r\n\t * @param {LoadItem|Object} item The LoadItem that a LoadQueue is trying to load.\r\n\t * @returns {Boolean} Whether the loader can load the item.\r\n\t * @static\r\n\t */\r\n\ts.canLoadItem = function (item) {\r\n\t\treturn item.type == createjs.AbstractLoader.SVG;\r\n\t};\r\n\r\n\t// protected methods\r\n\t/**\r\n\t * The result formatter for SVG files.\r\n\t * @method _formatResult\r\n\t * @param {AbstractLoader} loader\r\n\t * @returns {Object}\r\n\t * @private\r\n\t */\r\n\tp._formatResult = function (loader) {\r\n\t\t// mime should be image/svg+xml, but Opera requires text/xml\r\n\t\tvar xml = createjs.DataUtils.parseXML(loader.getResult(true), \"text/xml\");\r\n\t\tvar tag = loader.getTag();\r\n\r\n\t\tif (!this._preferXHR && document.body.contains(tag)) {\r\n\t\t\tdocument.body.removeChild(tag);\r\n\t\t}\r\n\r\n\t\tif (xml.documentElement != null) {\r\n\t\t\ttag.appendChild(xml.documentElement);\r\n\t\t\ttag.style.visibility = \"visible\";\r\n\t\t\treturn tag;\r\n\t\t} else { // For browsers that don't support SVG, just give them the XML. (IE 9-8)\r\n\t\t\treturn xml;\r\n\t\t}\r\n\t};\r\n\r\n\tcreatejs.SVGLoader = createjs.promote(SVGLoader, \"AbstractLoader\");\r\n\r\n}());\r\n\r\n//##############################################################################\r\n// XMLLoader.js\r\n//##############################################################################\r\n\r\nthis.createjs = this.createjs || {};\r\n\r\n(function () {\r\n\t\"use strict\";\r\n\r\n\t// constructor\r\n\t/**\r\n\t * A loader for CSS files.\r\n\t * @class XMLLoader\r\n\t * @param {LoadItem|Object} loadItem\r\n\t * @extends AbstractLoader\r\n\t * @constructor\r\n\t */\r\n\tfunction XMLLoader(loadItem) {\r\n\t\tthis.AbstractLoader_constructor(loadItem, true, createjs.AbstractLoader.XML);\r\n\r\n\t\t// public properties\r\n\t\tthis.resultFormatter = this._formatResult;\r\n\t};\r\n\r\n\tvar p = createjs.extend(XMLLoader, createjs.AbstractLoader);\r\n\tvar s = XMLLoader;\r\n\r\n\t// static methods\r\n\t/**\r\n\t * Determines if the loader can load a specific item. This loader can only load items that are of type\r\n\t * {{#crossLink \"AbstractLoader/XML:property\"}}{{/crossLink}}.\r\n\t * @method canLoadItem\r\n\t * @param {LoadItem|Object} item The LoadItem that a LoadQueue is trying to load.\r\n\t * @returns {Boolean} Whether the loader can load the item.\r\n\t * @static\r\n\t */\r\n\ts.canLoadItem = function (item) {\r\n\t\treturn item.type == createjs.AbstractLoader.XML;\r\n\t};\r\n\r\n\t// protected methods\r\n\t/**\r\n\t * The result formatter for XML files.\r\n\t * @method _formatResult\r\n\t * @param {AbstractLoader} loader\r\n\t * @returns {XMLDocument}\r\n\t * @private\r\n\t */\r\n\tp._formatResult = function (loader) {\r\n\t\treturn createjs.DataUtils.parseXML(loader.getResult(true), \"text/xml\");\r\n\t};\r\n\r\n\tcreatejs.XMLLoader = createjs.promote(XMLLoader, \"AbstractLoader\");\r\n\r\n}());\n}.call(window));","/*** IMPORTS FROM imports-loader ***/\n(function() {\n\n/*!\r\n* EaselJS\r\n* Visit http://createjs.com/ for documentation, updates and examples.\r\n*\r\n* Copyright (c) 2010 gskinner.com, inc.\r\n*\r\n* Permission is hereby granted, free of charge, to any person\r\n* obtaining a copy of this software and associated documentation\r\n* files (the \"Software\"), to deal in the Software without\r\n* restriction, including without limitation the rights to use,\r\n* copy, modify, merge, publish, distribute, sublicense, and/or sell\r\n* copies of the Software, and to permit persons to whom the\r\n* Software is furnished to do so, subject to the following\r\n* conditions:\r\n*\r\n* The above copyright notice and this permission notice shall be\r\n* included in all copies or substantial portions of the Software.\r\n*\r\n* THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\r\n* EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES\r\n* OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\r\n* NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\r\n* HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,\r\n* WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\r\n* FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR\r\n* OTHER DEALINGS IN THE SOFTWARE.\r\n*/\r\n\r\n\r\n//##############################################################################\r\n// extend.js\r\n//##############################################################################\r\n\r\nthis.createjs = this.createjs||{};\r\n\r\n/**\r\n * @class Utility Methods\r\n */\r\n\r\n/**\r\n * Sets up the prototype chain and constructor property for a new class.\r\n *\r\n * This should be called right after creating the class constructor.\r\n *\r\n * \tfunction MySubClass() {}\r\n * \tcreatejs.extend(MySubClass, MySuperClass);\r\n * \tMySubClass.prototype.doSomething = function() { }\r\n *\r\n * \tvar foo = new MySubClass();\r\n * \tconsole.log(foo instanceof MySuperClass); // true\r\n * \tconsole.log(foo.prototype.constructor === MySubClass); // true\r\n *\r\n * @method extend\r\n * @param {Function} subclass The subclass.\r\n * @param {Function} superclass The superclass to extend.\r\n * @return {Function} Returns the subclass's new prototype.\r\n */\r\ncreatejs.extend = function(subclass, superclass) {\r\n\t\"use strict\";\r\n\r\n\tfunction o() { this.constructor = subclass; }\r\n\to.prototype = superclass.prototype;\r\n\treturn (subclass.prototype = new o());\r\n};\r\n\r\n//##############################################################################\r\n// promote.js\r\n//##############################################################################\r\n\r\nthis.createjs = this.createjs||{};\r\n\r\n/**\r\n * @class Utility Methods\r\n */\r\n\r\n/**\r\n * Promotes any methods on the super class that were overridden, by creating an alias in the format `prefix_methodName`.\r\n * It is recommended to use the super class's name as the prefix.\r\n * An alias to the super class's constructor is always added in the format `prefix_constructor`.\r\n * This allows the subclass to call super class methods without using `function.call`, providing better performance.\r\n *\r\n * For example, if `MySubClass` extends `MySuperClass`, and both define a `draw` method, then calling `promote(MySubClass, \"MySuperClass\")`\r\n * would add a `MySuperClass_constructor` method to MySubClass and promote the `draw` method on `MySuperClass` to the\r\n * prototype of `MySubClass` as `MySuperClass_draw`.\r\n *\r\n * This should be called after the class's prototype is fully defined.\r\n *\r\n * \tfunction ClassA(name) {\r\n * \t\tthis.name = name;\r\n * \t}\r\n * \tClassA.prototype.greet = function() {\r\n * \t\treturn \"Hello \"+this.name;\r\n * \t}\r\n *\r\n * \tfunction ClassB(name, punctuation) {\r\n * \t\tthis.ClassA_constructor(name);\r\n * \t\tthis.punctuation = punctuation;\r\n * \t}\r\n * \tcreatejs.extend(ClassB, ClassA);\r\n * \tClassB.prototype.greet = function() {\r\n * \t\treturn this.ClassA_greet()+this.punctuation;\r\n * \t}\r\n * \tcreatejs.promote(ClassB, \"ClassA\");\r\n *\r\n * \tvar foo = new ClassB(\"World\", \"!?!\");\r\n * \tconsole.log(foo.greet()); // Hello World!?!\r\n *\r\n * @method promote\r\n * @param {Function} subclass The class to promote super class methods on.\r\n * @param {String} prefix The prefix to add to the promoted method names. Usually the name of the superclass.\r\n * @return {Function} Returns the subclass.\r\n */\r\ncreatejs.promote = function(subclass, prefix) {\r\n\t\"use strict\";\r\n\r\n\tvar subP = subclass.prototype, supP = (Object.getPrototypeOf&&Object.getPrototypeOf(subP))||subP.__proto__;\r\n\tif (supP) {\r\n\t\tsubP[(prefix+=\"_\") + \"constructor\"] = supP.constructor; // constructor is not always innumerable\r\n\t\tfor (var n in supP) {\r\n\t\t\tif (subP.hasOwnProperty(n) && (typeof supP[n] == \"function\")) { subP[prefix + n] = supP[n]; }\r\n\t\t}\r\n\t}\r\n\treturn subclass;\r\n};\r\n\r\n//##############################################################################\r\n// indexOf.js\r\n//##############################################################################\r\n\r\nthis.createjs = this.createjs||{};\r\n\r\n/**\r\n * @class Utility Methods\r\n */\r\n\r\n/**\r\n * Finds the first occurrence of a specified value searchElement in the passed in array, and returns the index of\r\n * that value.  Returns -1 if value is not found.\r\n *\r\n *      var i = createjs.indexOf(myArray, myElementToFind);\r\n *\r\n * @method indexOf\r\n * @param {Array} array Array to search for searchElement\r\n * @param searchElement Element to find in array.\r\n * @return {Number} The first index of searchElement in array.\r\n */\r\ncreatejs.indexOf = function (array, searchElement){\r\n\t\"use strict\";\r\n\r\n\tfor (var i = 0,l=array.length; i < l; i++) {\r\n\t\tif (searchElement === array[i]) {\r\n\t\t\treturn i;\r\n\t\t}\r\n\t}\r\n\treturn -1;\r\n};\r\n\r\n//##############################################################################\r\n// Event.js\r\n//##############################################################################\r\n\r\nthis.createjs = this.createjs||{};\r\n\r\n(function() {\r\n\t\"use strict\";\r\n\r\n// constructor:\r\n\t/**\r\n\t * Contains properties and methods shared by all events for use with\r\n\t * {{#crossLink \"EventDispatcher\"}}{{/crossLink}}.\r\n\t * \r\n\t * Note that Event objects are often reused, so you should never\r\n\t * rely on an event object's state outside of the call stack it was received in.\r\n\t * @class Event\r\n\t * @param {String} type The event type.\r\n\t * @param {Boolean} bubbles Indicates whether the event will bubble through the display list.\r\n\t * @param {Boolean} cancelable Indicates whether the default behaviour of this event can be cancelled.\r\n\t * @constructor\r\n\t **/\r\n\tfunction Event(type, bubbles, cancelable) {\r\n\t\t\r\n\t\r\n\t// public properties:\r\n\t\t/**\r\n\t\t * The type of event.\r\n\t\t * @property type\r\n\t\t * @type String\r\n\t\t **/\r\n\t\tthis.type = type;\r\n\t\r\n\t\t/**\r\n\t\t * The object that generated an event.\r\n\t\t * @property target\r\n\t\t * @type Object\r\n\t\t * @default null\r\n\t\t * @readonly\r\n\t\t*/\r\n\t\tthis.target = null;\r\n\t\r\n\t\t/**\r\n\t\t * The current target that a bubbling event is being dispatched from. For non-bubbling events, this will\r\n\t\t * always be the same as target. For example, if childObj.parent = parentObj, and a bubbling event\r\n\t\t * is generated from childObj, then a listener on parentObj would receive the event with\r\n\t\t * target=childObj (the original target) and currentTarget=parentObj (where the listener was added).\r\n\t\t * @property currentTarget\r\n\t\t * @type Object\r\n\t\t * @default null\r\n\t\t * @readonly\r\n\t\t*/\r\n\t\tthis.currentTarget = null;\r\n\t\r\n\t\t/**\r\n\t\t * For bubbling events, this indicates the current event phase:<OL>\r\n\t\t * \t<LI> capture phase: starting from the top parent to the target</LI>\r\n\t\t * \t<LI> at target phase: currently being dispatched from the target</LI>\r\n\t\t * \t<LI> bubbling phase: from the target to the top parent</LI>\r\n\t\t * </OL>\r\n\t\t * @property eventPhase\r\n\t\t * @type Number\r\n\t\t * @default 0\r\n\t\t * @readonly\r\n\t\t*/\r\n\t\tthis.eventPhase = 0;\r\n\t\r\n\t\t/**\r\n\t\t * Indicates whether the event will bubble through the display list.\r\n\t\t * @property bubbles\r\n\t\t * @type Boolean\r\n\t\t * @default false\r\n\t\t * @readonly\r\n\t\t*/\r\n\t\tthis.bubbles = !!bubbles;\r\n\t\r\n\t\t/**\r\n\t\t * Indicates whether the default behaviour of this event can be cancelled via\r\n\t\t * {{#crossLink \"Event/preventDefault\"}}{{/crossLink}}. This is set via the Event constructor.\r\n\t\t * @property cancelable\r\n\t\t * @type Boolean\r\n\t\t * @default false\r\n\t\t * @readonly\r\n\t\t*/\r\n\t\tthis.cancelable = !!cancelable;\r\n\t\r\n\t\t/**\r\n\t\t * The epoch time at which this event was created.\r\n\t\t * @property timeStamp\r\n\t\t * @type Number\r\n\t\t * @default 0\r\n\t\t * @readonly\r\n\t\t*/\r\n\t\tthis.timeStamp = (new Date()).getTime();\r\n\t\r\n\t\t/**\r\n\t\t * Indicates if {{#crossLink \"Event/preventDefault\"}}{{/crossLink}} has been called\r\n\t\t * on this event.\r\n\t\t * @property defaultPrevented\r\n\t\t * @type Boolean\r\n\t\t * @default false\r\n\t\t * @readonly\r\n\t\t*/\r\n\t\tthis.defaultPrevented = false;\r\n\t\r\n\t\t/**\r\n\t\t * Indicates if {{#crossLink \"Event/stopPropagation\"}}{{/crossLink}} or\r\n\t\t * {{#crossLink \"Event/stopImmediatePropagation\"}}{{/crossLink}} has been called on this event.\r\n\t\t * @property propagationStopped\r\n\t\t * @type Boolean\r\n\t\t * @default false\r\n\t\t * @readonly\r\n\t\t*/\r\n\t\tthis.propagationStopped = false;\r\n\t\r\n\t\t/**\r\n\t\t * Indicates if {{#crossLink \"Event/stopImmediatePropagation\"}}{{/crossLink}} has been called\r\n\t\t * on this event.\r\n\t\t * @property immediatePropagationStopped\r\n\t\t * @type Boolean\r\n\t\t * @default false\r\n\t\t * @readonly\r\n\t\t*/\r\n\t\tthis.immediatePropagationStopped = false;\r\n\t\t\r\n\t\t/**\r\n\t\t * Indicates if {{#crossLink \"Event/remove\"}}{{/crossLink}} has been called on this event.\r\n\t\t * @property removed\r\n\t\t * @type Boolean\r\n\t\t * @default false\r\n\t\t * @readonly\r\n\t\t*/\r\n\t\tthis.removed = false;\r\n\t}\r\n\tvar p = Event.prototype;\r\n\r\n\t/**\r\n\t * <strong>REMOVED</strong>. Removed in favor of using `MySuperClass_constructor`.\r\n\t * See {{#crossLink \"Utility Methods/extend\"}}{{/crossLink}} and {{#crossLink \"Utility Methods/promote\"}}{{/crossLink}}\r\n\t * for details.\r\n\t *\r\n\t * There is an inheritance tutorial distributed with EaselJS in /tutorials/Inheritance.\r\n\t *\r\n\t * @method initialize\r\n\t * @protected\r\n\t * @deprecated\r\n\t */\r\n\t// p.initialize = function() {}; // searchable for devs wondering where it is.\r\n\r\n// public methods:\r\n\t/**\r\n\t * Sets {{#crossLink \"Event/defaultPrevented\"}}{{/crossLink}} to true if the event is cancelable.\r\n\t * Mirrors the DOM level 2 event standard. In general, cancelable events that have `preventDefault()` called will\r\n\t * cancel the default behaviour associated with the event.\r\n\t * @method preventDefault\r\n\t **/\r\n\tp.preventDefault = function() {\r\n\t\tthis.defaultPrevented = this.cancelable&&true;\r\n\t};\r\n\r\n\t/**\r\n\t * Sets {{#crossLink \"Event/propagationStopped\"}}{{/crossLink}} to true.\r\n\t * Mirrors the DOM event standard.\r\n\t * @method stopPropagation\r\n\t **/\r\n\tp.stopPropagation = function() {\r\n\t\tthis.propagationStopped = true;\r\n\t};\r\n\r\n\t/**\r\n\t * Sets {{#crossLink \"Event/propagationStopped\"}}{{/crossLink}} and\r\n\t * {{#crossLink \"Event/immediatePropagationStopped\"}}{{/crossLink}} to true.\r\n\t * Mirrors the DOM event standard.\r\n\t * @method stopImmediatePropagation\r\n\t **/\r\n\tp.stopImmediatePropagation = function() {\r\n\t\tthis.immediatePropagationStopped = this.propagationStopped = true;\r\n\t};\r\n\t\r\n\t/**\r\n\t * Causes the active listener to be removed via removeEventListener();\r\n\t * \r\n\t * \t\tmyBtn.addEventListener(\"click\", function(evt) {\r\n\t * \t\t\t// do stuff...\r\n\t * \t\t\tevt.remove(); // removes this listener.\r\n\t * \t\t});\r\n\t * \r\n\t * @method remove\r\n\t **/\r\n\tp.remove = function() {\r\n\t\tthis.removed = true;\r\n\t};\r\n\t\r\n\t/**\r\n\t * Returns a clone of the Event instance.\r\n\t * @method clone\r\n\t * @return {Event} a clone of the Event instance.\r\n\t **/\r\n\tp.clone = function() {\r\n\t\treturn new Event(this.type, this.bubbles, this.cancelable);\r\n\t};\r\n\t\r\n\t/**\r\n\t * Provides a chainable shortcut method for setting a number of properties on the instance.\r\n\t *\r\n\t * @method set\r\n\t * @param {Object} props A generic object containing properties to copy to the instance.\r\n\t * @return {Event} Returns the instance the method is called on (useful for chaining calls.)\r\n\t * @chainable\r\n\t*/\r\n\tp.set = function(props) {\r\n\t\tfor (var n in props) { this[n] = props[n]; }\r\n\t\treturn this;\r\n\t};\r\n\r\n\t/**\r\n\t * Returns a string representation of this object.\r\n\t * @method toString\r\n\t * @return {String} a string representation of the instance.\r\n\t **/\r\n\tp.toString = function() {\r\n\t\treturn \"[Event (type=\"+this.type+\")]\";\r\n\t};\r\n\r\n\tcreatejs.Event = Event;\r\n}());\r\n\r\n//##############################################################################\r\n// EventDispatcher.js\r\n//##############################################################################\r\n\r\nthis.createjs = this.createjs||{};\r\n\r\n(function() {\r\n\t\"use strict\";\r\n\r\n\r\n// constructor:\r\n\t/**\r\n\t * EventDispatcher provides methods for managing queues of event listeners and dispatching events.\r\n\t *\r\n\t * You can either extend EventDispatcher or mix its methods into an existing prototype or instance by using the\r\n\t * EventDispatcher {{#crossLink \"EventDispatcher/initialize\"}}{{/crossLink}} method.\r\n\t * \r\n\t * Together with the CreateJS Event class, EventDispatcher provides an extended event model that is based on the\r\n\t * DOM Level 2 event model, including addEventListener, removeEventListener, and dispatchEvent. It supports\r\n\t * bubbling / capture, preventDefault, stopPropagation, stopImmediatePropagation, and handleEvent.\r\n\t * \r\n\t * EventDispatcher also exposes a {{#crossLink \"EventDispatcher/on\"}}{{/crossLink}} method, which makes it easier\r\n\t * to create scoped listeners, listeners that only run once, and listeners with associated arbitrary data. The \r\n\t * {{#crossLink \"EventDispatcher/off\"}}{{/crossLink}} method is merely an alias to\r\n\t * {{#crossLink \"EventDispatcher/removeEventListener\"}}{{/crossLink}}.\r\n\t * \r\n\t * Another addition to the DOM Level 2 model is the {{#crossLink \"EventDispatcher/removeAllEventListeners\"}}{{/crossLink}}\r\n\t * method, which can be used to listeners for all events, or listeners for a specific event. The Event object also \r\n\t * includes a {{#crossLink \"Event/remove\"}}{{/crossLink}} method which removes the active listener.\r\n\t *\r\n\t * <h4>Example</h4>\r\n\t * Add EventDispatcher capabilities to the \"MyClass\" class.\r\n\t *\r\n\t *      EventDispatcher.initialize(MyClass.prototype);\r\n\t *\r\n\t * Add an event (see {{#crossLink \"EventDispatcher/addEventListener\"}}{{/crossLink}}).\r\n\t *\r\n\t *      instance.addEventListener(\"eventName\", handlerMethod);\r\n\t *      function handlerMethod(event) {\r\n\t *          console.log(event.target + \" Was Clicked\");\r\n\t *      }\r\n\t *\r\n\t * <b>Maintaining proper scope</b><br />\r\n\t * Scope (ie. \"this\") can be be a challenge with events. Using the {{#crossLink \"EventDispatcher/on\"}}{{/crossLink}}\r\n\t * method to subscribe to events simplifies this.\r\n\t *\r\n\t *      instance.addEventListener(\"click\", function(event) {\r\n\t *          console.log(instance == this); // false, scope is ambiguous.\r\n\t *      });\r\n\t *      \r\n\t *      instance.on(\"click\", function(event) {\r\n\t *          console.log(instance == this); // true, \"on\" uses dispatcher scope by default.\r\n\t *      });\r\n\t * \r\n\t * If you want to use addEventListener instead, you may want to use function.bind() or a similar proxy to manage\r\n\t * scope.\r\n\t *\r\n\t * <b>Browser support</b>\r\n\t * The event model in CreateJS can be used separately from the suite in any project, however the inheritance model\r\n\t * requires modern browsers (IE9+).\r\n\t *      \r\n\t *\r\n\t * @class EventDispatcher\r\n\t * @constructor\r\n\t **/\r\n\tfunction EventDispatcher() {\r\n\t\r\n\t\r\n\t// private properties:\r\n\t\t/**\r\n\t\t * @protected\r\n\t\t * @property _listeners\r\n\t\t * @type Object\r\n\t\t **/\r\n\t\tthis._listeners = null;\r\n\t\t\r\n\t\t/**\r\n\t\t * @protected\r\n\t\t * @property _captureListeners\r\n\t\t * @type Object\r\n\t\t **/\r\n\t\tthis._captureListeners = null;\r\n\t}\r\n\tvar p = EventDispatcher.prototype;\r\n\r\n\t/**\r\n\t * <strong>REMOVED</strong>. Removed in favor of using `MySuperClass_constructor`.\r\n\t * See {{#crossLink \"Utility Methods/extend\"}}{{/crossLink}} and {{#crossLink \"Utility Methods/promote\"}}{{/crossLink}}\r\n\t * for details.\r\n\t *\r\n\t * There is an inheritance tutorial distributed with EaselJS in /tutorials/Inheritance.\r\n\t *\r\n\t * @method initialize\r\n\t * @protected\r\n\t * @deprecated\r\n\t */\r\n\t// p.initialize = function() {}; // searchable for devs wondering where it is.\r\n\r\n\r\n// static public methods:\r\n\t/**\r\n\t * Static initializer to mix EventDispatcher methods into a target object or prototype.\r\n\t * \r\n\t * \t\tEventDispatcher.initialize(MyClass.prototype); // add to the prototype of the class\r\n\t * \t\tEventDispatcher.initialize(myObject); // add to a specific instance\r\n\t * \r\n\t * @method initialize\r\n\t * @static\r\n\t * @param {Object} target The target object to inject EventDispatcher methods into. This can be an instance or a\r\n\t * prototype.\r\n\t **/\r\n\tEventDispatcher.initialize = function(target) {\r\n\t\ttarget.addEventListener = p.addEventListener;\r\n\t\ttarget.on = p.on;\r\n\t\ttarget.removeEventListener = target.off =  p.removeEventListener;\r\n\t\ttarget.removeAllEventListeners = p.removeAllEventListeners;\r\n\t\ttarget.hasEventListener = p.hasEventListener;\r\n\t\ttarget.dispatchEvent = p.dispatchEvent;\r\n\t\ttarget._dispatchEvent = p._dispatchEvent;\r\n\t\ttarget.willTrigger = p.willTrigger;\r\n\t};\r\n\t\r\n\r\n// public methods:\r\n\t/**\r\n\t * Adds the specified event listener. Note that adding multiple listeners to the same function will result in\r\n\t * multiple callbacks getting fired.\r\n\t *\r\n\t * <h4>Example</h4>\r\n\t *\r\n\t *      displayObject.addEventListener(\"click\", handleClick);\r\n\t *      function handleClick(event) {\r\n\t *         // Click happened.\r\n\t *      }\r\n\t *\r\n\t * @method addEventListener\r\n\t * @param {String} type The string type of the event.\r\n\t * @param {Function | Object} listener An object with a handleEvent method, or a function that will be called when\r\n\t * the event is dispatched.\r\n\t * @param {Boolean} [useCapture] For events that bubble, indicates whether to listen for the event in the capture or bubbling/target phase.\r\n\t * @return {Function | Object} Returns the listener for chaining or assignment.\r\n\t **/\r\n\tp.addEventListener = function(type, listener, useCapture) {\r\n\t\tvar listeners;\r\n\t\tif (useCapture) {\r\n\t\t\tlisteners = this._captureListeners = this._captureListeners||{};\r\n\t\t} else {\r\n\t\t\tlisteners = this._listeners = this._listeners||{};\r\n\t\t}\r\n\t\tvar arr = listeners[type];\r\n\t\tif (arr) { this.removeEventListener(type, listener, useCapture); }\r\n\t\tarr = listeners[type]; // remove may have deleted the array\r\n\t\tif (!arr) { listeners[type] = [listener];  }\r\n\t\telse { arr.push(listener); }\r\n\t\treturn listener;\r\n\t};\r\n\t\r\n\t/**\r\n\t * A shortcut method for using addEventListener that makes it easier to specify an execution scope, have a listener\r\n\t * only run once, associate arbitrary data with the listener, and remove the listener.\r\n\t * \r\n\t * This method works by creating an anonymous wrapper function and subscribing it with addEventListener.\r\n\t * The wrapper function is returned for use with `removeEventListener` (or `off`).\r\n\t * \r\n\t * <b>IMPORTANT:</b> To remove a listener added with `on`, you must pass in the returned wrapper function as the listener, or use\r\n\t * {{#crossLink \"Event/remove\"}}{{/crossLink}}. Likewise, each time you call `on` a NEW wrapper function is subscribed, so multiple calls\r\n\t * to `on` with the same params will create multiple listeners.\r\n\t * \r\n\t * <h4>Example</h4>\r\n\t * \r\n\t * \t\tvar listener = myBtn.on(\"click\", handleClick, null, false, {count:3});\r\n\t * \t\tfunction handleClick(evt, data) {\r\n\t * \t\t\tdata.count -= 1;\r\n\t * \t\t\tconsole.log(this == myBtn); // true - scope defaults to the dispatcher\r\n\t * \t\t\tif (data.count == 0) {\r\n\t * \t\t\t\talert(\"clicked 3 times!\");\r\n\t * \t\t\t\tmyBtn.off(\"click\", listener);\r\n\t * \t\t\t\t// alternately: evt.remove();\r\n\t * \t\t\t}\r\n\t * \t\t}\r\n\t * \r\n\t * @method on\r\n\t * @param {String} type The string type of the event.\r\n\t * @param {Function | Object} listener An object with a handleEvent method, or a function that will be called when\r\n\t * the event is dispatched.\r\n\t * @param {Object} [scope] The scope to execute the listener in. Defaults to the dispatcher/currentTarget for function listeners, and to the listener itself for object listeners (ie. using handleEvent).\r\n\t * @param {Boolean} [once=false] If true, the listener will remove itself after the first time it is triggered.\r\n\t * @param {*} [data] Arbitrary data that will be included as the second parameter when the listener is called.\r\n\t * @param {Boolean} [useCapture=false] For events that bubble, indicates whether to listen for the event in the capture or bubbling/target phase.\r\n\t * @return {Function} Returns the anonymous function that was created and assigned as the listener. This is needed to remove the listener later using .removeEventListener.\r\n\t **/\r\n\tp.on = function(type, listener, scope, once, data, useCapture) {\r\n\t\tif (listener.handleEvent) {\r\n\t\t\tscope = scope||listener;\r\n\t\t\tlistener = listener.handleEvent;\r\n\t\t}\r\n\t\tscope = scope||this;\r\n\t\treturn this.addEventListener(type, function(evt) {\r\n\t\t\t\tlistener.call(scope, evt, data);\r\n\t\t\t\tonce&&evt.remove();\r\n\t\t\t}, useCapture);\r\n\t};\r\n\r\n\t/**\r\n\t * Removes the specified event listener.\r\n\t *\r\n\t * <b>Important Note:</b> that you must pass the exact function reference used when the event was added. If a proxy\r\n\t * function, or function closure is used as the callback, the proxy/closure reference must be used - a new proxy or\r\n\t * closure will not work.\r\n\t *\r\n\t * <h4>Example</h4>\r\n\t *\r\n\t *      displayObject.removeEventListener(\"click\", handleClick);\r\n\t *\r\n\t * @method removeEventListener\r\n\t * @param {String} type The string type of the event.\r\n\t * @param {Function | Object} listener The listener function or object.\r\n\t * @param {Boolean} [useCapture] For events that bubble, indicates whether to listen for the event in the capture or bubbling/target phase.\r\n\t **/\r\n\tp.removeEventListener = function(type, listener, useCapture) {\r\n\t\tvar listeners = useCapture ? this._captureListeners : this._listeners;\r\n\t\tif (!listeners) { return; }\r\n\t\tvar arr = listeners[type];\r\n\t\tif (!arr) { return; }\r\n\t\tfor (var i=0,l=arr.length; i<l; i++) {\r\n\t\t\tif (arr[i] == listener) {\r\n\t\t\t\tif (l==1) { delete(listeners[type]); } // allows for faster checks.\r\n\t\t\t\telse { arr.splice(i,1); }\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\t\r\n\t/**\r\n\t * A shortcut to the removeEventListener method, with the same parameters and return value. This is a companion to the\r\n\t * .on method.\r\n\t * \r\n\t * <b>IMPORTANT:</b> To remove a listener added with `on`, you must pass in the returned wrapper function as the listener. See \r\n\t * {{#crossLink \"EventDispatcher/on\"}}{{/crossLink}} for an example.\r\n\t *\r\n\t * @method off\r\n\t * @param {String} type The string type of the event.\r\n\t * @param {Function | Object} listener The listener function or object.\r\n\t * @param {Boolean} [useCapture] For events that bubble, indicates whether to listen for the event in the capture or bubbling/target phase.\r\n\t **/\r\n\tp.off = p.removeEventListener;\r\n\r\n\t/**\r\n\t * Removes all listeners for the specified type, or all listeners of all types.\r\n\t *\r\n\t * <h4>Example</h4>\r\n\t *\r\n\t *      // Remove all listeners\r\n\t *      displayObject.removeAllEventListeners();\r\n\t *\r\n\t *      // Remove all click listeners\r\n\t *      displayObject.removeAllEventListeners(\"click\");\r\n\t *\r\n\t * @method removeAllEventListeners\r\n\t * @param {String} [type] The string type of the event. If omitted, all listeners for all types will be removed.\r\n\t **/\r\n\tp.removeAllEventListeners = function(type) {\r\n\t\tif (!type) { this._listeners = this._captureListeners = null; }\r\n\t\telse {\r\n\t\t\tif (this._listeners) { delete(this._listeners[type]); }\r\n\t\t\tif (this._captureListeners) { delete(this._captureListeners[type]); }\r\n\t\t}\r\n\t};\r\n\r\n\t/**\r\n\t * Dispatches the specified event to all listeners.\r\n\t *\r\n\t * <h4>Example</h4>\r\n\t *\r\n\t *      // Use a string event\r\n\t *      this.dispatchEvent(\"complete\");\r\n\t *\r\n\t *      // Use an Event instance\r\n\t *      var event = new createjs.Event(\"progress\");\r\n\t *      this.dispatchEvent(event);\r\n\t *\r\n\t * @method dispatchEvent\r\n\t * @param {Object | String | Event} eventObj An object with a \"type\" property, or a string type.\r\n\t * While a generic object will work, it is recommended to use a CreateJS Event instance. If a string is used,\r\n\t * dispatchEvent will construct an Event instance if necessary with the specified type. This latter approach can\r\n\t * be used to avoid event object instantiation for non-bubbling events that may not have any listeners.\r\n\t * @param {Boolean} [bubbles] Specifies the `bubbles` value when a string was passed to eventObj.\r\n\t * @param {Boolean} [cancelable] Specifies the `cancelable` value when a string was passed to eventObj.\r\n\t * @return {Boolean} Returns false if `preventDefault()` was called on a cancelable event, true otherwise.\r\n\t **/\r\n\tp.dispatchEvent = function(eventObj, bubbles, cancelable) {\r\n\t\tif (typeof eventObj == \"string\") {\r\n\t\t\t// skip everything if there's no listeners and it doesn't bubble:\r\n\t\t\tvar listeners = this._listeners;\r\n\t\t\tif (!bubbles && (!listeners || !listeners[eventObj])) { return true; }\r\n\t\t\teventObj = new createjs.Event(eventObj, bubbles, cancelable);\r\n\t\t} else if (eventObj.target && eventObj.clone) {\r\n\t\t\t// redispatching an active event object, so clone it:\r\n\t\t\teventObj = eventObj.clone();\r\n\t\t}\r\n\t\t\r\n\t\t// TODO: it would be nice to eliminate this. Maybe in favour of evtObj instanceof Event? Or !!evtObj.createEvent\r\n\t\ttry { eventObj.target = this; } catch (e) {} // try/catch allows redispatching of native events\r\n\r\n\t\tif (!eventObj.bubbles || !this.parent) {\r\n\t\t\tthis._dispatchEvent(eventObj, 2);\r\n\t\t} else {\r\n\t\t\tvar top=this, list=[top];\r\n\t\t\twhile (top.parent) { list.push(top = top.parent); }\r\n\t\t\tvar i, l=list.length;\r\n\r\n\t\t\t// capture & atTarget\r\n\t\t\tfor (i=l-1; i>=0 && !eventObj.propagationStopped; i--) {\r\n\t\t\t\tlist[i]._dispatchEvent(eventObj, 1+(i==0));\r\n\t\t\t}\r\n\t\t\t// bubbling\r\n\t\t\tfor (i=1; i<l && !eventObj.propagationStopped; i++) {\r\n\t\t\t\tlist[i]._dispatchEvent(eventObj, 3);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn !eventObj.defaultPrevented;\r\n\t};\r\n\r\n\t/**\r\n\t * Indicates whether there is at least one listener for the specified event type.\r\n\t * @method hasEventListener\r\n\t * @param {String} type The string type of the event.\r\n\t * @return {Boolean} Returns true if there is at least one listener for the specified event.\r\n\t **/\r\n\tp.hasEventListener = function(type) {\r\n\t\tvar listeners = this._listeners, captureListeners = this._captureListeners;\r\n\t\treturn !!((listeners && listeners[type]) || (captureListeners && captureListeners[type]));\r\n\t};\r\n\t\r\n\t/**\r\n\t * Indicates whether there is at least one listener for the specified event type on this object or any of its\r\n\t * ancestors (parent, parent's parent, etc). A return value of true indicates that if a bubbling event of the\r\n\t * specified type is dispatched from this object, it will trigger at least one listener.\r\n\t * \r\n\t * This is similar to {{#crossLink \"EventDispatcher/hasEventListener\"}}{{/crossLink}}, but it searches the entire\r\n\t * event flow for a listener, not just this object.\r\n\t * @method willTrigger\r\n\t * @param {String} type The string type of the event.\r\n\t * @return {Boolean} Returns `true` if there is at least one listener for the specified event.\r\n\t **/\r\n\tp.willTrigger = function(type) {\r\n\t\tvar o = this;\r\n\t\twhile (o) {\r\n\t\t\tif (o.hasEventListener(type)) { return true; }\r\n\t\t\to = o.parent;\r\n\t\t}\r\n\t\treturn false;\r\n\t};\r\n\r\n\t/**\r\n\t * @method toString\r\n\t * @return {String} a string representation of the instance.\r\n\t **/\r\n\tp.toString = function() {\r\n\t\treturn \"[EventDispatcher]\";\r\n\t};\r\n\r\n\r\n// private methods:\r\n\t/**\r\n\t * @method _dispatchEvent\r\n\t * @param {Object | String | Event} eventObj\r\n\t * @param {Object} eventPhase\r\n\t * @protected\r\n\t **/\r\n\tp._dispatchEvent = function(eventObj, eventPhase) {\r\n\t\tvar l, listeners = (eventPhase==1) ? this._captureListeners : this._listeners;\r\n\t\tif (eventObj && listeners) {\r\n\t\t\tvar arr = listeners[eventObj.type];\r\n\t\t\tif (!arr||!(l=arr.length)) { return; }\r\n\t\t\ttry { eventObj.currentTarget = this; } catch (e) {}\r\n\t\t\ttry { eventObj.eventPhase = eventPhase; } catch (e) {}\r\n\t\t\teventObj.removed = false;\r\n\t\t\t\r\n\t\t\tarr = arr.slice(); // to avoid issues with items being removed or added during the dispatch\r\n\t\t\tfor (var i=0; i<l && !eventObj.immediatePropagationStopped; i++) {\r\n\t\t\t\tvar o = arr[i];\r\n\t\t\t\tif (o.handleEvent) { o.handleEvent(eventObj); }\r\n\t\t\t\telse { o(eventObj); }\r\n\t\t\t\tif (eventObj.removed) {\r\n\t\t\t\t\tthis.off(eventObj.type, o, eventPhase==1);\r\n\t\t\t\t\teventObj.removed = false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\r\n\tcreatejs.EventDispatcher = EventDispatcher;\r\n}());\r\n\r\n//##############################################################################\r\n// Ticker.js\r\n//##############################################################################\r\n\r\nthis.createjs = this.createjs||{};\r\n\r\n(function() {\r\n\t\"use strict\";\r\n\r\n\r\n// constructor:\r\n\t/**\r\n\t * The Ticker provides a centralized tick or heartbeat broadcast at a set interval. Listeners can subscribe to the tick\r\n\t * event to be notified when a set time interval has elapsed.\r\n\t *\r\n\t * Note that the interval that the tick event is called is a target interval, and may be broadcast at a slower interval\r\n\t * when under high CPU load. The Ticker class uses a static interface (ex. `Ticker.framerate = 30;`) and\r\n\t * can not be instantiated.\r\n\t *\r\n\t * <h4>Example</h4>\r\n\t *\r\n\t *      createjs.Ticker.addEventListener(\"tick\", handleTick);\r\n\t *      function handleTick(event) {\r\n\t *          // Actions carried out each tick (aka frame)\r\n\t *          if (!event.paused) {\r\n\t *              // Actions carried out when the Ticker is not paused.\r\n\t *          }\r\n\t *      }\r\n\t *\r\n\t * @class Ticker\r\n\t * @uses EventDispatcher\r\n\t * @static\r\n\t **/\r\n\tfunction Ticker() {\r\n\t\tthrow \"Ticker cannot be instantiated.\";\r\n\t}\r\n\r\n\r\n// constants:\r\n\t/**\r\n\t * In this mode, Ticker uses the requestAnimationFrame API, but attempts to synch the ticks to target framerate. It\r\n\t * uses a simple heuristic that compares the time of the RAF return to the target time for the current frame and\r\n\t * dispatches the tick when the time is within a certain threshold.\r\n\t *\r\n\t * This mode has a higher variance for time between frames than {{#crossLink \"Ticker/TIMEOUT:property\"}}{{/crossLink}},\r\n\t * but does not require that content be time based as with {{#crossLink \"Ticker/RAF:property\"}}{{/crossLink}} while\r\n\t * gaining the benefits of that API (screen synch, background throttling).\r\n\t *\r\n\t * Variance is usually lowest for framerates that are a divisor of the RAF frequency. This is usually 60, so\r\n\t * framerates of 10, 12, 15, 20, and 30 work well.\r\n\t *\r\n\t * Falls back to {{#crossLink \"Ticker/TIMEOUT:property\"}}{{/crossLink}} if the requestAnimationFrame API is not\r\n\t * supported.\r\n\t * @property RAF_SYNCHED\r\n\t * @static\r\n\t * @type {String}\r\n\t * @default \"synched\"\r\n\t * @readonly\r\n\t **/\r\n\tTicker.RAF_SYNCHED = \"synched\";\r\n\r\n\t/**\r\n\t * In this mode, Ticker passes through the requestAnimationFrame heartbeat, ignoring the target framerate completely.\r\n\t * Because requestAnimationFrame frequency is not deterministic, any content using this mode should be time based.\r\n\t * You can leverage {{#crossLink \"Ticker/getTime\"}}{{/crossLink}} and the {{#crossLink \"Ticker/tick:event\"}}{{/crossLink}}\r\n\t * event object's \"delta\" properties to make this easier.\r\n\t *\r\n\t * Falls back on {{#crossLink \"Ticker/TIMEOUT:property\"}}{{/crossLink}} if the requestAnimationFrame API is not\r\n\t * supported.\r\n\t * @property RAF\r\n\t * @static\r\n\t * @type {String}\r\n\t * @default \"raf\"\r\n\t * @readonly\r\n\t **/\r\n\tTicker.RAF = \"raf\";\r\n\r\n\t/**\r\n\t * In this mode, Ticker uses the setTimeout API. This provides predictable, adaptive frame timing, but does not\r\n\t * provide the benefits of requestAnimationFrame (screen synch, background throttling).\r\n\t * @property TIMEOUT\r\n\t * @static\r\n\t * @type {String}\r\n\t * @default \"timeout\"\r\n\t * @readonly\r\n\t **/\r\n\tTicker.TIMEOUT = \"timeout\";\r\n\r\n\r\n// static events:\r\n\t/**\r\n\t * Dispatched each tick. The event will be dispatched to each listener even when the Ticker has been paused using\r\n\t * {{#crossLink \"Ticker/setPaused\"}}{{/crossLink}}.\r\n\t *\r\n\t * <h4>Example</h4>\r\n\t *\r\n\t *      createjs.Ticker.addEventListener(\"tick\", handleTick);\r\n\t *      function handleTick(event) {\r\n\t *          console.log(\"Paused:\", event.paused, event.delta);\r\n\t *      }\r\n\t *\r\n\t * @event tick\r\n\t * @param {Object} target The object that dispatched the event.\r\n\t * @param {String} type The event type.\r\n\t * @param {Boolean} paused Indicates whether the ticker is currently paused.\r\n\t * @param {Number} delta The time elapsed in ms since the last tick.\r\n\t * @param {Number} time The total time in ms since Ticker was initialized.\r\n\t * @param {Number} runTime The total time in ms that Ticker was not paused since it was initialized. For example,\r\n\t * \tyou could determine the amount of time that the Ticker has been paused since initialization with `time-runTime`.\r\n\t * @since 0.6.0\r\n\t */\r\n\r\n\r\n// public static properties:\r\n\t/**\r\n\t * Deprecated in favour of {{#crossLink \"Ticker/timingMode\"}}{{/crossLink}}, and will be removed in a future version. If true, timingMode will\r\n\t * use {{#crossLink \"Ticker/RAF_SYNCHED\"}}{{/crossLink}} by default.\r\n\t * @deprecated Deprecated in favour of {{#crossLink \"Ticker/timingMode\"}}{{/crossLink}}.\r\n\t * @property useRAF\r\n\t * @static\r\n\t * @type {Boolean}\r\n\t * @default false\r\n\t **/\r\n\tTicker.useRAF = false;\r\n\r\n\t/**\r\n\t * Specifies the timing api (setTimeout or requestAnimationFrame) and mode to use. See\r\n\t * {{#crossLink \"Ticker/TIMEOUT\"}}{{/crossLink}}, {{#crossLink \"Ticker/RAF\"}}{{/crossLink}}, and\r\n\t * {{#crossLink \"Ticker/RAF_SYNCHED\"}}{{/crossLink}} for mode details.\r\n\t * @property timingMode\r\n\t * @static\r\n\t * @type {String}\r\n\t * @default Ticker.TIMEOUT\r\n\t **/\r\n\tTicker.timingMode = null;\r\n\r\n\t/**\r\n\t * Specifies a maximum value for the delta property in the tick event object. This is useful when building time\r\n\t * based animations and systems to prevent issues caused by large time gaps caused by background tabs, system sleep,\r\n\t * alert dialogs, or other blocking routines. Double the expected frame duration is often an effective value\r\n\t * (ex. maxDelta=50 when running at 40fps).\r\n\t * \r\n\t * This does not impact any other values (ex. time, runTime, etc), so you may experience issues if you enable maxDelta\r\n\t * when using both delta and other values.\r\n\t * \r\n\t * If 0, there is no maximum.\r\n\t * @property maxDelta\r\n\t * @static\r\n\t * @type {number}\r\n\t * @default 0\r\n\t */\r\n\tTicker.maxDelta = 0;\r\n\t\r\n\t/**\r\n\t * When the ticker is paused, all listeners will still receive a tick event, but the <code>paused</code> property\r\n\t * of the event will be `true`. Also, while paused the `runTime` will not increase. See {{#crossLink \"Ticker/tick:event\"}}{{/crossLink}},\r\n\t * {{#crossLink \"Ticker/getTime\"}}{{/crossLink}}, and {{#crossLink \"Ticker/getEventTime\"}}{{/crossLink}} for more\r\n\t * info.\r\n\t *\r\n\t * <h4>Example</h4>\r\n\t *\r\n\t *      createjs.Ticker.addEventListener(\"tick\", handleTick);\r\n\t *      createjs.Ticker.paused = true;\r\n\t *      function handleTick(event) {\r\n\t *          console.log(event.paused,\r\n\t *          \tcreatejs.Ticker.getTime(false),\r\n\t *          \tcreatejs.Ticker.getTime(true));\r\n\t *      }\r\n\t *\r\n\t * @property paused\r\n\t * @static\r\n\t * @type {Boolean}\r\n\t * @default false\r\n\t **/\r\n\tTicker.paused = false;\r\n\r\n\r\n// mix-ins:\r\n\t// EventDispatcher methods:\r\n\tTicker.removeEventListener = null;\r\n\tTicker.removeAllEventListeners = null;\r\n\tTicker.dispatchEvent = null;\r\n\tTicker.hasEventListener = null;\r\n\tTicker._listeners = null;\r\n\tcreatejs.EventDispatcher.initialize(Ticker); // inject EventDispatcher methods.\r\n\tTicker._addEventListener = Ticker.addEventListener;\r\n\tTicker.addEventListener = function() {\r\n\t\t!Ticker._inited&&Ticker.init();\r\n\t\treturn Ticker._addEventListener.apply(Ticker, arguments);\r\n\t};\r\n\r\n\r\n// private static properties:\r\n\t/**\r\n\t * @property _inited\r\n\t * @static\r\n\t * @type {Boolean}\r\n\t * @protected\r\n\t **/\r\n\tTicker._inited = false;\r\n\r\n\t/**\r\n\t * @property _startTime\r\n\t * @static\r\n\t * @type {Number}\r\n\t * @protected\r\n\t **/\r\n\tTicker._startTime = 0;\r\n\r\n\t/**\r\n\t * @property _pausedTime\r\n\t * @static\r\n\t * @type {Number}\r\n\t * @protected\r\n\t **/\r\n\tTicker._pausedTime=0;\r\n\r\n\t/**\r\n\t * The number of ticks that have passed\r\n\t * @property _ticks\r\n\t * @static\r\n\t * @type {Number}\r\n\t * @protected\r\n\t **/\r\n\tTicker._ticks = 0;\r\n\r\n\t/**\r\n\t * The number of ticks that have passed while Ticker has been paused\r\n\t * @property _pausedTicks\r\n\t * @static\r\n\t * @type {Number}\r\n\t * @protected\r\n\t **/\r\n\tTicker._pausedTicks = 0;\r\n\r\n\t/**\r\n\t * @property _interval\r\n\t * @static\r\n\t * @type {Number}\r\n\t * @protected\r\n\t **/\r\n\tTicker._interval = 50;\r\n\r\n\t/**\r\n\t * @property _lastTime\r\n\t * @static\r\n\t * @type {Number}\r\n\t * @protected\r\n\t **/\r\n\tTicker._lastTime = 0;\r\n\r\n\t/**\r\n\t * @property _times\r\n\t * @static\r\n\t * @type {Array}\r\n\t * @protected\r\n\t **/\r\n\tTicker._times = null;\r\n\r\n\t/**\r\n\t * @property _tickTimes\r\n\t * @static\r\n\t * @type {Array}\r\n\t * @protected\r\n\t **/\r\n\tTicker._tickTimes = null;\r\n\r\n\t/**\r\n\t * Stores the timeout or requestAnimationFrame id.\r\n\t * @property _timerId\r\n\t * @static\r\n\t * @type {Number}\r\n\t * @protected\r\n\t **/\r\n\tTicker._timerId = null;\r\n\t\r\n\t/**\r\n\t * True if currently using requestAnimationFrame, false if using setTimeout. This may be different than timingMode\r\n\t * if that property changed and a tick hasn't fired.\r\n\t * @property _raf\r\n\t * @static\r\n\t * @type {Boolean}\r\n\t * @protected\r\n\t **/\r\n\tTicker._raf = true;\r\n\t\r\n\r\n// static getter / setters:\r\n\t/**\r\n\t * Use the {{#crossLink \"Ticker/interval:property\"}}{{/crossLink}} property instead.\r\n\t * @method setInterval\r\n\t * @static\r\n\t * @param {Number} interval\r\n\t * @deprecated\r\n\t **/\r\n\tTicker.setInterval = function(interval) {\r\n\t\tTicker._interval = interval;\r\n\t\tif (!Ticker._inited) { return; }\r\n\t\tTicker._setupTick();\r\n\t};\r\n\r\n\t/**\r\n\t * Use the {{#crossLink \"Ticker/interval:property\"}}{{/crossLink}} property instead.\r\n\t * @method getInterval\r\n\t * @static\r\n\t * @return {Number}\r\n\t * @deprecated\r\n\t **/\r\n\tTicker.getInterval = function() {\r\n\t\treturn Ticker._interval;\r\n\t};\r\n\r\n\t/**\r\n\t * Use the {{#crossLink \"Ticker/framerate:property\"}}{{/crossLink}} property instead.\r\n\t * @method setFPS\r\n\t * @static\r\n\t * @param {Number} value\r\n\t * @deprecated\r\n\t **/\r\n\tTicker.setFPS = function(value) {\r\n\t\tTicker.setInterval(1000/value);\r\n\t};\r\n\r\n\t/**\r\n\t * Use the {{#crossLink \"Ticker/framerate:property\"}}{{/crossLink}} property instead.\r\n\t * @method getFPS\r\n\t * @static\r\n\t * @return {Number}\r\n\t * @deprecated\r\n\t **/\r\n\tTicker.getFPS = function() {\r\n\t\treturn 1000/Ticker._interval;\r\n\t};\r\n\r\n\t/**\r\n\t * Indicates the target time (in milliseconds) between ticks. Default is 50 (20 FPS).\r\n\t * Note that actual time between ticks may be more than specified depending on CPU load.\r\n\t * This property is ignored if the ticker is using the `RAF` timing mode.\r\n\t * @property interval\r\n\t * @static\r\n\t * @type {Number}\r\n\t **/\r\n\t \r\n\t/**\r\n\t * Indicates the target frame rate in frames per second (FPS). Effectively just a shortcut to `interval`, where\r\n\t * `framerate == 1000/interval`.\r\n\t * @property framerate\r\n\t * @static\r\n\t * @type {Number}\r\n\t **/\r\n\ttry {\r\n\t\tObject.defineProperties(Ticker, {\r\n\t\t\tinterval: { get: Ticker.getInterval, set: Ticker.setInterval },\r\n\t\t\tframerate: { get: Ticker.getFPS, set: Ticker.setFPS }\r\n\t\t});\r\n\t} catch (e) { console.log(e); }\r\n\r\n\r\n// public static methods:\r\n\t/**\r\n\t * Starts the tick. This is called automatically when the first listener is added.\r\n\t * @method init\r\n\t * @static\r\n\t **/\r\n\tTicker.init = function() {\r\n\t\tif (Ticker._inited) { return; }\r\n\t\tTicker._inited = true;\r\n\t\tTicker._times = [];\r\n\t\tTicker._tickTimes = [];\r\n\t\tTicker._startTime = Ticker._getTime();\r\n\t\tTicker._times.push(Ticker._lastTime = 0);\r\n\t\tTicker.interval = Ticker._interval;\r\n\t};\r\n\t\r\n\t/**\r\n\t * Stops the Ticker and removes all listeners. Use init() to restart the Ticker.\r\n\t * @method reset\r\n\t * @static\r\n\t **/\r\n\tTicker.reset = function() {\r\n\t\tif (Ticker._raf) {\r\n\t\t\tvar f = window.cancelAnimationFrame || window.webkitCancelAnimationFrame || window.mozCancelAnimationFrame || window.oCancelAnimationFrame || window.msCancelAnimationFrame;\r\n\t\t\tf&&f(Ticker._timerId);\r\n\t\t} else {\r\n\t\t\tclearTimeout(Ticker._timerId);\r\n\t\t}\r\n\t\tTicker.removeAllEventListeners(\"tick\");\r\n\t\tTicker._timerId = Ticker._times = Ticker._tickTimes = null;\r\n\t\tTicker._startTime = Ticker._lastTime = Ticker._ticks = 0;\r\n\t\tTicker._inited = false;\r\n\t};\r\n\r\n\t/**\r\n\t * Returns the average time spent within a tick. This can vary significantly from the value provided by getMeasuredFPS\r\n\t * because it only measures the time spent within the tick execution stack. \r\n\t * \r\n\t * Example 1: With a target FPS of 20, getMeasuredFPS() returns 20fps, which indicates an average of 50ms between \r\n\t * the end of one tick and the end of the next. However, getMeasuredTickTime() returns 15ms. This indicates that \r\n\t * there may be up to 35ms of \"idle\" time between the end of one tick and the start of the next.\r\n\t *\r\n\t * Example 2: With a target FPS of 30, getFPS() returns 10fps, which indicates an average of 100ms between the end of\r\n\t * one tick and the end of the next. However, getMeasuredTickTime() returns 20ms. This would indicate that something\r\n\t * other than the tick is using ~80ms (another script, DOM rendering, etc).\r\n\t * @method getMeasuredTickTime\r\n\t * @static\r\n\t * @param {Number} [ticks] The number of previous ticks over which to measure the average time spent in a tick.\r\n\t * Defaults to the number of ticks per second. To get only the last tick's time, pass in 1.\r\n\t * @return {Number} The average time spent in a tick in milliseconds.\r\n\t **/\r\n\tTicker.getMeasuredTickTime = function(ticks) {\r\n\t\tvar ttl=0, times=Ticker._tickTimes;\r\n\t\tif (!times || times.length < 1) { return -1; }\r\n\r\n\t\t// by default, calculate average for the past ~1 second:\r\n\t\tticks = Math.min(times.length, ticks||(Ticker.getFPS()|0));\r\n\t\tfor (var i=0; i<ticks; i++) { ttl += times[i]; }\r\n\t\treturn ttl/ticks;\r\n\t};\r\n\r\n\t/**\r\n\t * Returns the actual frames / ticks per second.\r\n\t * @method getMeasuredFPS\r\n\t * @static\r\n\t * @param {Number} [ticks] The number of previous ticks over which to measure the actual frames / ticks per second.\r\n\t * Defaults to the number of ticks per second.\r\n\t * @return {Number} The actual frames / ticks per second. Depending on performance, this may differ\r\n\t * from the target frames per second.\r\n\t **/\r\n\tTicker.getMeasuredFPS = function(ticks) {\r\n\t\tvar times = Ticker._times;\r\n\t\tif (!times || times.length < 2) { return -1; }\r\n\r\n\t\t// by default, calculate fps for the past ~1 second:\r\n\t\tticks = Math.min(times.length-1, ticks||(Ticker.getFPS()|0));\r\n\t\treturn 1000/((times[0]-times[ticks])/ticks);\r\n\t};\r\n\r\n\t/**\r\n\t * Use the {{#crossLink \"Ticker/paused:property\"}}{{/crossLink}} property instead.\r\n\t * @method setPaused\r\n\t * @static\r\n\t * @param {Boolean} value\r\n\t * @deprecated\r\n\t **/\r\n\tTicker.setPaused = function(value) {\r\n\t\t// TODO: deprecated.\r\n\t\tTicker.paused = value;\r\n\t};\r\n\r\n\t/**\r\n\t * Use the {{#crossLink \"Ticker/paused:property\"}}{{/crossLink}} property instead.\r\n\t * @method getPaused\r\n\t * @static\r\n\t * @return {Boolean}\r\n\t * @deprecated\r\n\t **/\r\n\tTicker.getPaused = function() {\r\n\t\t// TODO: deprecated.\r\n\t\treturn Ticker.paused;\r\n\t};\r\n\r\n\t/**\r\n\t * Returns the number of milliseconds that have elapsed since Ticker was initialized via {{#crossLink \"Ticker/init\"}}.\r\n\t * Returns -1 if Ticker has not been initialized. For example, you could use\r\n\t * this in a time synchronized animation to determine the exact amount of time that has elapsed.\r\n\t * @method getTime\r\n\t * @static\r\n\t * @param {Boolean} [runTime=false] If true only time elapsed while Ticker was not paused will be returned.\r\n\t * If false, the value returned will be total time elapsed since the first tick event listener was added.\r\n\t * @return {Number} Number of milliseconds that have elapsed since Ticker was initialized or -1.\r\n\t **/\r\n\tTicker.getTime = function(runTime) {\r\n\t\treturn Ticker._startTime ? Ticker._getTime() - (runTime ? Ticker._pausedTime : 0) : -1;\r\n\t};\r\n\r\n\t/**\r\n\t * Similar to the {{#crossLink \"Ticker/getTime\"}}{{/crossLink}} method, but returns the time on the most recent {{#crossLink \"Ticker/tick:event\"}}{{/crossLink}}\r\n\t * event object.\r\n\t * @method getEventTime\r\n\t * @static\r\n\t * @param runTime {Boolean} [runTime=false] If true, the runTime property will be returned instead of time.\r\n\t * @returns {number} The time or runTime property from the most recent tick event or -1.\r\n\t */\r\n\tTicker.getEventTime = function(runTime) {\r\n\t\treturn Ticker._startTime ? (Ticker._lastTime || Ticker._startTime) - (runTime ? Ticker._pausedTime : 0) : -1;\r\n\t};\r\n\t\r\n\t/**\r\n\t * Returns the number of ticks that have been broadcast by Ticker.\r\n\t * @method getTicks\r\n\t * @static\r\n\t * @param {Boolean} pauseable Indicates whether to include ticks that would have been broadcast\r\n\t * while Ticker was paused. If true only tick events broadcast while Ticker is not paused will be returned.\r\n\t * If false, tick events that would have been broadcast while Ticker was paused will be included in the return\r\n\t * value. The default value is false.\r\n\t * @return {Number} of ticks that have been broadcast.\r\n\t **/\r\n\tTicker.getTicks = function(pauseable) {\r\n\t\treturn  Ticker._ticks - (pauseable ? Ticker._pausedTicks : 0);\r\n\t};\r\n\r\n\r\n// private static methods:\r\n\t/**\r\n\t * @method _handleSynch\r\n\t * @static\r\n\t * @protected\r\n\t **/\r\n\tTicker._handleSynch = function() {\r\n\t\tTicker._timerId = null;\r\n\t\tTicker._setupTick();\r\n\r\n\t\t// run if enough time has elapsed, with a little bit of flexibility to be early:\r\n\t\tif (Ticker._getTime() - Ticker._lastTime >= (Ticker._interval-1)*0.97) {\r\n\t\t\tTicker._tick();\r\n\t\t}\r\n\t};\r\n\r\n\t/**\r\n\t * @method _handleRAF\r\n\t * @static\r\n\t * @protected\r\n\t **/\r\n\tTicker._handleRAF = function() {\r\n\t\tTicker._timerId = null;\r\n\t\tTicker._setupTick();\r\n\t\tTicker._tick();\r\n\t};\r\n\r\n\t/**\r\n\t * @method _handleTimeout\r\n\t * @static\r\n\t * @protected\r\n\t **/\r\n\tTicker._handleTimeout = function() {\r\n\t\tTicker._timerId = null;\r\n\t\tTicker._setupTick();\r\n\t\tTicker._tick();\r\n\t};\r\n\r\n\t/**\r\n\t * @method _setupTick\r\n\t * @static\r\n\t * @protected\r\n\t **/\r\n\tTicker._setupTick = function() {\r\n\t\tif (Ticker._timerId != null) { return; } // avoid duplicates\r\n\r\n\t\tvar mode = Ticker.timingMode||(Ticker.useRAF&&Ticker.RAF_SYNCHED);\r\n\t\tif (mode == Ticker.RAF_SYNCHED || mode == Ticker.RAF) {\r\n\t\t\tvar f = window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || window.oRequestAnimationFrame || window.msRequestAnimationFrame;\r\n\t\t\tif (f) {\r\n\t\t\t\tTicker._timerId = f(mode == Ticker.RAF ? Ticker._handleRAF : Ticker._handleSynch);\r\n\t\t\t\tTicker._raf = true;\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t}\r\n\t\tTicker._raf = false;\r\n\t\tTicker._timerId = setTimeout(Ticker._handleTimeout, Ticker._interval);\r\n\t};\r\n\r\n\t/**\r\n\t * @method _tick\r\n\t * @static\r\n\t * @protected\r\n\t **/\r\n\tTicker._tick = function() {\r\n\t\tvar paused = Ticker.paused;\r\n\t\tvar time = Ticker._getTime();\r\n\t\tvar elapsedTime = time-Ticker._lastTime;\r\n\t\tTicker._lastTime = time;\r\n\t\tTicker._ticks++;\r\n\t\t\r\n\t\tif (paused) {\r\n\t\t\tTicker._pausedTicks++;\r\n\t\t\tTicker._pausedTime += elapsedTime;\r\n\t\t}\r\n\t\t\r\n\t\tif (Ticker.hasEventListener(\"tick\")) {\r\n\t\t\tvar event = new createjs.Event(\"tick\");\r\n\t\t\tvar maxDelta = Ticker.maxDelta;\r\n\t\t\tevent.delta = (maxDelta && elapsedTime > maxDelta) ? maxDelta : elapsedTime;\r\n\t\t\tevent.paused = paused;\r\n\t\t\tevent.time = time;\r\n\t\t\tevent.runTime = time-Ticker._pausedTime;\r\n\t\t\tTicker.dispatchEvent(event);\r\n\t\t}\r\n\t\t\r\n\t\tTicker._tickTimes.unshift(Ticker._getTime()-time);\r\n\t\twhile (Ticker._tickTimes.length > 100) { Ticker._tickTimes.pop(); }\r\n\r\n\t\tTicker._times.unshift(time);\r\n\t\twhile (Ticker._times.length > 100) { Ticker._times.pop(); }\r\n\t};\r\n\r\n\t/**\r\n\t * @method _getTime\r\n\t * @static\r\n\t * @protected\r\n\t **/\r\n\tvar now = window.performance && (performance.now || performance.mozNow || performance.msNow || performance.oNow || performance.webkitNow);\r\n\tTicker._getTime = function() {\r\n\t\treturn ((now&&now.call(performance))||(new Date().getTime())) - Ticker._startTime;\r\n\t};\r\n\r\n\r\n\tcreatejs.Ticker = Ticker;\r\n}());\r\n\r\n//##############################################################################\r\n// UID.js\r\n//##############################################################################\r\n\r\nthis.createjs = this.createjs||{};\r\n\r\n(function() {\r\n\t\"use strict\";\r\n\r\n\r\n// constructor:\r\n\t/**\r\n\t * Global utility for generating sequential unique ID numbers. The UID class uses a static interface (ex. <code>UID.get()</code>)\r\n\t * and should not be instantiated.\r\n\t * @class UID\r\n\t * @static\r\n\t **/\r\n\tfunction UID() {\r\n\t\tthrow \"UID cannot be instantiated\";\r\n\t}\r\n\r\n\r\n// private static properties:\r\n\t/**\r\n\t * @property _nextID\r\n\t * @type Number\r\n\t * @protected\r\n\t **/\r\n\tUID._nextID = 0;\r\n\r\n\r\n// public static methods:\r\n\t/**\r\n\t * Returns the next unique id.\r\n\t * @method get\r\n\t * @return {Number} The next unique id\r\n\t * @static\r\n\t **/\r\n\tUID.get = function() {\r\n\t\treturn UID._nextID++;\r\n\t};\r\n\r\n\r\n\tcreatejs.UID = UID;\r\n}());\r\n\r\n//##############################################################################\r\n// MouseEvent.js\r\n//##############################################################################\r\n\r\nthis.createjs = this.createjs||{};\r\n\r\n(function() {\r\n\t\"use strict\";\r\n\r\n\r\n// constructor:\r\n\t/**\r\n\t * Passed as the parameter to all mouse/pointer/touch related events. For a listing of mouse events and their properties,\r\n\t * see the {{#crossLink \"DisplayObject\"}}{{/crossLink}} and {{#crossLink \"Stage\"}}{{/crossLink}} event listings.\r\n\t * @class MouseEvent\r\n\t * @param {String} type The event type.\r\n\t * @param {Boolean} bubbles Indicates whether the event will bubble through the display list.\r\n\t * @param {Boolean} cancelable Indicates whether the default behaviour of this event can be cancelled.\r\n\t * @param {Number} stageX The normalized x position relative to the stage.\r\n\t * @param {Number} stageY The normalized y position relative to the stage.\r\n\t * @param {MouseEvent} nativeEvent The native DOM event related to this mouse event.\r\n\t * @param {Number} pointerID The unique id for the pointer.\r\n\t * @param {Boolean} primary Indicates whether this is the primary pointer in a multitouch environment.\r\n\t * @param {Number} rawX The raw x position relative to the stage.\r\n\t * @param {Number} rawY The raw y position relative to the stage.\r\n\t * @param {DisplayObject} relatedTarget The secondary target for the event.\r\n\t * @extends Event\r\n\t * @constructor\r\n\t **/\r\n\tfunction MouseEvent(type, bubbles, cancelable, stageX, stageY, nativeEvent, pointerID, primary, rawX, rawY, relatedTarget) {\r\n\t\tthis.Event_constructor(type, bubbles, cancelable);\r\n\t\t\r\n\t\t\r\n\t// public properties:\r\n\t\t/**\r\n\t\t * The normalized x position on the stage. This will always be within the range 0 to stage width.\r\n\t\t * @property stageX\r\n\t\t * @type Number\r\n\t\t*/\r\n\t\tthis.stageX = stageX;\r\n\t\r\n\t\t/**\r\n\t\t * The normalized y position on the stage. This will always be within the range 0 to stage height.\r\n\t\t * @property stageY\r\n\t\t * @type Number\r\n\t\t **/\r\n\t\tthis.stageY = stageY;\r\n\t\r\n\t\t/**\r\n\t\t * The raw x position relative to the stage. Normally this will be the same as the stageX value, unless\r\n\t\t * stage.mouseMoveOutside is true and the pointer is outside of the stage bounds.\r\n\t\t * @property rawX\r\n\t\t * @type Number\r\n\t\t*/\r\n\t\tthis.rawX = (rawX==null)?stageX:rawX;\r\n\t\r\n\t\t/**\r\n\t\t * The raw y position relative to the stage. Normally this will be the same as the stageY value, unless\r\n\t\t * stage.mouseMoveOutside is true and the pointer is outside of the stage bounds.\r\n\t\t * @property rawY\r\n\t\t * @type Number\r\n\t\t*/\r\n\t\tthis.rawY = (rawY==null)?stageY:rawY;\r\n\t\r\n\t\t/**\r\n\t\t * The native MouseEvent generated by the browser. The properties and API for this\r\n\t\t * event may differ between browsers. This property will be null if the\r\n\t\t * EaselJS property was not directly generated from a native MouseEvent.\r\n\t\t * @property nativeEvent\r\n\t\t * @type HtmlMouseEvent\r\n\t\t * @default null\r\n\t\t **/\r\n\t\tthis.nativeEvent = nativeEvent;\r\n\t\r\n\t\t/**\r\n\t\t * The unique id for the pointer (touch point or cursor). This will be either -1 for the mouse, or the system\r\n\t\t * supplied id value.\r\n\t\t * @property pointerID\r\n\t\t * @type {Number}\r\n\t\t */\r\n\t\tthis.pointerID = pointerID;\r\n\t\r\n\t\t/**\r\n\t\t * Indicates whether this is the primary pointer in a multitouch environment. This will always be true for the mouse.\r\n\t\t * For touch pointers, the first pointer in the current stack will be considered the primary pointer.\r\n\t\t * @property primary\r\n\t\t * @type {Boolean}\r\n\t\t */\r\n\t\tthis.primary = !!primary;\r\n\t\t\r\n\t\t/**\r\n\t\t * The secondary target for the event, if applicable. This is used for mouseout/rollout\r\n\t\t * events to indicate the object that the mouse entered from, mouseover/rollover for the object the mouse exited,\r\n\t\t * and stagemousedown/stagemouseup events for the object that was the under the cursor, if any.\r\n\t\t * \r\n\t\t * Only valid interaction targets will be returned (ie. objects with mouse listeners or a cursor set).\r\n\t\t * @property relatedTarget\r\n\t\t * @type {DisplayObject}\r\n\t\t */\r\n\t\tthis.relatedTarget = relatedTarget;\r\n\t}\r\n\tvar p = createjs.extend(MouseEvent, createjs.Event);\r\n\r\n\t// TODO: deprecated\r\n\t// p.initialize = function() {}; // searchable for devs wondering where it is. REMOVED. See docs for details.\r\n\t\r\n\t\r\n// getter / setters:\r\n\t/**\r\n\t * Returns the x position of the mouse in the local coordinate system of the current target (ie. the dispatcher).\r\n\t * @property localX\r\n\t * @type {Number}\r\n\t * @readonly\r\n\t */\r\n\tp._get_localX = function() {\r\n\t\treturn this.currentTarget.globalToLocal(this.rawX, this.rawY).x;\r\n\t};\r\n\t\r\n\t/**\r\n\t * Returns the y position of the mouse in the local coordinate system of the current target (ie. the dispatcher).\r\n\t * @property localY\r\n\t * @type {Number}\r\n\t * @readonly\r\n\t */\r\n\tp._get_localY = function() {\r\n\t\treturn this.currentTarget.globalToLocal(this.rawX, this.rawY).y;\r\n\t};\r\n\t\r\n\t/**\r\n\t * Indicates whether the event was generated by a touch input (versus a mouse input).\r\n\t * @property isTouch\r\n\t * @type {Boolean}\r\n\t * @readonly\r\n\t */\r\n\tp._get_isTouch = function() {\r\n\t\treturn this.pointerID !== -1;\r\n\t};\r\n\t\r\n\t\r\n\ttry {\r\n\t\tObject.defineProperties(p, {\r\n\t\t\tlocalX: { get: p._get_localX },\r\n\t\t\tlocalY: { get: p._get_localY },\r\n\t\t\tisTouch: { get: p._get_isTouch }\r\n\t\t});\r\n\t} catch (e) {} // TODO: use Log\r\n\r\n\r\n// public methods:\r\n\t/**\r\n\t * Returns a clone of the MouseEvent instance.\r\n\t * @method clone\r\n\t * @return {MouseEvent} a clone of the MouseEvent instance.\r\n\t **/\r\n\tp.clone = function() {\r\n\t\treturn new MouseEvent(this.type, this.bubbles, this.cancelable, this.stageX, this.stageY, this.nativeEvent, this.pointerID, this.primary, this.rawX, this.rawY);\r\n\t};\r\n\r\n\t/**\r\n\t * Returns a string representation of this object.\r\n\t * @method toString\r\n\t * @return {String} a string representation of the instance.\r\n\t **/\r\n\tp.toString = function() {\r\n\t\treturn \"[MouseEvent (type=\"+this.type+\" stageX=\"+this.stageX+\" stageY=\"+this.stageY+\")]\";\r\n\t};\r\n\r\n\r\n\tcreatejs.MouseEvent = createjs.promote(MouseEvent, \"Event\");\r\n}());\r\n\r\n//##############################################################################\r\n// Matrix2D.js\r\n//##############################################################################\r\n\r\nthis.createjs = this.createjs||{};\r\n\r\n(function() {\r\n\t\"use strict\";\r\n\r\n\r\n// constructor:\r\n\t/**\r\n\t * Represents an affine transformation matrix, and provides tools for constructing and concatenating matrices.\r\n\t *\r\n\t * This matrix can be visualized as:\r\n\t *\r\n\t * \t[ a  c  tx\r\n\t * \t  b  d  ty\r\n\t * \t  0  0  1  ]\r\n\t *\r\n\t * Note the locations of b and c.\r\n\t *\r\n\t * @class Matrix2D\r\n\t * @param {Number} [a=1] Specifies the a property for the new matrix.\r\n\t * @param {Number} [b=0] Specifies the b property for the new matrix.\r\n\t * @param {Number} [c=0] Specifies the c property for the new matrix.\r\n\t * @param {Number} [d=1] Specifies the d property for the new matrix.\r\n\t * @param {Number} [tx=0] Specifies the tx property for the new matrix.\r\n\t * @param {Number} [ty=0] Specifies the ty property for the new matrix.\r\n\t * @constructor\r\n\t **/\r\n\tfunction Matrix2D(a, b, c, d, tx, ty) {\r\n\t\tthis.setValues(a,b,c,d,tx,ty);\r\n\t\t\r\n\t// public properties:\r\n\t\t// assigned in the setValues method.\r\n\t\t/**\r\n\t\t * Position (0, 0) in a 3x3 affine transformation matrix.\r\n\t\t * @property a\r\n\t\t * @type Number\r\n\t\t **/\r\n\t\r\n\t\t/**\r\n\t\t * Position (0, 1) in a 3x3 affine transformation matrix.\r\n\t\t * @property b\r\n\t\t * @type Number\r\n\t\t **/\r\n\t\r\n\t\t/**\r\n\t\t * Position (1, 0) in a 3x3 affine transformation matrix.\r\n\t\t * @property c\r\n\t\t * @type Number\r\n\t\t **/\r\n\t\r\n\t\t/**\r\n\t\t * Position (1, 1) in a 3x3 affine transformation matrix.\r\n\t\t * @property d\r\n\t\t * @type Number\r\n\t\t **/\r\n\t\r\n\t\t/**\r\n\t\t * Position (2, 0) in a 3x3 affine transformation matrix.\r\n\t\t * @property tx\r\n\t\t * @type Number\r\n\t\t **/\r\n\t\r\n\t\t/**\r\n\t\t * Position (2, 1) in a 3x3 affine transformation matrix.\r\n\t\t * @property ty\r\n\t\t * @type Number\r\n\t\t **/\r\n\t}\r\n\tvar p = Matrix2D.prototype;\r\n\r\n\t/**\r\n\t * <strong>REMOVED</strong>. Removed in favor of using `MySuperClass_constructor`.\r\n\t * See {{#crossLink \"Utility Methods/extend\"}}{{/crossLink}} and {{#crossLink \"Utility Methods/promote\"}}{{/crossLink}}\r\n\t * for details.\r\n\t *\r\n\t * There is an inheritance tutorial distributed with EaselJS in /tutorials/Inheritance.\r\n\t *\r\n\t * @method initialize\r\n\t * @protected\r\n\t * @deprecated\r\n\t */\r\n\t// p.initialize = function() {}; // searchable for devs wondering where it is.\r\n\r\n\r\n// constants:\r\n\t/**\r\n\t * Multiplier for converting degrees to radians. Used internally by Matrix2D.\r\n\t * @property DEG_TO_RAD\r\n\t * @static\r\n\t * @final\r\n\t * @type Number\r\n\t * @readonly\r\n\t **/\r\n\tMatrix2D.DEG_TO_RAD = Math.PI/180;\r\n\r\n\r\n// static public properties:\r\n\t/**\r\n\t * An identity matrix, representing a null transformation.\r\n\t * @property identity\r\n\t * @static\r\n\t * @type Matrix2D\r\n\t * @readonly\r\n\t **/\r\n\tMatrix2D.identity = null; // set at bottom of class definition.\r\n\t\r\n\r\n// public methods:\r\n\t/**\r\n\t * Sets the specified values on this instance. \r\n\t * @method setValues\r\n\t * @param {Number} [a=1] Specifies the a property for the new matrix.\r\n\t * @param {Number} [b=0] Specifies the b property for the new matrix.\r\n\t * @param {Number} [c=0] Specifies the c property for the new matrix.\r\n\t * @param {Number} [d=1] Specifies the d property for the new matrix.\r\n\t * @param {Number} [tx=0] Specifies the tx property for the new matrix.\r\n\t * @param {Number} [ty=0] Specifies the ty property for the new matrix.\r\n\t * @return {Matrix2D} This instance. Useful for chaining method calls.\r\n\t*/\r\n\tp.setValues = function(a, b, c, d, tx, ty) {\r\n\t\t// don't forget to update docs in the constructor if these change:\r\n\t\tthis.a = (a == null) ? 1 : a;\r\n\t\tthis.b = b || 0;\r\n\t\tthis.c = c || 0;\r\n\t\tthis.d = (d == null) ? 1 : d;\r\n\t\tthis.tx = tx || 0;\r\n\t\tthis.ty = ty || 0;\r\n\t\treturn this;\r\n\t};\r\n\r\n\t/**\r\n\t * Appends the specified matrix properties to this matrix. All parameters are required.\r\n\t * This is the equivalent of multiplying `(this matrix) * (specified matrix)`.\r\n\t * @method append\r\n\t * @param {Number} a\r\n\t * @param {Number} b\r\n\t * @param {Number} c\r\n\t * @param {Number} d\r\n\t * @param {Number} tx\r\n\t * @param {Number} ty\r\n\t * @return {Matrix2D} This matrix. Useful for chaining method calls.\r\n\t **/\r\n\tp.append = function(a, b, c, d, tx, ty) {\r\n\t\tvar a1 = this.a;\r\n\t\tvar b1 = this.b;\r\n\t\tvar c1 = this.c;\r\n\t\tvar d1 = this.d;\r\n\t\tif (a != 1 || b != 0 || c != 0 || d != 1) {\r\n\t\t\tthis.a  = a1*a+c1*b;\r\n\t\t\tthis.b  = b1*a+d1*b;\r\n\t\t\tthis.c  = a1*c+c1*d;\r\n\t\t\tthis.d  = b1*c+d1*d;\r\n\t\t}\r\n\t\tthis.tx = a1*tx+c1*ty+this.tx;\r\n\t\tthis.ty = b1*tx+d1*ty+this.ty;\r\n\t\treturn this;\r\n\t};\r\n\r\n\t/**\r\n\t * Prepends the specified matrix properties to this matrix.\r\n\t * This is the equivalent of multiplying `(specified matrix) * (this matrix)`.\r\n\t * All parameters are required.\r\n\t * @method prepend\r\n\t * @param {Number} a\r\n\t * @param {Number} b\r\n\t * @param {Number} c\r\n\t * @param {Number} d\r\n\t * @param {Number} tx\r\n\t * @param {Number} ty\r\n\t * @return {Matrix2D} This matrix. Useful for chaining method calls.\r\n\t **/\r\n\tp.prepend = function(a, b, c, d, tx, ty) {\r\n\t\tvar a1 = this.a;\r\n\t\tvar c1 = this.c;\r\n\t\tvar tx1 = this.tx;\r\n\r\n\t\tthis.a  = a*a1+c*this.b;\r\n\t\tthis.b  = b*a1+d*this.b;\r\n\t\tthis.c  = a*c1+c*this.d;\r\n\t\tthis.d  = b*c1+d*this.d;\r\n\t\tthis.tx = a*tx1+c*this.ty+tx;\r\n\t\tthis.ty = b*tx1+d*this.ty+ty;\r\n\t\treturn this;\r\n\t};\r\n\r\n\t/**\r\n\t * Appends the specified matrix to this matrix.\r\n\t * This is the equivalent of multiplying `(this matrix) * (specified matrix)`.\r\n\t * @method appendMatrix\r\n\t * @param {Matrix2D} matrix\r\n\t * @return {Matrix2D} This matrix. Useful for chaining method calls.\r\n\t **/\r\n\tp.appendMatrix = function(matrix) {\r\n\t\treturn this.append(matrix.a, matrix.b, matrix.c, matrix.d, matrix.tx, matrix.ty);\r\n\t};\r\n\r\n\t/**\r\n\t * Prepends the specified matrix to this matrix.\r\n\t * This is the equivalent of multiplying `(specified matrix) * (this matrix)`.\r\n\t * For example, you could calculate the combined transformation for a child object using:\r\n\t * \r\n\t * \tvar o = myDisplayObject;\r\n\t * \tvar mtx = o.getMatrix();\r\n\t * \twhile (o = o.parent) {\r\n\t * \t\t// prepend each parent's transformation in turn:\r\n\t * \t\to.prependMatrix(o.getMatrix());\r\n\t * \t}\r\n\t * @method prependMatrix\r\n\t * @param {Matrix2D} matrix\r\n\t * @return {Matrix2D} This matrix. Useful for chaining method calls.\r\n\t **/\r\n\tp.prependMatrix = function(matrix) {\r\n\t\treturn this.prepend(matrix.a, matrix.b, matrix.c, matrix.d, matrix.tx, matrix.ty);\r\n\t};\r\n\r\n\t/**\r\n\t * Generates matrix properties from the specified display object transform properties, and appends them to this matrix.\r\n\t * For example, you can use this to generate a matrix representing the transformations of a display object:\r\n\t * \r\n\t * \tvar mtx = new createjs.Matrix2D();\r\n\t * \tmtx.appendTransform(o.x, o.y, o.scaleX, o.scaleY, o.rotation);\r\n\t * @method appendTransform\r\n\t * @param {Number} x\r\n\t * @param {Number} y\r\n\t * @param {Number} scaleX\r\n\t * @param {Number} scaleY\r\n\t * @param {Number} rotation\r\n\t * @param {Number} skewX\r\n\t * @param {Number} skewY\r\n\t * @param {Number} regX Optional.\r\n\t * @param {Number} regY Optional.\r\n\t * @return {Matrix2D} This matrix. Useful for chaining method calls.\r\n\t **/\r\n\tp.appendTransform = function(x, y, scaleX, scaleY, rotation, skewX, skewY, regX, regY) {\r\n\t\tif (rotation%360) {\r\n\t\t\tvar r = rotation*Matrix2D.DEG_TO_RAD;\r\n\t\t\tvar cos = Math.cos(r);\r\n\t\t\tvar sin = Math.sin(r);\r\n\t\t} else {\r\n\t\t\tcos = 1;\r\n\t\t\tsin = 0;\r\n\t\t}\r\n\r\n\t\tif (skewX || skewY) {\r\n\t\t\t// TODO: can this be combined into a single append operation?\r\n\t\t\tskewX *= Matrix2D.DEG_TO_RAD;\r\n\t\t\tskewY *= Matrix2D.DEG_TO_RAD;\r\n\t\t\tthis.append(Math.cos(skewY), Math.sin(skewY), -Math.sin(skewX), Math.cos(skewX), x, y);\r\n\t\t\tthis.append(cos*scaleX, sin*scaleX, -sin*scaleY, cos*scaleY, 0, 0);\r\n\t\t} else {\r\n\t\t\tthis.append(cos*scaleX, sin*scaleX, -sin*scaleY, cos*scaleY, x, y);\r\n\t\t}\r\n\t\t\r\n\t\tif (regX || regY) {\r\n\t\t\t// append the registration offset:\r\n\t\t\tthis.tx -= regX*this.a+regY*this.c; \r\n\t\t\tthis.ty -= regX*this.b+regY*this.d;\r\n\t\t}\r\n\t\treturn this;\r\n\t};\r\n\r\n\t/**\r\n\t * Generates matrix properties from the specified display object transform properties, and prepends them to this matrix.\r\n\t * For example, you could calculate the combined transformation for a child object using:\r\n\t * \r\n\t * \tvar o = myDisplayObject;\r\n\t * \tvar mtx = new createjs.Matrix2D();\r\n\t * \tdo  {\r\n\t * \t\t// prepend each parent's transformation in turn:\r\n\t * \t\tmtx.prependTransform(o.x, o.y, o.scaleX, o.scaleY, o.rotation, o.skewX, o.skewY, o.regX, o.regY);\r\n\t * \t} while (o = o.parent);\r\n\t * \t\r\n\t * \tNote that the above example would not account for {{#crossLink \"DisplayObject/transformMatrix:property\"}}{{/crossLink}}\r\n\t * \tvalues. See {{#crossLink \"Matrix2D/prependMatrix\"}}{{/crossLink}} for an example that does.\r\n\t * @method prependTransform\r\n\t * @param {Number} x\r\n\t * @param {Number} y\r\n\t * @param {Number} scaleX\r\n\t * @param {Number} scaleY\r\n\t * @param {Number} rotation\r\n\t * @param {Number} skewX\r\n\t * @param {Number} skewY\r\n\t * @param {Number} regX Optional.\r\n\t * @param {Number} regY Optional.\r\n\t * @return {Matrix2D} This matrix. Useful for chaining method calls.\r\n\t **/\r\n\tp.prependTransform = function(x, y, scaleX, scaleY, rotation, skewX, skewY, regX, regY) {\r\n\t\tif (rotation%360) {\r\n\t\t\tvar r = rotation*Matrix2D.DEG_TO_RAD;\r\n\t\t\tvar cos = Math.cos(r);\r\n\t\t\tvar sin = Math.sin(r);\r\n\t\t} else {\r\n\t\t\tcos = 1;\r\n\t\t\tsin = 0;\r\n\t\t}\r\n\r\n\t\tif (regX || regY) {\r\n\t\t\t// prepend the registration offset:\r\n\t\t\tthis.tx -= regX; this.ty -= regY;\r\n\t\t}\r\n\t\tif (skewX || skewY) {\r\n\t\t\t// TODO: can this be combined into a single prepend operation?\r\n\t\t\tskewX *= Matrix2D.DEG_TO_RAD;\r\n\t\t\tskewY *= Matrix2D.DEG_TO_RAD;\r\n\t\t\tthis.prepend(cos*scaleX, sin*scaleX, -sin*scaleY, cos*scaleY, 0, 0);\r\n\t\t\tthis.prepend(Math.cos(skewY), Math.sin(skewY), -Math.sin(skewX), Math.cos(skewX), x, y);\r\n\t\t} else {\r\n\t\t\tthis.prepend(cos*scaleX, sin*scaleX, -sin*scaleY, cos*scaleY, x, y);\r\n\t\t}\r\n\t\treturn this;\r\n\t};\r\n\r\n\t/**\r\n\t * Applies a clockwise rotation transformation to the matrix.\r\n\t * @method rotate\r\n\t * @param {Number} angle The angle to rotate by, in degrees. To use a value in radians, multiply it by `180/Math.PI`.\r\n\t * @return {Matrix2D} This matrix. Useful for chaining method calls.\r\n\t **/\r\n\tp.rotate = function(angle) {\r\n\t\tangle = angle*Matrix2D.DEG_TO_RAD;\r\n\t\tvar cos = Math.cos(angle);\r\n\t\tvar sin = Math.sin(angle);\r\n\r\n\t\tvar a1 = this.a;\r\n\t\tvar b1 = this.b;\r\n\r\n\t\tthis.a = a1*cos+this.c*sin;\r\n\t\tthis.b = b1*cos+this.d*sin;\r\n\t\tthis.c = -a1*sin+this.c*cos;\r\n\t\tthis.d = -b1*sin+this.d*cos;\r\n\t\treturn this;\r\n\t};\r\n\r\n\t/**\r\n\t * Applies a skew transformation to the matrix.\r\n\t * @method skew\r\n\t * @param {Number} skewX The amount to skew horizontally in degrees. To use a value in radians, multiply it by `180/Math.PI`.\r\n\t * @param {Number} skewY The amount to skew vertically in degrees.\r\n\t * @return {Matrix2D} This matrix. Useful for chaining method calls.\r\n\t*/\r\n\tp.skew = function(skewX, skewY) {\r\n\t\tskewX = skewX*Matrix2D.DEG_TO_RAD;\r\n\t\tskewY = skewY*Matrix2D.DEG_TO_RAD;\r\n\t\tthis.append(Math.cos(skewY), Math.sin(skewY), -Math.sin(skewX), Math.cos(skewX), 0, 0);\r\n\t\treturn this;\r\n\t};\r\n\r\n\t/**\r\n\t * Applies a scale transformation to the matrix.\r\n\t * @method scale\r\n\t * @param {Number} x The amount to scale horizontally. E.G. a value of 2 will double the size in the X direction, and 0.5 will halve it.\r\n\t * @param {Number} y The amount to scale vertically.\r\n\t * @return {Matrix2D} This matrix. Useful for chaining method calls.\r\n\t **/\r\n\tp.scale = function(x, y) {\r\n\t\tthis.a *= x;\r\n\t\tthis.b *= x;\r\n\t\tthis.c *= y;\r\n\t\tthis.d *= y;\r\n\t\t//this.tx *= x;\r\n\t\t//this.ty *= y;\r\n\t\treturn this;\r\n\t};\r\n\r\n\t/**\r\n\t * Translates the matrix on the x and y axes.\r\n\t * @method translate\r\n\t * @param {Number} x\r\n\t * @param {Number} y\r\n\t * @return {Matrix2D} This matrix. Useful for chaining method calls.\r\n\t **/\r\n\tp.translate = function(x, y) {\r\n\t\tthis.tx += this.a*x + this.c*y;\r\n\t\tthis.ty += this.b*x + this.d*y;\r\n\t\treturn this;\r\n\t};\r\n\r\n\t/**\r\n\t * Sets the properties of the matrix to those of an identity matrix (one that applies a null transformation).\r\n\t * @method identity\r\n\t * @return {Matrix2D} This matrix. Useful for chaining method calls.\r\n\t **/\r\n\tp.identity = function() {\r\n\t\tthis.a = this.d = 1;\r\n\t\tthis.b = this.c = this.tx = this.ty = 0;\r\n\t\treturn this;\r\n\t};\r\n\r\n\t/**\r\n\t * Inverts the matrix, causing it to perform the opposite transformation.\r\n\t * @method invert\r\n\t * @return {Matrix2D} This matrix. Useful for chaining method calls.\r\n\t **/\r\n\tp.invert = function() {\r\n\t\tvar a1 = this.a;\r\n\t\tvar b1 = this.b;\r\n\t\tvar c1 = this.c;\r\n\t\tvar d1 = this.d;\r\n\t\tvar tx1 = this.tx;\r\n\t\tvar n = a1*d1-b1*c1;\r\n\r\n\t\tthis.a = d1/n;\r\n\t\tthis.b = -b1/n;\r\n\t\tthis.c = -c1/n;\r\n\t\tthis.d = a1/n;\r\n\t\tthis.tx = (c1*this.ty-d1*tx1)/n;\r\n\t\tthis.ty = -(a1*this.ty-b1*tx1)/n;\r\n\t\treturn this;\r\n\t};\r\n\r\n\t/**\r\n\t * Returns true if the matrix is an identity matrix.\r\n\t * @method isIdentity\r\n\t * @return {Boolean}\r\n\t **/\r\n\tp.isIdentity = function() {\r\n\t\treturn this.tx === 0 && this.ty === 0 && this.a === 1 && this.b === 0 && this.c === 0 && this.d === 1;\r\n\t};\r\n\t\r\n\t/**\r\n\t * Returns true if this matrix is equal to the specified matrix (all property values are equal).\r\n\t * @method equals\r\n\t * @param {Matrix2D} matrix The matrix to compare.\r\n\t * @return {Boolean}\r\n\t **/\r\n\tp.equals = function(matrix) {\r\n\t\treturn this.tx === matrix.tx && this.ty === matrix.ty && this.a === matrix.a && this.b === matrix.b && this.c === matrix.c && this.d === matrix.d;\r\n\t};\r\n\r\n\t/**\r\n\t * Transforms a point according to this matrix.\r\n\t * @method transformPoint\r\n\t * @param {Number} x The x component of the point to transform.\r\n\t * @param {Number} y The y component of the point to transform.\r\n\t * @param {Point | Object} [pt] An object to copy the result into. If omitted a generic object with x/y properties will be returned.\r\n\t * @return {Point} This matrix. Useful for chaining method calls.\r\n\t **/\r\n\tp.transformPoint = function(x, y, pt) {\r\n\t\tpt = pt||{};\r\n\t\tpt.x = x*this.a+y*this.c+this.tx;\r\n\t\tpt.y = x*this.b+y*this.d+this.ty;\r\n\t\treturn pt;\r\n\t};\r\n\r\n\t/**\r\n\t * Decomposes the matrix into transform properties (x, y, scaleX, scaleY, and rotation). Note that these values\r\n\t * may not match the transform properties you used to generate the matrix, though they will produce the same visual\r\n\t * results.\r\n\t * @method decompose\r\n\t * @param {Object} target The object to apply the transform properties to. If null, then a new object will be returned.\r\n\t * @return {Object} The target, or a new generic object with the transform properties applied.\r\n\t*/\r\n\tp.decompose = function(target) {\r\n\t\t// TODO: it would be nice to be able to solve for whether the matrix can be decomposed into only scale/rotation even when scale is negative\r\n\t\tif (target == null) { target = {}; }\r\n\t\ttarget.x = this.tx;\r\n\t\ttarget.y = this.ty;\r\n\t\ttarget.scaleX = Math.sqrt(this.a * this.a + this.b * this.b);\r\n\t\ttarget.scaleY = Math.sqrt(this.c * this.c + this.d * this.d);\r\n\r\n\t\tvar skewX = Math.atan2(-this.c, this.d);\r\n\t\tvar skewY = Math.atan2(this.b, this.a);\r\n\r\n\t\tvar delta = Math.abs(1-skewX/skewY);\r\n\t\tif (delta < 0.00001) { // effectively identical, can use rotation:\r\n\t\t\ttarget.rotation = skewY/Matrix2D.DEG_TO_RAD;\r\n\t\t\tif (this.a < 0 && this.d >= 0) {\r\n\t\t\t\ttarget.rotation += (target.rotation <= 0) ? 180 : -180;\r\n\t\t\t}\r\n\t\t\ttarget.skewX = target.skewY = 0;\r\n\t\t} else {\r\n\t\t\ttarget.skewX = skewX/Matrix2D.DEG_TO_RAD;\r\n\t\t\ttarget.skewY = skewY/Matrix2D.DEG_TO_RAD;\r\n\t\t}\r\n\t\treturn target;\r\n\t};\r\n\t\r\n\t/**\r\n\t * Copies all properties from the specified matrix to this matrix.\r\n\t * @method copy\r\n\t * @param {Matrix2D} matrix The matrix to copy properties from.\r\n\t * @return {Matrix2D} This matrix. Useful for chaining method calls.\r\n\t*/\r\n\tp.copy = function(matrix) {\r\n\t\treturn this.setValues(matrix.a, matrix.b, matrix.c, matrix.d, matrix.tx, matrix.ty);\r\n\t};\r\n\r\n\t/**\r\n\t * Returns a clone of the Matrix2D instance.\r\n\t * @method clone\r\n\t * @return {Matrix2D} a clone of the Matrix2D instance.\r\n\t **/\r\n\tp.clone = function() {\r\n\t\treturn new Matrix2D(this.a, this.b, this.c, this.d, this.tx, this.ty);\r\n\t};\r\n\r\n\t/**\r\n\t * Returns a string representation of this object.\r\n\t * @method toString\r\n\t * @return {String} a string representation of the instance.\r\n\t **/\r\n\tp.toString = function() {\r\n\t\treturn \"[Matrix2D (a=\"+this.a+\" b=\"+this.b+\" c=\"+this.c+\" d=\"+this.d+\" tx=\"+this.tx+\" ty=\"+this.ty+\")]\";\r\n\t};\r\n\r\n\t// this has to be populated after the class is defined:\r\n\tMatrix2D.identity = new Matrix2D();\r\n\r\n\r\n\tcreatejs.Matrix2D = Matrix2D;\r\n}());\r\n\r\n//##############################################################################\r\n// DisplayProps.js\r\n//##############################################################################\r\n\r\nthis.createjs = this.createjs||{};\r\n\r\n(function() {\r\n\t\"use strict\";\r\n\r\n\t/**\r\n\t * Used for calculating and encapsulating display related properties.\r\n\t * @class DisplayProps\r\n\t * @param {Number} [visible=true] Visible value.\r\n\t * @param {Number} [alpha=1] Alpha value.\r\n\t * @param {Number} [shadow=null] A Shadow instance or null.\r\n\t * @param {Number} [compositeOperation=null] A compositeOperation value or null.\r\n\t * @param {Number} [matrix] A transformation matrix. Defaults to a new identity matrix.\r\n\t * @constructor\r\n\t **/\r\n\tfunction DisplayProps(visible, alpha, shadow, compositeOperation, matrix) {\r\n\t\tthis.setValues(visible, alpha, shadow, compositeOperation, matrix);\r\n\t\t\r\n\t// public properties:\r\n\t\t// assigned in the setValues method.\r\n\t\t/**\r\n\t\t * Property representing the alpha that will be applied to a display object.\r\n\t\t * @property alpha\r\n\t\t * @type Number\r\n\t\t **/\r\n\t\r\n\t\t/**\r\n\t\t * Property representing the shadow that will be applied to a display object.\r\n\t\t * @property shadow\r\n\t\t * @type Shadow\r\n\t\t **/\r\n\t\r\n\t\t/**\r\n\t\t * Property representing the compositeOperation that will be applied to a display object.\r\n\t\t * You can find a list of valid composite operations at:\r\n\t\t * <a href=\"https://developer.mozilla.org/en/Canvas_tutorial/Compositing\">https://developer.mozilla.org/en/Canvas_tutorial/Compositing</a>\r\n\t\t * @property compositeOperation\r\n\t\t * @type String\r\n\t\t **/\r\n\t\t\r\n\t\t/**\r\n\t\t * Property representing the value for visible that will be applied to a display object.\r\n\t\t * @property visible\r\n\t\t * @type Boolean\r\n\t\t **/\r\n\t\t\r\n\t\t/**\r\n\t\t * The transformation matrix that will be applied to a display object.\r\n\t\t * @property matrix\r\n\t\t * @type Matrix2D\r\n\t\t **/\r\n\t}\r\n\tvar p = DisplayProps.prototype;\r\n\r\n// initialization:\r\n\t/**\r\n\t * Reinitializes the instance with the specified values.\r\n\t * @method setValues\r\n\t * @param {Number} [visible=true] Visible value.\r\n\t * @param {Number} [alpha=1] Alpha value.\r\n\t * @param {Number} [shadow=null] A Shadow instance or null.\r\n\t * @param {Number} [compositeOperation=null] A compositeOperation value or null.\r\n\t * @param {Number} [matrix] A transformation matrix. Defaults to an identity matrix.\r\n\t * @return {DisplayProps} This instance. Useful for chaining method calls.\r\n\t * @chainable\r\n\t*/\r\n\tp.setValues = function (visible, alpha, shadow, compositeOperation, matrix) {\r\n\t\tthis.visible = visible == null ? true : !!visible;\r\n\t\tthis.alpha = alpha == null ? 1 : alpha;\r\n\t\tthis.shadow = shadow;\r\n\t\tthis.compositeOperation = compositeOperation;\r\n\t\tthis.matrix = matrix || (this.matrix&&this.matrix.identity()) || new createjs.Matrix2D();\r\n\t\treturn this;\r\n\t};\r\n\r\n// public methods:\r\n\t/**\r\n\t * Appends the specified display properties. This is generally used to apply a child's properties its parent's.\r\n\t * @method append\r\n\t * @param {Boolean} visible desired visible value\r\n\t * @param {Number} alpha desired alpha value\r\n\t * @param {Shadow} shadow desired shadow value\r\n\t * @param {String} compositeOperation desired composite operation value\r\n\t * @param {Matrix2D} [matrix] a Matrix2D instance\r\n\t * @return {DisplayProps} This instance. Useful for chaining method calls.\r\n\t * @chainable\r\n\t*/\r\n\tp.append = function(visible, alpha, shadow, compositeOperation, matrix) {\r\n\t\tthis.alpha *= alpha;\r\n\t\tthis.shadow = shadow || this.shadow;\r\n\t\tthis.compositeOperation = compositeOperation || this.compositeOperation;\r\n\t\tthis.visible = this.visible && visible;\r\n\t\tmatrix&&this.matrix.appendMatrix(matrix);\r\n\t\treturn this;\r\n\t};\r\n\t\r\n\t/**\r\n\t * Prepends the specified display properties. This is generally used to apply a parent's properties to a child's.\r\n\t * For example, to get the combined display properties that would be applied to a child, you could use:\r\n\t * \r\n\t * \tvar o = myDisplayObject;\r\n\t * \tvar props = new createjs.DisplayProps();\r\n\t * \tdo {\r\n\t * \t\t// prepend each parent's props in turn:\r\n\t * \t\tprops.prepend(o.visible, o.alpha, o.shadow, o.compositeOperation, o.getMatrix());\r\n\t * \t} while (o = o.parent);\r\n\t * \t\r\n\t * @method prepend\r\n\t * @param {Boolean} visible desired visible value\r\n\t * @param {Number} alpha desired alpha value\r\n\t * @param {Shadow} shadow desired shadow value\r\n\t * @param {String} compositeOperation desired composite operation value\r\n\t * @param {Matrix2D} [matrix] a Matrix2D instance\r\n\t * @return {DisplayProps} This instance. Useful for chaining method calls.\r\n\t * @chainable\r\n\t*/\r\n\tp.prepend = function(visible, alpha, shadow, compositeOperation, matrix) {\r\n\t\tthis.alpha *= alpha;\r\n\t\tthis.shadow = this.shadow || shadow;\r\n\t\tthis.compositeOperation = this.compositeOperation || compositeOperation;\r\n\t\tthis.visible = this.visible && visible;\r\n\t\tmatrix&&this.matrix.prependMatrix(matrix);\r\n\t\treturn this;\r\n\t};\r\n\t\r\n\t/**\r\n\t * Resets this instance and its matrix to default values.\r\n\t * @method identity\r\n\t * @return {DisplayProps} This instance. Useful for chaining method calls.\r\n\t * @chainable\r\n\t*/\r\n\tp.identity = function() {\r\n\t\tthis.visible = true;\r\n\t\tthis.alpha = 1;\r\n\t\tthis.shadow = this.compositeOperation = null;\r\n\t\tthis.matrix.identity();\r\n\t\treturn this;\r\n\t};\r\n\t\r\n\t/**\r\n\t * Returns a clone of the DisplayProps instance. Clones the associated matrix.\r\n\t * @method clone\r\n\t * @return {DisplayProps} a clone of the DisplayProps instance.\r\n\t **/\r\n\tp.clone = function() {\r\n\t\treturn new DisplayProps(this.alpha, this.shadow, this.compositeOperation, this.visible, this.matrix.clone());\r\n\t};\r\n\r\n// private methods:\r\n\r\n\tcreatejs.DisplayProps = DisplayProps;\r\n})();\r\n\r\n//##############################################################################\r\n// Point.js\r\n//##############################################################################\r\n\r\nthis.createjs = this.createjs||{};\r\n\r\n(function() {\r\n\t\"use strict\";\r\n\r\n\r\n// constructor:\r\n\t/**\r\n\t * Represents a point on a 2 dimensional x / y coordinate system.\r\n\t *\r\n\t * <h4>Example</h4>\r\n\t * \r\n\t *      var point = new createjs.Point(0, 100);\r\n\t * \r\n\t * @class Point\r\n\t * @param {Number} [x=0] X position.\r\n\t * @param {Number} [y=0] Y position.\r\n\t * @constructor\r\n\t **/\r\n\tfunction Point(x, y) {\r\n\t \tthis.setValues(x, y);\r\n\t \t\r\n\t \t\r\n\t// public properties:\r\n\t\t// assigned in the setValues method.\r\n\t\t/**\r\n\t\t * X position.\r\n\t\t * @property x\r\n\t\t * @type Number\r\n\t\t **/\r\n\t\r\n\t\t/**\r\n\t\t * Y position.\r\n\t\t * @property y\r\n\t\t * @type Number\r\n\t\t **/\r\n\t}\r\n\tvar p = Point.prototype;\r\n\r\n\t/**\r\n\t * <strong>REMOVED</strong>. Removed in favor of using `MySuperClass_constructor`.\r\n\t * See {{#crossLink \"Utility Methods/extend\"}}{{/crossLink}} and {{#crossLink \"Utility Methods/promote\"}}{{/crossLink}}\r\n\t * for details.\r\n\t *\r\n\t * There is an inheritance tutorial distributed with EaselJS in /tutorials/Inheritance.\r\n\t *\r\n\t * @method initialize\r\n\t * @protected\r\n\t * @deprecated\r\n\t */\r\n\t// p.initialize = function() {}; // searchable for devs wondering where it is.\r\n\r\n\t\r\n// public methods:\r\n\t/** \r\n\t * Sets the specified values on this instance.\r\n\t * @method setValues\r\n\t * @param {Number} [x=0] X position.\r\n\t * @param {Number} [y=0] Y position.\r\n\t * @return {Point} This instance. Useful for chaining method calls.\r\n\t * @chainable\r\n\t*/\r\n\tp.setValues = function(x, y) {\r\n\t\tthis.x = x||0;\r\n\t\tthis.y = y||0;\r\n\t\treturn this;\r\n\t};\r\n\t\r\n\t/**\r\n\t * Copies all properties from the specified point to this point.\r\n\t * @method copy\r\n\t * @param {Point} point The point to copy properties from.\r\n\t * @return {Point} This point. Useful for chaining method calls.\r\n\t * @chainable\r\n\t*/\r\n\tp.copy = function(point) {\r\n\t\tthis.x = point.x;\r\n\t\tthis.y = point.y;\r\n\t\treturn this;\r\n\t};\r\n\t\r\n\t/**\r\n\t * Returns a clone of the Point instance.\r\n\t * @method clone\r\n\t * @return {Point} a clone of the Point instance.\r\n\t **/\r\n\tp.clone = function() {\r\n\t\treturn new Point(this.x, this.y);\r\n\t};\r\n\r\n\t/**\r\n\t * Returns a string representation of this object.\r\n\t * @method toString\r\n\t * @return {String} a string representation of the instance.\r\n\t **/\r\n\tp.toString = function() {\r\n\t\treturn \"[Point (x=\"+this.x+\" y=\"+this.y+\")]\";\r\n\t};\r\n\t\r\n\t\r\n\tcreatejs.Point = Point;\r\n}());\r\n\r\n//##############################################################################\r\n// Rectangle.js\r\n//##############################################################################\r\n\r\nthis.createjs = this.createjs||{};\r\n\r\n(function() {\r\n\t\"use strict\";\r\n\r\n\r\n// constructor:\r\n\t/**\r\n\t * Represents a rectangle as defined by the points (x, y) and (x+width, y+height).\r\n\t *\r\n\t * <h4>Example</h4>\r\n\t *\r\n\t *      var rect = new createjs.Rectangle(0, 0, 100, 100);\r\n\t *\r\n\t * @class Rectangle\r\n\t * @param {Number} [x=0] X position.\r\n\t * @param {Number} [y=0] Y position.\r\n\t * @param {Number} [width=0] The width of the Rectangle.\r\n\t * @param {Number} [height=0] The height of the Rectangle.\r\n\t * @constructor\r\n\t **/\r\n\tfunction Rectangle(x, y, width, height) {\r\n\t\tthis.setValues(x, y, width, height);\r\n\t\t\r\n\t\t\r\n\t// public properties:\r\n\t\t// assigned in the setValues method.\r\n\t\t/**\r\n\t\t * X position.\r\n\t\t * @property x\r\n\t\t * @type Number\r\n\t\t **/\r\n\t\r\n\t\t/**\r\n\t\t * Y position.\r\n\t\t * @property y\r\n\t\t * @type Number\r\n\t\t **/\r\n\t\r\n\t\t/**\r\n\t\t * Width.\r\n\t\t * @property width\r\n\t\t * @type Number\r\n\t\t **/\r\n\t\r\n\t\t/**\r\n\t\t * Height.\r\n\t\t * @property height\r\n\t\t * @type Number\r\n\t\t **/\r\n\t}\r\n\tvar p = Rectangle.prototype;\r\n\r\n\t/**\r\n\t * <strong>REMOVED</strong>. Removed in favor of using `MySuperClass_constructor`.\r\n\t * See {{#crossLink \"Utility Methods/extend\"}}{{/crossLink}} and {{#crossLink \"Utility Methods/promote\"}}{{/crossLink}}\r\n\t * for details.\r\n\t *\r\n\t * There is an inheritance tutorial distributed with EaselJS in /tutorials/Inheritance.\r\n\t *\r\n\t * @method initialize\r\n\t * @protected\r\n\t * @deprecated\r\n\t */\r\n\t// p.initialize = function() {}; // searchable for devs wondering where it is.\r\n\r\n\r\n// public methods:\r\n\t/** \r\n\t * Sets the specified values on this instance.\r\n\t * @method setValues\r\n\t * @param {Number} [x=0] X position.\r\n\t * @param {Number} [y=0] Y position.\r\n\t * @param {Number} [width=0] The width of the Rectangle.\r\n\t * @param {Number} [height=0] The height of the Rectangle.\r\n\t * @return {Rectangle} This instance. Useful for chaining method calls.\r\n\t * @chainable\r\n\t*/\r\n\tp.setValues = function(x, y, width, height) {\r\n\t\t// don't forget to update docs in the constructor if these change:\r\n\t\tthis.x = x||0;\r\n\t\tthis.y = y||0;\r\n\t\tthis.width = width||0;\r\n\t\tthis.height = height||0;\r\n\t\treturn this;\r\n\t};\r\n\t\r\n\t/** \r\n\t * Extends the rectangle's bounds to include the described point or rectangle.\r\n\t * @method extend\r\n\t * @param {Number} x X position of the point or rectangle.\r\n\t * @param {Number} y Y position of the point or rectangle.\r\n\t * @param {Number} [width=0] The width of the rectangle.\r\n\t * @param {Number} [height=0] The height of the rectangle.\r\n\t * @return {Rectangle} This instance. Useful for chaining method calls.\r\n\t * @chainable\r\n\t*/\r\n\tp.extend = function(x, y, width, height) {\r\n\t\twidth = width||0;\r\n\t\theight = height||0;\r\n\t\tif (x+width > this.x+this.width) { this.width = x+width-this.x; }\r\n\t\tif (y+height > this.y+this.height) { this.height = y+height-this.y; }\r\n\t\tif (x < this.x) { this.width += this.x-x; this.x = x; }\r\n\t\tif (y < this.y) { this.height += this.y-y; this.y = y; }\r\n\t\treturn this;\r\n\t};\r\n\t\r\n\t/** \r\n\t * Adds the specified padding to the rectangle's bounds.\r\n\t * @method pad\r\n\t * @param {Number} top\r\n\t * @param {Number} left\r\n\t * @param {Number} right\r\n\t * @param {Number} bottom\r\n\t * @return {Rectangle} This instance. Useful for chaining method calls.\r\n\t * @chainable\r\n\t*/\r\n\tp.pad = function(top, left, bottom, right) {\r\n\t\tthis.x -= left;\r\n\t\tthis.y -= top;\r\n\t\tthis.width += left+right;\r\n\t\tthis.height += top+bottom;\r\n\t\treturn this;\r\n\t};\r\n\t\r\n\t/**\r\n\t * Copies all properties from the specified rectangle to this rectangle.\r\n\t * @method copy\r\n\t * @param {Rectangle} rectangle The rectangle to copy properties from.\r\n\t * @return {Rectangle} This rectangle. Useful for chaining method calls.\r\n\t * @chainable\r\n\t*/\r\n\tp.copy = function(rectangle) {\r\n\t\treturn this.setValues(rectangle.x, rectangle.y, rectangle.width, rectangle.height);\r\n\t};\r\n\t\r\n\t/** \r\n\t * Returns true if this rectangle fully encloses the described point or rectangle.\r\n\t * @method contains\r\n\t * @param {Number} x X position of the point or rectangle.\r\n\t * @param {Number} y Y position of the point or rectangle.\r\n\t * @param {Number} [width=0] The width of the rectangle.\r\n\t * @param {Number} [height=0] The height of the rectangle.\r\n\t * @return {Boolean} True if the described point or rectangle is contained within this rectangle.\r\n\t*/\r\n\tp.contains = function(x, y, width, height) {\r\n\t\twidth = width||0;\r\n\t\theight = height||0;\r\n\t\treturn (x >= this.x && x+width <= this.x+this.width && y >= this.y && y+height <= this.y+this.height);\r\n\t};\r\n\t\r\n\t/** \r\n\t * Returns a new rectangle which contains this rectangle and the specified rectangle.\r\n\t * @method union\r\n\t * @param {Rectangle} rect The rectangle to calculate a union with.\r\n\t * @return {Rectangle} A new rectangle describing the union.\r\n\t*/\r\n\tp.union = function(rect) {\r\n\t\treturn this.clone().extend(rect.x, rect.y, rect.width, rect.height);\r\n\t};\r\n\t\r\n\t/** \r\n\t * Returns a new rectangle which describes the intersection (overlap) of this rectangle and the specified rectangle,\r\n\t * or null if they do not intersect.\r\n\t * @method intersection\r\n\t * @param {Rectangle} rect The rectangle to calculate an intersection with.\r\n\t * @return {Rectangle} A new rectangle describing the intersection or null.\r\n\t*/\r\n\tp.intersection = function(rect) {\r\n\t\tvar x1 = rect.x, y1 = rect.y, x2 = x1+rect.width, y2 = y1+rect.height;\r\n\t\tif (this.x > x1) { x1 = this.x; }\r\n\t\tif (this.y > y1) { y1 = this.y; }\r\n\t\tif (this.x + this.width < x2) { x2 = this.x + this.width; }\r\n\t\tif (this.y + this.height < y2) { y2 = this.y + this.height; }\r\n\t\treturn (x2 <= x1 || y2 <= y1) ? null : new Rectangle(x1, y1, x2-x1, y2-y1);\r\n\t};\r\n\t\r\n\t/** \r\n\t * Returns true if the specified rectangle intersects (has any overlap) with this rectangle.\r\n\t * @method intersects\r\n\t * @param {Rectangle} rect The rectangle to compare.\r\n\t * @return {Boolean} True if the rectangles intersect.\r\n\t*/\r\n\tp.intersects = function(rect) {\r\n\t\treturn (rect.x <= this.x+this.width && this.x <= rect.x+rect.width && rect.y <= this.y+this.height && this.y <= rect.y + rect.height);\r\n\t};\r\n\t\r\n\t/** \r\n\t * Returns true if the width or height are equal or less than 0.\r\n\t * @method isEmpty\r\n\t * @return {Boolean} True if the rectangle is empty.\r\n\t*/\r\n\tp.isEmpty = function() {\r\n\t\treturn this.width <= 0 || this.height <= 0;\r\n\t};\r\n\t\r\n\t/**\r\n\t * Returns a clone of the Rectangle instance.\r\n\t * @method clone\r\n\t * @return {Rectangle} a clone of the Rectangle instance.\r\n\t **/\r\n\tp.clone = function() {\r\n\t\treturn new Rectangle(this.x, this.y, this.width, this.height);\r\n\t};\r\n\r\n\t/**\r\n\t * Returns a string representation of this object.\r\n\t * @method toString\r\n\t * @return {String} a string representation of the instance.\r\n\t **/\r\n\tp.toString = function() {\r\n\t\treturn \"[Rectangle (x=\"+this.x+\" y=\"+this.y+\" width=\"+this.width+\" height=\"+this.height+\")]\";\r\n\t};\r\n\t\r\n\t\r\n\tcreatejs.Rectangle = Rectangle;\r\n}());\r\n\r\n//##############################################################################\r\n// ButtonHelper.js\r\n//##############################################################################\r\n\r\nthis.createjs = this.createjs||{};\r\n\r\n(function() {\r\n\t\"use strict\";\r\n\r\n\r\n// constructor:\r\n\t/**\r\n\t * The ButtonHelper is a helper class to create interactive buttons from {{#crossLink \"MovieClip\"}}{{/crossLink}} or\r\n\t * {{#crossLink \"Sprite\"}}{{/crossLink}} instances. This class will intercept mouse events from an object, and\r\n\t * automatically call {{#crossLink \"Sprite/gotoAndStop\"}}{{/crossLink}} or {{#crossLink \"Sprite/gotoAndPlay\"}}{{/crossLink}},\r\n\t * to the respective animation labels, add a pointer cursor, and allows the user to define a hit state frame.\r\n\t *\r\n\t * The ButtonHelper instance does not need to be added to the stage, but a reference should be maintained to prevent\r\n\t * garbage collection.\r\n\t * \r\n\t * Note that over states will not work unless you call {{#crossLink \"Stage/enableMouseOver\"}}{{/crossLink}}.\r\n\t *\r\n\t * <h4>Example</h4>\r\n\t *\r\n\t *      var helper = new createjs.ButtonHelper(myInstance, \"out\", \"over\", \"down\", false, myInstance, \"hit\");\r\n\t *      myInstance.addEventListener(\"click\", handleClick);\r\n\t *      function handleClick(event) {\r\n\t *          // Click Happened.\r\n\t *      }\r\n\t *\r\n\t * @class ButtonHelper\r\n\t * @param {Sprite|MovieClip} target The instance to manage.\r\n\t * @param {String} [outLabel=\"out\"] The label or animation to go to when the user rolls out of the button.\r\n\t * @param {String} [overLabel=\"over\"] The label or animation to go to when the user rolls over the button.\r\n\t * @param {String} [downLabel=\"down\"] The label or animation to go to when the user presses the button.\r\n\t * @param {Boolean} [play=false] If the helper should call \"gotoAndPlay\" or \"gotoAndStop\" on the button when changing\r\n\t * states.\r\n\t * @param {DisplayObject} [hitArea] An optional item to use as the hit state for the button. If this is not defined,\r\n\t * then the button's visible states will be used instead. Note that the same instance as the \"target\" argument can be\r\n\t * used for the hitState.\r\n\t * @param {String} [hitLabel] The label or animation on the hitArea instance that defines the hitArea bounds. If this is\r\n\t * null, then the default state of the hitArea will be used. *\r\n\t * @constructor\r\n\t */\r\n\tfunction ButtonHelper(target, outLabel, overLabel, downLabel, play, hitArea, hitLabel) {\r\n\t\tif (!target.addEventListener) { return; }\r\n\t\r\n\t\r\n\t// public properties:\r\n\t\t/**\r\n\t\t * The target for this button helper.\r\n\t\t * @property target\r\n\t\t * @type MovieClip | Sprite\r\n\t\t * @readonly\r\n\t\t **/\r\n\t\tthis.target = target;\r\n\t\r\n\t\t/**\r\n\t\t * The label name or frame number to display when the user mouses out of the target. Defaults to \"over\".\r\n\t\t * @property overLabel\r\n\t\t * @type String | Number\r\n\t\t **/\r\n\t\tthis.overLabel = overLabel == null ? \"over\" : overLabel;\r\n\t\r\n\t\t/**\r\n\t\t * The label name or frame number to display when the user mouses over the target. Defaults to \"out\".\r\n\t\t * @property outLabel\r\n\t\t * @type String | Number\r\n\t\t **/\r\n\t\tthis.outLabel = outLabel == null ? \"out\" : outLabel;\r\n\t\r\n\t\t/**\r\n\t\t * The label name or frame number to display when the user presses on the target. Defaults to \"down\".\r\n\t\t * @property downLabel\r\n\t\t * @type String | Number\r\n\t\t **/\r\n\t\tthis.downLabel = downLabel == null ? \"down\" : downLabel;\r\n\t\r\n\t\t/**\r\n\t\t * If true, then ButtonHelper will call gotoAndPlay, if false, it will use gotoAndStop. Default is false.\r\n\t\t * @property play\r\n\t\t * @default false\r\n\t\t * @type Boolean\r\n\t\t **/\r\n\t\tthis.play = play;\r\n\t\t\r\n\t\t\r\n\t//  private properties\r\n\t\t/**\r\n\t\t * @property _isPressed\r\n\t\t * @type Boolean\r\n\t\t * @protected\r\n\t\t **/\r\n\t\tthis._isPressed = false;\r\n\t\r\n\t\t/**\r\n\t\t * @property _isOver\r\n\t\t * @type Boolean\r\n\t\t * @protected\r\n\t\t **/\r\n\t\tthis._isOver = false;\r\n\t\r\n\t\t/**\r\n\t\t * @property _enabled\r\n\t\t * @type Boolean\r\n\t\t * @protected\r\n\t\t **/\r\n\t\tthis._enabled = false;\r\n\t\t\r\n\t// setup:\r\n\t\ttarget.mouseChildren = false; // prevents issues when children are removed from the display list when state changes.\r\n\t\tthis.enabled = true;\r\n\t\tthis.handleEvent({});\r\n\t\tif (hitArea) {\r\n\t\t\tif (hitLabel) {\r\n\t\t\t\thitArea.actionsEnabled = false;\r\n\t\t\t\thitArea.gotoAndStop&&hitArea.gotoAndStop(hitLabel);\r\n\t\t\t}\r\n\t\t\ttarget.hitArea = hitArea;\r\n\t\t}\r\n\t}\r\n\tvar p = ButtonHelper.prototype;\r\n\r\n\t/**\r\n\t * <strong>REMOVED</strong>. Removed in favor of using `MySuperClass_constructor`.\r\n\t * See {{#crossLink \"Utility Methods/extend\"}}{{/crossLink}} and {{#crossLink \"Utility Methods/promote\"}}{{/crossLink}}\r\n\t * for details.\r\n\t *\r\n\t * There is an inheritance tutorial distributed with EaselJS in /tutorials/Inheritance.\r\n\t *\r\n\t * @method initialize\r\n\t * @protected\r\n\t * @deprecated\r\n\t */\r\n\t// p.initialize = function() {}; // searchable for devs wondering where it is.\r\n\r\n\t\r\n// getter / setters:\r\n\t/**\r\n\t * Use the {{#crossLink \"ButtonHelper/enabled:property\"}}{{/crossLink}} property instead.\r\n\t * @method setEnabled\r\n\t * @param {Boolean} value\r\n\t * @deprecated\r\n\t **/\r\n\tp.setEnabled = function(value) { // TODO: deprecated.\r\n\t\tif (value == this._enabled) { return; }\r\n\t\tvar o = this.target;\r\n\t\tthis._enabled = value;\r\n\t\tif (value) {\r\n\t\t\to.cursor = \"pointer\";\r\n\t\t\to.addEventListener(\"rollover\", this);\r\n\t\t\to.addEventListener(\"rollout\", this);\r\n\t\t\to.addEventListener(\"mousedown\", this);\r\n\t\t\to.addEventListener(\"pressup\", this);\r\n\t\t\tif (o._reset) { o.__reset = o._reset; o._reset = this._reset;}\r\n\t\t} else {\r\n\t\t\to.cursor = null;\r\n\t\t\to.removeEventListener(\"rollover\", this);\r\n\t\t\to.removeEventListener(\"rollout\", this);\r\n\t\t\to.removeEventListener(\"mousedown\", this);\r\n\t\t\to.removeEventListener(\"pressup\", this);\r\n\t\t\tif (o.__reset) { o._reset = o.__reset; delete(o.__reset); }\r\n\t\t}\r\n\t};\r\n\t/**\r\n\t * Use the {{#crossLink \"ButtonHelper/enabled:property\"}}{{/crossLink}} property instead.\r\n\t * @method getEnabled\r\n\t * @return {Boolean}\r\n\t * @deprecated\r\n\t **/\r\n\tp.getEnabled = function() {\r\n\t\treturn this._enabled;\r\n\t};\r\n\r\n\t/**\r\n\t * Enables or disables the button functionality on the target.\r\n\t * @property enabled\r\n\t * @type {Boolean}\r\n\t **/\r\n\ttry {\r\n\t\tObject.defineProperties(p, {\r\n\t\t\tenabled: { get: p.getEnabled, set: p.setEnabled }\r\n\t\t});\r\n\t} catch (e) {} // TODO: use Log\r\n\r\n\r\n// public methods:\r\n\t/**\r\n\t * Returns a string representation of this object.\r\n\t * @method toString\r\n\t * @return {String} a string representation of the instance.\r\n\t **/\r\n\tp.toString = function() {\r\n\t\treturn \"[ButtonHelper]\";\r\n\t};\r\n\r\n\r\n// private methods:\r\n\t/**\r\n\t * @method handleEvent\r\n\t * @param {Object} evt The mouse event to handle.\r\n\t * @protected\r\n\t **/\r\n\tp.handleEvent = function(evt) {\r\n\t\tvar label, t = this.target, type = evt.type;\r\n\t\tif (type == \"mousedown\") {\r\n\t\t\tthis._isPressed = true;\r\n\t\t\tlabel = this.downLabel;\r\n\t\t} else if (type == \"pressup\") {\r\n\t\t\tthis._isPressed = false;\r\n\t\t\tlabel = this._isOver ? this.overLabel : this.outLabel;\r\n\t\t} else if (type == \"rollover\") {\r\n\t\t\tthis._isOver = true;\r\n\t\t\tlabel = this._isPressed ? this.downLabel : this.overLabel;\r\n\t\t} else { // rollout and default\r\n\t\t\tthis._isOver = false;\r\n\t\t\tlabel = this._isPressed ? this.overLabel : this.outLabel;\r\n\t\t}\r\n\t\tif (this.play) {\r\n\t\t\tt.gotoAndPlay&&t.gotoAndPlay(label);\r\n\t\t} else {\r\n\t\t\tt.gotoAndStop&&t.gotoAndStop(label);\r\n\t\t}\r\n\t};\r\n\t\r\n\t/**\r\n\t * Injected into target. Preserves the paused state through a reset.\r\n\t * @method _reset\r\n\t * @protected\r\n\t **/\r\n\tp._reset = function() {\r\n\t\t// TODO: explore better ways to handle this issue. This is hacky & disrupts object signatures.\r\n\t\tvar p = this.paused;\r\n\t\tthis.__reset();\r\n\t\tthis.paused = p;\r\n\t};\r\n\r\n\r\n\tcreatejs.ButtonHelper = ButtonHelper;\r\n}());\r\n\r\n//##############################################################################\r\n// Shadow.js\r\n//##############################################################################\r\n\r\nthis.createjs = this.createjs||{};\r\n\r\n(function() {\r\n\t\"use strict\";\r\n\r\n\r\n// constructor:\r\n\t/**\r\n\t * This class encapsulates the properties required to define a shadow to apply to a {{#crossLink \"DisplayObject\"}}{{/crossLink}}\r\n\t * via its <code>shadow</code> property.\r\n\t *\r\n\t * <h4>Example</h4>\r\n\t *\r\n\t *      myImage.shadow = new createjs.Shadow(\"#000000\", 5, 5, 10);\r\n\t *\r\n\t * @class Shadow\r\n\t * @constructor\r\n\t * @param {String} color The color of the shadow. This can be any valid CSS color value.\r\n\t * @param {Number} offsetX The x offset of the shadow in pixels.\r\n\t * @param {Number} offsetY The y offset of the shadow in pixels.\r\n\t * @param {Number} blur The size of the blurring effect.\r\n\t **/\r\n\tfunction Shadow(color, offsetX, offsetY, blur) {\r\n\t\t\r\n\t\t\r\n\t// public properties:\r\n\t\t/** \r\n\t\t * The color of the shadow. This can be any valid CSS color value.\r\n\t\t * @property color\r\n\t\t * @type String\r\n\t\t * @default null\r\n\t\t */\r\n\t\tthis.color = color||\"black\";\r\n\t\r\n\t\t/** The x offset of the shadow.\r\n\t\t * @property offsetX\r\n\t\t * @type Number\r\n\t\t * @default 0\r\n\t\t */\r\n\t\tthis.offsetX = offsetX||0;\r\n\t\r\n\t\t/** The y offset of the shadow.\r\n\t\t * @property offsetY\r\n\t\t * @type Number\r\n\t\t * @default 0\r\n\t\t */\r\n\t\tthis.offsetY = offsetY||0;\r\n\t\r\n\t\t/** The blur of the shadow.\r\n\t\t * @property blur\r\n\t\t * @type Number\r\n\t\t * @default 0\r\n\t\t */\r\n\t\tthis.blur = blur||0;\r\n\t}\r\n\tvar p = Shadow.prototype;\r\n\r\n\t/**\r\n\t * <strong>REMOVED</strong>. Removed in favor of using `MySuperClass_constructor`.\r\n\t * See {{#crossLink \"Utility Methods/extend\"}}{{/crossLink}} and {{#crossLink \"Utility Methods/promote\"}}{{/crossLink}}\r\n\t * for details.\r\n\t *\r\n\t * There is an inheritance tutorial distributed with EaselJS in /tutorials/Inheritance.\r\n\t *\r\n\t * @method initialize\r\n\t * @protected\r\n\t * @deprecated\r\n\t */\r\n\t// p.initialize = function() {}; // searchable for devs wondering where it is.\r\n\r\n\r\n// static public properties:\r\n\t/**\r\n\t * An identity shadow object (all properties are set to 0).\r\n\t * @property identity\r\n\t * @type Shadow\r\n\t * @static\r\n\t * @final\r\n\t * @readonly\r\n\t **/\r\n\tShadow.identity = new Shadow(\"transparent\", 0, 0, 0);\r\n\r\n\r\n// public methods:\r\n\t/**\r\n\t * Returns a string representation of this object.\r\n\t * @method toString\r\n\t * @return {String} a string representation of the instance.\r\n\t **/\r\n\tp.toString = function() {\r\n\t\treturn \"[Shadow]\";\r\n\t};\r\n\r\n\t/**\r\n\t * Returns a clone of this Shadow instance.\r\n\t * @method clone\r\n\t * @return {Shadow} A clone of the current Shadow instance.\r\n\t **/\r\n\tp.clone = function() {\r\n\t\treturn new Shadow(this.color, this.offsetX, this.offsetY, this.blur);\r\n\t};\r\n\t\r\n\r\n\tcreatejs.Shadow = Shadow;\r\n}());\r\n\r\n//##############################################################################\r\n// SpriteSheet.js\r\n//##############################################################################\r\n\r\nthis.createjs = this.createjs||{};\r\n\r\n(function() {\r\n\t\"use strict\";\r\n\r\n\r\n// constructor:\r\n\t/**\r\n\t * Encapsulates the properties and methods associated with a sprite sheet. A sprite sheet is a series of images (usually\r\n\t * animation frames) combined into a larger image (or images). For example, an animation consisting of eight 100x100\r\n\t * images could be combined into a single 400x200 sprite sheet (4 frames across by 2 high).\r\n\t *\r\n\t * The data passed to the SpriteSheet constructor defines:\r\n\t * <ol>\r\n\t * \t<li> The source image or images to use.</li>\r\n\t * \t<li> The positions of individual image frames.</li>\r\n\t * \t<li> Sequences of frames that form named animations. Optional.</li>\r\n\t * \t<li> The target playback framerate. Optional.</li>\r\n\t * </ol>\r\n\t * <h3>SpriteSheet Format</h3>\r\n\t * SpriteSheets are an object with two required properties (`images` and `frames`), and two optional properties\r\n\t * (`framerate` and `animations`). This makes them easy to define in javascript code, or in JSON.\r\n\t *\r\n\t * <h4>images</h4>\r\n\t * An array of source images. Images can be either an HTMlimage\r\n\t * instance, or a uri to an image. The former is recommended to control preloading.\r\n\t *\r\n\t * \timages: [image1, \"path/to/image2.png\"],\r\n\t *\r\n\t * <h4>frames</h4>\r\n\t * Defines the individual frames. There are two supported formats for frame data:\r\n\t * When all of the frames are the same size (in a grid), use an object with `width`, `height`, `regX`, `regY`,\r\n\t * and `count` properties.\r\n\t *\r\n\t * <ul>\r\n\t *  <li>`width` & `height` are required and specify the dimensions of the frames</li>\r\n\t *  <li>`regX` & `regY` indicate the registration point or \"origin\" of the frames</li>\r\n\t *  <li>`spacing` indicate the spacing between frames</li>\r\n\t *  <li>`margin` specify the margin around the image(s)</li>\r\n\t *  <li>`count` allows you to specify the total number of frames in the spritesheet; if omitted, this will\r\n\t *  be calculated based on the dimensions of the source images and the frames. Frames will be assigned\r\n\t *  indexes based on their position in the source images (left to right, top to bottom).</li>\r\n\t * </ul>\r\n\t *\r\n\t *  \tframes: {width:64, height:64, count:20, regX: 32, regY:64, spacing:0, margin:0}\r\n\t *\r\n\t * If the frames are of different sizes, use an array of frame definitions. Each definition is itself an array\r\n\t * with 4 required and 3 optional entries, in the order:\r\n\t *\r\n\t * <ul>\r\n\t *  <li>The first four, `x`, `y`, `width`, and `height` are required and define the frame rectangle.</li>\r\n\t *  <li>The fifth, `imageIndex`, specifies the index of the source image (defaults to 0)</li>\r\n\t *  <li>The last two, `regX` and `regY` specify the registration point of the frame</li>\r\n\t * </ul>\r\n\t *\r\n\t * \tframes: [\r\n\t * \t\t// x, y, width, height, imageIndex*, regX*, regY*\r\n\t * \t\t[64, 0, 96, 64],\r\n\t * \t\t[0, 0, 64, 64, 1, 32, 32]\r\n\t * \t\t// etc.\r\n\t * \t]\r\n\t *\r\n\t * <h4>animations</h4>\r\n\t * Optional. An object defining sequences of frames to play as named animations. Each property corresponds to an\r\n\t * animation of the same name. Each animation must specify the frames to play, and may\r\n\t * also include a relative playback `speed` (ex. 2 would playback at double speed, 0.5 at half), and\r\n\t * the name of the `next` animation to sequence to after it completes.\r\n\t *\r\n\t * There are three formats supported for defining the frames in an animation, which can be mixed and matched as appropriate:\r\n\t * <ol>\r\n\t * \t<li>for a single frame animation, you can simply specify the frame index\r\n\t *\r\n\t * \t\tanimations: {\r\n\t * \t\t\tsit: 7\r\n\t * \t\t}\r\n\t *\r\n\t * </li>\r\n\t * <li>\r\n\t *      for an animation of consecutive frames, you can use an array with two required, and two optional entries\r\n\t * \t\tin the order: `start`, `end`, `next`, and `speed`. This will play the frames from start to end inclusive.\r\n\t *\r\n\t * \t\tanimations: {\r\n\t * \t\t\t// start, end, next*, speed*\r\n\t * \t\t\trun: [0, 8],\r\n\t * \t\t\tjump: [9, 12, \"run\", 2]\r\n\t * \t\t}\r\n\t *\r\n\t *  </li>\r\n\t *  <li>\r\n\t *     for non-consecutive frames, you can use an object with a `frames` property defining an array of frame\r\n\t *     indexes to play in order. The object can also specify `next` and `speed` properties.\r\n\t *\r\n\t * \t\tanimations: {\r\n\t * \t\t\twalk: {\r\n\t * \t\t\t\tframes: [1,2,3,3,2,1]\r\n\t * \t\t\t},\r\n\t * \t\t\tshoot: {\r\n\t * \t\t\t\tframes: [1,4,5,6],\r\n\t * \t\t\t\tnext: \"walk\",\r\n\t * \t\t\t\tspeed: 0.5\r\n\t * \t\t\t}\r\n\t * \t\t}\r\n\t *\r\n\t *  </li>\r\n\t * </ol>\r\n\t * <strong>Note:</strong> the `speed` property was added in EaselJS 0.7.0. Earlier versions had a `frequency`\r\n\t * property instead, which was the inverse of `speed`. For example, a value of \"4\" would be 1/4 normal speed in\r\n\t * earlier versions, but is 4x normal speed in EaselJS 0.7.0+.\r\n\t *\r\n\t * <h4>framerate</h4>\r\n\t * Optional. Indicates the default framerate to play this spritesheet at in frames per second. See\r\n\t * {{#crossLink \"SpriteSheet/framerate:property\"}}{{/crossLink}} for more information.\r\n\t *\r\n\t * \t\tframerate: 20\r\n\t *\r\n\t * Note that the Sprite framerate will only work if the stage update method is provided with the {{#crossLink \"Ticker/tick:event\"}}{{/crossLink}}\r\n\t * event generated by the {{#crossLink \"Ticker\"}}{{/crossLink}}.\r\n\t *\r\n\t * \t\tcreatejs.Ticker.on(\"tick\", handleTick);\r\n\t * \t\tfunction handleTick(event) {\r\n\t *\t\t\tstage.update(event);\r\n\t *\t\t}\r\n\t *\r\n\t * <h3>Example</h3>\r\n\t * To define a simple sprite sheet, with a single image \"sprites.jpg\" arranged in a regular 50x50 grid with three\r\n\t * animations: \"stand\" showing the first frame, \"run\" looping frame 1-5 inclusive, and \"jump\" playing frame 6-8 and\r\n\t * sequencing back to run.\r\n\t *\r\n\t * \t\tvar data = {\r\n\t * \t\t\timages: [\"sprites.jpg\"],\r\n\t * \t\t\tframes: {width:50, height:50},\r\n\t * \t\t\tanimations: {\r\n\t * \t\t\t\tstand:0,\r\n\t * \t\t\t\trun:[1,5],\r\n\t * \t\t\t\tjump:[6,8,\"run\"]\r\n\t * \t\t\t}\r\n\t * \t\t};\r\n\t * \t\tvar spriteSheet = new createjs.SpriteSheet(data);\r\n\t * \t\tvar animation = new createjs.Sprite(spriteSheet, \"run\");\r\n\t *\r\n\t * <h3>Generating SpriteSheet Images</h3>\r\n\t * Spritesheets can be created manually by combining images in PhotoShop, and specifying the frame size or\r\n\t * coordinates manually, however there are a number of tools that facilitate this.\r\n\t * <ul>\r\n\t *     <li>Exporting SpriteSheets or HTML5 content from Flash Pro supports the EaselJS SpriteSheet format.</li>\r\n\t *     <li>The popular <a href=\"https://www.codeandweb.com/texturepacker/easeljs\" target=\"_blank\">Texture Packer</a> has\r\n\t *     EaselJS support.\r\n\t *     <li>SWF animations in Flash can be exported to SpriteSheets using <a href=\"http://createjs.com/zoe\" target=\"_blank\"></a></li>\r\n\t * </ul>\r\n\t *\r\n\t * <h3>Cross Origin Issues</h3>\r\n\t * <strong>Warning:</strong> Images loaded cross-origin will throw cross-origin security errors when interacted with\r\n\t * using:\r\n\t * <ul>\r\n\t *     <li>a mouse</li>\r\n\t *     <li>methods such as {{#crossLink \"Container/getObjectUnderPoint\"}}{{/crossLink}}</li>\r\n\t *     <li>Filters (see {{#crossLink \"Filter\"}}{{/crossLink}})</li>\r\n\t *     <li>caching (see {{#crossLink \"DisplayObject/cache\"}}{{/crossLink}})</li>\r\n\t * </ul>\r\n\t * You can get around this by setting `crossOrigin` property on your images before passing them to EaselJS, or\r\n\t * setting the `crossOrigin` property on PreloadJS' LoadQueue or LoadItems.\r\n\t *\r\n\t * \t\tvar image = new Image();\r\n\t * \t\timg.crossOrigin=\"Anonymous\";\r\n\t * \t\timg.src = \"http://server-with-CORS-support.com/path/to/image.jpg\";\r\n\t *\r\n\t * If you pass string paths to SpriteSheets, they will not work cross-origin. The server that stores the image must\r\n\t * support cross-origin requests, or this will not work. For more information, check out\r\n\t * <a href=\"https://developer.mozilla.org/en-US/docs/Web/HTTP/Access_control_CORS\" target=\"_blank\">CORS overview on MDN</a>.\r\n\t *\r\n\t * @class SpriteSheet\r\n\t * @constructor\r\n\t * @param {Object} data An object describing the SpriteSheet data.\r\n\t * @extends EventDispatcher\r\n\t **/\r\n\tfunction SpriteSheet(data) {\r\n\t\tthis.EventDispatcher_constructor();\r\n\r\n\r\n\t\t// public properties:\r\n\t\t/**\r\n\t\t * Indicates whether all images are finished loading.\r\n\t\t * @property complete\r\n\t\t * @type Boolean\r\n\t\t * @readonly\r\n\t\t **/\r\n\t\tthis.complete = true;\r\n\r\n\t\t/**\r\n\t\t * Specifies the framerate to use by default for Sprite instances using the SpriteSheet. See the Sprite class\r\n\t\t * {{#crossLink \"Sprite/framerate:property\"}}{{/crossLink}} for more information.\r\n\t\t * @property framerate\r\n\t\t * @type Number\r\n\t\t **/\r\n\t\tthis.framerate = 0;\r\n\r\n\r\n\t\t// private properties:\r\n\t\t/**\r\n\t\t * @property _animations\r\n\t\t * @protected\r\n\t\t * @type Array\r\n\t\t **/\r\n\t\tthis._animations = null;\r\n\r\n\t\t/**\r\n\t\t * @property _frames\r\n\t\t * @protected\r\n\t\t * @type Array\r\n\t\t **/\r\n\t\tthis._frames = null;\r\n\r\n\t\t/**\r\n\t\t * @property _images\r\n\t\t * @protected\r\n\t\t * @type Array\r\n\t\t **/\r\n\t\tthis._images = null;\r\n\r\n\t\t/**\r\n\t\t * @property _data\r\n\t\t * @protected\r\n\t\t * @type Object\r\n\t\t **/\r\n\t\tthis._data = null;\r\n\r\n\t\t/**\r\n\t\t * @property _loadCount\r\n\t\t * @protected\r\n\t\t * @type Number\r\n\t\t **/\r\n\t\tthis._loadCount = 0;\r\n\r\n\t\t// only used for simple frame defs:\r\n\t\t/**\r\n\t\t * @property _frameHeight\r\n\t\t * @protected\r\n\t\t * @type Number\r\n\t\t **/\r\n\t\tthis._frameHeight = 0;\r\n\r\n\t\t/**\r\n\t\t * @property _frameWidth\r\n\t\t * @protected\r\n\t\t * @type Number\r\n\t\t **/\r\n\t\tthis._frameWidth = 0;\r\n\r\n\t\t/**\r\n\t\t * @property _numFrames\r\n\t\t * @protected\r\n\t\t * @type Number\r\n\t\t **/\r\n\t\tthis._numFrames = 0;\r\n\r\n\t\t/**\r\n\t\t * @property _regX\r\n\t\t * @protected\r\n\t\t * @type Number\r\n\t\t **/\r\n\t\tthis._regX = 0;\r\n\r\n\t\t/**\r\n\t\t * @property _regY\r\n\t\t * @protected\r\n\t\t * @type Number\r\n\t\t **/\r\n\t\tthis._regY = 0;\r\n\r\n\t\t/**\r\n\t\t * @property _spacing\r\n\t\t * @protected\r\n\t\t * @type Number\r\n\t\t **/\r\n\t\tthis._spacing = 0;\r\n\r\n\t\t/**\r\n\t\t * @property _margin\r\n\t\t * @protected\r\n\t\t * @type Number\r\n\t\t **/\r\n\t\tthis._margin = 0;\r\n\r\n\t\t// setup:\r\n\t\tthis._parseData(data);\r\n\t}\r\n\tvar p = createjs.extend(SpriteSheet, createjs.EventDispatcher);\r\n\r\n\t// TODO: deprecated\r\n\t// p.initialize = function() {}; // searchable for devs wondering where it is. REMOVED. See docs for details.\r\n\r\n\r\n// events:\r\n\t/**\r\n\t * Dispatched when all images are loaded.  Note that this only fires if the images\r\n\t * were not fully loaded when the sprite sheet was initialized. You should check the complete property\r\n\t * to prior to adding a listener. Ex.\r\n\t *\r\n\t * \tvar sheet = new createjs.SpriteSheet(data);\r\n\t * \tif (!sheet.complete) {\r\n\t * \t\t// not preloaded, listen for the complete event:\r\n\t * \t\tsheet.addEventListener(\"complete\", handler);\r\n\t * \t}\r\n\t *\r\n\t * @event complete\r\n\t * @param {Object} target The object that dispatched the event.\r\n\t * @param {String} type The event type.\r\n\t * @since 0.6.0\r\n\t */\r\n\r\n\t/**\r\n\t * Dispatched when getFrame is called with a valid frame index. This is primarily intended for use by {{#crossLink \"SpriteSheetBuilder\"}}{{/crossLink}}\r\n\t * when doing on-demand rendering.\r\n\t * @event getframe\r\n\t * @param {Number} index The frame index.\r\n\t * @param {Object} frame The frame object that getFrame will return.\r\n\t */\r\n\r\n\t/**\r\n\t * Dispatched when an image encounters an error. A SpriteSheet will dispatch an error event for each image that\r\n\t * encounters an error, and will still dispatch a {{#crossLink \"SpriteSheet/complete:event\"}}{{/crossLink}}\r\n\t * event once all images are finished processing, even if an error is encountered.\r\n\t * @event error\r\n\t * @param {String} src The source of the image that failed to load.\r\n\t * @since 0.8.2\r\n\t */\r\n\r\n\r\n// getter / setters:\r\n\t/**\r\n\t * Use the {{#crossLink \"SpriteSheet/animations:property\"}}{{/crossLink}} property instead.\r\n\t * @method getAnimations\r\n\t * @return {Array}\r\n\t * @deprecated\r\n\t **/\r\n\tp.getAnimations = function() {\r\n\t\treturn this._animations.slice();\r\n\t};\r\n\r\n\t/**\r\n\t * Returns an array of all available animation names available on this sprite sheet as strings.\r\n\t * @property animations\r\n\t * @type {Array}\r\n\t * @readonly\r\n\t **/\r\n\ttry {\r\n\t\tObject.defineProperties(p, {\r\n\t\t\tanimations: { get: p.getAnimations }\r\n\t\t});\r\n\t} catch (e) {}\r\n\r\n\r\n// public methods:\r\n\t/**\r\n\t * Returns the total number of frames in the specified animation, or in the whole sprite\r\n\t * sheet if the animation param is omitted. Returns 0 if the spritesheet relies on calculated frame counts, and\r\n\t * the images have not been fully loaded.\r\n\t * @method getNumFrames\r\n\t * @param {String} animation The name of the animation to get a frame count for.\r\n\t * @return {Number} The number of frames in the animation, or in the entire sprite sheet if the animation param is omitted.\r\n\t */\r\n\tp.getNumFrames = function(animation) {\r\n\t\tif (animation == null) {\r\n\t\t\treturn this._frames ? this._frames.length : this._numFrames || 0;\r\n\t\t} else {\r\n\t\t\tvar data = this._data[animation];\r\n\t\t\tif (data == null) { return 0; }\r\n\t\t\telse { return data.frames.length; }\r\n\t\t}\r\n\t};\r\n\r\n\t/**\r\n\t * Returns an object defining the specified animation. The returned object contains:<UL>\r\n\t * \t<li>frames: an array of the frame ids in the animation</li>\r\n\t * \t<li>speed: the playback speed for this animation</li>\r\n\t * \t<li>name: the name of the animation</li>\r\n\t * \t<li>next: the default animation to play next. If the animation loops, the name and next property will be the\r\n\t * \tsame.</li>\r\n\t * </UL>\r\n\t * @method getAnimation\r\n\t * @param {String} name The name of the animation to get.\r\n\t * @return {Object} a generic object with frames, speed, name, and next properties.\r\n\t **/\r\n\tp.getAnimation = function(name) {\r\n\t\treturn this._data[name];\r\n\t};\r\n\r\n\t/**\r\n\t * Returns an object specifying the image and source rect of the specified frame. The returned object has:<UL>\r\n\t * \t<li>an image property holding a reference to the image object in which the frame is found</li>\r\n\t * \t<li>a rect property containing a Rectangle instance which defines the boundaries for the frame within that\r\n\t * \timage.</li>\r\n\t * \t<li> A regX and regY property corresponding to the regX/Y values for the frame.\r\n\t * </UL>\r\n\t * @method getFrame\r\n\t * @param {Number} frameIndex The index of the frame.\r\n\t * @return {Object} a generic object with image and rect properties. Returns null if the frame does not exist.\r\n\t **/\r\n\tp.getFrame = function(frameIndex) {\r\n\t\tvar frame;\r\n\t\tif (this._frames && (frame=this._frames[frameIndex])) { return frame; }\r\n\t\treturn null;\r\n\t};\r\n\r\n\t/**\r\n\t * Returns a {{#crossLink \"Rectangle\"}}{{/crossLink}} instance defining the bounds of the specified frame relative\r\n\t * to the origin. For example, a 90 x 70 frame with a regX of 50 and a regY of 40 would return:\r\n\t *\r\n\t * \t[x=-50, y=-40, width=90, height=70]\r\n\t *\r\n\t * @method getFrameBounds\r\n\t * @param {Number} frameIndex The index of the frame.\r\n\t * @param {Rectangle} [rectangle] A Rectangle instance to copy the values into. By default a new instance is created.\r\n\t * @return {Rectangle} A Rectangle instance. Returns null if the frame does not exist, or the image is not fully loaded.\r\n\t **/\r\n\tp.getFrameBounds = function(frameIndex, rectangle) {\r\n\t\tvar frame = this.getFrame(frameIndex);\r\n\t\treturn frame ? (rectangle||new createjs.Rectangle()).setValues(-frame.regX, -frame.regY, frame.rect.width, frame.rect.height) : null;\r\n\t};\r\n\r\n\t/**\r\n\t * Returns a string representation of this object.\r\n\t * @method toString\r\n\t * @return {String} a string representation of the instance.\r\n\t **/\r\n\tp.toString = function() {\r\n\t\treturn \"[SpriteSheet]\";\r\n\t};\r\n\r\n\t/**\r\n\t * SpriteSheet cannot be cloned. A SpriteSheet can be shared by multiple Sprite instances without cloning it.\r\n\t * @method clone\r\n\t **/\r\n\tp.clone = function() {\r\n\t\tthrow(\"SpriteSheet cannot be cloned.\")\r\n\t};\r\n\r\n// private methods:\r\n\t/**\r\n\t * @method _parseData\r\n\t * @param {Object} data An object describing the SpriteSheet data.\r\n\t * @protected\r\n\t **/\r\n\tp._parseData = function(data) {\r\n\t\tvar i,l,o,a;\r\n\t\tif (data == null) { return; }\r\n\r\n\t\tthis.framerate = data.framerate||0;\r\n\r\n\t\t// parse images:\r\n\t\tif (data.images && (l=data.images.length) > 0) {\r\n\t\t\ta = this._images = [];\r\n\t\t\tfor (i=0; i<l; i++) {\r\n\t\t\t\tvar img = data.images[i];\r\n\t\t\t\tif (typeof img == \"string\") {\r\n\t\t\t\t\tvar src = img;\r\n\t\t\t\t\timg = document.createElement(\"img\");\r\n\t\t\t\t\timg.src = src;\r\n\t\t\t\t}\r\n\t\t\t\ta.push(img);\r\n\t\t\t\tif (!img.getContext && !img.naturalWidth) {\r\n\t\t\t\t\tthis._loadCount++;\r\n\t\t\t\t\tthis.complete = false;\r\n\t\t\t\t\t(function(o, src) { img.onload = function() { o._handleImageLoad(src); } })(this, src);\r\n\t\t\t\t\t(function(o, src) { img.onerror = function() { o._handleImageError(src); } })(this, src);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// parse frames:\r\n\t\tif (data.frames == null) { // nothing\r\n\t\t} else if (Array.isArray(data.frames)) {\r\n\t\t\tthis._frames = [];\r\n\t\t\ta = data.frames;\r\n\t\t\tfor (i=0,l=a.length;i<l;i++) {\r\n\t\t\t\tvar arr = a[i];\r\n\t\t\t\tthis._frames.push({image:this._images[arr[4]?arr[4]:0], rect:new createjs.Rectangle(arr[0],arr[1],arr[2],arr[3]), regX:arr[5]||0, regY:arr[6]||0 });\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\to = data.frames;\r\n\t\t\tthis._frameWidth = o.width;\r\n\t\t\tthis._frameHeight = o.height;\r\n\t\t\tthis._regX = o.regX||0;\r\n\t\t\tthis._regY = o.regY||0;\r\n\t\t\tthis._spacing = o.spacing||0;\r\n\t\t\tthis._margin = o.margin||0;\r\n\t\t\tthis._numFrames = o.count;\r\n\t\t\tif (this._loadCount == 0) { this._calculateFrames(); }\r\n\t\t}\r\n\r\n\t\t// parse animations:\r\n\t\tthis._animations = [];\r\n\t\tif ((o=data.animations) != null) {\r\n\t\t\tthis._data = {};\r\n\t\t\tvar name;\r\n\t\t\tfor (name in o) {\r\n\t\t\t\tvar anim = {name:name};\r\n\t\t\t\tvar obj = o[name];\r\n\t\t\t\tif (typeof obj == \"number\") { // single frame\r\n\t\t\t\t\ta = anim.frames = [obj];\r\n\t\t\t\t} else if (Array.isArray(obj)) { // simple\r\n\t\t\t\t\tif (obj.length == 1) { anim.frames = [obj[0]]; }\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\tanim.speed = obj[3];\r\n\t\t\t\t\t\tanim.next = obj[2];\r\n\t\t\t\t\t\ta = anim.frames = [];\r\n\t\t\t\t\t\tfor (i=obj[0];i<=obj[1];i++) {\r\n\t\t\t\t\t\t\ta.push(i);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t} else { // complex\r\n\t\t\t\t\tanim.speed = obj.speed;\r\n\t\t\t\t\tanim.next = obj.next;\r\n\t\t\t\t\tvar frames = obj.frames;\r\n\t\t\t\t\ta = anim.frames = (typeof frames == \"number\") ? [frames] : frames.slice(0);\r\n\t\t\t\t}\r\n\t\t\t\tif (anim.next === true || anim.next === undefined) { anim.next = name; } // loop\r\n\t\t\t\tif (anim.next === false || (a.length < 2 && anim.next == name)) { anim.next = null; } // stop\r\n\t\t\t\tif (!anim.speed) { anim.speed = 1; }\r\n\t\t\t\tthis._animations.push(name);\r\n\t\t\t\tthis._data[name] = anim;\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\t/**\r\n\t * @method _handleImageLoad\r\n\t * @protected\r\n\t **/\r\n\tp._handleImageLoad = function(src) {\r\n\t\tif (--this._loadCount == 0) {\r\n\t\t\tthis._calculateFrames();\r\n\t\t\tthis.complete = true;\r\n\t\t\tthis.dispatchEvent(\"complete\");\r\n\t\t}\r\n\t};\r\n\r\n\t/**\r\n\t * @method _handleImageError\r\n\t * @protected\r\n\t */\r\n\tp._handleImageError = function (src) {\r\n\t\tvar errorEvent = new createjs.Event(\"error\");\r\n\t\terrorEvent.src = src;\r\n\t\tthis.dispatchEvent(errorEvent);\r\n\r\n\t\t// Complete is still dispatched.\r\n\t\tif (--this._loadCount == 0) {\r\n\t\t\tthis.dispatchEvent(\"complete\");\r\n\t\t}\r\n\t};\r\n\r\n\t/**\r\n\t * @method _calculateFrames\r\n\t * @protected\r\n\t **/\r\n\tp._calculateFrames = function() {\r\n\t\tif (this._frames || this._frameWidth == 0) { return; }\r\n\r\n\t\tthis._frames = [];\r\n\r\n\t\tvar maxFrames = this._numFrames || 100000; // if we go over this, something is wrong.\r\n\t\tvar frameCount = 0, frameWidth = this._frameWidth, frameHeight = this._frameHeight;\r\n\t\tvar spacing = this._spacing, margin = this._margin;\r\n\t\t\r\n\t\timgLoop:\r\n\t\tfor (var i=0, imgs=this._images; i<imgs.length; i++) {\r\n\t\t\tvar img = imgs[i], imgW = img.width, imgH = img.height;\r\n\r\n\t\t\tvar y = margin;\r\n\t\t\twhile (y <= imgH-margin-frameHeight) {\r\n\t\t\t\tvar x = margin;\r\n\t\t\t\twhile (x <= imgW-margin-frameWidth) {\r\n\t\t\t\t\tif (frameCount >= maxFrames) { break imgLoop; }\r\n\t\t\t\t\tframeCount++;\r\n\t\t\t\t\tthis._frames.push({\r\n\t\t\t\t\t\t\timage: img,\r\n\t\t\t\t\t\t\trect: new createjs.Rectangle(x, y, frameWidth, frameHeight),\r\n\t\t\t\t\t\t\tregX: this._regX,\r\n\t\t\t\t\t\t\tregY: this._regY\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\tx += frameWidth+spacing;\r\n\t\t\t\t}\r\n\t\t\t\ty += frameHeight+spacing;\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis._numFrames = frameCount;\r\n\t};\r\n\r\n\r\n\tcreatejs.SpriteSheet = createjs.promote(SpriteSheet, \"EventDispatcher\");\r\n}());\r\n\r\n//##############################################################################\r\n// Graphics.js\r\n//##############################################################################\r\n\r\nthis.createjs = this.createjs||{};\r\n\r\n(function() {\r\n\t\"use strict\";\r\n\r\n\r\n// constructor:\r\n\t/**\r\n\t * The Graphics class exposes an easy to use API for generating vector drawing instructions and drawing them to a\r\n\t * specified context. Note that you can use Graphics without any dependency on the EaselJS framework by calling {{#crossLink \"Graphics/draw\"}}{{/crossLink}}\r\n\t * directly, or it can be used with the {{#crossLink \"Shape\"}}{{/crossLink}} object to draw vector graphics within the\r\n\t * context of an EaselJS display list.\r\n\t *\r\n\t * There are two approaches to working with Graphics object: calling methods on a Graphics instance (the \"Graphics API\"), or\r\n\t * instantiating Graphics command objects and adding them to the graphics queue via {{#crossLink \"Graphics/append\"}}{{/crossLink}}.\r\n\t * The former abstracts the latter, simplifying beginning and ending paths, fills, and strokes.\r\n\t *\r\n\t *      var g = new createjs.Graphics();\r\n\t *      g.setStrokeStyle(1);\r\n\t *      g.beginStroke(\"#000000\");\r\n\t *      g.beginFill(\"red\");\r\n\t *      g.drawCircle(0,0,30);\r\n\t *\r\n\t * All drawing methods in Graphics return the Graphics instance, so they can be chained together. For example,\r\n\t * the following line of code would generate the instructions to draw a rectangle with a red stroke and blue fill:\r\n\t *\r\n\t *      myGraphics.beginStroke(\"red\").beginFill(\"blue\").drawRect(20, 20, 100, 50);\r\n\t *\r\n\t * Each graphics API call generates a command object (see below). The last command to be created can be accessed via\r\n\t * {{#crossLink \"Graphics/command:property\"}}{{/crossLink}}:\r\n\t *\r\n\t *      var fillCommand = myGraphics.beginFill(\"red\").command;\r\n\t *      // ... later, update the fill style/color:\r\n\t *      fillCommand.style = \"blue\";\r\n\t *      // or change it to a bitmap fill:\r\n\t *      fillCommand.bitmap(myImage);\r\n\t *\r\n\t * For more direct control of rendering, you can instantiate and append command objects to the graphics queue directly. In this case, you\r\n\t * need to manage path creation manually, and ensure that fill/stroke is applied to a defined path:\r\n\t *\r\n\t *      // start a new path. Graphics.beginCmd is a reusable BeginPath instance:\r\n\t *      myGraphics.append(createjs.Graphics.beginCmd);\r\n\t *      // we need to define the path before applying the fill:\r\n\t *      var circle = new createjs.Graphics.Circle(0,0,30);\r\n\t *      myGraphics.append(circle);\r\n\t *      // fill the path we just defined:\r\n\t *      var fill = new createjs.Graphics.Fill(\"red\");\r\n\t *      myGraphics.append(fill);\r\n\t *\r\n\t * These approaches can be used together, for example to insert a custom command:\r\n\t *\r\n\t *      myGraphics.beginFill(\"red\");\r\n\t *      var customCommand = new CustomSpiralCommand(etc);\r\n\t *      myGraphics.append(customCommand);\r\n\t *      myGraphics.beginFill(\"blue\");\r\n\t *      myGraphics.drawCircle(0, 0, 30);\r\n\t *\r\n\t * See {{#crossLink \"Graphics/append\"}}{{/crossLink}} for more info on creating custom commands.\r\n\t *\r\n\t * <h4>Tiny API</h4>\r\n\t * The Graphics class also includes a \"tiny API\", which is one or two-letter methods that are shortcuts for all of the\r\n\t * Graphics methods. These methods are great for creating compact instructions, and is used by the Toolkit for CreateJS\r\n\t * to generate readable code. All tiny methods are marked as protected, so you can view them by enabling protected\r\n\t * descriptions in the docs.\r\n\t *\r\n\t * <table>\r\n\t *     <tr><td><b>Tiny</b></td><td><b>Method</b></td><td><b>Tiny</b></td><td><b>Method</b></td></tr>\r\n\t *     <tr><td>mt</td><td>{{#crossLink \"Graphics/moveTo\"}}{{/crossLink}} </td>\r\n\t *     <td>lt</td> <td>{{#crossLink \"Graphics/lineTo\"}}{{/crossLink}}</td></tr>\r\n\t *     <tr><td>a/at</td><td>{{#crossLink \"Graphics/arc\"}}{{/crossLink}} / {{#crossLink \"Graphics/arcTo\"}}{{/crossLink}} </td>\r\n\t *     <td>bt</td><td>{{#crossLink \"Graphics/bezierCurveTo\"}}{{/crossLink}} </td></tr>\r\n\t *     <tr><td>qt</td><td>{{#crossLink \"Graphics/quadraticCurveTo\"}}{{/crossLink}} (also curveTo)</td>\r\n\t *     <td>r</td><td>{{#crossLink \"Graphics/rect\"}}{{/crossLink}} </td></tr>\r\n\t *     <tr><td>cp</td><td>{{#crossLink \"Graphics/closePath\"}}{{/crossLink}} </td>\r\n\t *     <td>c</td><td>{{#crossLink \"Graphics/clear\"}}{{/crossLink}} </td></tr>\r\n\t *     <tr><td>f</td><td>{{#crossLink \"Graphics/beginFill\"}}{{/crossLink}} </td>\r\n\t *     <td>lf</td><td>{{#crossLink \"Graphics/beginLinearGradientFill\"}}{{/crossLink}} </td></tr>\r\n\t *     <tr><td>rf</td><td>{{#crossLink \"Graphics/beginRadialGradientFill\"}}{{/crossLink}} </td>\r\n\t *     <td>bf</td><td>{{#crossLink \"Graphics/beginBitmapFill\"}}{{/crossLink}} </td></tr>\r\n\t *     <tr><td>ef</td><td>{{#crossLink \"Graphics/endFill\"}}{{/crossLink}} </td>\r\n\t *     <td>ss / sd</td><td>{{#crossLink \"Graphics/setStrokeStyle\"}}{{/crossLink}} / {{#crossLink \"Graphics/setStrokeDash\"}}{{/crossLink}} </td></tr>\r\n\t *     <tr><td>s</td><td>{{#crossLink \"Graphics/beginStroke\"}}{{/crossLink}} </td>\r\n\t *     <td>ls</td><td>{{#crossLink \"Graphics/beginLinearGradientStroke\"}}{{/crossLink}} </td></tr>\r\n\t *     <tr><td>rs</td><td>{{#crossLink \"Graphics/beginRadialGradientStroke\"}}{{/crossLink}} </td>\r\n\t *     <td>bs</td><td>{{#crossLink \"Graphics/beginBitmapStroke\"}}{{/crossLink}} </td></tr>\r\n\t *     <tr><td>es</td><td>{{#crossLink \"Graphics/endStroke\"}}{{/crossLink}} </td>\r\n\t *     <td>dr</td><td>{{#crossLink \"Graphics/drawRect\"}}{{/crossLink}} </td></tr>\r\n\t *     <tr><td>rr</td><td>{{#crossLink \"Graphics/drawRoundRect\"}}{{/crossLink}} </td>\r\n\t *     <td>rc</td><td>{{#crossLink \"Graphics/drawRoundRectComplex\"}}{{/crossLink}} </td></tr>\r\n\t *     <tr><td>dc</td><td>{{#crossLink \"Graphics/drawCircle\"}}{{/crossLink}} </td>\r\n\t *     <td>de</td><td>{{#crossLink \"Graphics/drawEllipse\"}}{{/crossLink}} </td></tr>\r\n\t *     <tr><td>dp</td><td>{{#crossLink \"Graphics/drawPolyStar\"}}{{/crossLink}} </td>\r\n\t *     <td>p</td><td>{{#crossLink \"Graphics/decodePath\"}}{{/crossLink}} </td></tr>\r\n\t * </table>\r\n\t *\r\n\t * Here is the above example, using the tiny API instead.\r\n\t *\r\n\t *      myGraphics.s(\"red\").f(\"blue\").r(20, 20, 100, 50);\r\n\t *\r\n\t * @class Graphics\r\n\t * @constructor\r\n\t **/\r\n\tfunction Graphics() {\r\n\r\n\r\n\t// public properties\r\n\t\t/**\r\n\t\t * Holds a reference to the last command that was created or appended. For example, you could retain a reference\r\n\t\t * to a Fill command in order to dynamically update the color later by using:\r\n\t\t *\r\n\t\t * \t\tvar myFill = myGraphics.beginFill(\"red\").command;\r\n\t\t * \t\t// update color later:\r\n\t\t * \t\tmyFill.style = \"yellow\";\r\n\t\t *\r\n\t\t * @property command\r\n\t\t * @type Object\r\n\t\t **/\r\n\t\tthis.command = null;\r\n\r\n\r\n\t// private properties\r\n\t\t/**\r\n\t\t * @property _stroke\r\n\t\t * @protected\r\n\t\t * @type {Stroke}\r\n\t\t **/\r\n\t\tthis._stroke = null;\r\n\r\n\t\t/**\r\n\t\t * @property _strokeStyle\r\n\t\t * @protected\r\n\t\t * @type {StrokeStyle}\r\n\t\t **/\r\n\t\tthis._strokeStyle = null;\r\n\t\t\r\n\t\t/**\r\n\t\t * @property _oldStrokeStyle\r\n\t\t * @protected\r\n\t\t * @type {StrokeStyle}\r\n\t\t **/\r\n\t\tthis._oldStrokeStyle = null;\r\n\t\t\r\n\t\t/**\r\n\t\t * @property _strokeDash\r\n\t\t * @protected\r\n\t\t * @type {StrokeDash}\r\n\t\t **/\r\n\t\tthis._strokeDash = null;\r\n\t\t\r\n\t\t/**\r\n\t\t * @property _oldStrokeDash\r\n\t\t * @protected\r\n\t\t * @type {StrokeDash}\r\n\t\t **/\r\n\t\tthis._oldStrokeDash = null;\r\n\r\n\t\t/**\r\n\t\t * @property _strokeIgnoreScale\r\n\t\t * @protected\r\n\t\t * @type Boolean\r\n\t\t **/\r\n\t\tthis._strokeIgnoreScale = false;\r\n\r\n\t\t/**\r\n\t\t * @property _fill\r\n\t\t * @protected\r\n\t\t * @type {Fill}\r\n\t\t **/\r\n\t\tthis._fill = null;\r\n\r\n\t\t/**\r\n\t\t * @property _instructions\r\n\t\t * @protected\r\n\t\t * @type {Array}\r\n\t\t **/\r\n\t\tthis._instructions = [];\r\n\r\n\t\t/**\r\n\t\t * Indicates the last instruction index that was committed.\r\n\t\t * @property _commitIndex\r\n\t\t * @protected\r\n\t\t * @type {Number}\r\n\t\t **/\r\n\t\tthis._commitIndex = 0;\r\n\r\n\t\t/**\r\n\t\t * Uncommitted instructions.\r\n\t\t * @property _activeInstructions\r\n\t\t * @protected\r\n\t\t * @type {Array}\r\n\t\t **/\r\n\t\tthis._activeInstructions = [];\r\n\r\n\t\t/**\r\n\t\t * This indicates that there have been changes to the activeInstruction list since the last updateInstructions call.\r\n\t\t * @property _dirty\r\n\t\t * @protected\r\n\t\t * @type {Boolean}\r\n\t\t * @default false\r\n\t\t **/\r\n\t\tthis._dirty = false;\r\n\r\n\t\t/**\r\n\t\t * Index to draw from if a store operation has happened.\r\n\t\t * @property _storeIndex\r\n\t\t * @protected\r\n\t\t * @type {Number}\r\n\t\t * @default 0\r\n\t\t **/\r\n\t\tthis._storeIndex = 0;\r\n\r\n\t// setup:\r\n\t\tthis.clear();\r\n\t}\r\n\tvar p = Graphics.prototype;\r\n\tvar G = Graphics; // shortcut\r\n\r\n\t/**\r\n\t * <strong>REMOVED</strong>. Removed in favor of using `MySuperClass_constructor`.\r\n\t * See {{#crossLink \"Utility Methods/extend\"}}{{/crossLink}} and {{#crossLink \"Utility Methods/promote\"}}{{/crossLink}}\r\n\t * for details.\r\n\t *\r\n\t * There is an inheritance tutorial distributed with EaselJS in /tutorials/Inheritance.\r\n\t *\r\n\t * @method initialize\r\n\t * @protected\r\n\t * @deprecated\r\n\t */\r\n\t// p.initialize = function() {}; // searchable for devs wondering where it is.\r\n\r\n\r\n// static public methods:\r\n\t/**\r\n\t * Returns a CSS compatible color string based on the specified RGB numeric color values in the format\r\n\t * \"rgba(255,255,255,1.0)\", or if alpha is null then in the format \"rgb(255,255,255)\". For example,\r\n\t *\r\n\t *      createjs.Graphics.getRGB(50, 100, 150, 0.5);\r\n\t *      // Returns \"rgba(50,100,150,0.5)\"\r\n\t *\r\n\t * It also supports passing a single hex color value as the first param, and an optional alpha value as the second\r\n\t * param. For example,\r\n\t *\r\n\t *      createjs.Graphics.getRGB(0xFF00FF, 0.2);\r\n\t *      // Returns \"rgba(255,0,255,0.2)\"\r\n\t *\r\n\t * @method getRGB\r\n\t * @static\r\n\t * @param {Number} r The red component for the color, between 0 and 0xFF (255).\r\n\t * @param {Number} g The green component for the color, between 0 and 0xFF (255).\r\n\t * @param {Number} b The blue component for the color, between 0 and 0xFF (255).\r\n\t * @param {Number} [alpha] The alpha component for the color where 0 is fully transparent and 1 is fully opaque.\r\n\t * @return {String} A CSS compatible color string based on the specified RGB numeric color values in the format\r\n\t * \"rgba(255,255,255,1.0)\", or if alpha is null then in the format \"rgb(255,255,255)\".\r\n\t **/\r\n\tGraphics.getRGB = function(r, g, b, alpha) {\r\n\t\tif (r != null && b == null) {\r\n\t\t\talpha = g;\r\n\t\t\tb = r&0xFF;\r\n\t\t\tg = r>>8&0xFF;\r\n\t\t\tr = r>>16&0xFF;\r\n\t\t}\r\n\t\tif (alpha == null) {\r\n\t\t\treturn \"rgb(\"+r+\",\"+g+\",\"+b+\")\";\r\n\t\t} else {\r\n\t\t\treturn \"rgba(\"+r+\",\"+g+\",\"+b+\",\"+alpha+\")\";\r\n\t\t}\r\n\t};\r\n\r\n\t/**\r\n\t * Returns a CSS compatible color string based on the specified HSL numeric color values in the format \"hsla(360,100,100,1.0)\",\r\n\t * or if alpha is null then in the format \"hsl(360,100,100)\".\r\n\t *\r\n\t *      createjs.Graphics.getHSL(150, 100, 70);\r\n\t *      // Returns \"hsl(150,100,70)\"\r\n\t *\r\n\t * @method getHSL\r\n\t * @static\r\n\t * @param {Number} hue The hue component for the color, between 0 and 360.\r\n\t * @param {Number} saturation The saturation component for the color, between 0 and 100.\r\n\t * @param {Number} lightness The lightness component for the color, between 0 and 100.\r\n\t * @param {Number} [alpha] The alpha component for the color where 0 is fully transparent and 1 is fully opaque.\r\n\t * @return {String} A CSS compatible color string based on the specified HSL numeric color values in the format\r\n\t * \"hsla(360,100,100,1.0)\", or if alpha is null then in the format \"hsl(360,100,100)\".\r\n\t **/\r\n\tGraphics.getHSL = function(hue, saturation, lightness, alpha) {\r\n\t\tif (alpha == null) {\r\n\t\t\treturn \"hsl(\"+(hue%360)+\",\"+saturation+\"%,\"+lightness+\"%)\";\r\n\t\t} else {\r\n\t\t\treturn \"hsla(\"+(hue%360)+\",\"+saturation+\"%,\"+lightness+\"%,\"+alpha+\")\";\r\n\t\t}\r\n\t};\r\n\r\n\r\n// static properties:\r\n\t/**\r\n\t * A reusable instance of {{#crossLink \"Graphics/BeginPath\"}}{{/crossLink}} to avoid\r\n\t * unnecessary instantiation.\r\n\t * @property beginCmd\r\n\t * @type {Graphics.BeginPath}\r\n\t * @static\r\n\t **/\r\n\t // defined at the bottom of this file.\r\n\r\n\t/**\r\n\t * Map of Base64 characters to values. Used by {{#crossLink \"Graphics/decodePath\"}}{{/crossLink}}.\r\n\t * @property BASE_64\r\n\t * @static\r\n\t * @final\r\n\t * @readonly\r\n\t * @type {Object}\r\n\t **/\r\n\tGraphics.BASE_64 = {\"A\":0,\"B\":1,\"C\":2,\"D\":3,\"E\":4,\"F\":5,\"G\":6,\"H\":7,\"I\":8,\"J\":9,\"K\":10,\"L\":11,\"M\":12,\"N\":13,\"O\":14,\"P\":15,\"Q\":16,\"R\":17,\"S\":18,\"T\":19,\"U\":20,\"V\":21,\"W\":22,\"X\":23,\"Y\":24,\"Z\":25,\"a\":26,\"b\":27,\"c\":28,\"d\":29,\"e\":30,\"f\":31,\"g\":32,\"h\":33,\"i\":34,\"j\":35,\"k\":36,\"l\":37,\"m\":38,\"n\":39,\"o\":40,\"p\":41,\"q\":42,\"r\":43,\"s\":44,\"t\":45,\"u\":46,\"v\":47,\"w\":48,\"x\":49,\"y\":50,\"z\":51,\"0\":52,\"1\":53,\"2\":54,\"3\":55,\"4\":56,\"5\":57,\"6\":58,\"7\":59,\"8\":60,\"9\":61,\"+\":62,\"/\":63};\r\n\r\n\t/**\r\n\t * Maps numeric values for the caps parameter of {{#crossLink \"Graphics/setStrokeStyle\"}}{{/crossLink}} to\r\n\t * corresponding string values. This is primarily for use with the tiny API. The mappings are as follows: 0 to\r\n\t * \"butt\", 1 to \"round\", and 2 to \"square\".\r\n\t * For example, to set the line caps to \"square\":\r\n\t *\r\n\t *      myGraphics.ss(16, 2);\r\n\t *\r\n\t * @property STROKE_CAPS_MAP\r\n\t * @static\r\n\t * @final\r\n\t * @readonly\r\n\t * @type {Array}\r\n\t **/\r\n\tGraphics.STROKE_CAPS_MAP = [\"butt\", \"round\", \"square\"];\r\n\r\n\t/**\r\n\t * Maps numeric values for the joints parameter of {{#crossLink \"Graphics/setStrokeStyle\"}}{{/crossLink}} to\r\n\t * corresponding string values. This is primarily for use with the tiny API. The mappings are as follows: 0 to\r\n\t * \"miter\", 1 to \"round\", and 2 to \"bevel\".\r\n\t * For example, to set the line joints to \"bevel\":\r\n\t *\r\n\t *      myGraphics.ss(16, 0, 2);\r\n\t *\r\n\t * @property STROKE_JOINTS_MAP\r\n\t * @static\r\n\t * @final\r\n\t * @readonly\r\n\t * @type {Array}\r\n\t **/\r\n\tGraphics.STROKE_JOINTS_MAP = [\"miter\", \"round\", \"bevel\"];\r\n\r\n\t/**\r\n\t * @property _ctx\r\n\t * @static\r\n\t * @protected\r\n\t * @type {CanvasRenderingContext2D}\r\n\t **/\r\n\tvar canvas = (createjs.createCanvas?createjs.createCanvas():document.createElement(\"canvas\"));\r\n\tif (canvas.getContext) {\r\n\t\tGraphics._ctx = canvas.getContext(\"2d\");\r\n\t\tcanvas.width = canvas.height = 1;\r\n\t}\r\n\r\n\r\n// getter / setters:\r\n\t/**\r\n\t * Use the {{#crossLink \"Graphics/instructions:property\"}}{{/crossLink}} property instead.\r\n\t * @method getInstructions\r\n\t * @return {Array}\r\n\t * @deprecated\r\n\t **/\r\n\tp.getInstructions = function() {\r\n\t\tthis._updateInstructions();\r\n\t\treturn this._instructions;\r\n\t};\r\n\r\n\t/**\r\n\t * Returns the graphics instructions array. Each entry is a graphics command object (ex. Graphics.Fill, Graphics.Rect)\r\n\t * Modifying the returned array directly is not recommended, and is likely to result in unexpected behaviour.\r\n\t *\r\n\t * This property is mainly intended for introspection of the instructions (ex. for graphics export).\r\n\t * @property instructions\r\n\t * @type {Array}\r\n\t * @readonly\r\n\t **/\r\n\ttry {\r\n\t\tObject.defineProperties(p, {\r\n\t\t\tinstructions: { get: p.getInstructions }\r\n\t\t});\r\n\t} catch (e) {}\r\n\r\n\r\n// public methods:\r\n\t/**\r\n\t * Returns true if this Graphics instance has no drawing commands.\r\n\t * @method isEmpty\r\n\t * @return {Boolean} Returns true if this Graphics instance has no drawing commands.\r\n\t **/\r\n\tp.isEmpty = function() {\r\n\t\treturn !(this._instructions.length || this._activeInstructions.length);\r\n\t};\r\n\r\n\t/**\r\n\t * Draws the display object into the specified context ignoring its visible, alpha, shadow, and transform.\r\n\t * Returns true if the draw was handled (useful for overriding functionality).\r\n\t *\r\n\t * NOTE: This method is mainly for internal use, though it may be useful for advanced uses.\r\n\t * @method draw\r\n\t * @param {CanvasRenderingContext2D} ctx The canvas 2D context object to draw into.\r\n\t * @param {Object} data Optional data that is passed to graphics command exec methods. When called from a Shape instance, the shape passes itself as the data parameter. This can be used by custom graphic commands to insert contextual data.\r\n\t **/\r\n\tp.draw = function(ctx, data) {\r\n\t\tthis._updateInstructions();\r\n\t\tvar instr = this._instructions;\r\n\t\tfor (var i=this._storeIndex, l=instr.length; i<l; i++) {\r\n\t\t\tinstr[i].exec(ctx, data);\r\n\t\t}\r\n\t};\r\n\r\n\t/**\r\n\t * Draws only the path described for this Graphics instance, skipping any non-path instructions, including fill and\r\n\t * stroke descriptions. Used for <code>DisplayObject.mask</code> to draw the clipping path, for example.\r\n\t *\r\n\t * NOTE: This method is mainly for internal use, though it may be useful for advanced uses.\r\n\t * @method drawAsPath\r\n\t * @param {CanvasRenderingContext2D} ctx The canvas 2D context object to draw into.\r\n\t **/\r\n\tp.drawAsPath = function(ctx) {\r\n\t\tthis._updateInstructions();\r\n\t\tvar instr, instrs = this._instructions;\r\n\t\tfor (var i=this._storeIndex, l=instrs.length; i<l; i++) {\r\n\t\t\t// the first command is always a beginPath command.\r\n\t\t\tif ((instr = instrs[i]).path !== false) { instr.exec(ctx); }\r\n\t\t}\r\n\t};\r\n\r\n\r\n// public methods that map directly to context 2D calls:\r\n\t/**\r\n\t * Moves the drawing point to the specified position. A tiny API method \"mt\" also exists.\r\n\t * @method moveTo\r\n\t * @param {Number} x The x coordinate the drawing point should move to.\r\n\t * @param {Number} y The y coordinate the drawing point should move to.\r\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls).\r\n\t * @chainable\r\n\t **/\r\n\tp.moveTo = function(x, y) {\r\n\t\treturn this.append(new G.MoveTo(x,y), true);\r\n\t};\r\n\r\n\t/**\r\n\t * Draws a line from the current drawing point to the specified position, which become the new current drawing\r\n\t * point. Note that you *must* call {{#crossLink \"Graphics/moveTo\"}}{{/crossLink}} before the first `lineTo()`.\r\n\t * A tiny API method \"lt\" also exists.\r\n\t *\r\n\t * For detailed information, read the\r\n\t * <a href=\"http://www.whatwg.org/specs/web-apps/current-work/multipage/the-canvas-element.html#complex-shapes-(paths)\">\r\n\t * whatwg spec</a>.\r\n\t * @method lineTo\r\n\t * @param {Number} x The x coordinate the drawing point should draw to.\r\n\t * @param {Number} y The y coordinate the drawing point should draw to.\r\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\r\n\t * @chainable\r\n\t **/\r\n\tp.lineTo = function(x, y) {\r\n\t\treturn this.append(new G.LineTo(x,y));\r\n\t};\r\n\r\n\t/**\r\n\t * Draws an arc with the specified control points and radius.  For detailed information, read the\r\n\t * <a href=\"http://www.whatwg.org/specs/web-apps/current-work/multipage/the-canvas-element.html#dom-context-2d-arcto\">\r\n\t * whatwg spec</a>. A tiny API method \"at\" also exists.\r\n\t * @method arcTo\r\n\t * @param {Number} x1\r\n\t * @param {Number} y1\r\n\t * @param {Number} x2\r\n\t * @param {Number} y2\r\n\t * @param {Number} radius\r\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\r\n\t * @chainable\r\n\t **/\r\n\tp.arcTo = function(x1, y1, x2, y2, radius) {\r\n\t\treturn this.append(new G.ArcTo(x1, y1, x2, y2, radius));\r\n\t};\r\n\r\n\t/**\r\n\t * Draws an arc defined by the radius, startAngle and endAngle arguments, centered at the position (x, y). For\r\n\t * example, to draw a full circle with a radius of 20 centered at (100, 100):\r\n\t *\r\n\t *      arc(100, 100, 20, 0, Math.PI*2);\r\n\t *\r\n\t * For detailed information, read the\r\n\t * <a href=\"http://www.whatwg.org/specs/web-apps/current-work/multipage/the-canvas-element.html#dom-context-2d-arc\">whatwg spec</a>.\r\n\t * A tiny API method \"a\" also exists.\r\n\t * @method arc\r\n\t * @param {Number} x\r\n\t * @param {Number} y\r\n\t * @param {Number} radius\r\n\t * @param {Number} startAngle Measured in radians.\r\n\t * @param {Number} endAngle Measured in radians.\r\n\t * @param {Boolean} anticlockwise\r\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\r\n\t * @chainable\r\n\t **/\r\n\tp.arc = function(x, y, radius, startAngle, endAngle, anticlockwise) {\r\n\t\treturn this.append(new G.Arc(x, y, radius, startAngle, endAngle, anticlockwise));\r\n\t};\r\n\r\n\t/**\r\n\t * Draws a quadratic curve from the current drawing point to (x, y) using the control point (cpx, cpy). For detailed\r\n\t * information, read the <a href=\"http://www.whatwg.org/specs/web-apps/current-work/multipage/the-canvas-element.html#dom-context-2d-quadraticcurveto\">\r\n\t * whatwg spec</a>. A tiny API method \"qt\" also exists.\r\n\t * @method quadraticCurveTo\r\n\t * @param {Number} cpx\r\n\t * @param {Number} cpy\r\n\t * @param {Number} x\r\n\t * @param {Number} y\r\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\r\n\t * @chainable\r\n\t **/\r\n\tp.quadraticCurveTo = function(cpx, cpy, x, y) {\r\n\t\treturn this.append(new G.QuadraticCurveTo(cpx, cpy, x, y));\r\n\t};\r\n\r\n\t/**\r\n\t * Draws a bezier curve from the current drawing point to (x, y) using the control points (cp1x, cp1y) and (cp2x,\r\n\t * cp2y). For detailed information, read the\r\n\t * <a href=\"http://www.whatwg.org/specs/web-apps/current-work/multipage/the-canvas-element.html#dom-context-2d-beziercurveto\">\r\n\t * whatwg spec</a>. A tiny API method \"bt\" also exists.\r\n\t * @method bezierCurveTo\r\n\t * @param {Number} cp1x\r\n\t * @param {Number} cp1y\r\n\t * @param {Number} cp2x\r\n\t * @param {Number} cp2y\r\n\t * @param {Number} x\r\n\t * @param {Number} y\r\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\r\n\t * @chainable\r\n\t **/\r\n\tp.bezierCurveTo = function(cp1x, cp1y, cp2x, cp2y, x, y) {\r\n\t\treturn this.append(new G.BezierCurveTo(cp1x, cp1y, cp2x, cp2y, x, y));\r\n\t};\r\n\r\n\t/**\r\n\t * Draws a rectangle at (x, y) with the specified width and height using the current fill and/or stroke.\r\n\t * For detailed information, read the\r\n\t * <a href=\"http://www.whatwg.org/specs/web-apps/current-work/multipage/the-canvas-element.html#dom-context-2d-rect\">\r\n\t * whatwg spec</a>. A tiny API method \"r\" also exists.\r\n\t * @method rect\r\n\t * @param {Number} x\r\n\t * @param {Number} y\r\n\t * @param {Number} w Width of the rectangle\r\n\t * @param {Number} h Height of the rectangle\r\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\r\n\t * @chainable\r\n\t **/\r\n\tp.rect = function(x, y, w, h) {\r\n\t\treturn this.append(new G.Rect(x, y, w, h));\r\n\t};\r\n\r\n\t/**\r\n\t * Closes the current path, effectively drawing a line from the current drawing point to the first drawing point specified\r\n\t * since the fill or stroke was last set. A tiny API method \"cp\" also exists.\r\n\t * @method closePath\r\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\r\n\t * @chainable\r\n\t **/\r\n\tp.closePath = function() {\r\n\t\treturn this._activeInstructions.length ? this.append(new G.ClosePath()) : this;\r\n\t};\r\n\r\n\r\n// public methods that roughly map to Flash graphics APIs:\r\n\t/**\r\n\t * Clears all drawing instructions, effectively resetting this Graphics instance. Any line and fill styles will need\r\n\t * to be redefined to draw shapes following a clear call. A tiny API method \"c\" also exists.\r\n\t * @method clear\r\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\r\n\t * @chainable\r\n\t **/\r\n\tp.clear = function() {\r\n\t\tthis._instructions.length = this._activeInstructions.length = this._commitIndex = 0;\r\n\t\tthis._strokeStyle = this._oldStrokeStyle = this._stroke = this._fill = this._strokeDash = this._oldStrokeDash = null;\r\n\t\tthis._dirty = this._strokeIgnoreScale = false;\r\n\t\treturn this;\r\n\t};\r\n\r\n\t/**\r\n\t * Begins a fill with the specified color. This ends the current sub-path. A tiny API method \"f\" also exists.\r\n\t * @method beginFill\r\n\t * @param {String} color A CSS compatible color value (ex. \"red\", \"#FF0000\", or \"rgba(255,0,0,0.5)\"). Setting to\r\n\t * null will result in no fill.\r\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\r\n\t * @chainable\r\n\t **/\r\n\tp.beginFill = function(color) {\r\n\t\treturn this._setFill(color ? new G.Fill(color) : null);\r\n\t};\r\n\r\n\t/**\r\n\t * Begins a linear gradient fill defined by the line (x0, y0) to (x1, y1). This ends the current sub-path. For\r\n\t * example, the following code defines a black to white vertical gradient ranging from 20px to 120px, and draws a\r\n\t * square to display it:\r\n\t *\r\n\t *      myGraphics.beginLinearGradientFill([\"#000\",\"#FFF\"], [0, 1], 0, 20, 0, 120).drawRect(20, 20, 120, 120);\r\n\t *\r\n\t * A tiny API method \"lf\" also exists.\r\n\t * @method beginLinearGradientFill\r\n\t * @param {Array} colors An array of CSS compatible color values. For example, [\"#F00\",\"#00F\"] would define a gradient\r\n\t * drawing from red to blue.\r\n\t * @param {Array} ratios An array of gradient positions which correspond to the colors. For example, [0.1, 0.9] would draw\r\n\t * the first color to 10% then interpolating to the second color at 90%.\r\n\t * @param {Number} x0 The position of the first point defining the line that defines the gradient direction and size.\r\n\t * @param {Number} y0 The position of the first point defining the line that defines the gradient direction and size.\r\n\t * @param {Number} x1 The position of the second point defining the line that defines the gradient direction and size.\r\n\t * @param {Number} y1 The position of the second point defining the line that defines the gradient direction and size.\r\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\r\n\t * @chainable\r\n\t **/\r\n\tp.beginLinearGradientFill = function(colors, ratios, x0, y0, x1, y1) {\r\n\t\treturn this._setFill(new G.Fill().linearGradient(colors, ratios, x0, y0, x1, y1));\r\n\t};\r\n\r\n\t/**\r\n\t * Begins a radial gradient fill. This ends the current sub-path. For example, the following code defines a red to\r\n\t * blue radial gradient centered at (100, 100), with a radius of 50, and draws a circle to display it:\r\n\t *\r\n\t *      myGraphics.beginRadialGradientFill([\"#F00\",\"#00F\"], [0, 1], 100, 100, 0, 100, 100, 50).drawCircle(100, 100, 50);\r\n\t *\r\n\t * A tiny API method \"rf\" also exists.\r\n\t * @method beginRadialGradientFill\r\n\t * @param {Array} colors An array of CSS compatible color values. For example, [\"#F00\",\"#00F\"] would define\r\n\t * a gradient drawing from red to blue.\r\n\t * @param {Array} ratios An array of gradient positions which correspond to the colors. For example, [0.1,\r\n\t * 0.9] would draw the first color to 10% then interpolating to the second color at 90%.\r\n\t * @param {Number} x0 Center position of the inner circle that defines the gradient.\r\n\t * @param {Number} y0 Center position of the inner circle that defines the gradient.\r\n\t * @param {Number} r0 Radius of the inner circle that defines the gradient.\r\n\t * @param {Number} x1 Center position of the outer circle that defines the gradient.\r\n\t * @param {Number} y1 Center position of the outer circle that defines the gradient.\r\n\t * @param {Number} r1 Radius of the outer circle that defines the gradient.\r\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\r\n\t * @chainable\r\n\t **/\r\n\tp.beginRadialGradientFill = function(colors, ratios, x0, y0, r0, x1, y1, r1) {\r\n\t\treturn this._setFill(new G.Fill().radialGradient(colors, ratios, x0, y0, r0, x1, y1, r1));\r\n\t};\r\n\r\n\t/**\r\n\t * Begins a pattern fill using the specified image. This ends the current sub-path. A tiny API method \"bf\" also\r\n\t * exists.\r\n\t * @method beginBitmapFill\r\n\t * @param {HTMLImageElement | HTMLCanvasElement | HTMLVideoElement} image The Image, Canvas, or Video object to use\r\n\t * as the pattern. Must be loaded prior to creating a bitmap fill, or the fill will be empty.\r\n\t * @param {String} repetition Optional. Indicates whether to repeat the image in the fill area. One of \"repeat\",\r\n\t * \"repeat-x\", \"repeat-y\", or \"no-repeat\". Defaults to \"repeat\". Note that Firefox does not support \"repeat-x\" or\r\n\t * \"repeat-y\" (latest tests were in FF 20.0), and will default to \"repeat\".\r\n\t * @param {Matrix2D} matrix Optional. Specifies a transformation matrix for the bitmap fill. This transformation\r\n\t * will be applied relative to the parent transform.\r\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\r\n\t * @chainable\r\n\t **/\r\n\tp.beginBitmapFill = function(image, repetition, matrix) {\r\n\t\treturn this._setFill(new G.Fill(null,matrix).bitmap(image, repetition));\r\n\t};\r\n\r\n\t/**\r\n\t * Ends the current sub-path, and begins a new one with no fill. Functionally identical to <code>beginFill(null)</code>.\r\n\t * A tiny API method \"ef\" also exists.\r\n\t * @method endFill\r\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\r\n\t * @chainable\r\n\t **/\r\n\tp.endFill = function() {\r\n\t\treturn this.beginFill();\r\n\t};\r\n\r\n\t/**\r\n\t * Sets the stroke style. Like all drawing methods, this can be chained, so you can define\r\n\t * the stroke style and color in a single line of code like so:\r\n\t *\r\n\t * \tmyGraphics.setStrokeStyle(8,\"round\").beginStroke(\"#F00\");\r\n\t *\r\n\t * A tiny API method \"ss\" also exists.\r\n\t * @method setStrokeStyle\r\n\t * @param {Number} thickness The width of the stroke.\r\n\t * @param {String | Number} [caps=0] Indicates the type of caps to use at the end of lines. One of butt,\r\n\t * round, or square. Defaults to \"butt\". Also accepts the values 0 (butt), 1 (round), and 2 (square) for use with\r\n\t * the tiny API.\r\n\t * @param {String | Number} [joints=0] Specifies the type of joints that should be used where two lines meet.\r\n\t * One of bevel, round, or miter. Defaults to \"miter\". Also accepts the values 0 (miter), 1 (round), and 2 (bevel)\r\n\t * for use with the tiny API.\r\n\t * @param {Number} [miterLimit=10] If joints is set to \"miter\", then you can specify a miter limit ratio which\r\n\t * controls at what point a mitered joint will be clipped.\r\n\t * @param {Boolean} [ignoreScale=false] If true, the stroke will be drawn at the specified thickness regardless\r\n\t * of active transformations.\r\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\r\n\t * @chainable\r\n\t **/\r\n\tp.setStrokeStyle = function(thickness, caps, joints, miterLimit, ignoreScale) {\r\n\t\tthis._updateInstructions(true);\r\n\t\tthis._strokeStyle = this.command = new G.StrokeStyle(thickness, caps, joints, miterLimit, ignoreScale);\r\n\r\n\t\t// ignoreScale lives on Stroke, not StrokeStyle, so we do a little trickery:\r\n\t\tif (this._stroke) { this._stroke.ignoreScale = ignoreScale; }\r\n\t\tthis._strokeIgnoreScale = ignoreScale;\r\n\t\treturn this;\r\n\t};\r\n\t\r\n\t/**\r\n\t * Sets or clears the stroke dash pattern.\r\n\t *\r\n\t * \tmyGraphics.setStrokeDash([20, 10], 0);\r\n\t *\r\n\t * A tiny API method `sd` also exists.\r\n\t * @method setStrokeDash\r\n\t * @param {Array} [segments] An array specifying the dash pattern, alternating between line and gap.\r\n\t * For example, `[20,10]` would create a pattern of 20 pixel lines with 10 pixel gaps between them.\r\n\t * Passing null or an empty array will clear the existing stroke dash.\r\n\t * @param {Number} [offset=0] The offset of the dash pattern. For example, you could increment this value to create a \"marching ants\" effect.\r\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\r\n\t * @chainable\r\n\t **/\r\n\tp.setStrokeDash = function(segments, offset) {\r\n\t\tthis._updateInstructions(true);\r\n\t\tthis._strokeDash = this.command = new G.StrokeDash(segments, offset);\r\n\t\treturn this;\r\n\t};\r\n\r\n\t/**\r\n\t * Begins a stroke with the specified color. This ends the current sub-path. A tiny API method \"s\" also exists.\r\n\t * @method beginStroke\r\n\t * @param {String} color A CSS compatible color value (ex. \"#FF0000\", \"red\", or \"rgba(255,0,0,0.5)\"). Setting to\r\n\t * null will result in no stroke.\r\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\r\n\t * @chainable\r\n\t **/\r\n\tp.beginStroke = function(color) {\r\n\t\treturn this._setStroke(color ? new G.Stroke(color) : null);\r\n\t};\r\n\r\n\t/**\r\n\t * Begins a linear gradient stroke defined by the line (x0, y0) to (x1, y1). This ends the current sub-path. For\r\n\t * example, the following code defines a black to white vertical gradient ranging from 20px to 120px, and draws a\r\n\t * square to display it:\r\n\t *\r\n\t *      myGraphics.setStrokeStyle(10).\r\n\t *          beginLinearGradientStroke([\"#000\",\"#FFF\"], [0, 1], 0, 20, 0, 120).drawRect(20, 20, 120, 120);\r\n\t *\r\n\t * A tiny API method \"ls\" also exists.\r\n\t * @method beginLinearGradientStroke\r\n\t * @param {Array} colors An array of CSS compatible color values. For example, [\"#F00\",\"#00F\"] would define\r\n\t * a gradient drawing from red to blue.\r\n\t * @param {Array} ratios An array of gradient positions which correspond to the colors. For example, [0.1,\r\n\t * 0.9] would draw the first color to 10% then interpolating to the second color at 90%.\r\n\t * @param {Number} x0 The position of the first point defining the line that defines the gradient direction and size.\r\n\t * @param {Number} y0 The position of the first point defining the line that defines the gradient direction and size.\r\n\t * @param {Number} x1 The position of the second point defining the line that defines the gradient direction and size.\r\n\t * @param {Number} y1 The position of the second point defining the line that defines the gradient direction and size.\r\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\r\n\t * @chainable\r\n\t **/\r\n\tp.beginLinearGradientStroke = function(colors, ratios, x0, y0, x1, y1) {\r\n\t\treturn this._setStroke(new G.Stroke().linearGradient(colors, ratios, x0, y0, x1, y1));\r\n\t};\r\n\r\n\t/**\r\n\t * Begins a radial gradient stroke. This ends the current sub-path. For example, the following code defines a red to\r\n\t * blue radial gradient centered at (100, 100), with a radius of 50, and draws a rectangle to display it:\r\n\t *\r\n\t *      myGraphics.setStrokeStyle(10)\r\n\t *          .beginRadialGradientStroke([\"#F00\",\"#00F\"], [0, 1], 100, 100, 0, 100, 100, 50)\r\n\t *          .drawRect(50, 90, 150, 110);\r\n\t *\r\n\t * A tiny API method \"rs\" also exists.\r\n\t * @method beginRadialGradientStroke\r\n\t * @param {Array} colors An array of CSS compatible color values. For example, [\"#F00\",\"#00F\"] would define\r\n\t * a gradient drawing from red to blue.\r\n\t * @param {Array} ratios An array of gradient positions which correspond to the colors. For example, [0.1,\r\n\t * 0.9] would draw the first color to 10% then interpolating to the second color at 90%, then draw the second color\r\n\t * to 100%.\r\n\t * @param {Number} x0 Center position of the inner circle that defines the gradient.\r\n\t * @param {Number} y0 Center position of the inner circle that defines the gradient.\r\n\t * @param {Number} r0 Radius of the inner circle that defines the gradient.\r\n\t * @param {Number} x1 Center position of the outer circle that defines the gradient.\r\n\t * @param {Number} y1 Center position of the outer circle that defines the gradient.\r\n\t * @param {Number} r1 Radius of the outer circle that defines the gradient.\r\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\r\n\t * @chainable\r\n\t **/\r\n\tp.beginRadialGradientStroke = function(colors, ratios, x0, y0, r0, x1, y1, r1) {\r\n\t\treturn this._setStroke(new G.Stroke().radialGradient(colors, ratios, x0, y0, r0, x1, y1, r1));\r\n\t};\r\n\r\n\t/**\r\n\t * Begins a pattern fill using the specified image. This ends the current sub-path. Note that unlike bitmap fills,\r\n\t * strokes do not currently support a matrix parameter due to limitations in the canvas API. A tiny API method \"bs\"\r\n\t * also exists.\r\n\t * @method beginBitmapStroke\r\n\t * @param {HTMLImageElement | HTMLCanvasElement | HTMLVideoElement} image The Image, Canvas, or Video object to use\r\n\t * as the pattern. Must be loaded prior to creating a bitmap fill, or the fill will be empty.\r\n\t * @param {String} [repetition=repeat] Optional. Indicates whether to repeat the image in the fill area. One of\r\n\t * \"repeat\", \"repeat-x\", \"repeat-y\", or \"no-repeat\". Defaults to \"repeat\".\r\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\r\n\t * @chainable\r\n\t **/\r\n\tp.beginBitmapStroke = function(image, repetition) {\r\n\t\t// NOTE: matrix is not supported for stroke because transforms on strokes also affect the drawn stroke width.\r\n\t\treturn this._setStroke(new G.Stroke().bitmap(image, repetition));\r\n\t};\r\n\r\n\t/**\r\n\t * Ends the current sub-path, and begins a new one with no stroke. Functionally identical to <code>beginStroke(null)</code>.\r\n\t * A tiny API method \"es\" also exists.\r\n\t * @method endStroke\r\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\r\n\t * @chainable\r\n\t **/\r\n\tp.endStroke = function() {\r\n\t\treturn this.beginStroke();\r\n\t};\r\n\r\n\t/**\r\n\t * Maps the familiar ActionScript <code>curveTo()</code> method to the functionally similar {{#crossLink \"Graphics/quadraticCurveTo\"}}{{/crossLink}}\r\n\t * method.\r\n\t * @method quadraticCurveTo\r\n\t * @param {Number} cpx\r\n\t * @param {Number} cpy\r\n\t * @param {Number} x\r\n\t * @param {Number} y\r\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\r\n\t * @chainable\r\n\t **/\r\n\tp.curveTo = p.quadraticCurveTo;\r\n\r\n\t/**\r\n\t *\r\n\t * Maps the familiar ActionScript <code>drawRect()</code> method to the functionally similar {{#crossLink \"Graphics/rect\"}}{{/crossLink}}\r\n\t * method.\r\n\t * @method drawRect\r\n\t * @param {Number} x\r\n\t * @param {Number} y\r\n\t * @param {Number} w Width of the rectangle\r\n\t * @param {Number} h Height of the rectangle\r\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\r\n\t * @chainable\r\n\t **/\r\n\tp.drawRect = p.rect;\r\n\r\n\t/**\r\n\t * Draws a rounded rectangle with all corners with the specified radius.\r\n\t * @method drawRoundRect\r\n\t * @param {Number} x\r\n\t * @param {Number} y\r\n\t * @param {Number} w\r\n\t * @param {Number} h\r\n\t * @param {Number} radius Corner radius.\r\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\r\n\t * @chainable\r\n\t **/\r\n\tp.drawRoundRect = function(x, y, w, h, radius) {\r\n\t\treturn this.drawRoundRectComplex(x, y, w, h, radius, radius, radius, radius);\r\n\t};\r\n\r\n\t/**\r\n\t * Draws a rounded rectangle with different corner radii. Supports positive and negative corner radii. A tiny API\r\n\t * method \"rc\" also exists.\r\n\t * @method drawRoundRectComplex\r\n\t * @param {Number} x The horizontal coordinate to draw the round rect.\r\n\t * @param {Number} y The vertical coordinate to draw the round rect.\r\n\t * @param {Number} w The width of the round rect.\r\n\t * @param {Number} h The height of the round rect.\r\n\t * @param {Number} radiusTL Top left corner radius.\r\n\t * @param {Number} radiusTR Top right corner radius.\r\n\t * @param {Number} radiusBR Bottom right corner radius.\r\n\t * @param {Number} radiusBL Bottom left corner radius.\r\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\r\n\t * @chainable\r\n\t **/\r\n\tp.drawRoundRectComplex = function(x, y, w, h, radiusTL, radiusTR, radiusBR, radiusBL) {\r\n\t\treturn this.append(new G.RoundRect(x, y, w, h, radiusTL, radiusTR, radiusBR, radiusBL));\r\n\t};\r\n\r\n\t/**\r\n\t * Draws a circle with the specified radius at (x, y).\r\n\t *\r\n\t *      var g = new createjs.Graphics();\r\n\t *\t    g.setStrokeStyle(1);\r\n\t *\t    g.beginStroke(createjs.Graphics.getRGB(0,0,0));\r\n\t *\t    g.beginFill(createjs.Graphics.getRGB(255,0,0));\r\n\t *\t    g.drawCircle(0,0,3);\r\n\t *\r\n\t *\t    var s = new createjs.Shape(g);\r\n\t *\t\ts.x = 100;\r\n\t *\t\ts.y = 100;\r\n\t *\r\n\t *\t    stage.addChild(s);\r\n\t *\t    stage.update();\r\n\t *\r\n\t * A tiny API method \"dc\" also exists.\r\n\t * @method drawCircle\r\n\t * @param {Number} x x coordinate center point of circle.\r\n\t * @param {Number} y y coordinate center point of circle.\r\n\t * @param {Number} radius Radius of circle.\r\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\r\n\t * @chainable\r\n\t **/\r\n\tp.drawCircle = function(x, y, radius) {\r\n\t\treturn this.append(new G.Circle(x, y, radius));\r\n\t};\r\n\r\n\t/**\r\n\t * Draws an ellipse (oval) with a specified width (w) and height (h). Similar to {{#crossLink \"Graphics/drawCircle\"}}{{/crossLink}},\r\n\t * except the width and height can be different. A tiny API method \"de\" also exists.\r\n\t * @method drawEllipse\r\n\t * @param {Number} x The left coordinate point of the ellipse. Note that this is different from {{#crossLink \"Graphics/drawCircle\"}}{{/crossLink}}\r\n\t * which draws from center.\r\n\t * @param {Number} y The top coordinate point of the ellipse. Note that this is different from {{#crossLink \"Graphics/drawCircle\"}}{{/crossLink}}\r\n\t * which draws from the center.\r\n\t * @param {Number} w The height (horizontal diameter) of the ellipse. The horizontal radius will be half of this\r\n\t * number.\r\n\t * @param {Number} h The width (vertical diameter) of the ellipse. The vertical radius will be half of this number.\r\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\r\n\t * @chainable\r\n\t **/\r\n\tp.drawEllipse = function(x, y, w, h) {\r\n\t\treturn this.append(new G.Ellipse(x, y, w, h));\r\n\t};\r\n\r\n\t/**\r\n\t * Draws a star if pointSize is greater than 0, or a regular polygon if pointSize is 0 with the specified number of\r\n\t * points. For example, the following code will draw a familiar 5 pointed star shape centered at 100, 100 and with a\r\n\t * radius of 50:\r\n\t *\r\n\t *      myGraphics.beginFill(\"#FF0\").drawPolyStar(100, 100, 50, 5, 0.6, -90);\r\n\t *      // Note: -90 makes the first point vertical\r\n\t *\r\n\t * A tiny API method \"dp\" also exists.\r\n\t *\r\n\t * @method drawPolyStar\r\n\t * @param {Number} x Position of the center of the shape.\r\n\t * @param {Number} y Position of the center of the shape.\r\n\t * @param {Number} radius The outer radius of the shape.\r\n\t * @param {Number} sides The number of points on the star or sides on the polygon.\r\n\t * @param {Number} pointSize The depth or \"pointy-ness\" of the star points. A pointSize of 0 will draw a regular\r\n\t * polygon (no points), a pointSize of 1 will draw nothing because the points are infinitely pointy.\r\n\t * @param {Number} angle The angle of the first point / corner. For example a value of 0 will draw the first point\r\n\t * directly to the right of the center.\r\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\r\n\t * @chainable\r\n\t **/\r\n\tp.drawPolyStar = function(x, y, radius, sides, pointSize, angle) {\r\n\t\treturn this.append(new G.PolyStar(x, y, radius, sides, pointSize, angle));\r\n\t};\r\n\r\n\t// TODO: deprecated.\r\n\t/**\r\n\t * Removed in favour of using custom command objects with {{#crossLink \"Graphics/append\"}}{{/crossLink}}.\r\n\t * @method inject\r\n\t * @deprecated\r\n\t **/\r\n\r\n\t/**\r\n\t * Appends a graphics command object to the graphics queue. Command objects expose an \"exec\" method\r\n\t * that accepts two parameters: the Context2D to operate on, and an arbitrary data object passed into\r\n\t * {{#crossLink \"Graphics/draw\"}}{{/crossLink}}. The latter will usually be the Shape instance that called draw.\r\n\t *\r\n\t * This method is used internally by Graphics methods, such as drawCircle, but can also be used directly to insert\r\n\t * built-in or custom graphics commands. For example:\r\n\t *\r\n\t * \t\t// attach data to our shape, so we can access it during the draw:\r\n\t * \t\tmyShape.color = \"red\";\r\n\t *\r\n\t * \t\t// append a Circle command object:\r\n\t * \t\tmyShape.graphics.append(new createjs.Graphics.Circle(50, 50, 30));\r\n\t *\r\n\t * \t\t// append a custom command object with an exec method that sets the fill style\r\n\t * \t\t// based on the shape's data, and then fills the circle.\r\n\t * \t\tmyShape.graphics.append({exec:function(ctx, shape) {\r\n\t * \t\t\tctx.fillStyle = shape.color;\r\n\t * \t\t\tctx.fill();\r\n\t * \t\t}});\r\n\t *\r\n\t * @method append\r\n\t * @param {Object} command A graphics command object exposing an \"exec\" method.\r\n\t * @param {boolean} clean The clean param is primarily for internal use. A value of true indicates that a command does not generate a path that should be stroked or filled.\r\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\r\n\t * @chainable\r\n\t **/\r\n\tp.append = function(command, clean) {\r\n\t\tthis._activeInstructions.push(command);\r\n\t\tthis.command = command;\r\n\t\tif (!clean) { this._dirty = true; }\r\n\t\treturn this;\r\n\t};\r\n\r\n\t/**\r\n\t * Decodes a compact encoded path string into a series of draw instructions.\r\n\t * This format is not intended to be human readable, and is meant for use by authoring tools.\r\n\t * The format uses a base64 character set, with each character representing 6 bits, to define a series of draw\r\n\t * commands.\r\n\t *\r\n\t * Each command is comprised of a single \"header\" character followed by a variable number of alternating x and y\r\n\t * position values. Reading the header bits from left to right (most to least significant): bits 1 to 3 specify the\r\n\t * type of operation (0-moveTo, 1-lineTo, 2-quadraticCurveTo, 3-bezierCurveTo, 4-closePath, 5-7 unused). Bit 4\r\n\t * indicates whether position values use 12 bits (2 characters) or 18 bits (3 characters), with a one indicating the\r\n\t * latter. Bits 5 and 6 are currently unused.\r\n\t *\r\n\t * Following the header is a series of 0 (closePath), 2 (moveTo, lineTo), 4 (quadraticCurveTo), or 6 (bezierCurveTo)\r\n\t * parameters. These parameters are alternating x/y positions represented by 2 or 3 characters (as indicated by the\r\n\t * 4th bit in the command char). These characters consist of a 1 bit sign (1 is negative, 0 is positive), followed\r\n\t * by an 11 (2 char) or 17 (3 char) bit integer value. All position values are in tenths of a pixel. Except in the\r\n\t * case of move operations which are absolute, this value is a delta from the previous x or y position (as\r\n\t * appropriate).\r\n\t *\r\n\t * For example, the string \"A3cAAMAu4AAA\" represents a line starting at -150,0 and ending at 150,0.\r\n\t * <br />A - bits 000000. First 3 bits (000) indicate a moveTo operation. 4th bit (0) indicates 2 chars per\r\n\t * parameter.\r\n\t * <br />n0 - 110111011100. Absolute x position of -150.0px. First bit indicates a negative value, remaining bits\r\n\t * indicate 1500 tenths of a pixel.\r\n\t * <br />AA - 000000000000. Absolute y position of 0.\r\n\t * <br />I - 001100. First 3 bits (001) indicate a lineTo operation. 4th bit (1) indicates 3 chars per parameter.\r\n\t * <br />Au4 - 000000101110111000. An x delta of 300.0px, which is added to the previous x value of -150.0px to\r\n\t * provide an absolute position of +150.0px.\r\n\t * <br />AAA - 000000000000000000. A y delta value of 0.\r\n\t *\r\n\t * A tiny API method \"p\" also exists.\r\n\t * @method decodePath\r\n\t * @param {String} str The path string to decode.\r\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\r\n\t * @chainable\r\n\t **/\r\n\tp.decodePath = function(str) {\r\n\t\tvar instructions = [this.moveTo, this.lineTo, this.quadraticCurveTo, this.bezierCurveTo, this.closePath];\r\n\t\tvar paramCount = [2, 2, 4, 6, 0];\r\n\t\tvar i=0, l=str.length;\r\n\t\tvar params = [];\r\n\t\tvar x=0, y=0;\r\n\t\tvar base64 = Graphics.BASE_64;\r\n\r\n\t\twhile (i<l) {\r\n\t\t\tvar c = str.charAt(i);\r\n\t\t\tvar n = base64[c];\r\n\t\t\tvar fi = n>>3; // highest order bits 1-3 code for operation.\r\n\t\t\tvar f = instructions[fi];\r\n\t\t\t// check that we have a valid instruction & that the unused bits are empty:\r\n\t\t\tif (!f || (n&3)) { throw(\"bad path data (@\"+i+\"): \"+c); }\r\n\t\t\tvar pl = paramCount[fi];\r\n\t\t\tif (!fi) { x=y=0; } // move operations reset the position.\r\n\t\t\tparams.length = 0;\r\n\t\t\ti++;\r\n\t\t\tvar charCount = (n>>2&1)+2;  // 4th header bit indicates number size for this operation.\r\n\t\t\tfor (var p=0; p<pl; p++) {\r\n\t\t\t\tvar num = base64[str.charAt(i)];\r\n\t\t\t\tvar sign = (num>>5) ? -1 : 1;\r\n\t\t\t\tnum = ((num&31)<<6)|(base64[str.charAt(i+1)]);\r\n\t\t\t\tif (charCount == 3) { num = (num<<6)|(base64[str.charAt(i+2)]); }\r\n\t\t\t\tnum = sign*num/10;\r\n\t\t\t\tif (p%2) { x = (num += x); }\r\n\t\t\t\telse { y = (num += y); }\r\n\t\t\t\tparams[p] = num;\r\n\t\t\t\ti += charCount;\r\n\t\t\t}\r\n\t\t\tf.apply(this,params);\r\n\t\t}\r\n\t\treturn this;\r\n\t};\r\n\r\n\t/**\r\n\t * Stores all graphics commands so they won't be executed in future draws. Calling store() a second time adds to\r\n\t * the existing store. This also affects `drawAsPath()`.\r\n\t *\r\n\t * This is useful in cases where you are creating vector graphics in an iterative manner (ex. generative art), so\r\n\t * that only new graphics need to be drawn (which can provide huge performance benefits), but you wish to retain all\r\n\t * of the vector instructions for later use (ex. scaling, modifying, or exporting).\r\n\t *\r\n\t * Note that calling store() will force the active path (if any) to be ended in a manner similar to changing\r\n\t * the fill or stroke.\r\n\t *\r\n\t * For example, consider a application where the user draws lines with the mouse. As each line segment (or collection of\r\n\t * segments) are added to a Shape, it can be rasterized using {{#crossLink \"DisplayObject/updateCache\"}}{{/crossLink}},\r\n\t * and then stored, so that it can be redrawn at a different scale when the application is resized, or exported to SVG.\r\n\t *\r\n\t * \t// set up cache:\r\n\t * \tmyShape.cache(0,0,500,500,scale);\r\n\t *\r\n\t * \t// when the user drags, draw a new line:\r\n\t * \tmyShape.graphics.moveTo(oldX,oldY).lineTo(newX,newY);\r\n\t * \t// then draw it into the existing cache:\r\n\t * \tmyShape.updateCache(\"source-over\");\r\n\t * \t// store the new line, so it isn't redrawn next time:\r\n\t * \tmyShape.store();\r\n\t *\r\n\t * \t// then, when the window resizes, we can re-render at a different scale:\r\n\t * \t// first, unstore all our lines:\r\n\t * \tmyShape.unstore();\r\n\t * \t// then cache using the new scale:\r\n\t * \tmyShape.cache(0,0,500,500,newScale);\r\n\t * \t// finally, store the existing commands again:\r\n\t * \tmyShape.store();\r\n\t *\r\n\t * @method store\r\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\r\n\t * @chainable\r\n\t **/\r\n\tp.store = function() {\r\n\t\tthis._updateInstructions(true);\r\n\t\tthis._storeIndex = this._instructions.length;\r\n\t\treturn this;\r\n\t};\r\n\r\n\t/**\r\n\t * Unstores any graphics commands that were previously stored using {{#crossLink \"Graphics/store\"}}{{/crossLink}}\r\n\t * so that they will be executed in subsequent draw calls.\r\n\t *\r\n\t * @method unstore\r\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\r\n\t * @chainable\r\n\t **/\r\n\tp.unstore = function() {\r\n\t\tthis._storeIndex = 0;\r\n\t\treturn this;\r\n\t};\r\n\r\n\t/**\r\n\t * Returns a clone of this Graphics instance. Note that the individual command objects are not cloned.\r\n\t * @method clone\r\n\t * @return {Graphics} A clone of the current Graphics instance.\r\n\t **/\r\n\tp.clone = function() {\r\n\t\tvar o = new Graphics();\r\n\t\to.command = this.command;\r\n\t\to._stroke = this._stroke;\r\n\t\to._strokeStyle = this._strokeStyle;\r\n\t\to._strokeDash = this._strokeDash;\r\n\t\to._strokeIgnoreScale = this._strokeIgnoreScale;\r\n\t\to._fill = this._fill;\r\n\t\to._instructions = this._instructions.slice();\r\n\t\to._commitIndex = this._commitIndex;\r\n\t\to._activeInstructions = this._activeInstructions.slice();\r\n\t\to._dirty = this._dirty;\r\n\t\to._storeIndex = this._storeIndex;\r\n\t\treturn o;\r\n\t};\r\n\r\n\t/**\r\n\t * Returns a string representation of this object.\r\n\t * @method toString\r\n\t * @return {String} a string representation of the instance.\r\n\t **/\r\n\tp.toString = function() {\r\n\t\treturn \"[Graphics]\";\r\n\t};\r\n\r\n\r\n// tiny API:\r\n\t/**\r\n\t * Shortcut to moveTo.\r\n\t * @method mt\r\n\t * @param {Number} x The x coordinate the drawing point should move to.\r\n\t * @param {Number} y The y coordinate the drawing point should move to.\r\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls).\r\n\t * @chainable\r\n\t * @protected\r\n\t **/\r\n\tp.mt = p.moveTo;\r\n\r\n\t/**\r\n\t * Shortcut to lineTo.\r\n\t * @method lt\r\n\t * @param {Number} x The x coordinate the drawing point should draw to.\r\n\t * @param {Number} y The y coordinate the drawing point should draw to.\r\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\r\n\t * @chainable\r\n\t * @protected\r\n\t **/\r\n\tp.lt = p.lineTo;\r\n\r\n\t/**\r\n\t * Shortcut to arcTo.\r\n\t * @method at\r\n\t * @param {Number} x1\r\n\t * @param {Number} y1\r\n\t * @param {Number} x2\r\n\t * @param {Number} y2\r\n\t * @param {Number} radius\r\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\r\n\t * @chainable\r\n\t * @protected\r\n\t **/\r\n\tp.at = p.arcTo;\r\n\r\n\t/**\r\n\t * Shortcut to bezierCurveTo.\r\n\t * @method bt\r\n\t * @param {Number} cp1x\r\n\t * @param {Number} cp1y\r\n\t * @param {Number} cp2x\r\n\t * @param {Number} cp2y\r\n\t * @param {Number} x\r\n\t * @param {Number} y\r\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\r\n\t * @chainable\r\n\t * @protected\r\n\t **/\r\n\tp.bt = p.bezierCurveTo;\r\n\r\n\t/**\r\n\t * Shortcut to quadraticCurveTo / curveTo.\r\n\t * @method qt\r\n\t * @param {Number} cpx\r\n\t * @param {Number} cpy\r\n\t * @param {Number} x\r\n\t * @param {Number} y\r\n\t * @protected\r\n\t * @chainable\r\n\t **/\r\n\tp.qt = p.quadraticCurveTo;\r\n\r\n\t/**\r\n\t * Shortcut to arc.\r\n\t * @method a\r\n\t * @param {Number} x\r\n\t * @param {Number} y\r\n\t * @param {Number} radius\r\n\t * @param {Number} startAngle Measured in radians.\r\n\t * @param {Number} endAngle Measured in radians.\r\n\t * @param {Boolean} anticlockwise\r\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\r\n\t * @protected\r\n\t * @chainable\r\n\t **/\r\n\tp.a = p.arc;\r\n\r\n\t/**\r\n\t * Shortcut to rect.\r\n\t * @method r\r\n\t * @param {Number} x\r\n\t * @param {Number} y\r\n\t * @param {Number} w Width of the rectangle\r\n\t * @param {Number} h Height of the rectangle\r\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\r\n\t * @chainable\r\n\t * @protected\r\n\t **/\r\n\tp.r = p.rect;\r\n\r\n\t/**\r\n\t * Shortcut to closePath.\r\n\t * @method cp\r\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\r\n\t * @chainable\r\n\t * @protected\r\n\t **/\r\n\tp.cp = p.closePath;\r\n\r\n\t/**\r\n\t * Shortcut to clear.\r\n\t * @method c\r\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\r\n\t * @chainable\r\n\t * @protected\r\n\t **/\r\n\tp.c = p.clear;\r\n\r\n\t/**\r\n\t * Shortcut to beginFill.\r\n\t * @method f\r\n\t * @param {String} color A CSS compatible color value (ex. \"red\", \"#FF0000\", or \"rgba(255,0,0,0.5)\"). Setting to\r\n\t * null will result in no fill.\r\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\r\n\t * @chainable\r\n\t * @protected\r\n\t **/\r\n\tp.f = p.beginFill;\r\n\r\n\t/**\r\n\t * Shortcut to beginLinearGradientFill.\r\n\t * @method lf\r\n\t * @param {Array} colors An array of CSS compatible color values. For example, [\"#F00\",\"#00F\"] would define a gradient\r\n\t * drawing from red to blue.\r\n\t * @param {Array} ratios An array of gradient positions which correspond to the colors. For example, [0.1, 0.9] would draw\r\n\t * the first color to 10% then interpolating to the second color at 90%.\r\n\t * @param {Number} x0 The position of the first point defining the line that defines the gradient direction and size.\r\n\t * @param {Number} y0 The position of the first point defining the line that defines the gradient direction and size.\r\n\t * @param {Number} x1 The position of the second point defining the line that defines the gradient direction and size.\r\n\t * @param {Number} y1 The position of the second point defining the line that defines the gradient direction and size.\r\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\r\n\t * @chainable\r\n\t * @protected\r\n\t **/\r\n\tp.lf = p.beginLinearGradientFill;\r\n\r\n\t/**\r\n\t * Shortcut to beginRadialGradientFill.\r\n\t * @method rf\r\n\t * @param {Array} colors An array of CSS compatible color values. For example, [\"#F00\",\"#00F\"] would define\r\n\t * a gradient drawing from red to blue.\r\n\t * @param {Array} ratios An array of gradient positions which correspond to the colors. For example, [0.1,\r\n\t * 0.9] would draw the first color to 10% then interpolating to the second color at 90%.\r\n\t * @param {Number} x0 Center position of the inner circle that defines the gradient.\r\n\t * @param {Number} y0 Center position of the inner circle that defines the gradient.\r\n\t * @param {Number} r0 Radius of the inner circle that defines the gradient.\r\n\t * @param {Number} x1 Center position of the outer circle that defines the gradient.\r\n\t * @param {Number} y1 Center position of the outer circle that defines the gradient.\r\n\t * @param {Number} r1 Radius of the outer circle that defines the gradient.\r\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\r\n\t * @chainable\r\n\t * @protected\r\n\t **/\r\n\tp.rf = p.beginRadialGradientFill;\r\n\r\n\t/**\r\n\t * Shortcut to beginBitmapFill.\r\n\t * @method bf\r\n\t * @param {HTMLImageElement | HTMLCanvasElement | HTMLVideoElement} image The Image, Canvas, or Video object to use\r\n\t * as the pattern.\r\n\t * @param {String} repetition Optional. Indicates whether to repeat the image in the fill area. One of \"repeat\",\r\n\t * \"repeat-x\", \"repeat-y\", or \"no-repeat\". Defaults to \"repeat\". Note that Firefox does not support \"repeat-x\" or\r\n\t * \"repeat-y\" (latest tests were in FF 20.0), and will default to \"repeat\".\r\n\t * @param {Matrix2D} matrix Optional. Specifies a transformation matrix for the bitmap fill. This transformation\r\n\t * will be applied relative to the parent transform.\r\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\r\n\t * @chainable\r\n\t * @protected\r\n\t **/\r\n\tp.bf = p.beginBitmapFill;\r\n\r\n\t/**\r\n\t * Shortcut to endFill.\r\n\t * @method ef\r\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\r\n\t * @chainable\r\n\t * @protected\r\n\t **/\r\n\tp.ef = p.endFill;\r\n\r\n\t/**\r\n\t * Shortcut to setStrokeStyle.\r\n\t * @method ss\r\n\t * @param {Number} thickness The width of the stroke.\r\n\t * @param {String | Number} [caps=0] Indicates the type of caps to use at the end of lines. One of butt,\r\n\t * round, or square. Defaults to \"butt\". Also accepts the values 0 (butt), 1 (round), and 2 (square) for use with\r\n\t * the tiny API.\r\n\t * @param {String | Number} [joints=0] Specifies the type of joints that should be used where two lines meet.\r\n\t * One of bevel, round, or miter. Defaults to \"miter\". Also accepts the values 0 (miter), 1 (round), and 2 (bevel)\r\n\t * for use with the tiny API.\r\n\t * @param {Number} [miterLimit=10] If joints is set to \"miter\", then you can specify a miter limit ratio which\r\n\t * controls at what point a mitered joint will be clipped.\r\n\t * @param {Boolean} [ignoreScale=false] If true, the stroke will be drawn at the specified thickness regardless\r\n\t * of active transformations.\r\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\r\n\t * @chainable\r\n\t * @protected\r\n\t **/\r\n\tp.ss = p.setStrokeStyle;\r\n\t\r\n\t/**\r\n\t * Shortcut to setStrokeDash.\r\n\t * @method sd\r\n\t * @param {Array} [segments] An array specifying the dash pattern, alternating between line and gap.\r\n\t * For example, [20,10] would create a pattern of 20 pixel lines with 10 pixel gaps between them.\r\n\t * Passing null or an empty array will clear any existing dash.\r\n\t * @param {Number} [offset=0] The offset of the dash pattern. For example, you could increment this value to create a \"marching ants\" effect.\r\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\r\n\t * @chainable\r\n\t * @protected\r\n\t **/\r\n\tp.sd = p.setStrokeDash;\r\n\r\n\t/**\r\n\t * Shortcut to beginStroke.\r\n\t * @method s\r\n\t * @param {String} color A CSS compatible color value (ex. \"#FF0000\", \"red\", or \"rgba(255,0,0,0.5)\"). Setting to\r\n\t * null will result in no stroke.\r\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\r\n\t * @chainable\r\n\t * @protected\r\n\t **/\r\n\tp.s = p.beginStroke;\r\n\r\n\t/**\r\n\t * Shortcut to beginLinearGradientStroke.\r\n\t * @method ls\r\n\t * @param {Array} colors An array of CSS compatible color values. For example, [\"#F00\",\"#00F\"] would define\r\n\t * a gradient drawing from red to blue.\r\n\t * @param {Array} ratios An array of gradient positions which correspond to the colors. For example, [0.1,\r\n\t * 0.9] would draw the first color to 10% then interpolating to the second color at 90%.\r\n\t * @param {Number} x0 The position of the first point defining the line that defines the gradient direction and size.\r\n\t * @param {Number} y0 The position of the first point defining the line that defines the gradient direction and size.\r\n\t * @param {Number} x1 The position of the second point defining the line that defines the gradient direction and size.\r\n\t * @param {Number} y1 The position of the second point defining the line that defines the gradient direction and size.\r\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\r\n\t * @chainable\r\n\t * @protected\r\n\t **/\r\n\tp.ls = p.beginLinearGradientStroke;\r\n\r\n\t/**\r\n\t * Shortcut to beginRadialGradientStroke.\r\n\t * @method rs\r\n\t * @param {Array} colors An array of CSS compatible color values. For example, [\"#F00\",\"#00F\"] would define\r\n\t * a gradient drawing from red to blue.\r\n\t * @param {Array} ratios An array of gradient positions which correspond to the colors. For example, [0.1,\r\n\t * 0.9] would draw the first color to 10% then interpolating to the second color at 90%, then draw the second color\r\n\t * to 100%.\r\n\t * @param {Number} x0 Center position of the inner circle that defines the gradient.\r\n\t * @param {Number} y0 Center position of the inner circle that defines the gradient.\r\n\t * @param {Number} r0 Radius of the inner circle that defines the gradient.\r\n\t * @param {Number} x1 Center position of the outer circle that defines the gradient.\r\n\t * @param {Number} y1 Center position of the outer circle that defines the gradient.\r\n\t * @param {Number} r1 Radius of the outer circle that defines the gradient.\r\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\r\n\t * @chainable\r\n\t * @protected\r\n\t **/\r\n\tp.rs = p.beginRadialGradientStroke;\r\n\r\n\t/**\r\n\t * Shortcut to beginBitmapStroke.\r\n\t * @method bs\r\n\t * @param {HTMLImageElement | HTMLCanvasElement | HTMLVideoElement} image The Image, Canvas, or Video object to use\r\n\t * as the pattern.\r\n\t * @param {String} [repetition=repeat] Optional. Indicates whether to repeat the image in the fill area. One of\r\n\t * \"repeat\", \"repeat-x\", \"repeat-y\", or \"no-repeat\". Defaults to \"repeat\".\r\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\r\n\t * @chainable\r\n\t * @protected\r\n\t **/\r\n\tp.bs = p.beginBitmapStroke;\r\n\r\n\t/**\r\n\t * Shortcut to endStroke.\r\n\t * @method es\r\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\r\n\t * @chainable\r\n\t * @protected\r\n\t **/\r\n\tp.es = p.endStroke;\r\n\r\n\t/**\r\n\t * Shortcut to drawRect.\r\n\t * @method dr\r\n\t * @param {Number} x\r\n\t * @param {Number} y\r\n\t * @param {Number} w Width of the rectangle\r\n\t * @param {Number} h Height of the rectangle\r\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\r\n\t * @chainable\r\n\t * @protected\r\n\t **/\r\n\tp.dr = p.drawRect;\r\n\r\n\t/**\r\n\t * Shortcut to drawRoundRect.\r\n\t * @method rr\r\n\t * @param {Number} x\r\n\t * @param {Number} y\r\n\t * @param {Number} w\r\n\t * @param {Number} h\r\n\t * @param {Number} radius Corner radius.\r\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\r\n\t * @chainable\r\n\t * @protected\r\n\t **/\r\n\tp.rr = p.drawRoundRect;\r\n\r\n\t/**\r\n\t * Shortcut to drawRoundRectComplex.\r\n\t * @method rc\r\n\t * @param {Number} x The horizontal coordinate to draw the round rect.\r\n\t * @param {Number} y The vertical coordinate to draw the round rect.\r\n\t * @param {Number} w The width of the round rect.\r\n\t * @param {Number} h The height of the round rect.\r\n\t * @param {Number} radiusTL Top left corner radius.\r\n\t * @param {Number} radiusTR Top right corner radius.\r\n\t * @param {Number} radiusBR Bottom right corner radius.\r\n\t * @param {Number} radiusBL Bottom left corner radius.\r\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\r\n\t * @chainable\r\n\t * @protected\r\n\t **/\r\n\tp.rc = p.drawRoundRectComplex;\r\n\r\n\t/**\r\n\t * Shortcut to drawCircle.\r\n\t * @method dc\r\n\t * @param {Number} x x coordinate center point of circle.\r\n\t * @param {Number} y y coordinate center point of circle.\r\n\t * @param {Number} radius Radius of circle.\r\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\r\n\t * @chainable\r\n\t * @protected\r\n\t **/\r\n\tp.dc = p.drawCircle;\r\n\r\n\t/**\r\n\t * Shortcut to drawEllipse.\r\n\t * @method de\r\n\t * @param {Number} x The left coordinate point of the ellipse. Note that this is different from {{#crossLink \"Graphics/drawCircle\"}}{{/crossLink}}\r\n\t * which draws from center.\r\n\t * @param {Number} y The top coordinate point of the ellipse. Note that this is different from {{#crossLink \"Graphics/drawCircle\"}}{{/crossLink}}\r\n\t * which draws from the center.\r\n\t * @param {Number} w The height (horizontal diameter) of the ellipse. The horizontal radius will be half of this\r\n\t * number.\r\n\t * @param {Number} h The width (vertical diameter) of the ellipse. The vertical radius will be half of this number.\r\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\r\n\t * @chainable\r\n\t * @protected\r\n\t **/\r\n\tp.de = p.drawEllipse;\r\n\r\n\t/**\r\n\t * Shortcut to drawPolyStar.\r\n\t * @method dp\r\n\t * @param {Number} x Position of the center of the shape.\r\n\t * @param {Number} y Position of the center of the shape.\r\n\t * @param {Number} radius The outer radius of the shape.\r\n\t * @param {Number} sides The number of points on the star or sides on the polygon.\r\n\t * @param {Number} pointSize The depth or \"pointy-ness\" of the star points. A pointSize of 0 will draw a regular\r\n\t * polygon (no points), a pointSize of 1 will draw nothing because the points are infinitely pointy.\r\n\t * @param {Number} angle The angle of the first point / corner. For example a value of 0 will draw the first point\r\n\t * directly to the right of the center.\r\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\r\n\t * @chainable\r\n\t * @protected\r\n\t **/\r\n\tp.dp = p.drawPolyStar;\r\n\r\n\t/**\r\n\t * Shortcut to decodePath.\r\n\t * @method p\r\n\t * @param {String} str The path string to decode.\r\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\r\n\t * @chainable\r\n\t * @protected\r\n\t **/\r\n\tp.p = p.decodePath;\r\n\r\n\r\n// private methods:\r\n\t/**\r\n\t * @method _updateInstructions\r\n\t * @param commit\r\n\t * @protected\r\n\t **/\r\n\tp._updateInstructions = function(commit) {\r\n\t\tvar instr = this._instructions, active = this._activeInstructions, commitIndex = this._commitIndex;\r\n\r\n\t\tif (this._dirty && active.length) {\r\n\t\t\tinstr.length = commitIndex; // remove old, uncommitted commands\r\n\t\t\tinstr.push(Graphics.beginCmd);\r\n\r\n\t\t\tvar l = active.length, ll = instr.length;\r\n\t\t\tinstr.length = ll+l;\r\n\t\t\tfor (var i=0; i<l; i++) { instr[i+ll] = active[i]; }\r\n\r\n\t\t\tif (this._fill) { instr.push(this._fill); }\r\n\t\t\tif (this._stroke) {\r\n\t\t\t\t// doesn't need to be re-applied if it hasn't changed.\r\n\t\t\t\tif (this._strokeDash !== this._oldStrokeDash) {\r\n\t\t\t\t\tthis._oldStrokeDash = this._strokeDash;\r\n\t\t\t\t\tinstr.push(this._strokeDash);\r\n\t\t\t\t}\r\n\t\t\t\tif (this._strokeStyle !== this._oldStrokeStyle) {\r\n\t\t\t\t\tthis._oldStrokeStyle = this._strokeStyle;\r\n\t\t\t\t\tinstr.push(this._strokeStyle);\r\n\t\t\t\t}\r\n\t\t\t\tinstr.push(this._stroke);\r\n\t\t\t}\r\n\r\n\t\t\tthis._dirty = false;\r\n\t\t}\r\n\r\n\t\tif (commit) {\r\n\t\t\tactive.length = 0;\r\n\t\t\tthis._commitIndex = instr.length;\r\n\t\t}\r\n\t};\r\n\r\n\t/**\r\n\t * @method _setFill\r\n\t * @param fill\r\n\t * @protected\r\n\t **/\r\n\tp._setFill = function(fill) {\r\n\t\tthis._updateInstructions(true);\r\n\t\tthis.command = this._fill = fill;\r\n\t\treturn this;\r\n\t};\r\n\r\n\t/**\r\n\t * @method _setStroke\r\n\t * @param stroke\r\n\t * @protected\r\n\t **/\r\n\tp._setStroke = function(stroke) {\r\n\t\tthis._updateInstructions(true);\r\n\t\tif (this.command = this._stroke = stroke) {\r\n\t\t\tstroke.ignoreScale = this._strokeIgnoreScale;\r\n\t\t}\r\n\t\treturn this;\r\n\t};\r\n\r\n// Command Objects:\r\n\t/**\r\n\t * @namespace Graphics\r\n\t */\r\n\t/**\r\n\t * Graphics command object. See {{#crossLink \"Graphics/lineTo\"}}{{/crossLink}} and {{#crossLink \"Graphics/append\"}}{{/crossLink}} for more information. See {{#crossLink \"Graphics\"}}{{/crossLink}} and {{#crossLink \"Graphics/append\"}}{{/crossLink}} for more information.\r\n\t * @class LineTo\r\n\t * @constructor\r\n\t * @param {Number} x\r\n\t * @param {Number} y\r\n\t **/\r\n\t/**\r\n\t * @property x\r\n\t * @type Number\r\n\t */\r\n\t/**\r\n\t * @property y\r\n\t * @type Number\r\n\t */\r\n\t/**\r\n\t * Execute the Graphics command in the provided Canvas context.\r\n\t * @method exec\r\n\t * @param {CanvasRenderingContext2D} ctx The canvas rendering context\r\n\t */\r\n\t(G.LineTo = function(x, y) {\r\n\t\tthis.x = x; this.y = y;\r\n\t}).prototype.exec = function(ctx) { ctx.lineTo(this.x,this.y); };\r\n\r\n\t/**\r\n\t * Graphics command object. See {{#crossLink \"Graphics/moveTo\"}}{{/crossLink}} and {{#crossLink \"Graphics/append\"}}{{/crossLink}} for more information.\r\n\t * @class MoveTo\r\n\t * @constructor\r\n\t * @param {Number} x\r\n\t * @param {Number} y\r\n\t **/\r\n\t/**\r\n\t * @property x\r\n\t * @type Number\r\n\t */\r\n\t/**\r\n\t * @property y\r\n\t * @type Number\r\n\t */\r\n\t/**\r\n\t * @method exec\r\n\t * @param {CanvasRenderingContext2D} ctx\r\n\t */\r\n\t(G.MoveTo = function(x, y) {\r\n\t\tthis.x = x; this.y = y;\r\n\t}).prototype.exec = function(ctx) { ctx.moveTo(this.x, this.y); };\r\n\r\n\r\n\t/**\r\n\t * Graphics command object. See {{#crossLink \"Graphics/arcTo\"}}{{/crossLink}} and {{#crossLink \"Graphics/append\"}}{{/crossLink}} for more information.\r\n\t * @class ArcTo\r\n\t * @constructor\r\n\t * @param {Number} x1\r\n\t * @param {Number} y1\r\n\t * @param {Number} x2\r\n\t * @param {Number} y2\r\n\t * @param {Number} radius\r\n\t **/\r\n\t/**\r\n\t * @property x1\r\n\t * @type Number\r\n\t */\r\n\t/**\r\n\t * @property y1\r\n\t * @type Number\r\n\t */\r\n\t/**\r\n\t * @property x2\r\n\t * @type Number\r\n\t */\r\n\t/**\r\n\t * @property y2\r\n\t * @type Number\r\n\t */\r\n\t/**\r\n\t * @property radius\r\n\t * @type Number\r\n\t */\r\n\t/**\r\n\t * Execute the Graphics command in the provided Canvas context.\r\n\t * @method exec\r\n\t * @param {CanvasRenderingContext2D} ctx The canvas rendering context\r\n\t */\r\n\t(G.ArcTo = function(x1, y1, x2, y2, radius) {\r\n\t\tthis.x1 = x1; this.y1 = y1;\r\n\t\tthis.x2 = x2; this.y2 = y2;\r\n\t\tthis.radius = radius;\r\n\t}).prototype.exec = function(ctx) { ctx.arcTo(this.x1, this.y1, this.x2, this.y2, this.radius); };\r\n\r\n\t/**\r\n\t * Graphics command object. See {{#crossLink \"Graphics/arc\"}}{{/crossLink}} and {{#crossLink \"Graphics/append\"}}{{/crossLink}} for more information.\r\n\t * @class Arc\r\n\t * @constructor\r\n\t * @param {Number} x\r\n\t * @param {Number} y\r\n\t * @param {Number} radius\r\n\t * @param {Number} startAngle\r\n\t * @param {Number} endAngle\r\n\t * @param {Number} anticlockwise\r\n\t **/\r\n\t/**\r\n\t * @property x\r\n\t * @type Number\r\n\t */\r\n\t/**\r\n\t * @property y\r\n\t * @type Number\r\n\t */\r\n\t/**\r\n\t * @property radius\r\n\t * @type Number\r\n\t */\r\n\t/**\r\n\t * @property startAngle\r\n\t * @type Number\r\n\t */\r\n\t/**\r\n\t * @property endAngle\r\n\t * @type Number\r\n\t */\r\n\t/**\r\n\t * @property anticlockwise\r\n\t * @type Number\r\n\t */\r\n\t/**\r\n\t * Execute the Graphics command in the provided Canvas context.\r\n\t * @method exec\r\n\t * @param {CanvasRenderingContext2D} ctx The canvas rendering context\r\n\t */\r\n\t(G.Arc = function(x, y, radius, startAngle, endAngle, anticlockwise) {\r\n\t\tthis.x = x; this.y = y;\r\n\t\tthis.radius = radius;\r\n\t\tthis.startAngle = startAngle; this.endAngle = endAngle;\r\n\t\tthis.anticlockwise = !!anticlockwise;\r\n\t}).prototype.exec = function(ctx) { ctx.arc(this.x, this.y, this.radius, this.startAngle, this.endAngle, this.anticlockwise); };\r\n\r\n\t/**\r\n\t * Graphics command object. See {{#crossLink \"Graphics/quadraticCurveTo\"}}{{/crossLink}} and {{#crossLink \"Graphics/append\"}}{{/crossLink}} for more information.\r\n\t * @class QuadraticCurveTo\r\n\t * @constructor\r\n\t * @param {Number} cpx\r\n\t * @param {Number} cpy\r\n\t * @param {Number} x\r\n\t * @param {Number} y\r\n\t **/\r\n\t/**\r\n\t * @property cpx\r\n\t * @type Number\r\n\t */\r\n\t/**\r\n\t * @property cpy\r\n\t * @type Number\r\n\t */\r\n\t/**\r\n\t * @property x\r\n\t * @type Number\r\n\t */\r\n\t/**\r\n\t * @property y\r\n\t * @type Number\r\n\t */\r\n\t/**\r\n\t * Execute the Graphics command in the provided Canvas context.\r\n\t * @method exec\r\n\t * @param {CanvasRenderingContext2D} ctx The canvas rendering context\r\n\t */\r\n\t(G.QuadraticCurveTo = function(cpx, cpy, x, y) {\r\n\t\tthis.cpx = cpx; this.cpy = cpy;\r\n\t\tthis.x = x; this.y = y;\r\n\t}).prototype.exec = function(ctx) { ctx.quadraticCurveTo(this.cpx, this.cpy, this.x, this.y); };\r\n\r\n\t/**\r\n\t * Graphics command object. See {{#crossLink \"Graphics/bezierCurveTo\"}}{{/crossLink}} and {{#crossLink \"Graphics/append\"}}{{/crossLink}} for more information.\r\n\t * @class BezierCurveTo\r\n\t * @constructor\r\n\t * @param {Number} cp1x\r\n\t * @param {Number} cp1y\r\n\t * @param {Number} cp2x\r\n\t * @param {Number} cp2y\r\n\t * @param {Number} x\r\n\t * @param {Number} y\r\n\t **/\r\n\t/**\r\n\t * @property cp1x\r\n\t * @type Number\r\n\t */\r\n\t/**\r\n\t * @property cp1y\r\n\t * @type Number\r\n\t */\r\n\t/**\r\n\t * @property cp2x\r\n\t * @type Number\r\n\t */\r\n\t/**\r\n\t * @property cp2y\r\n\t * @type Number\r\n\t */\r\n\t/**\r\n\t * @property x\r\n\t * @type Number\r\n\t */\r\n\t/**\r\n\t * @property y\r\n\t * @type Number\r\n\t */\r\n\t/**\r\n\t * Execute the Graphics command in the provided Canvas context.\r\n\t * @method exec\r\n\t * @param {CanvasRenderingContext2D} ctx The canvas rendering context\r\n\t */\r\n\t(G.BezierCurveTo = function(cp1x, cp1y, cp2x, cp2y, x, y) {\r\n\t\tthis.cp1x = cp1x; this.cp1y = cp1y;\r\n\t\tthis.cp2x = cp2x; this.cp2y = cp2y;\r\n\t\tthis.x = x; this.y = y;\r\n\t}).prototype.exec = function(ctx) { ctx.bezierCurveTo(this.cp1x, this.cp1y, this.cp2x, this.cp2y, this.x, this.y); };\r\n\r\n\t/**\r\n\t * Graphics command object. See {{#crossLink \"Graphics/rect\"}}{{/crossLink}} and {{#crossLink \"Graphics/append\"}}{{/crossLink}} for more information.\r\n\t * @class Rect\r\n\t * @constructor\r\n\t * @param {Number} x\r\n\t * @param {Number} y\r\n\t * @param {Number} w\r\n\t * @param {Number} h\r\n\t **/\r\n\t/**\r\n\t * @property x\r\n\t * @type Number\r\n\t */\r\n\t/**\r\n\t * @property y\r\n\t * @type Number\r\n\t */\r\n\t/**\r\n\t * @property w\r\n\t * @type Number\r\n\t */\r\n\t/**\r\n\t * @property h\r\n\t * @type Number\r\n\t */\r\n\t/**\r\n\t * Execute the Graphics command in the provided Canvas context.\r\n\t * @method exec\r\n\t * @param {CanvasRenderingContext2D} ctx The canvas rendering context\r\n\t */\r\n\t(G.Rect = function(x, y, w, h) {\r\n\t\tthis.x = x; this.y = y;\r\n\t\tthis.w = w; this.h = h;\r\n\t}).prototype.exec = function(ctx) { ctx.rect(this.x, this.y, this.w, this.h); };\r\n\r\n\t/**\r\n\t * Graphics command object. See {{#crossLink \"Graphics/closePath\"}}{{/crossLink}} and {{#crossLink \"Graphics/append\"}}{{/crossLink}} for more information.\r\n\t * @class ClosePath\r\n\t * @constructor\r\n\t **/\r\n\t/**\r\n\t * Execute the Graphics command in the provided Canvas context.\r\n\t * @method exec\r\n\t * @param {CanvasRenderingContext2D} ctx The canvas rendering context\r\n\t */\r\n\t(G.ClosePath = function() {\r\n\t}).prototype.exec = function(ctx) { ctx.closePath(); };\r\n\r\n\t/**\r\n\t * Graphics command object to begin a new path. See {{#crossLink \"Graphics\"}}{{/crossLink}} and {{#crossLink \"Graphics/append\"}}{{/crossLink}} for more information.\r\n\t * @class BeginPath\r\n\t * @constructor\r\n\t **/\r\n\t/**\r\n\t * Execute the Graphics command in the provided Canvas context.\r\n\t * @method exec\r\n\t * @param {CanvasRenderingContext2D} ctx The canvas rendering context\r\n\t */\r\n\t(G.BeginPath = function() {\r\n\t}).prototype.exec = function(ctx) { ctx.beginPath(); };\r\n\r\n\t/**\r\n\t * Graphics command object. See {{#crossLink \"Graphics/beginFill\"}}{{/crossLink}} and {{#crossLink \"Graphics/append\"}}{{/crossLink}} for more information.\r\n\t * @class Fill\r\n\t * @constructor\r\n\t * @param {Object} style A valid Context2D fillStyle.\r\n\t * @param {Matrix2D} matrix\r\n\t **/\r\n\t/**\r\n\t * A valid Context2D fillStyle.\r\n\t * @property style\r\n\t * @type Object\r\n\t */\r\n\t/**\r\n\t * @property matrix\r\n\t * @type Matrix2D\r\n\t */\r\n\t/**\r\n\t * Execute the Graphics command in the provided Canvas context.\r\n\t * @method exec\r\n\t * @param {CanvasRenderingContext2D} ctx The canvas rendering context\r\n\t */\r\n\tp = (G.Fill = function(style, matrix) {\r\n\t\tthis.style = style;\r\n\t\tthis.matrix = matrix;\r\n\t}).prototype;\r\n\tp.exec = function(ctx) {\r\n\t\tif (!this.style) { return; }\r\n\t\tctx.fillStyle = this.style;\r\n\t\tvar mtx = this.matrix;\r\n\t\tif (mtx) { ctx.save(); ctx.transform(mtx.a, mtx.b, mtx.c, mtx.d, mtx.tx, mtx.ty); }\r\n\t\tctx.fill();\r\n\t\tif (mtx) { ctx.restore(); }\r\n\t};\r\n\t/**\r\n\t * Creates a linear gradient style and assigns it to {{#crossLink \"Fill/style:property\"}}{{/crossLink}}.\r\n\t * See {{#crossLink \"Graphics/beginLinearGradientFill\"}}{{/crossLink}} for more information.\r\n\t * @method linearGradient\r\n\t * @param {Array} colors\r\n\t *\r\n\t * @param {Array} ratios\r\n\t * @param {Number} x0\r\n\t * @param {Number} y0\r\n\t * @param {Number} x1\r\n\t * @param {Number} y1\r\n\t * @return {Fill} Returns this Fill object for chaining or assignment.\r\n\t */\r\n\tp.linearGradient = function(colors, ratios, x0, y0, x1, y1) {\r\n\t\tvar o = this.style =  Graphics._ctx.createLinearGradient(x0, y0, x1, y1);\r\n\t\tfor (var i=0, l=colors.length; i<l; i++) { o.addColorStop(ratios[i], colors[i]); }\r\n\t\to.props = {colors:colors, ratios:ratios, x0:x0, y0:y0, x1:x1, y1:y1, type:\"linear\"};\r\n\t\treturn this;\r\n\t};\r\n\t/**\r\n\t * Creates a radial gradient style and assigns it to {{#crossLink \"Fill/style:property\"}}{{/crossLink}}.\r\n\t * See {{#crossLink \"Graphics/beginRadialGradientFill\"}}{{/crossLink}} for more information.\r\n\t * @method radialGradient\r\n\t * @param {Array} colors\r\n\t * @param {Array} ratios\r\n\t * @param {Number} x0\r\n\t * @param {Number} y0\r\n\t * @param {Number} r0\r\n\t * @param {Number} x1\r\n\t * @param {Number} y1\r\n\t * @param {Number} r1\r\n\t * @return {Fill} Returns this Fill object for chaining or assignment.\r\n\t */\r\n\tp.radialGradient = function(colors, ratios, x0, y0, r0, x1, y1, r1) {\r\n\t\tvar o = this.style =  Graphics._ctx.createRadialGradient(x0, y0, r0, x1, y1, r1);\r\n\t\tfor (var i=0, l=colors.length; i<l; i++) { o.addColorStop(ratios[i], colors[i]); }\r\n\t\to.props = {colors:colors, ratios:ratios, x0:x0, y0:y0, r0:r0, x1:x1, y1:y1, r1:r1, type:\"radial\"};\r\n\t\treturn this;\r\n\t};\r\n\t/**\r\n\t * Creates a bitmap fill style and assigns it to the {{#crossLink \"Fill/style:property\"}}{{/crossLink}}.\r\n\t * See {{#crossLink \"Graphics/beginBitmapFill\"}}{{/crossLink}} for more information.\r\n\t * @method bitmap\r\n\t * @param {HTMLImageElement | HTMLCanvasElement | HTMLVideoElement} image  Must be loaded prior to creating a bitmap fill, or the fill will be empty.\r\n\t * @param {String} [repetition] One of: repeat, repeat-x, repeat-y, or no-repeat.\r\n\t * @return {Fill} Returns this Fill object for chaining or assignment.\r\n\t */\r\n\tp.bitmap = function(image, repetition) {\r\n\t\tif (image.naturalWidth || image.getContext || image.readyState >= 2) {\r\n\t\t\tvar o = this.style = Graphics._ctx.createPattern(image, repetition || \"\");\r\n\t\t\to.props = {image: image, repetition: repetition, type: \"bitmap\"};\r\n\t\t}\r\n\t\treturn this;\r\n\t};\r\n\tp.path = false;\r\n\r\n\t/**\r\n\t * Graphics command object. See {{#crossLink \"Graphics/beginStroke\"}}{{/crossLink}} and {{#crossLink \"Graphics/append\"}}{{/crossLink}} for more information.\r\n\t * @class Stroke\r\n\t * @constructor\r\n\t * @param {Object} style A valid Context2D fillStyle.\r\n\t * @param {Boolean} ignoreScale\r\n\t **/\r\n\t/**\r\n\t * A valid Context2D strokeStyle.\r\n\t * @property style\r\n\t * @type Object\r\n\t */\r\n\t/**\r\n\t * @property ignoreScale\r\n\t * @type Boolean\r\n\t */\r\n\t/**\r\n\t * Execute the Graphics command in the provided Canvas context.\r\n\t * @method exec\r\n\t * @param {CanvasRenderingContext2D} ctx The canvas rendering context\r\n\t */\r\n\tp = (G.Stroke = function(style, ignoreScale) {\r\n\t\tthis.style = style;\r\n\t\tthis.ignoreScale = ignoreScale;\r\n\t}).prototype;\r\n\tp.exec = function(ctx) {\r\n\t\tif (!this.style) { return; }\r\n\t\tctx.strokeStyle = this.style;\r\n\t\tif (this.ignoreScale) { ctx.save(); ctx.setTransform(1,0,0,1,0,0); }\r\n\t\tctx.stroke();\r\n\t\tif (this.ignoreScale) { ctx.restore(); }\r\n\t};\r\n\t/**\r\n\t * Creates a linear gradient style and assigns it to {{#crossLink \"Stroke/style:property\"}}{{/crossLink}}.\r\n\t * See {{#crossLink \"Graphics/beginLinearGradientStroke\"}}{{/crossLink}} for more information.\r\n\t * @method linearGradient\r\n\t * @param {Array} colors\r\n\t * @param {Array} ratios\r\n\t * @param {Number} x0\r\n\t * @param {Number} y0\r\n\t * @param {Number} x1\r\n\t * @param {Number} y1\r\n\t * @return {Fill} Returns this Stroke object for chaining or assignment.\r\n\t */\r\n\tp.linearGradient = G.Fill.prototype.linearGradient;\r\n\t/**\r\n\t * Creates a radial gradient style and assigns it to {{#crossLink \"Stroke/style:property\"}}{{/crossLink}}.\r\n\t * See {{#crossLink \"Graphics/beginRadialGradientStroke\"}}{{/crossLink}} for more information.\r\n\t * @method radialGradient\r\n\t * @param {Array} colors\r\n\t * @param {Array} ratios\r\n\t * @param {Number} x0\r\n\t * @param {Number} y0\r\n\t * @param {Number} r0\r\n\t * @param {Number} x1\r\n\t * @param {Number} y1\r\n\t * @param {Number} r1\r\n\t * @return {Fill} Returns this Stroke object for chaining or assignment.\r\n\t */\r\n\tp.radialGradient = G.Fill.prototype.radialGradient;\r\n\t/**\r\n\t * Creates a bitmap fill style and assigns it to {{#crossLink \"Stroke/style:property\"}}{{/crossLink}}.\r\n\t * See {{#crossLink \"Graphics/beginBitmapStroke\"}}{{/crossLink}} for more information.\r\n\t * @method bitmap\r\n\t * @param {HTMLImageElement} image\r\n\t * @param {String} [repetition] One of: repeat, repeat-x, repeat-y, or no-repeat.\r\n\t * @return {Fill} Returns this Stroke object for chaining or assignment.\r\n\t */\r\n\tp.bitmap = G.Fill.prototype.bitmap;\r\n\tp.path = false;\r\n\r\n\t/**\r\n\t * Graphics command object. See {{#crossLink \"Graphics/setStrokeStyle\"}}{{/crossLink}} and {{#crossLink \"Graphics/append\"}}{{/crossLink}} for more information.\r\n\t * @class StrokeStyle\r\n\t * @constructor\r\n\t * @param {Number} width\r\n\t * @param {String} [caps=butt]\r\n\t * @param {String} [joints=miter]\r\n\t * @param {Number} [miterLimit=10]\r\n\t * @param {Boolean} [ignoreScale=false]\r\n\t **/\r\n\t/**\r\n\t * @property width\r\n\t * @type Number\r\n\t */\r\n\t/**\r\n\t * One of: butt, round, square\r\n\t * @property caps\r\n\t * @type String\r\n\t */\r\n\t/**\r\n\t * One of: round, bevel, miter\r\n\t * @property joints\r\n\t * @type String\r\n\t */\r\n\t/**\r\n\t * @property miterLimit\r\n\t * @type Number\r\n\t */\r\n\t/**\r\n\t * Execute the Graphics command in the provided Canvas context.\r\n\t * @method exec\r\n\t * @param {CanvasRenderingContext2D} ctx The canvas rendering context\r\n\t */\r\n\tp = (G.StrokeStyle = function(width, caps, joints, miterLimit, ignoreScale) {\r\n\t\tthis.width = width;\r\n\t\tthis.caps = caps;\r\n\t\tthis.joints = joints;\r\n\t\tthis.miterLimit = miterLimit;\r\n\t\tthis.ignoreScale = ignoreScale;\r\n\t}).prototype;\r\n\tp.exec = function(ctx) {\r\n\t\tctx.lineWidth = (this.width == null ? \"1\" : this.width);\r\n\t\tctx.lineCap = (this.caps == null ? \"butt\" : (isNaN(this.caps) ? this.caps : Graphics.STROKE_CAPS_MAP[this.caps]));\r\n\t\tctx.lineJoin = (this.joints == null ? \"miter\" : (isNaN(this.joints) ? this.joints : Graphics.STROKE_JOINTS_MAP[this.joints]));\r\n\t\tctx.miterLimit = (this.miterLimit == null ? \"10\" : this.miterLimit);\r\n\t\tctx.ignoreScale = (this.ignoreScale == null ? false : this.ignoreScale);\r\n\t};\r\n\tp.path = false;\r\n\t\r\n\t/**\r\n\t * Graphics command object. See {{#crossLink \"Graphics/setStrokeDash\"}}{{/crossLink}} and {{#crossLink \"Graphics/append\"}}{{/crossLink}} for more information.\r\n\t * @class StrokeDash\r\n\t * @constructor\r\n\t * @param {Array} [segments]\r\n\t * @param {Number} [offset=0]\r\n\t **/\r\n\t/**\r\n\t * @property segments\r\n\t * @type Array\r\n\t */\r\n\t/**\r\n\t * @property offset\r\n\t * @type Number\r\n\t */\r\n\t/**\r\n\t * Execute the Graphics command in the provided Canvas context.\r\n\t * @method exec\r\n\t * @param {CanvasRenderingContext2D} ctx The canvas rendering context\r\n\t */\r\n\t(G.StrokeDash = function(segments, offset) {\r\n\t\tthis.segments = segments;\r\n\t\tthis.offset = offset||0;\r\n\t}).prototype.exec = function(ctx) {\r\n\t\tif (ctx.setLineDash) { // feature detection.\r\n\t\t\tctx.setLineDash(this.segments|| G.StrokeDash.EMPTY_SEGMENTS); // instead of [] to reduce churn.\r\n\t\t\tctx.lineDashOffset = this.offset||0;\r\n\t\t}\r\n\t};\r\n\t/**\r\n\t * The default value for segments (ie. no dash).\r\n\t * @property EMPTY_SEGMENTS\r\n\t * @static\r\n\t * @final\r\n\t * @readonly\r\n\t * @protected\r\n\t * @type {Array}\r\n\t **/\r\n\tG.StrokeDash.EMPTY_SEGMENTS = [];\r\n\r\n\t/**\r\n\t * Graphics command object. See {{#crossLink \"Graphics/drawRoundRectComplex\"}}{{/crossLink}} and {{#crossLink \"Graphics/append\"}}{{/crossLink}} for more information.\r\n\t * @class RoundRect\r\n\t * @constructor\r\n\t * @param {Number} x\r\n\t * @param {Number} y\r\n\t * @param {Number} w\r\n\t * @param {Number} h\r\n\t * @param {Number} radiusTL\r\n\t * @param {Number} radiusTR\r\n\t * @param {Number} radiusBR\r\n\t * @param {Number} radiusBL\r\n\t **/\r\n\t/**\r\n\t * @property x\r\n\t * @type Number\r\n\t */\r\n\t/**\r\n\t * @property y\r\n\t * @type Number\r\n\t */\r\n\t/**\r\n\t * @property w\r\n\t * @type Number\r\n\t */\r\n\t/**\r\n\t * @property h\r\n\t * @type Number\r\n\t */\r\n\t/**\r\n\t * @property radiusTL\r\n\t * @type Number\r\n\t */\r\n\t/**\r\n\t * @property radiusTR\r\n\t * @type Number\r\n\t */\r\n\t/**\r\n\t * @property radiusBR\r\n\t * @type Number\r\n\t */\r\n\t/**\r\n\t * @property radiusBL\r\n\t * @type Number\r\n\t */\r\n\t/**\r\n\t * Execute the Graphics command in the provided Canvas context.\r\n\t * @method exec\r\n\t * @param {CanvasRenderingContext2D} ctx The canvas rendering context\r\n\t */\r\n\t(G.RoundRect = function(x, y, w, h, radiusTL, radiusTR, radiusBR, radiusBL) {\r\n\t\tthis.x = x; this.y = y;\r\n\t\tthis.w = w; this.h = h;\r\n\t\tthis.radiusTL = radiusTL; this.radiusTR = radiusTR;\r\n\t\tthis.radiusBR = radiusBR; this.radiusBL = radiusBL;\r\n\t}).prototype.exec = function(ctx) {\r\n\t\tvar max = (w<h?w:h)/2;\r\n\t\tvar mTL=0, mTR=0, mBR=0, mBL=0;\r\n\t\tvar x = this.x, y = this.y, w = this.w, h = this.h;\r\n\t\tvar rTL = this.radiusTL, rTR = this.radiusTR, rBR = this.radiusBR, rBL = this.radiusBL;\r\n\r\n\t\tif (rTL < 0) { rTL *= (mTL=-1); }\r\n\t\tif (rTL > max) { rTL = max; }\r\n\t\tif (rTR < 0) { rTR *= (mTR=-1); }\r\n\t\tif (rTR > max) { rTR = max; }\r\n\t\tif (rBR < 0) { rBR *= (mBR=-1); }\r\n\t\tif (rBR > max) { rBR = max; }\r\n\t\tif (rBL < 0) { rBL *= (mBL=-1); }\r\n\t\tif (rBL > max) { rBL = max; }\r\n\r\n\t\tctx.moveTo(x+w-rTR, y);\r\n\t\tctx.arcTo(x+w+rTR*mTR, y-rTR*mTR, x+w, y+rTR, rTR);\r\n\t\tctx.lineTo(x+w, y+h-rBR);\r\n\t\tctx.arcTo(x+w+rBR*mBR, y+h+rBR*mBR, x+w-rBR, y+h, rBR);\r\n\t\tctx.lineTo(x+rBL, y+h);\r\n\t\tctx.arcTo(x-rBL*mBL, y+h+rBL*mBL, x, y+h-rBL, rBL);\r\n\t\tctx.lineTo(x, y+rTL);\r\n\t\tctx.arcTo(x-rTL*mTL, y-rTL*mTL, x+rTL, y, rTL);\r\n\t\tctx.closePath();\r\n\t};\r\n\r\n\t/**\r\n\t * Graphics command object. See {{#crossLink \"Graphics/drawCircle\"}}{{/crossLink}} and {{#crossLink \"Graphics/append\"}}{{/crossLink}} for more information.\r\n\t * @class Circle\r\n\t * @constructor\r\n\t * @param {Number} x\r\n\t * @param {Number} y\r\n\t * @param {Number} radius\r\n\t **/\r\n\t/**\r\n\t * @property x\r\n\t * @type Number\r\n\t */\r\n\t/**\r\n\t * @property y\r\n\t * @type Number\r\n\t */\r\n\t/**\r\n\t * @property radius\r\n\t * @type Number\r\n\t */\r\n\t/**\r\n\t * Execute the Graphics command in the provided Canvas context.\r\n\t * @method exec\r\n\t * @param {CanvasRenderingContext2D} ctx The canvas rendering context\r\n\t */\r\n\t(G.Circle = function(x, y, radius) {\r\n\t\tthis.x = x; this.y = y;\r\n\t\tthis.radius = radius;\r\n\t}).prototype.exec = function(ctx) { ctx.arc(this.x, this.y, this.radius, 0, Math.PI*2); };\r\n\r\n\t/**\r\n\t * Graphics command object. See {{#crossLink \"Graphics/drawEllipse\"}}{{/crossLink}} and {{#crossLink \"Graphics/append\"}}{{/crossLink}} for more information.\r\n\t * @class Ellipse\r\n\t * @constructor\r\n\t * @param {Number} x\r\n\t * @param {Number} y\r\n\t * @param {Number} w\r\n\t * @param {Number} h\r\n\t **/\r\n\t/**\r\n\t * @property x\r\n\t * @type Number\r\n\t */\r\n\t/**\r\n\t * @property y\r\n\t * @type Number\r\n\t */\r\n\t/**\r\n\t * @property w\r\n\t * @type Number\r\n\t */\r\n\t/**\r\n\t * @property h\r\n\t * @type Number\r\n\t */\r\n\t/**\r\n\t * Execute the Graphics command in the provided Canvas context.\r\n\t * @method exec\r\n\t * @param {CanvasRenderingContext2D} ctx The canvas rendering context\r\n\t */\r\n\t(G.Ellipse = function(x, y, w, h) {\r\n\t\tthis.x = x; this.y = y;\r\n\t\tthis.w = w; this.h = h;\r\n\t}).prototype.exec = function(ctx) {\r\n\t\tvar x = this.x, y = this.y;\r\n\t\tvar w = this.w, h = this.h;\r\n\r\n\t\tvar k = 0.5522848;\r\n\t\tvar ox = (w / 2) * k;\r\n\t\tvar oy = (h / 2) * k;\r\n\t\tvar xe = x + w;\r\n\t\tvar ye = y + h;\r\n\t\tvar xm = x + w / 2;\r\n\t\tvar ym = y + h / 2;\r\n\r\n\t\tctx.moveTo(x, ym);\r\n\t\tctx.bezierCurveTo(x, ym-oy, xm-ox, y, xm, y);\r\n\t\tctx.bezierCurveTo(xm+ox, y, xe, ym-oy, xe, ym);\r\n\t\tctx.bezierCurveTo(xe, ym+oy, xm+ox, ye, xm, ye);\r\n\t\tctx.bezierCurveTo(xm-ox, ye, x, ym+oy, x, ym);\r\n\t};\r\n\r\n\t/**\r\n\t * Graphics command object. See {{#crossLink \"Graphics/drawPolyStar\"}}{{/crossLink}} and {{#crossLink \"Graphics/append\"}}{{/crossLink}} for more information.\r\n\t * @class PolyStar\r\n\t * @constructor\r\n\t * @param {Number} x\r\n\t * @param {Number} y\r\n\t * @param {Number} radius\r\n\t * @param {Number} sides\r\n\t * @param {Number} pointSize\r\n\t * @param {Number} angle\r\n\t **/\r\n\t/**\r\n\t * @property x\r\n\t * @type Number\r\n\t */\r\n\t/**\r\n\t * @property y\r\n\t * @type Number\r\n\t */\r\n\t/**\r\n\t * @property radius\r\n\t * @type Number\r\n\t */\r\n\t/**\r\n\t * @property sides\r\n\t * @type Number\r\n\t */\r\n\t/**\r\n\t * @property pointSize\r\n\t * @type Number\r\n\t */\r\n\t/**\r\n\t * @property angle\r\n\t * @type Number\r\n\t */\r\n\t/**\r\n\t * Execute the Graphics command in the provided Canvas context.\r\n\t * @method exec\r\n\t * @param {CanvasRenderingContext2D} ctx The canvas rendering context\r\n\t */\r\n\t(G.PolyStar = function(x, y, radius, sides, pointSize, angle) {\r\n\t\tthis.x = x; this.y = y;\r\n\t\tthis.radius = radius;\r\n\t\tthis.sides = sides;\r\n\t\tthis.pointSize = pointSize;\r\n\t\tthis.angle = angle;\r\n\t}).prototype.exec = function(ctx) {\r\n\t\tvar x = this.x, y = this.y;\r\n\t\tvar radius = this.radius;\r\n\t\tvar angle = (this.angle||0)/180*Math.PI;\r\n\t\tvar sides = this.sides;\r\n\t\tvar ps = 1-(this.pointSize||0);\r\n\t\tvar a = Math.PI/sides;\r\n\r\n\t\tctx.moveTo(x+Math.cos(angle)*radius, y+Math.sin(angle)*radius);\r\n\t\tfor (var i=0; i<sides; i++) {\r\n\t\t\tangle += a;\r\n\t\t\tif (ps != 1) {\r\n\t\t\t\tctx.lineTo(x+Math.cos(angle)*radius*ps, y+Math.sin(angle)*radius*ps);\r\n\t\t\t}\r\n\t\t\tangle += a;\r\n\t\t\tctx.lineTo(x+Math.cos(angle)*radius, y+Math.sin(angle)*radius);\r\n\t\t}\r\n\t\tctx.closePath();\r\n\t};\r\n\r\n\t// docced above.\r\n\tGraphics.beginCmd = new G.BeginPath(); // so we don't have to instantiate multiple instances.\r\n\r\n\r\n\tcreatejs.Graphics = Graphics;\r\n}());\r\n\r\n//##############################################################################\r\n// DisplayObject.js\r\n//##############################################################################\r\n\r\nthis.createjs = this.createjs||{};\r\n\r\n(function() {\r\n\t\"use strict\";\r\n\r\n\r\n// constructor:\r\n\t/**\r\n\t * DisplayObject is an abstract class that should not be constructed directly. Instead construct subclasses such as\r\n\t * {{#crossLink \"Container\"}}{{/crossLink}}, {{#crossLink \"Bitmap\"}}{{/crossLink}}, and {{#crossLink \"Shape\"}}{{/crossLink}}.\r\n\t * DisplayObject is the base class for all display classes in the EaselJS library. It defines the core properties and\r\n\t * methods that are shared between all display objects, such as transformation properties (x, y, scaleX, scaleY, etc),\r\n\t * caching, and mouse handlers.\r\n\t * @class DisplayObject\r\n\t * @extends EventDispatcher\r\n\t * @constructor\r\n\t **/\r\n\tfunction DisplayObject() {\r\n\t\tthis.EventDispatcher_constructor();\r\n\t\t\r\n\t\t\r\n\t// public properties:\r\n\t\t/**\r\n\t\t * The alpha (transparency) for this display object. 0 is fully transparent, 1 is fully opaque.\r\n\t\t * @property alpha\r\n\t\t * @type {Number}\r\n\t\t * @default 1\r\n\t\t **/\r\n\t\tthis.alpha = 1;\r\n\t\r\n\t\t/**\r\n\t\t * If a cache is active, this returns the canvas that holds the cached version of this display object. See {{#crossLink \"cache\"}}{{/crossLink}}\r\n\t\t * for more information.\r\n\t\t * @property cacheCanvas\r\n\t\t * @type {HTMLCanvasElement | Object}\r\n\t\t * @default null\r\n\t\t * @readonly\r\n\t\t **/\r\n\t\tthis.cacheCanvas = null;\r\n\t\r\n\t\t/**\r\n\t\t * Returns an ID number that uniquely identifies the current cache for this display object. This can be used to\r\n\t\t * determine if the cache has changed since a previous check.\r\n\t\t * @property cacheID\r\n\t\t * @type {Number}\r\n\t\t * @default 0\r\n\t\t */\r\n\t\tthis.cacheID = 0;\r\n\t\r\n\t\t/**\r\n\t\t * Unique ID for this display object. Makes display objects easier for some uses.\r\n\t\t * @property id\r\n\t\t * @type {Number}\r\n\t\t * @default -1\r\n\t\t **/\r\n\t\tthis.id = createjs.UID.get();\r\n\t\r\n\t\t/**\r\n\t\t * Indicates whether to include this object when running mouse interactions. Setting this to `false` for children\r\n\t\t * of a {{#crossLink \"Container\"}}{{/crossLink}} will cause events on the Container to not fire when that child is\r\n\t\t * clicked. Setting this property to `false` does not prevent the {{#crossLink \"Container/getObjectsUnderPoint\"}}{{/crossLink}}\r\n\t\t * method from returning the child.\r\n\t\t *\r\n\t\t * <strong>Note:</strong> In EaselJS 0.7.0, the mouseEnabled property will not work properly with nested Containers. Please\r\n\t\t * check out the latest NEXT version in <a href=\"https://github.com/CreateJS/EaselJS/tree/master/lib\">GitHub</a> for an updated version with this issue resolved. The fix will be\r\n\t\t * provided in the next release of EaselJS.\r\n\t\t * @property mouseEnabled\r\n\t\t * @type {Boolean}\r\n\t\t * @default true\r\n\t\t **/\r\n\t\tthis.mouseEnabled = true;\r\n\t\t\r\n\t\t/**\r\n\t\t * If false, the tick will not run on this display object (or its children). This can provide some performance benefits.\r\n\t\t * In addition to preventing the \"tick\" event from being dispatched, it will also prevent tick related updates\r\n\t\t * on some display objects (ex. Sprite & MovieClip frame advancing, DOMElement visibility handling).\r\n\t\t * @property tickEnabled\r\n\t\t * @type Boolean\r\n\t\t * @default true\r\n\t\t **/\r\n\t\tthis.tickEnabled = true;\r\n\t\r\n\t\t/**\r\n\t\t * An optional name for this display object. Included in {{#crossLink \"DisplayObject/toString\"}}{{/crossLink}} . Useful for\r\n\t\t * debugging.\r\n\t\t * @property name\r\n\t\t * @type {String}\r\n\t\t * @default null\r\n\t\t **/\r\n\t\tthis.name = null;\r\n\t\r\n\t\t/**\r\n\t\t * A reference to the {{#crossLink \"Container\"}}{{/crossLink}} or {{#crossLink \"Stage\"}}{{/crossLink}} object that\r\n\t\t * contains this display object, or null if it has not been added\r\n\t\t * to one.\r\n\t\t * @property parent\r\n\t\t * @final\r\n\t\t * @type {Container}\r\n\t\t * @default null\r\n\t\t * @readonly\r\n\t\t **/\r\n\t\tthis.parent = null;\r\n\t\r\n\t\t/**\r\n\t\t * The left offset for this display object's registration point. For example, to make a 100x100px Bitmap rotate\r\n\t\t * around its center, you would set regX and {{#crossLink \"DisplayObject/regY:property\"}}{{/crossLink}} to 50.\r\n\t\t * @property regX\r\n\t\t * @type {Number}\r\n\t\t * @default 0\r\n\t\t **/\r\n\t\tthis.regX = 0;\r\n\t\r\n\t\t/**\r\n\t\t * The y offset for this display object's registration point. For example, to make a 100x100px Bitmap rotate around\r\n\t\t * its center, you would set {{#crossLink \"DisplayObject/regX:property\"}}{{/crossLink}} and regY to 50.\r\n\t\t * @property regY\r\n\t\t * @type {Number}\r\n\t\t * @default 0\r\n\t\t **/\r\n\t\tthis.regY = 0;\r\n\t\r\n\t\t/**\r\n\t\t * The rotation in degrees for this display object.\r\n\t\t * @property rotation\r\n\t\t * @type {Number}\r\n\t\t * @default 0\r\n\t\t **/\r\n\t\tthis.rotation = 0;\r\n\t\r\n\t\t/**\r\n\t\t * The factor to stretch this display object horizontally. For example, setting scaleX to 2 will stretch the display\r\n\t\t * object to twice its nominal width. To horizontally flip an object, set the scale to a negative number.\r\n\t\t * @property scaleX\r\n\t\t * @type {Number}\r\n\t\t * @default 1\r\n\t\t **/\r\n\t\tthis.scaleX = 1;\r\n\t\r\n\t\t/**\r\n\t\t * The factor to stretch this display object vertically. For example, setting scaleY to 0.5 will stretch the display\r\n\t\t * object to half its nominal height. To vertically flip an object, set the scale to a negative number.\r\n\t\t * @property scaleY\r\n\t\t * @type {Number}\r\n\t\t * @default 1\r\n\t\t **/\r\n\t\tthis.scaleY = 1;\r\n\t\r\n\t\t/**\r\n\t\t * The factor to skew this display object horizontally.\r\n\t\t * @property skewX\r\n\t\t * @type {Number}\r\n\t\t * @default 0\r\n\t\t **/\r\n\t\tthis.skewX = 0;\r\n\t\r\n\t\t/**\r\n\t\t * The factor to skew this display object vertically.\r\n\t\t * @property skewY\r\n\t\t * @type {Number}\r\n\t\t * @default 0\r\n\t\t **/\r\n\t\tthis.skewY = 0;\r\n\t\r\n\t\t/**\r\n\t\t * A shadow object that defines the shadow to render on this display object. Set to `null` to remove a shadow. If\r\n\t\t * null, this property is inherited from the parent container.\r\n\t\t * @property shadow\r\n\t\t * @type {Shadow}\r\n\t\t * @default null\r\n\t\t **/\r\n\t\tthis.shadow = null;\r\n\t\r\n\t\t/**\r\n\t\t * Indicates whether this display object should be rendered to the canvas and included when running the Stage\r\n\t\t * {{#crossLink \"Stage/getObjectsUnderPoint\"}}{{/crossLink}} method.\r\n\t\t * @property visible\r\n\t\t * @type {Boolean}\r\n\t\t * @default true\r\n\t\t **/\r\n\t\tthis.visible = true;\r\n\t\r\n\t\t/**\r\n\t\t * The x (horizontal) position of the display object, relative to its parent.\r\n\t\t * @property x\r\n\t\t * @type {Number}\r\n\t\t * @default 0\r\n\t\t **/\r\n\t\tthis.x = 0;\r\n\t\r\n\t\t/** The y (vertical) position of the display object, relative to its parent.\r\n\t\t * @property y\r\n\t\t * @type {Number}\r\n\t\t * @default 0\r\n\t\t **/\r\n\t\tthis.y = 0;\r\n\t\t\r\n\t\t/**\r\n\t\t * If set, defines the transformation for this display object, overriding all other transformation properties\r\n\t\t * (x, y, rotation, scale, skew).\r\n\t\t * @property transformMatrix\r\n\t\t * @type {Matrix2D}\r\n\t\t * @default null\r\n\t\t **/\r\n\t\tthis.transformMatrix = null;\r\n\t\t\r\n\t\t/**\r\n\t\t * The composite operation indicates how the pixels of this display object will be composited with the elements\r\n\t\t * behind it. If `null`, this property is inherited from the parent container. For more information, read the\r\n\t\t * <a href=\"http://www.whatwg.org/specs/web-apps/current-work/multipage/the-canvas-element.html#compositing\">\r\n\t\t * whatwg spec on compositing</a>.\r\n\t\t * @property compositeOperation\r\n\t\t * @type {String}\r\n\t\t * @default null\r\n\t\t **/\r\n\t\tthis.compositeOperation = null;\r\n\t\r\n\t\t/**\r\n\t\t * Indicates whether the display object should be drawn to a whole pixel when\r\n\t\t * {{#crossLink \"Stage/snapToPixelEnabled\"}}{{/crossLink}} is true. To enable/disable snapping on whole\r\n\t\t * categories of display objects, set this value on the prototype (Ex. Text.prototype.snapToPixel = true).\r\n\t\t * @property snapToPixel\r\n\t\t * @type {Boolean}\r\n\t\t * @default true\r\n\t\t **/\r\n\t\tthis.snapToPixel = true;\r\n\t\r\n\t\t/**\r\n\t\t * An array of Filter objects to apply to this display object. Filters are only applied / updated when {{#crossLink \"cache\"}}{{/crossLink}}\r\n\t\t * or {{#crossLink \"updateCache\"}}{{/crossLink}} is called on the display object, and only apply to the area that is\r\n\t\t * cached.\r\n\t\t * @property filters\r\n\t\t * @type {Array}\r\n\t\t * @default null\r\n\t\t **/\r\n\t\tthis.filters = null;\r\n\t\t\r\n\t\t/**\r\n\t\t * A Shape instance that defines a vector mask (clipping path) for this display object.  The shape's transformation\r\n\t\t * will be applied relative to the display object's parent coordinates (as if it were a child of the parent).\r\n\t\t * @property mask\r\n\t\t * @type {Shape}\r\n\t\t * @default null\r\n\t\t */\r\n\t\tthis.mask = null;\r\n\t\t\r\n\t\t/**\r\n\t\t * A display object that will be tested when checking mouse interactions or testing {{#crossLink \"Container/getObjectsUnderPoint\"}}{{/crossLink}}.\r\n\t\t * The hit area will have its transformation applied relative to this display object's coordinate space (as though\r\n\t\t * the hit test object were a child of this display object and relative to its regX/Y). The hitArea will be tested\r\n\t\t * using only its own `alpha` value regardless of the alpha value on the target display object, or the target's\r\n\t\t * ancestors (parents).\r\n\t\t * \r\n\t\t * If set on a {{#crossLink \"Container\"}}{{/crossLink}}, children of the Container will not receive mouse events.\r\n\t\t * This is similar to setting {{#crossLink \"mouseChildren\"}}{{/crossLink}} to false.\r\n\t\t *\r\n\t\t * Note that hitArea is NOT currently used by the `hitTest()` method, nor is it supported for {{#crossLink \"Stage\"}}{{/crossLink}}.\r\n\t\t * @property hitArea\r\n\t\t * @type {DisplayObject}\r\n\t\t * @default null\r\n\t\t */\r\n\t\tthis.hitArea = null;\r\n\t\t\r\n\t\t/**\r\n\t\t * A CSS cursor (ex. \"pointer\", \"help\", \"text\", etc) that will be displayed when the user hovers over this display\r\n\t\t * object. You must enable mouseover events using the {{#crossLink \"Stage/enableMouseOver\"}}{{/crossLink}} method to\r\n\t\t * use this property. Setting a non-null cursor on a Container will override the cursor set on its descendants.\r\n\t\t * @property cursor\r\n\t\t * @type {String}\r\n\t\t * @default null\r\n\t\t */\r\n\t\tthis.cursor = null;\r\n\t\r\n\t\r\n\t// private properties:\r\n\t\t/**\r\n\t\t * @property _cacheOffsetX\r\n\t\t * @protected\r\n\t\t * @type {Number}\r\n\t\t * @default 0\r\n\t\t **/\r\n\t\tthis._cacheOffsetX = 0;\r\n\t\r\n\t\t/**\r\n\t\t * @property _cacheOffsetY\r\n\t\t * @protected\r\n\t\t * @type {Number}\r\n\t\t * @default 0\r\n\t\t **/\r\n\t\tthis._cacheOffsetY = 0;\r\n\t\t\r\n\t\t/**\r\n\t\t * @property _filterOffsetX\r\n\t\t * @protected\r\n\t\t * @type {Number}\r\n\t\t * @default 0\r\n\t\t **/\r\n\t\tthis._filterOffsetX = 0;\r\n\t\t\r\n\t\t/**\r\n\t\t * @property _filterOffsetY\r\n\t\t * @protected\r\n\t\t * @type {Number}\r\n\t\t * @default 0\r\n\t\t **/\r\n\t\tthis._filterOffsetY = 0;\r\n\t\t\r\n\t\t/**\r\n\t\t * @property _cacheScale\r\n\t\t * @protected\r\n\t\t * @type {Number}\r\n\t\t * @default 1\r\n\t\t **/\r\n\t\tthis._cacheScale = 1;\r\n\t\r\n\t\t/**\r\n\t\t* @property _cacheDataURLID\r\n\t\t* @protected\r\n\t\t* @type {Number}\r\n\t\t* @default 0\r\n\t\t*/\r\n\t\tthis._cacheDataURLID = 0;\r\n\t\t\r\n\t\t/**\r\n\t\t* @property _cacheDataURL\r\n\t\t* @protected\r\n\t\t* @type {String}\r\n\t\t* @default null\r\n\t\t*/\r\n\t\tthis._cacheDataURL = null;\r\n\t\r\n\t\t/**\r\n\t\t * @property _props\r\n\t\t * @protected\r\n\t\t * @type {DisplayObject}\r\n\t\t * @default null\r\n\t\t **/\r\n\t\tthis._props = new createjs.DisplayProps();\r\n\t\r\n\t\t/**\r\n\t\t * @property _rectangle\r\n\t\t * @protected\r\n\t\t * @type {Rectangle}\r\n\t\t * @default null\r\n\t\t **/\r\n\t\tthis._rectangle = new createjs.Rectangle();\r\n\t\r\n\t\t/**\r\n\t\t * @property _bounds\r\n\t\t * @protected\r\n\t\t * @type {Rectangle}\r\n\t\t * @default null\r\n\t\t **/\r\n\t\tthis._bounds = null;\r\n\t}\r\n\tvar p = createjs.extend(DisplayObject, createjs.EventDispatcher);\r\n\r\n\t// TODO: deprecated\r\n\t// p.initialize = function() {}; // searchable for devs wondering where it is. REMOVED. See docs for details.\r\n\t\r\n// static properties:\r\n\t/**\r\n\t * Listing of mouse event names. Used in _hasMouseEventListener.\r\n\t * @property _MOUSE_EVENTS\r\n\t * @protected\r\n\t * @static\r\n\t * @type {Array}\r\n\t **/\r\n\tDisplayObject._MOUSE_EVENTS = [\"click\",\"dblclick\",\"mousedown\",\"mouseout\",\"mouseover\",\"pressmove\",\"pressup\",\"rollout\",\"rollover\"];\r\n\r\n\t/**\r\n\t * Suppresses errors generated when using features like hitTest, mouse events, and {{#crossLink \"getObjectsUnderPoint\"}}{{/crossLink}}\r\n\t * with cross domain content.\r\n\t * @property suppressCrossDomainErrors\r\n\t * @static\r\n\t * @type {Boolean}\r\n\t * @default false\r\n\t **/\r\n\tDisplayObject.suppressCrossDomainErrors = false;\r\n\t\r\n\t/**\r\n\t * @property _snapToPixelEnabled\r\n\t * @protected\r\n\t * @static\r\n\t * @type {Boolean}\r\n\t * @default false\r\n\t **/\r\n\tDisplayObject._snapToPixelEnabled = false; // stage.snapToPixelEnabled is temporarily copied here during a draw to provide global access.\r\n\r\n\t/**\r\n\t * @property _hitTestCanvas\r\n\t * @type {HTMLCanvasElement | Object}\r\n\t * @static\r\n\t * @protected\r\n\t **/\r\n\t/**\r\n\t * @property _hitTestContext\r\n\t * @type {CanvasRenderingContext2D}\r\n\t * @static\r\n\t * @protected\r\n\t **/\r\n\tvar canvas = createjs.createCanvas?createjs.createCanvas():document.createElement(\"canvas\"); // prevent errors on load in browsers without canvas.\r\n\tif (canvas.getContext) {\r\n\t\tDisplayObject._hitTestCanvas = canvas;\r\n\t\tDisplayObject._hitTestContext = canvas.getContext(\"2d\");\r\n\t\tcanvas.width = canvas.height = 1;\r\n\t}\r\n\r\n\t/**\r\n\t * @property _nextCacheID\r\n\t * @type {Number}\r\n\t * @static\r\n\t * @protected\r\n\t **/\r\n\tDisplayObject._nextCacheID = 1;\r\n\r\n\r\n// events:\r\n\t/**\r\n\t * Dispatched when the user presses their left mouse button over the display object. See the \r\n\t * {{#crossLink \"MouseEvent\"}}{{/crossLink}} class for a listing of event properties.\r\n\t * @event mousedown\r\n\t * @since 0.6.0\r\n\t */\r\n\t \r\n\t/**\r\n\t * Dispatched when the user presses their left mouse button and then releases it while over the display object.\r\n\t * See the {{#crossLink \"MouseEvent\"}}{{/crossLink}} class for a listing of event properties.\r\n\t * @event click\r\n\t * @since 0.6.0\r\n\t */\r\n\t \r\n\t/**\r\n\t * Dispatched when the user double clicks their left mouse button over this display object.\r\n\t * See the {{#crossLink \"MouseEvent\"}}{{/crossLink}} class for a listing of event properties.\r\n\t * @event dblclick\r\n\t * @since 0.6.0\r\n\t */\r\n\t \r\n\t/**\r\n\t * Dispatched when the user's mouse enters this display object. This event must be enabled using \r\n\t * {{#crossLink \"Stage/enableMouseOver\"}}{{/crossLink}}. See also {{#crossLink \"DisplayObject/rollover:event\"}}{{/crossLink}}.\r\n\t * See the {{#crossLink \"MouseEvent\"}}{{/crossLink}} class for a listing of event properties.\r\n\t * @event mouseover\r\n\t * @since 0.6.0\r\n\t */\r\n\r\n\t/**\r\n\t * Dispatched when the user's mouse leaves this display object. This event must be enabled using \r\n\t * {{#crossLink \"Stage/enableMouseOver\"}}{{/crossLink}}. See also {{#crossLink \"DisplayObject/rollout:event\"}}{{/crossLink}}.\r\n\t * See the {{#crossLink \"MouseEvent\"}}{{/crossLink}} class for a listing of event properties.\r\n\t * @event mouseout\r\n\t * @since 0.6.0\r\n\t */\r\n\t \r\n\t/**\r\n\t * This event is similar to {{#crossLink \"DisplayObject/mouseover:event\"}}{{/crossLink}}, with the following\r\n\t * differences: it does not bubble, and it considers {{#crossLink \"Container\"}}{{/crossLink}} instances as an\r\n\t * aggregate of their content.\r\n\t * \r\n\t * For example, myContainer contains two overlapping children: shapeA and shapeB. The user moves their mouse over\r\n\t * shapeA and then directly on to shapeB. With a listener for {{#crossLink \"mouseover:event\"}}{{/crossLink}} on\r\n\t * myContainer, two events would be received, each targeting a child element:<OL>\r\n\t * <LI>when the mouse enters shapeA (target=shapeA)</LI>\r\n\t * <LI>when the mouse enters shapeB (target=shapeB)</LI>\r\n\t * </OL>\r\n\t * However, with a listener for \"rollover\" instead, only a single event is received when the mouse first enters\r\n\t * the aggregate myContainer content (target=myContainer).\r\n\t * \r\n\t * This event must be enabled using {{#crossLink \"Stage/enableMouseOver\"}}{{/crossLink}}.\r\n\t * See the {{#crossLink \"MouseEvent\"}}{{/crossLink}} class for a listing of event properties.\r\n\t * @event rollover\r\n\t * @since 0.7.0\r\n\t */\r\n\t \r\n\t/**\r\n\t * This event is similar to {{#crossLink \"DisplayObject/mouseout:event\"}}{{/crossLink}}, with the following\r\n\t * differences: it does not bubble, and it considers {{#crossLink \"Container\"}}{{/crossLink}} instances as an\r\n\t * aggregate of their content.\r\n\t * \r\n\t * For example, myContainer contains two overlapping children: shapeA and shapeB. The user moves their mouse over\r\n\t * shapeA, then directly on to shapeB, then off both. With a listener for {{#crossLink \"mouseout:event\"}}{{/crossLink}}\r\n\t * on myContainer, two events would be received, each targeting a child element:<OL>\r\n\t * <LI>when the mouse leaves shapeA (target=shapeA)</LI>\r\n\t * <LI>when the mouse leaves shapeB (target=shapeB)</LI>\r\n\t * </OL>\r\n\t * However, with a listener for \"rollout\" instead, only a single event is received when the mouse leaves\r\n\t * the aggregate myContainer content (target=myContainer).\r\n\t * \r\n\t * This event must be enabled using {{#crossLink \"Stage/enableMouseOver\"}}{{/crossLink}}.\r\n\t * See the {{#crossLink \"MouseEvent\"}}{{/crossLink}} class for a listing of event properties.\r\n\t * @event rollout\r\n\t * @since 0.7.0\r\n\t */\r\n\t \r\n\t/**\r\n\t * After a {{#crossLink \"DisplayObject/mousedown:event\"}}{{/crossLink}} occurs on a display object, a pressmove\r\n\t * event will be generated on that object whenever the mouse moves until the mouse press is released. This can be\r\n\t * useful for dragging and similar operations.\r\n\t * @event pressmove\r\n\t * @since 0.7.0\r\n\t */\r\n\t \r\n\t/**\r\n\t * After a {{#crossLink \"DisplayObject/mousedown:event\"}}{{/crossLink}} occurs on a display object, a pressup event\r\n\t * will be generated on that object when that mouse press is released. This can be useful for dragging and similar\r\n\t * operations.\r\n\t * @event pressup\r\n\t * @since 0.7.0\r\n\t */\r\n\t \r\n\t/**\r\n\t * Dispatched when the display object is added to a parent container.\r\n\t * @event added\r\n\t */\r\n\t \r\n\t/**\r\n\t * Dispatched when the display object is removed from its parent container.\r\n\t * @event removed\r\n\t */\r\n\t \r\n\t/**\r\n\t * Dispatched on each display object on a stage whenever the stage updates. This occurs immediately before the\r\n\t * rendering (draw) pass. When {{#crossLink \"Stage/update\"}}{{/crossLink}} is called, first all display objects on\r\n\t * the stage dispatch the tick event, then all of the display objects are drawn to stage. Children will have their\r\n\t * {{#crossLink \"tick:event\"}}{{/crossLink}} event dispatched in order of their depth prior to the event being\r\n\t * dispatched on their parent.\r\n\t * @event tick\r\n\t * @param {Object} target The object that dispatched the event.\r\n\t * @param {String} type The event type.\r\n\t * @param {Array} params An array containing any arguments that were passed to the Stage.update() method. For\r\n\t *      example if you called stage.update(\"hello\"), then the params would be [\"hello\"].\r\n\t * @since 0.6.0\r\n\t */\r\n\t\r\n\t\r\n// getter / setters:\r\n\t/**\r\n\t * Use the {{#crossLink \"DisplayObject/stage:property\"}}{{/crossLink}} property instead.\r\n\t * @method getStage\r\n\t * @return {Stage}\r\n\t * @deprecated\r\n\t **/\r\n\tp.getStage = function() {\r\n\t\t// uses dynamic access to avoid circular dependencies;\r\n\t\tvar o = this, _Stage = createjs[\"Stage\"];\r\n\t\twhile (o.parent) { o = o.parent; }\r\n\t\tif (o instanceof _Stage) { return o; }\r\n\t\treturn null;\r\n\t};\r\n\r\n\t/**\r\n\t * Returns the Stage instance that this display object will be rendered on, or null if it has not been added to one.\r\n\t * @property stage\r\n\t * @type {Stage}\r\n\t * @readonly\r\n\t **/\r\n\ttry {\r\n\t\tObject.defineProperties(p, {\r\n\t\t\tstage: { get: p.getStage }\r\n\t\t});\r\n\t} catch (e) {}\r\n\r\n\r\n// public methods:\r\n\t/**\r\n\t * Returns true or false indicating whether the display object would be visible if drawn to a canvas.\r\n\t * This does not account for whether it would be visible within the boundaries of the stage.\r\n\t *\r\n\t * NOTE: This method is mainly for internal use, though it may be useful for advanced uses.\r\n\t * @method isVisible\r\n\t * @return {Boolean} Boolean indicating whether the display object would be visible if drawn to a canvas\r\n\t **/\r\n\tp.isVisible = function() {\r\n\t\treturn !!(this.visible && this.alpha > 0 && this.scaleX != 0 && this.scaleY != 0);\r\n\t};\r\n\r\n\t/**\r\n\t * Draws the display object into the specified context ignoring its visible, alpha, shadow, and transform.\r\n\t * Returns <code>true</code> if the draw was handled (useful for overriding functionality).\r\n\t *\r\n\t * NOTE: This method is mainly for internal use, though it may be useful for advanced uses.\r\n\t * @method draw\r\n\t * @param {CanvasRenderingContext2D} ctx The canvas 2D context object to draw into.\r\n\t * @param {Boolean} [ignoreCache=false] Indicates whether the draw operation should ignore any current cache. For example,\r\n\t * used for drawing the cache (to prevent it from simply drawing an existing cache back into itself).\r\n\t * @return {Boolean}\r\n\t **/\r\n\tp.draw = function(ctx, ignoreCache) {\r\n\t\tvar cacheCanvas = this.cacheCanvas;\r\n\t\tif (ignoreCache || !cacheCanvas) { return false; }\r\n\t\tvar scale = this._cacheScale;\r\n\t\tctx.drawImage(cacheCanvas, this._cacheOffsetX+this._filterOffsetX, this._cacheOffsetY+this._filterOffsetY, cacheCanvas.width/scale, cacheCanvas.height/scale);\r\n\t\treturn true;\r\n\t};\r\n\t\r\n\t/**\r\n\t * Applies this display object's transformation, alpha, globalCompositeOperation, clipping path (mask), and shadow\r\n\t * to the specified context. This is typically called prior to {{#crossLink \"DisplayObject/draw\"}}{{/crossLink}}.\r\n\t * @method updateContext\r\n\t * @param {CanvasRenderingContext2D} ctx The canvas 2D to update.\r\n\t **/\r\n\tp.updateContext = function(ctx) {\r\n\t\tvar o=this, mask=o.mask, mtx= o._props.matrix;\r\n\t\t\r\n\t\tif (mask && mask.graphics && !mask.graphics.isEmpty()) {\r\n\t\t\tmask.getMatrix(mtx);\r\n\t\t\tctx.transform(mtx.a,  mtx.b, mtx.c, mtx.d, mtx.tx, mtx.ty);\r\n\t\t\t\r\n\t\t\tmask.graphics.drawAsPath(ctx);\r\n\t\t\tctx.clip();\r\n\t\t\t\r\n\t\t\tmtx.invert();\r\n\t\t\tctx.transform(mtx.a,  mtx.b, mtx.c, mtx.d, mtx.tx, mtx.ty);\r\n\t\t}\r\n\t\t\r\n\t\tthis.getMatrix(mtx);\r\n\t\tvar tx = mtx.tx, ty = mtx.ty;\r\n\t\tif (DisplayObject._snapToPixelEnabled && o.snapToPixel) {\r\n\t\t\ttx = tx + (tx < 0 ? -0.5 : 0.5) | 0;\r\n\t\t\tty = ty + (ty < 0 ? -0.5 : 0.5) | 0;\r\n\t\t}\r\n\t\tctx.transform(mtx.a,  mtx.b, mtx.c, mtx.d, tx, ty);\r\n\t\tctx.globalAlpha *= o.alpha;\r\n\t\tif (o.compositeOperation) { ctx.globalCompositeOperation = o.compositeOperation; }\r\n\t\tif (o.shadow) { this._applyShadow(ctx, o.shadow); }\r\n\t};\r\n\r\n\t/**\r\n\t * Draws the display object into a new canvas, which is then used for subsequent draws. For complex content\r\n\t * that does not change frequently (ex. a Container with many children that do not move, or a complex vector Shape),\r\n\t * this can provide for much faster rendering because the content does not need to be re-rendered each tick. The\r\n\t * cached display object can be moved, rotated, faded, etc freely, however if its content changes, you must\r\n\t * manually update the cache by calling <code>updateCache()</code> or <code>cache()</code> again. You must specify\r\n\t * the cache area via the x, y, w, and h parameters. This defines the rectangle that will be rendered and cached\r\n\t * using this display object's coordinates.\r\n\t *\r\n\t * <h4>Example</h4>\r\n\t * For example if you defined a Shape that drew a circle at 0, 0 with a radius of 25:\r\n\t *\r\n\t *      var shape = new createjs.Shape();\r\n\t *      shape.graphics.beginFill(\"#ff0000\").drawCircle(0, 0, 25);\r\n\t *      myShape.cache(-25, -25, 50, 50);\r\n\t *\r\n\t * Note that filters need to be defined <em>before</em> the cache is applied. Check out the {{#crossLink \"Filter\"}}{{/crossLink}}\r\n\t * class for more information. Some filters (ex. BlurFilter) will not work as expected in conjunction with the scale param.\r\n\t * \r\n\t * Usually, the resulting cacheCanvas will have the dimensions width*scale by height*scale, however some filters (ex. BlurFilter)\r\n\t * will add padding to the canvas dimensions.\r\n\t *\r\n\t * @method cache\r\n\t * @param {Number} x The x coordinate origin for the cache region.\r\n\t * @param {Number} y The y coordinate origin for the cache region.\r\n\t * @param {Number} width The width of the cache region.\r\n\t * @param {Number} height The height of the cache region.\r\n\t * @param {Number} [scale=1] The scale at which the cache will be created. For example, if you cache a vector shape using\r\n\t * \tmyShape.cache(0,0,100,100,2) then the resulting cacheCanvas will be 200x200 px. This lets you scale and rotate\r\n\t * \tcached elements with greater fidelity. Default is 1.\r\n\t **/\r\n\tp.cache = function(x, y, width, height, scale) {\r\n\t\t// draw to canvas.\r\n\t\tscale = scale||1;\r\n\t\tif (!this.cacheCanvas) { this.cacheCanvas = createjs.createCanvas?createjs.createCanvas():document.createElement(\"canvas\"); }\r\n\t\tthis._cacheWidth = width;\r\n\t\tthis._cacheHeight = height;\r\n\t\tthis._cacheOffsetX = x;\r\n\t\tthis._cacheOffsetY = y;\r\n\t\tthis._cacheScale = scale;\r\n\t\tthis.updateCache();\r\n\t};\r\n\r\n\t/**\r\n\t * Redraws the display object to its cache. Calling updateCache without an active cache will throw an error.\r\n\t * If compositeOperation is null the current cache will be cleared prior to drawing. Otherwise the display object\r\n\t * will be drawn over the existing cache using the specified compositeOperation.\r\n\t *\r\n\t * <h4>Example</h4>\r\n\t * Clear the current graphics of a cached shape, draw some new instructions, and then update the cache. The new line\r\n\t * will be drawn on top of the old one.\r\n\t *\r\n\t *      // Not shown: Creating the shape, and caching it.\r\n\t *      shapeInstance.clear();\r\n\t *      shapeInstance.setStrokeStyle(3).beginStroke(\"#ff0000\").moveTo(100, 100).lineTo(200,200);\r\n\t *      shapeInstance.updateCache();\r\n\t *\r\n\t * @method updateCache\r\n\t * @param {String} compositeOperation The compositeOperation to use, or null to clear the cache and redraw it.\r\n\t * <a href=\"http://www.whatwg.org/specs/web-apps/current-work/multipage/the-canvas-element.html#compositing\">\r\n\t * whatwg spec on compositing</a>.\r\n\t **/\r\n\tp.updateCache = function(compositeOperation) {\r\n\t\tvar cacheCanvas = this.cacheCanvas;\r\n\t\tif (!cacheCanvas) { throw \"cache() must be called before updateCache()\"; }\r\n\t\tvar scale = this._cacheScale, offX = this._cacheOffsetX*scale, offY = this._cacheOffsetY*scale;\r\n\t\tvar w = this._cacheWidth, h = this._cacheHeight, ctx = cacheCanvas.getContext(\"2d\");\r\n\t\t\r\n\t\tvar fBounds = this._getFilterBounds();\r\n\t\toffX += (this._filterOffsetX = fBounds.x);\r\n\t\toffY += (this._filterOffsetY = fBounds.y);\r\n\t\t\r\n\t\tw = Math.ceil(w*scale) + fBounds.width;\r\n\t\th = Math.ceil(h*scale) + fBounds.height;\r\n\t\tif (w != cacheCanvas.width || h != cacheCanvas.height) {\r\n\t\t\t// TODO: it would be nice to preserve the content if there is a compositeOperation.\r\n\t\t\tcacheCanvas.width = w;\r\n\t\t\tcacheCanvas.height = h;\r\n\t\t} else if (!compositeOperation) {\r\n\t\t\tctx.clearRect(0, 0, w+1, h+1);\r\n\t\t}\r\n\t\t\r\n\t\tctx.save();\r\n\t\tctx.globalCompositeOperation = compositeOperation;\r\n\t\tctx.setTransform(scale, 0, 0, scale, -offX, -offY);\r\n\t\tthis.draw(ctx, true);\r\n\t\t// TODO: filters and cache scale don't play well together at present.\r\n\t\tthis._applyFilters();\r\n\t\tctx.restore();\r\n\t\tthis.cacheID = DisplayObject._nextCacheID++;\r\n\t};\r\n\r\n\t/**\r\n\t * Clears the current cache. See {{#crossLink \"DisplayObject/cache\"}}{{/crossLink}} for more information.\r\n\t * @method uncache\r\n\t **/\r\n\tp.uncache = function() {\r\n\t\tthis._cacheDataURL = this.cacheCanvas = null;\r\n\t\tthis.cacheID = this._cacheOffsetX = this._cacheOffsetY = this._filterOffsetX = this._filterOffsetY = 0;\r\n\t\tthis._cacheScale = 1;\r\n\t};\r\n\t\r\n\t/**\r\n\t * Returns a data URL for the cache, or null if this display object is not cached.\r\n\t * Uses cacheID to ensure a new data URL is not generated if the cache has not changed.\r\n\t * @method getCacheDataURL\r\n\t * @return {String} The image data url for the cache.\r\n\t **/\r\n\tp.getCacheDataURL = function() {\r\n\t\tif (!this.cacheCanvas) { return null; }\r\n\t\tif (this.cacheID != this._cacheDataURLID) { this._cacheDataURL = this.cacheCanvas.toDataURL(); }\r\n\t\treturn this._cacheDataURL;\r\n\t};\r\n\r\n\t/**\r\n\t * Transforms the specified x and y position from the coordinate space of the display object\r\n\t * to the global (stage) coordinate space. For example, this could be used to position an HTML label\r\n\t * over a specific point on a nested display object. Returns a Point instance with x and y properties\r\n\t * correlating to the transformed coordinates on the stage.\r\n\t *\r\n\t * <h4>Example</h4>\r\n\t *\r\n\t *      displayObject.x = 300;\r\n\t *      displayObject.y = 200;\r\n\t *      stage.addChild(displayObject);\r\n\t *      var point = displayObject.localToGlobal(100, 100);\r\n\t *      // Results in x=400, y=300\r\n\t *\r\n\t * @method localToGlobal\r\n\t * @param {Number} x The x position in the source display object to transform.\r\n\t * @param {Number} y The y position in the source display object to transform.\r\n\t * @param {Point | Object} [pt] An object to copy the result into. If omitted a new Point object with x/y properties will be returned. \r\n\t * @return {Point} A Point instance with x and y properties correlating to the transformed coordinates\r\n\t * on the stage.\r\n\t **/\r\n\tp.localToGlobal = function(x, y, pt) {\r\n\t\treturn this.getConcatenatedMatrix(this._props.matrix).transformPoint(x,y, pt||new createjs.Point());\r\n\t};\r\n\r\n\t/**\r\n\t * Transforms the specified x and y position from the global (stage) coordinate space to the\r\n\t * coordinate space of the display object. For example, this could be used to determine\r\n\t * the current mouse position within the display object. Returns a Point instance with x and y properties\r\n\t * correlating to the transformed position in the display object's coordinate space.\r\n\t *\r\n\t * <h4>Example</h4>\r\n\t *\r\n\t *      displayObject.x = 300;\r\n\t *      displayObject.y = 200;\r\n\t *      stage.addChild(displayObject);\r\n\t *      var point = displayObject.globalToLocal(100, 100);\r\n\t *      // Results in x=-200, y=-100\r\n\t *\r\n\t * @method globalToLocal\r\n\t * @param {Number} x The x position on the stage to transform.\r\n\t * @param {Number} y The y position on the stage to transform.\r\n\t * @param {Point | Object} [pt] An object to copy the result into. If omitted a new Point object with x/y properties will be returned. \r\n\t * @return {Point} A Point instance with x and y properties correlating to the transformed position in the\r\n\t * display object's coordinate space.\r\n\t **/\r\n\tp.globalToLocal = function(x, y, pt) {\r\n\t\treturn this.getConcatenatedMatrix(this._props.matrix).invert().transformPoint(x,y, pt||new createjs.Point());\r\n\t};\r\n\r\n\t/**\r\n\t * Transforms the specified x and y position from the coordinate space of this display object to the coordinate\r\n\t * space of the target display object. Returns a Point instance with x and y properties correlating to the\r\n\t * transformed position in the target's coordinate space. Effectively the same as using the following code with\r\n\t * {{#crossLink \"DisplayObject/localToGlobal\"}}{{/crossLink}} and {{#crossLink \"DisplayObject/globalToLocal\"}}{{/crossLink}}.\r\n\t *\r\n\t *      var pt = this.localToGlobal(x, y);\r\n\t *      pt = target.globalToLocal(pt.x, pt.y);\r\n\t *\r\n\t * @method localToLocal\r\n\t * @param {Number} x The x position in the source display object to transform.\r\n\t * @param {Number} y The y position on the source display object to transform.\r\n\t * @param {DisplayObject} target The target display object to which the coordinates will be transformed.\r\n\t * @param {Point | Object} [pt] An object to copy the result into. If omitted a new Point object with x/y properties will be returned. \r\n\t * @return {Point} Returns a Point instance with x and y properties correlating to the transformed position\r\n\t * in the target's coordinate space.\r\n\t **/\r\n\tp.localToLocal = function(x, y, target, pt) {\r\n\t\tpt = this.localToGlobal(x, y, pt);\r\n\t\treturn target.globalToLocal(pt.x, pt.y, pt);\r\n\t};\r\n\r\n\t/**\r\n\t * Shortcut method to quickly set the transform properties on the display object. All parameters are optional.\r\n\t * Omitted parameters will have the default value set.\r\n\t *\r\n\t * <h4>Example</h4>\r\n\t *\r\n\t *      displayObject.setTransform(100, 100, 2, 2);\r\n\t *\r\n\t * @method setTransform\r\n\t * @param {Number} [x=0] The horizontal translation (x position) in pixels\r\n\t * @param {Number} [y=0] The vertical translation (y position) in pixels\r\n\t * @param {Number} [scaleX=1] The horizontal scale, as a percentage of 1\r\n\t * @param {Number} [scaleY=1] the vertical scale, as a percentage of 1\r\n\t * @param {Number} [rotation=0] The rotation, in degrees\r\n\t * @param {Number} [skewX=0] The horizontal skew factor\r\n\t * @param {Number} [skewY=0] The vertical skew factor\r\n\t * @param {Number} [regX=0] The horizontal registration point in pixels\r\n\t * @param {Number} [regY=0] The vertical registration point in pixels\r\n\t * @return {DisplayObject} Returns this instance. Useful for chaining commands.\r\n\t * @chainable\r\n\t*/\r\n\tp.setTransform = function(x, y, scaleX, scaleY, rotation, skewX, skewY, regX, regY) {\r\n\t\tthis.x = x || 0;\r\n\t\tthis.y = y || 0;\r\n\t\tthis.scaleX = scaleX == null ? 1 : scaleX;\r\n\t\tthis.scaleY = scaleY == null ? 1 : scaleY;\r\n\t\tthis.rotation = rotation || 0;\r\n\t\tthis.skewX = skewX || 0;\r\n\t\tthis.skewY = skewY || 0;\r\n\t\tthis.regX = regX || 0;\r\n\t\tthis.regY = regY || 0;\r\n\t\treturn this;\r\n\t};\r\n\t\r\n\t/**\r\n\t * Returns a matrix based on this object's current transform.\r\n\t * @method getMatrix\r\n\t * @param {Matrix2D} matrix Optional. A Matrix2D object to populate with the calculated values. If null, a new\r\n\t * Matrix object is returned.\r\n\t * @return {Matrix2D} A matrix representing this display object's transform.\r\n\t **/\r\n\tp.getMatrix = function(matrix) {\r\n\t\tvar o = this, mtx = matrix&&matrix.identity() || new createjs.Matrix2D();\r\n\t\treturn o.transformMatrix ?  mtx.copy(o.transformMatrix) : mtx.appendTransform(o.x, o.y, o.scaleX, o.scaleY, o.rotation, o.skewX, o.skewY, o.regX, o.regY);\r\n\t};\r\n\t\r\n\t/**\r\n\t * Generates a Matrix2D object representing the combined transform of the display object and all of its\r\n\t * parent Containers up to the highest level ancestor (usually the {{#crossLink \"Stage\"}}{{/crossLink}}). This can\r\n\t * be used to transform positions between coordinate spaces, such as with {{#crossLink \"DisplayObject/localToGlobal\"}}{{/crossLink}}\r\n\t * and {{#crossLink \"DisplayObject/globalToLocal\"}}{{/crossLink}}.\r\n\t * @method getConcatenatedMatrix\r\n\t * @param {Matrix2D} [matrix] A {{#crossLink \"Matrix2D\"}}{{/crossLink}} object to populate with the calculated values.\r\n\t * If null, a new Matrix2D object is returned.\r\n\t * @return {Matrix2D} The combined matrix.\r\n\t **/\r\n\tp.getConcatenatedMatrix = function(matrix) {\r\n\t\tvar o = this, mtx = this.getMatrix(matrix);\r\n\t\twhile (o = o.parent) {\r\n\t\t\tmtx.prependMatrix(o.getMatrix(o._props.matrix));\r\n\t\t}\r\n\t\treturn mtx;\r\n\t};\r\n\t\r\n\t/**\r\n\t * Generates a DisplayProps object representing the combined display properties of the  object and all of its\r\n\t * parent Containers up to the highest level ancestor (usually the {{#crossLink \"Stage\"}}{{/crossLink}}).\r\n\t * @method getConcatenatedDisplayProps\r\n\t * @param {DisplayProps} [props] A {{#crossLink \"DisplayProps\"}}{{/crossLink}} object to populate with the calculated values.\r\n\t * If null, a new DisplayProps object is returned.\r\n\t * @return {DisplayProps} The combined display properties.\r\n\t **/\r\n\tp.getConcatenatedDisplayProps = function(props) {\r\n\t\tprops = props ? props.identity() : new createjs.DisplayProps();\r\n\t\tvar o = this, mtx = o.getMatrix(props.matrix); \r\n\t\tdo {\r\n\t\t\tprops.prepend(o.visible, o.alpha, o.shadow, o.compositeOperation);\r\n\t\t\t\r\n\t\t\t// we do this to avoid problems with the matrix being used for both operations when o._props.matrix is passed in as the props param.\r\n\t\t\t// this could be simplified (ie. just done as part of the prepend above) if we switched to using a pool.\r\n\t\t\tif (o != this) { mtx.prependMatrix(o.getMatrix(o._props.matrix)); }\r\n\t\t} while (o = o.parent);\r\n\t\treturn props;\r\n\t};\r\n\r\n\t/**\r\n\t * Tests whether the display object intersects the specified point in <em>local</em> coordinates (ie. draws a pixel\r\n\t * with alpha > 0 at the specified position). This ignores the alpha, shadow, hitArea, mask, and compositeOperation\r\n\t * of the display object.\r\n\t *\r\n\t * <h4>Example</h4>\r\n\t *\r\n\t * \t\tvar myShape = new createjs.Shape();\r\n\t * \t\tmyShape.graphics.beginFill(\"red\").drawRect(100, 100, 20, 50);\r\n\t *\r\n\t * \t\tconsole.log(myShape.hitTest(10,10); // false\r\n\t * \t\tconsole.log(myShape.hitTest(110, 25); // true\r\n\t *\r\n\t * Note that to use Stage coordinates (such as {{#crossLink \"Stage/mouseX:property\"}}{{/crossLink}}), they must\r\n\t * first be converted to local coordinates:\r\n\t *\r\n\t *      stage.addEventListener(\"stagemousedown\", handleMouseDown);\r\n\t *      function handleMouseDown(event) {\r\n\t *      \tvar p = myShape.globalToLocal(stage.mouseX, stage.mouseY);\r\n\t *          var hit = myShape.hitTest(p.x, p.y);\r\n\t *      }\r\n\t *\r\n\t * Shape-to-shape collision is not currently supported by EaselJS.\r\n\t *\r\n\t * @method hitTest\r\n\t * @param {Number} x The x position to check in the display object's local coordinates.\r\n\t * @param {Number} y The y position to check in the display object's local coordinates.\r\n\t * @return {Boolean} A Boolean indicating whether a visible portion of the DisplayObject intersect the specified\r\n\t * local Point.\r\n\t*/\r\n\tp.hitTest = function(x, y) {\r\n\t\tvar ctx = DisplayObject._hitTestContext;\r\n\t\tctx.setTransform(1, 0, 0, 1, -x, -y);\r\n\t\tthis.draw(ctx);\r\n\r\n\t\tvar hit = this._testHit(ctx);\r\n\t\tctx.setTransform(1, 0, 0, 1, 0, 0);\r\n\t\tctx.clearRect(0, 0, 2, 2);\r\n\t\treturn hit;\r\n\t};\r\n\t\r\n\t/**\r\n\t * Provides a chainable shortcut method for setting a number of properties on the instance.\r\n\t *\r\n\t * <h4>Example</h4>\r\n\t *\r\n\t *      var myGraphics = new createjs.Graphics().beginFill(\"#ff0000\").drawCircle(0, 0, 25);\r\n\t *      var shape = stage.addChild(new createjs.Shape()).set({graphics:myGraphics, x:100, y:100, alpha:0.5});\r\n\t *\r\n\t * @method set\r\n\t * @param {Object} props A generic object containing properties to copy to the DisplayObject instance.\r\n\t * @return {DisplayObject} Returns the instance the method is called on (useful for chaining calls.)\r\n\t * @chainable\r\n\t*/\r\n\tp.set = function(props) {\r\n\t\tfor (var n in props) { this[n] = props[n]; }\r\n\t\treturn this;\r\n\t};\r\n\t\r\n\t/**\r\n\t * Returns a rectangle representing this object's bounds in its local coordinate system (ie. with no transformation).\r\n\t * Objects that have been cached will return the bounds of the cache.\r\n\t * \r\n\t * Not all display objects can calculate their own bounds (ex. Shape). For these objects, you can use \r\n\t * {{#crossLink \"DisplayObject/setBounds\"}}{{/crossLink}} so that they are included when calculating Container\r\n\t * bounds.\r\n\t * \r\n\t * <table>\r\n\t * \t<tr><td><b>All</b></td><td>\r\n\t * \t\tAll display objects support setting bounds manually using setBounds(). Likewise, display objects that\r\n\t * \t\thave been cached using cache() will return the bounds of their cache. Manual and cache bounds will override\r\n\t * \t\tthe automatic calculations listed below.\r\n\t * \t</td></tr>\r\n\t * \t<tr><td><b>Bitmap</b></td><td>\r\n\t * \t\tReturns the width and height of the sourceRect (if specified) or image, extending from (x=0,y=0).\r\n\t * \t</td></tr>\r\n\t * \t<tr><td><b>Sprite</b></td><td>\r\n\t * \t\tReturns the bounds of the current frame. May have non-zero x/y if a frame registration point was specified\r\n\t * \t\tin the spritesheet data. See also {{#crossLink \"SpriteSheet/getFrameBounds\"}}{{/crossLink}}\r\n\t * \t</td></tr>\r\n\t * \t<tr><td><b>Container</b></td><td>\r\n\t * \t\tReturns the aggregate (combined) bounds of all children that return a non-null value from getBounds().\r\n\t * \t</td></tr>\r\n\t * \t<tr><td><b>Shape</b></td><td>\r\n\t * \t\tDoes not currently support automatic bounds calculations. Use setBounds() to manually define bounds.\r\n\t * \t</td></tr>\r\n\t * \t<tr><td><b>Text</b></td><td>\r\n\t * \t\tReturns approximate bounds. Horizontal values (x/width) are quite accurate, but vertical values (y/height) are\r\n\t * \t\tnot, especially when using textBaseline values other than \"top\".\r\n\t * \t</td></tr>\r\n\t * \t<tr><td><b>BitmapText</b></td><td>\r\n\t * \t\tReturns approximate bounds. Values will be more accurate if spritesheet frame registration points are close\r\n\t * \t\tto (x=0,y=0).\r\n\t * \t</td></tr>\r\n\t* </table>\r\n\t * \r\n\t * Bounds can be expensive to calculate for some objects (ex. text, or containers with many children), and\r\n\t * are recalculated each time you call getBounds(). You can prevent recalculation on static objects by setting the\r\n\t * bounds explicitly:\r\n\t * \r\n\t * \tvar bounds = obj.getBounds();\r\n\t * \tobj.setBounds(bounds.x, bounds.y, bounds.width, bounds.height);\r\n\t * \t// getBounds will now use the set values, instead of recalculating\r\n\t * \r\n\t * To reduce memory impact, the returned Rectangle instance may be reused internally; clone the instance or copy its\r\n\t * values if you need to retain it.\r\n\t * \r\n\t * \tvar myBounds = obj.getBounds().clone();\r\n\t * \t// OR:\r\n\t * \tmyRect.copy(obj.getBounds());\r\n\t * \r\n\t * @method getBounds\r\n\t * @return {Rectangle} A Rectangle instance representing the bounds, or null if bounds are not available for this\r\n\t * object.\r\n\t **/\r\n\tp.getBounds = function() {\r\n\t\tif (this._bounds) { return this._rectangle.copy(this._bounds); }\r\n\t\tvar cacheCanvas = this.cacheCanvas;\r\n\t\tif (cacheCanvas) {\r\n\t\t\tvar scale = this._cacheScale;\r\n\t\t\treturn this._rectangle.setValues(this._cacheOffsetX, this._cacheOffsetY, cacheCanvas.width/scale, cacheCanvas.height/scale);\r\n\t\t}\r\n\t\treturn null;\r\n\t};\r\n\t\r\n\t/**\r\n\t * Returns a rectangle representing this object's bounds in its parent's coordinate system (ie. with transformations applied).\r\n\t * Objects that have been cached will return the transformed bounds of the cache.\r\n\t * \r\n\t * Not all display objects can calculate their own bounds (ex. Shape). For these objects, you can use \r\n\t * {{#crossLink \"DisplayObject/setBounds\"}}{{/crossLink}} so that they are included when calculating Container\r\n\t * bounds.\r\n\t * \r\n\t * To reduce memory impact, the returned Rectangle instance may be reused internally; clone the instance or copy its\r\n\t * values if you need to retain it.\r\n\t * \r\n\t * Container instances calculate aggregate bounds for all children that return bounds via getBounds.\r\n\t * @method getTransformedBounds\r\n\t * @return {Rectangle} A Rectangle instance representing the bounds, or null if bounds are not available for this object.\r\n\t **/\r\n\tp.getTransformedBounds = function() {\r\n\t\treturn this._getBounds();\r\n\t};\r\n\t\r\n\t/**\r\n\t * Allows you to manually specify the bounds of an object that either cannot calculate their own bounds (ex. Shape &\r\n\t * Text) for future reference, or so the object can be included in Container bounds. Manually set bounds will always\r\n\t * override calculated bounds.\r\n\t * \r\n\t * The bounds should be specified in the object's local (untransformed) coordinates. For example, a Shape instance\r\n\t * with a 25px radius circle centered at 0,0 would have bounds of (-25, -25, 50, 50).\r\n\t * @method setBounds\r\n\t * @param {Number} x The x origin of the bounds. Pass null to remove the manual bounds.\r\n\t * @param {Number} y The y origin of the bounds.\r\n\t * @param {Number} width The width of the bounds.\r\n\t * @param {Number} height The height of the bounds.\r\n\t **/\r\n\tp.setBounds = function(x, y, width, height) {\r\n\t\tif (x == null) { this._bounds = x; }\r\n\t\tthis._bounds = (this._bounds || new createjs.Rectangle()).setValues(x, y, width, height);\r\n\t};\r\n\r\n\t/**\r\n\t * Returns a clone of this DisplayObject. Some properties that are specific to this instance's current context are\r\n\t * reverted to their defaults (for example .parent). Caches are not maintained across clones, and some elements\r\n\t * are copied by reference (masks, individual filter instances, hit area)\r\n\t * @method clone\r\n\t * @return {DisplayObject} A clone of the current DisplayObject instance.\r\n\t **/\r\n\tp.clone = function() {\r\n\t\treturn this._cloneProps(new DisplayObject());\r\n\t};\r\n\r\n\t/**\r\n\t * Returns a string representation of this object.\r\n\t * @method toString\r\n\t * @return {String} a string representation of the instance.\r\n\t **/\r\n\tp.toString = function() {\r\n\t\treturn \"[DisplayObject (name=\"+  this.name +\")]\";\r\n\t};\r\n\r\n\r\n// private methods:\r\n\t// separated so it can be used more easily in subclasses:\r\n\t/**\r\n\t * @method _cloneProps\r\n\t * @param {DisplayObject} o The DisplayObject instance which will have properties from the current DisplayObject\r\n\t * instance copied into.\r\n\t * @return {DisplayObject} o\r\n\t * @protected\r\n\t **/\r\n\tp._cloneProps = function(o) {\r\n\t\to.alpha = this.alpha;\r\n\t\to.mouseEnabled = this.mouseEnabled;\r\n\t\to.tickEnabled = this.tickEnabled;\r\n\t\to.name = this.name;\r\n\t\to.regX = this.regX;\r\n\t\to.regY = this.regY;\r\n\t\to.rotation = this.rotation;\r\n\t\to.scaleX = this.scaleX;\r\n\t\to.scaleY = this.scaleY;\r\n\t\to.shadow = this.shadow;\r\n\t\to.skewX = this.skewX;\r\n\t\to.skewY = this.skewY;\r\n\t\to.visible = this.visible;\r\n\t\to.x  = this.x;\r\n\t\to.y = this.y;\r\n\t\to.compositeOperation = this.compositeOperation;\r\n\t\to.snapToPixel = this.snapToPixel;\r\n\t\to.filters = this.filters==null?null:this.filters.slice(0);\r\n\t\to.mask = this.mask;\r\n\t\to.hitArea = this.hitArea;\r\n\t\to.cursor = this.cursor;\r\n\t\to._bounds = this._bounds;\r\n\t\treturn o;\r\n\t};\r\n\r\n\t/**\r\n\t * @method _applyShadow\r\n\t * @protected\r\n\t * @param {CanvasRenderingContext2D} ctx\r\n\t * @param {Shadow} shadow\r\n\t **/\r\n\tp._applyShadow = function(ctx, shadow) {\r\n\t\tshadow = shadow || Shadow.identity;\r\n\t\tctx.shadowColor = shadow.color;\r\n\t\tctx.shadowOffsetX = shadow.offsetX;\r\n\t\tctx.shadowOffsetY = shadow.offsetY;\r\n\t\tctx.shadowBlur = shadow.blur;\r\n\t};\r\n\t\r\n\t\r\n\t/**\r\n\t * @method _tick\r\n\t * @param {Object} evtObj An event object that will be dispatched to all tick listeners. This object is reused between dispatchers to reduce construction & GC costs.\r\n\t * @protected\r\n\t **/\r\n\tp._tick = function(evtObj) {\r\n\t\t// because tick can be really performance sensitive, check for listeners before calling dispatchEvent.\r\n\t\tvar ls = this._listeners;\r\n\t\tif (ls && ls[\"tick\"]) {\r\n\t\t\t// reset & reuse the event object to avoid construction / GC costs:\r\n\t\t\tevtObj.target = null;\r\n\t\t\tevtObj.propagationStopped = evtObj.immediatePropagationStopped = false;\r\n\t\t\tthis.dispatchEvent(evtObj);\r\n\t\t}\r\n\t};\r\n\r\n\t/**\r\n\t * @method _testHit\r\n\t * @protected\r\n\t * @param {CanvasRenderingContext2D} ctx\r\n\t * @return {Boolean}\r\n\t **/\r\n\tp._testHit = function(ctx) {\r\n\t\ttry {\r\n\t\t\tvar hit = ctx.getImageData(0, 0, 1, 1).data[3] > 1;\r\n\t\t} catch (e) {\r\n\t\t\tif (!DisplayObject.suppressCrossDomainErrors) {\r\n\t\t\t\tthrow \"An error has occurred. This is most likely due to security restrictions on reading canvas pixel data with local or cross-domain images.\";\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn hit;\r\n\t};\r\n\r\n\t/**\r\n\t * @method _applyFilters\r\n\t * @protected\r\n\t **/\r\n\tp._applyFilters = function() {\r\n\t\tif (!this.filters || this.filters.length == 0 || !this.cacheCanvas) { return; }\r\n\t\tvar l = this.filters.length;\r\n\t\tvar ctx = this.cacheCanvas.getContext(\"2d\");\r\n\t\tvar w = this.cacheCanvas.width;\r\n\t\tvar h = this.cacheCanvas.height;\r\n\t\tfor (var i=0; i<l; i++) {\r\n\t\t\tthis.filters[i].applyFilter(ctx, 0, 0, w, h);\r\n\t\t}\r\n\t};\r\n\t\r\n\t/**\r\n\t * @method _getFilterBounds\r\n\t * @return {Rectangle}\r\n\t * @protected\r\n\t **/\r\n\tp._getFilterBounds = function(rect) {\r\n\t\tvar l, filters = this.filters, bounds = this._rectangle.setValues(0,0,0,0);\r\n\t\tif (!filters || !(l=filters.length)) { return bounds; }\r\n\t\t\r\n\t\tfor (var i=0; i<l; i++) {\r\n\t\t\tvar f = this.filters[i];\r\n\t\t\tf.getBounds&&f.getBounds(bounds);\r\n\t\t}\r\n\t\treturn bounds;\r\n\t};\r\n\t\r\n\t/**\r\n\t * @method _getBounds\r\n\t * @param {Matrix2D} matrix\r\n\t * @param {Boolean} ignoreTransform If true, does not apply this object's transform.\r\n\t * @return {Rectangle}\r\n\t * @protected\r\n\t **/\r\n\tp._getBounds = function(matrix, ignoreTransform){\r\n\t\treturn this._transformBounds(this.getBounds(), matrix, ignoreTransform);\r\n\t};\r\n\t\r\n\t/**\r\n\t * @method _transformBounds\r\n\t * @param {Rectangle} bounds\r\n\t * @param {Matrix2D} matrix\r\n\t * @param {Boolean} ignoreTransform\r\n\t * @return {Rectangle}\r\n\t * @protected\r\n\t **/\r\n\tp._transformBounds = function(bounds, matrix, ignoreTransform) {\r\n\t\tif (!bounds) { return bounds; }\r\n\t\tvar x = bounds.x, y = bounds.y, width = bounds.width, height = bounds.height, mtx = this._props.matrix;\r\n\t\tmtx = ignoreTransform ? mtx.identity() : this.getMatrix(mtx);\r\n\t\t\r\n\t\tif (x || y) { mtx.appendTransform(0,0,1,1,0,0,0,-x,-y); } // TODO: simplify this.\r\n\t\tif (matrix) { mtx.prependMatrix(matrix); }\r\n\t\t\r\n\t\tvar x_a = width*mtx.a, x_b = width*mtx.b;\r\n\t\tvar y_c = height*mtx.c, y_d = height*mtx.d;\r\n\t\tvar tx = mtx.tx, ty = mtx.ty;\r\n\t\t\r\n\t\tvar minX = tx, maxX = tx, minY = ty, maxY = ty;\r\n\r\n\t\tif ((x = x_a + tx) < minX) { minX = x; } else if (x > maxX) { maxX = x; }\r\n\t\tif ((x = x_a + y_c + tx) < minX) { minX = x; } else if (x > maxX) { maxX = x; }\r\n\t\tif ((x = y_c + tx) < minX) { minX = x; } else if (x > maxX) { maxX = x; }\r\n\t\t\r\n\t\tif ((y = x_b + ty) < minY) { minY = y; } else if (y > maxY) { maxY = y; }\r\n\t\tif ((y = x_b + y_d + ty) < minY) { minY = y; } else if (y > maxY) { maxY = y; }\r\n\t\tif ((y = y_d + ty) < minY) { minY = y; } else if (y > maxY) { maxY = y; }\r\n\t\t\r\n\t\treturn bounds.setValues(minX, minY, maxX-minX, maxY-minY);\r\n\t};\r\n\t\r\n\t/**\r\n\t * Indicates whether the display object has any mouse event listeners or a cursor.\r\n\t * @method _isMouseOpaque\r\n\t * @return {Boolean}\r\n\t * @protected\r\n\t **/\r\n\tp._hasMouseEventListener = function() {\r\n\t\tvar evts = DisplayObject._MOUSE_EVENTS;\r\n\t\tfor (var i= 0, l=evts.length; i<l; i++) {\r\n\t\t\tif (this.hasEventListener(evts[i])) { return true; }\r\n\t\t}\r\n\t\treturn !!this.cursor;\r\n\t};\r\n\r\n\tcreatejs.DisplayObject = createjs.promote(DisplayObject, \"EventDispatcher\");\r\n}());\r\n\r\n//##############################################################################\r\n// Container.js\r\n//##############################################################################\r\n\r\nthis.createjs = this.createjs||{};\r\n\r\n(function() {\r\n\t\"use strict\";\r\n\t\r\n\r\n// constructor:\r\n/**\r\n * A Container is a nestable display list that allows you to work with compound display elements. For  example you could\r\n * group arm, leg, torso and head {{#crossLink \"Bitmap\"}}{{/crossLink}} instances together into a Person Container, and\r\n * transform them as a group, while still being able to move the individual parts relative to each other. Children of\r\n * containers have their <code>transform</code> and <code>alpha</code> properties concatenated with their parent\r\n * Container.\r\n *\r\n * For example, a {{#crossLink \"Shape\"}}{{/crossLink}} with x=100 and alpha=0.5, placed in a Container with <code>x=50</code>\r\n * and <code>alpha=0.7</code> will be rendered to the canvas at <code>x=150</code> and <code>alpha=0.35</code>.\r\n * Containers have some overhead, so you generally shouldn't create a Container to hold a single child.\r\n *\r\n * <h4>Example</h4>\r\n *\r\n *      var container = new createjs.Container();\r\n *      container.addChild(bitmapInstance, shapeInstance);\r\n *      container.x = 100;\r\n *\r\n * @class Container\r\n * @extends DisplayObject\r\n * @constructor\r\n **/\r\n\tfunction Container() {\r\n\t\tthis.DisplayObject_constructor();\r\n\t\t\r\n\t// public properties:\r\n\t\t/**\r\n\t\t * The array of children in the display list. You should usually use the child management methods such as\r\n\t\t * {{#crossLink \"Container/addChild\"}}{{/crossLink}}, {{#crossLink \"Container/removeChild\"}}{{/crossLink}},\r\n\t\t * {{#crossLink \"Container/swapChildren\"}}{{/crossLink}}, etc, rather than accessing this directly, but it is\r\n\t\t * included for advanced uses.\r\n\t\t * @property children\r\n\t\t * @type Array\r\n\t\t * @default null\r\n\t\t **/\r\n\t\tthis.children = [];\r\n\t\t\r\n\t\t/**\r\n\t\t * Indicates whether the children of this container are independently enabled for mouse/pointer interaction.\r\n\t\t * If false, the children will be aggregated under the container - for example, a click on a child shape would\r\n\t\t * trigger a click event on the container.\r\n\t\t * @property mouseChildren\r\n\t\t * @type Boolean\r\n\t\t * @default true\r\n\t\t **/\r\n\t\tthis.mouseChildren = true;\r\n\t\t\r\n\t\t/**\r\n\t\t * If false, the tick will not be propagated to children of this Container. This can provide some performance benefits.\r\n\t\t * In addition to preventing the \"tick\" event from being dispatched, it will also prevent tick related updates\r\n\t\t * on some display objects (ex. Sprite & MovieClip frame advancing, DOMElement visibility handling).\r\n\t\t * @property tickChildren\r\n\t\t * @type Boolean\r\n\t\t * @default true\r\n\t\t **/\r\n\t\tthis.tickChildren = true;\r\n\t}\r\n\tvar p = createjs.extend(Container, createjs.DisplayObject);\r\n\t\r\n\t\r\n// getter / setters:\r\n\t/**\r\n\t * Use the {{#crossLink \"Container/numChildren:property\"}}{{/crossLink}} property instead.\r\n\t * @method getNumChildren\r\n\t * @return {Number}\r\n\t * @deprecated\r\n\t **/\r\n\tp.getNumChildren = function() {\r\n\t\treturn this.children.length;\r\n\t};\r\n\r\n\t/**\r\n\t * Returns the number of children in the container.\r\n\t * @property numChildren\r\n\t * @type {Number}\r\n\t * @readonly\r\n\t **/\r\n\ttry {\r\n\t\tObject.defineProperties(p, {\r\n\t\t\tnumChildren: { get: p.getNumChildren }\r\n\t\t});\r\n\t} catch (e) {}\r\n\t\r\n\r\n// public methods:\r\n\t/**\r\n\t * Constructor alias for backwards compatibility. This method will be removed in future versions.\r\n\t * Subclasses should be updated to use {{#crossLink \"Utility Methods/extends\"}}{{/crossLink}}.\r\n\t * @method initialize\r\n\t * @deprecated in favour of `createjs.promote()`\r\n\t **/\r\n\tp.initialize = Container; // TODO: deprecated.\r\n\t\r\n\t/**\r\n\t * Returns true or false indicating whether the display object would be visible if drawn to a canvas.\r\n\t * This does not account for whether it would be visible within the boundaries of the stage.\r\n\t *\r\n\t * NOTE: This method is mainly for internal use, though it may be useful for advanced uses.\r\n\t * @method isVisible\r\n\t * @return {Boolean} Boolean indicating whether the display object would be visible if drawn to a canvas\r\n\t **/\r\n\tp.isVisible = function() {\r\n\t\tvar hasContent = this.cacheCanvas || this.children.length;\r\n\t\treturn !!(this.visible && this.alpha > 0 && this.scaleX != 0 && this.scaleY != 0 && hasContent);\r\n\t};\r\n\r\n\t/**\r\n\t * Draws the display object into the specified context ignoring its visible, alpha, shadow, and transform.\r\n\t * Returns true if the draw was handled (useful for overriding functionality).\r\n\t *\r\n\t * NOTE: This method is mainly for internal use, though it may be useful for advanced uses.\r\n\t * @method draw\r\n\t * @param {CanvasRenderingContext2D} ctx The canvas 2D context object to draw into.\r\n\t * @param {Boolean} [ignoreCache=false] Indicates whether the draw operation should ignore any current cache.\r\n\t * For example, used for drawing the cache (to prevent it from simply drawing an existing cache back\r\n\t * into itself).\r\n\t **/\r\n\tp.draw = function(ctx, ignoreCache) {\r\n\t\tif (this.DisplayObject_draw(ctx, ignoreCache)) { return true; }\r\n\t\t\r\n\t\t// this ensures we don't have issues with display list changes that occur during a draw:\r\n\t\tvar list = this.children.slice();\r\n\t\tfor (var i=0,l=list.length; i<l; i++) {\r\n\t\t\tvar child = list[i];\r\n\t\t\tif (!child.isVisible()) { continue; }\r\n\t\t\t\r\n\t\t\t// draw the child:\r\n\t\t\tctx.save();\r\n\t\t\tchild.updateContext(ctx);\r\n\t\t\tchild.draw(ctx);\r\n\t\t\tctx.restore();\r\n\t\t}\r\n\t\treturn true;\r\n\t};\r\n\t\r\n\t/**\r\n\t * Adds a child to the top of the display list.\r\n\t *\r\n\t * <h4>Example</h4>\r\n\t *\r\n\t * \t\tcontainer.addChild(bitmapInstance);\r\n\t *\r\n\t * You can also add multiple children at once:\r\n\t *\r\n\t * \t\tcontainer.addChild(bitmapInstance, shapeInstance, textInstance);\r\n\t *\r\n\t * @method addChild\r\n\t * @param {DisplayObject} child The display object to add.\r\n\t * @return {DisplayObject} The child that was added, or the last child if multiple children were added.\r\n\t **/\r\n\tp.addChild = function(child) {\r\n\t\tif (child == null) { return child; }\r\n\t\tvar l = arguments.length;\r\n\t\tif (l > 1) {\r\n\t\t\tfor (var i=0; i<l; i++) { this.addChild(arguments[i]); }\r\n\t\t\treturn arguments[l-1];\r\n\t\t}\r\n\t\tif (child.parent) { child.parent.removeChild(child); }\r\n\t\tchild.parent = this;\r\n\t\tthis.children.push(child);\r\n\t\tchild.dispatchEvent(\"added\");\r\n\t\treturn child;\r\n\t};\r\n\r\n\t/**\r\n\t * Adds a child to the display list at the specified index, bumping children at equal or greater indexes up one, and\r\n\t * setting its parent to this Container.\r\n\t *\r\n\t * <h4>Example</h4>\r\n\t *\r\n\t *      addChildAt(child1, index);\r\n\t *\r\n\t * You can also add multiple children, such as:\r\n\t *\r\n\t *      addChildAt(child1, child2, ..., index);\r\n\t *\r\n\t * The index must be between 0 and numChildren. For example, to add myShape under otherShape in the display list,\r\n\t * you could use:\r\n\t *\r\n\t *      container.addChildAt(myShape, container.getChildIndex(otherShape));\r\n\t *\r\n\t * This would also bump otherShape's index up by one. Fails silently if the index is out of range.\r\n\t *\r\n\t * @method addChildAt\r\n\t * @param {DisplayObject} child The display object to add.\r\n\t * @param {Number} index The index to add the child at.\r\n\t * @return {DisplayObject} Returns the last child that was added, or the last child if multiple children were added.\r\n\t **/\r\n\tp.addChildAt = function(child, index) {\r\n\t\tvar l = arguments.length;\r\n\t\tvar indx = arguments[l-1]; // can't use the same name as the index param or it replaces arguments[1]\r\n\t\tif (indx < 0 || indx > this.children.length) { return arguments[l-2]; }\r\n\t\tif (l > 2) {\r\n\t\t\tfor (var i=0; i<l-1; i++) { this.addChildAt(arguments[i], indx+i); }\r\n\t\t\treturn arguments[l-2];\r\n\t\t}\r\n\t\tif (child.parent) { child.parent.removeChild(child); }\r\n\t\tchild.parent = this;\r\n\t\tthis.children.splice(index, 0, child);\r\n\t\tchild.dispatchEvent(\"added\");\r\n\t\treturn child;\r\n\t};\r\n\r\n\t/**\r\n\t * Removes the specified child from the display list. Note that it is faster to use removeChildAt() if the index is\r\n\t * already known.\r\n\t *\r\n\t * <h4>Example</h4>\r\n\t *\r\n\t *      container.removeChild(child);\r\n\t *\r\n\t * You can also remove multiple children:\r\n\t *\r\n\t *      removeChild(child1, child2, ...);\r\n\t *\r\n\t * Returns true if the child (or children) was removed, or false if it was not in the display list.\r\n\t * @method removeChild\r\n\t * @param {DisplayObject} child The child to remove.\r\n\t * @return {Boolean} true if the child (or children) was removed, or false if it was not in the display list.\r\n\t **/\r\n\tp.removeChild = function(child) {\r\n\t\tvar l = arguments.length;\r\n\t\tif (l > 1) {\r\n\t\t\tvar good = true;\r\n\t\t\tfor (var i=0; i<l; i++) { good = good && this.removeChild(arguments[i]); }\r\n\t\t\treturn good;\r\n\t\t}\r\n\t\treturn this.removeChildAt(createjs.indexOf(this.children, child));\r\n\t};\r\n\r\n\t/**\r\n\t * Removes the child at the specified index from the display list, and sets its parent to null.\r\n\t *\r\n\t * <h4>Example</h4>\r\n\t *\r\n\t *      container.removeChildAt(2);\r\n\t *\r\n\t * You can also remove multiple children:\r\n\t *\r\n\t *      container.removeChild(2, 7, ...)\r\n\t *\r\n\t * Returns true if the child (or children) was removed, or false if any index was out of range.\r\n\t * @method removeChildAt\r\n\t * @param {Number} index The index of the child to remove.\r\n\t * @return {Boolean} true if the child (or children) was removed, or false if any index was out of range.\r\n\t **/\r\n\tp.removeChildAt = function(index) {\r\n\t\tvar l = arguments.length;\r\n\t\tif (l > 1) {\r\n\t\t\tvar a = [];\r\n\t\t\tfor (var i=0; i<l; i++) { a[i] = arguments[i]; }\r\n\t\t\ta.sort(function(a, b) { return b-a; });\r\n\t\t\tvar good = true;\r\n\t\t\tfor (var i=0; i<l; i++) { good = good && this.removeChildAt(a[i]); }\r\n\t\t\treturn good;\r\n\t\t}\r\n\t\tif (index < 0 || index > this.children.length-1) { return false; }\r\n\t\tvar child = this.children[index];\r\n\t\tif (child) { child.parent = null; }\r\n\t\tthis.children.splice(index, 1);\r\n\t\tchild.dispatchEvent(\"removed\");\r\n\t\treturn true;\r\n\t};\r\n\r\n\t/**\r\n\t * Removes all children from the display list.\r\n\t *\r\n\t * <h4>Example</h4>\r\n\t *\r\n\t * \tcontainer.removeAllChildren();\r\n\t *\r\n\t * @method removeAllChildren\r\n\t **/\r\n\tp.removeAllChildren = function() {\r\n\t\tvar kids = this.children;\r\n\t\twhile (kids.length) { this.removeChildAt(0); }\r\n\t};\r\n\r\n\t/**\r\n\t * Returns the child at the specified index.\r\n\t *\r\n\t * <h4>Example</h4>\r\n\t *\r\n\t *      container.getChildAt(2);\r\n\t *\r\n\t * @method getChildAt\r\n\t * @param {Number} index The index of the child to return.\r\n\t * @return {DisplayObject} The child at the specified index. Returns null if there is no child at the index.\r\n\t **/\r\n\tp.getChildAt = function(index) {\r\n\t\treturn this.children[index];\r\n\t};\r\n\t\r\n\t/**\r\n\t * Returns the child with the specified name.\r\n\t * @method getChildByName\r\n\t * @param {String} name The name of the child to return.\r\n\t * @return {DisplayObject} The child with the specified name.\r\n\t **/\r\n\tp.getChildByName = function(name) {\r\n\t\tvar kids = this.children;\r\n\t\tfor (var i=0,l=kids.length;i<l;i++) {\r\n\t\t\tif(kids[i].name == name) { return kids[i]; }\r\n\t\t}\r\n\t\treturn null;\r\n\t};\r\n\r\n\t/**\r\n\t * Performs an array sort operation on the child list.\r\n\t *\r\n\t * <h4>Example: Display children with a higher y in front.</h4>\r\n\t * \r\n\t *      var sortFunction = function(obj1, obj2, options) {\r\n\t *          if (obj1.y > obj2.y) { return 1; }\r\n\t *          if (obj1.y < obj2.y) { return -1; }\r\n\t *          return 0;\r\n\t *      }\r\n\t *      container.sortChildren(sortFunction);\r\n\t *\r\n\t * @method sortChildren\r\n\t * @param {Function} sortFunction the function to use to sort the child list. See JavaScript's <code>Array.sort</code>\r\n\t * documentation for details.\r\n\t **/\r\n\tp.sortChildren = function(sortFunction) {\r\n\t\tthis.children.sort(sortFunction);\r\n\t};\r\n\r\n\t/**\r\n\t * Returns the index of the specified child in the display list, or -1 if it is not in the display list.\r\n\t *\r\n\t * <h4>Example</h4>\r\n\t *\r\n\t *      var index = container.getChildIndex(child);\r\n\t *\r\n\t * @method getChildIndex\r\n\t * @param {DisplayObject} child The child to return the index of.\r\n\t * @return {Number} The index of the specified child. -1 if the child is not found.\r\n\t **/\r\n\tp.getChildIndex = function(child) {\r\n\t\treturn createjs.indexOf(this.children, child);\r\n\t};\r\n\t\r\n\t/**\r\n\t * Swaps the children at the specified indexes. Fails silently if either index is out of range.\r\n\t * @method swapChildrenAt\r\n\t * @param {Number} index1\r\n\t * @param {Number} index2\r\n\t **/\r\n\tp.swapChildrenAt = function(index1, index2) {\r\n\t\tvar kids = this.children;\r\n\t\tvar o1 = kids[index1];\r\n\t\tvar o2 = kids[index2];\r\n\t\tif (!o1 || !o2) { return; }\r\n\t\tkids[index1] = o2;\r\n\t\tkids[index2] = o1;\r\n\t};\r\n\t\r\n\t/**\r\n\t * Swaps the specified children's depth in the display list. Fails silently if either child is not a child of this\r\n\t * Container.\r\n\t * @method swapChildren\r\n\t * @param {DisplayObject} child1\r\n\t * @param {DisplayObject} child2\r\n\t **/\r\n\tp.swapChildren = function(child1, child2) {\r\n\t\tvar kids = this.children;\r\n\t\tvar index1,index2;\r\n\t\tfor (var i=0,l=kids.length;i<l;i++) {\r\n\t\t\tif (kids[i] == child1) { index1 = i; }\r\n\t\t\tif (kids[i] == child2) { index2 = i; }\r\n\t\t\tif (index1 != null && index2 != null) { break; }\r\n\t\t}\r\n\t\tif (i==l) { return; } // TODO: throw error?\r\n\t\tkids[index1] = child2;\r\n\t\tkids[index2] = child1;\r\n\t};\r\n\t\r\n\t/**\r\n\t * Changes the depth of the specified child. Fails silently if the child is not a child of this container, or the index is out of range.\r\n\t * @param {DisplayObject} child\r\n\t * @param {Number} index  \r\n\t * @method setChildIndex\r\n\t **/\r\n\tp.setChildIndex = function(child, index) {\r\n\t\tvar kids = this.children, l=kids.length;\r\n\t\tif (child.parent != this || index < 0 || index >= l) { return; }\r\n\t\tfor (var i=0;i<l;i++) {\r\n\t\t\tif (kids[i] == child) { break; }\r\n\t\t}\r\n\t\tif (i==l || i == index) { return; }\r\n\t\tkids.splice(i,1);\r\n\t\tkids.splice(index,0,child);\r\n\t};\r\n\r\n\t/**\r\n\t * Returns true if the specified display object either is this container or is a descendent (child, grandchild, etc)\r\n\t * of this container.\r\n\t * @method contains\r\n\t * @param {DisplayObject} child The DisplayObject to be checked.\r\n\t * @return {Boolean} true if the specified display object either is this container or is a descendent.\r\n\t **/\r\n\tp.contains = function(child) {\r\n\t\twhile (child) {\r\n\t\t\tif (child == this) { return true; }\r\n\t\t\tchild = child.parent;\r\n\t\t}\r\n\t\treturn false;\r\n\t};\r\n\r\n\t/**\r\n\t * Tests whether the display object intersects the specified local point (ie. draws a pixel with alpha > 0 at the\r\n\t * specified position). This ignores the alpha, shadow and compositeOperation of the display object, and all\r\n\t * transform properties including regX/Y.\r\n\t * @method hitTest\r\n\t * @param {Number} x The x position to check in the display object's local coordinates.\r\n\t * @param {Number} y The y position to check in the display object's local coordinates.\r\n\t * @return {Boolean} A Boolean indicating whether there is a visible section of a DisplayObject that overlaps the specified\r\n\t * coordinates.\r\n\t **/\r\n\tp.hitTest = function(x, y) {\r\n\t\t// TODO: optimize to use the fast cache check where possible.\r\n\t\treturn (this.getObjectUnderPoint(x, y) != null);\r\n\t};\r\n\r\n\t/**\r\n\t * Returns an array of all display objects under the specified coordinates that are in this container's display\r\n\t * list. This routine ignores any display objects with {{#crossLink \"DisplayObject/mouseEnabled:property\"}}{{/crossLink}}\r\n\t * set to `false`. The array will be sorted in order of visual depth, with the top-most display object at index 0.\r\n\t * This uses shape based hit detection, and can be an expensive operation to run, so it is best to use it carefully.\r\n\t * For example, if testing for objects under the mouse, test on tick (instead of on {{#crossLink \"DisplayObject/mousemove:event\"}}{{/crossLink}}),\r\n\t * and only if the mouse's position has changed.\r\n\t * \r\n\t * <ul>\r\n\t *     <li>By default (mode=0) this method evaluates all display objects.</li>\r\n\t *     <li>By setting the `mode` parameter to `1`, the {{#crossLink \"DisplayObject/mouseEnabled:property\"}}{{/crossLink}}\r\n\t * \t\tand {{#crossLink \"mouseChildren:property\"}}{{/crossLink}} properties will be respected.</li>\r\n\t * \t   <li>Setting the `mode` to `2` additionally excludes display objects that do not have active mouse event\r\n\t * \t   \tlisteners or a {{#crossLink \"DisplayObject:cursor:property\"}}{{/crossLink}} property. That is, only objects\r\n\t * \t   \tthat would normally intercept mouse interaction will be included. This can significantly improve performance\r\n\t * \t   \tin some cases by reducing the number of display objects that need to be tested.</li>\r\n\t * </li>\r\n\t * \r\n\t * This method accounts for both {{#crossLink \"DisplayObject/hitArea:property\"}}{{/crossLink}} and {{#crossLink \"DisplayObject/mask:property\"}}{{/crossLink}}.\r\n\t * @method getObjectsUnderPoint\r\n\t * @param {Number} x The x position in the container to test.\r\n\t * @param {Number} y The y position in the container to test.\r\n\t * @param {Number} [mode=0] The mode to use to determine which display objects to include. 0-all, 1-respect mouseEnabled/mouseChildren, 2-only mouse opaque objects.\r\n\t * @return {Array} An Array of DisplayObjects under the specified coordinates.\r\n\t **/\r\n\tp.getObjectsUnderPoint = function(x, y, mode) {\r\n\t\tvar arr = [];\r\n\t\tvar pt = this.localToGlobal(x, y);\r\n\t\tthis._getObjectsUnderPoint(pt.x, pt.y, arr, mode>0, mode==1);\r\n\t\treturn arr;\r\n\t};\r\n\r\n\t/**\r\n\t * Similar to {{#crossLink \"Container/getObjectsUnderPoint\"}}{{/crossLink}}, but returns only the top-most display\r\n\t * object. This runs significantly faster than <code>getObjectsUnderPoint()</code>, but is still potentially an expensive\r\n\t * operation. See {{#crossLink \"Container/getObjectsUnderPoint\"}}{{/crossLink}} for more information.\r\n\t * @method getObjectUnderPoint\r\n\t * @param {Number} x The x position in the container to test.\r\n\t * @param {Number} y The y position in the container to test.\r\n\t * @param {Number} mode The mode to use to determine which display objects to include.  0-all, 1-respect mouseEnabled/mouseChildren, 2-only mouse opaque objects.\r\n\t * @return {DisplayObject} The top-most display object under the specified coordinates.\r\n\t **/\r\n\tp.getObjectUnderPoint = function(x, y, mode) {\r\n\t\tvar pt = this.localToGlobal(x, y);\r\n\t\treturn this._getObjectsUnderPoint(pt.x, pt.y, null, mode>0, mode==1);\r\n\t};\r\n\t\r\n\t/**\r\n\t * Docced in superclass.\r\n\t */\r\n\tp.getBounds = function() {\r\n\t\treturn this._getBounds(null, true);\r\n\t};\r\n\t\r\n\t\r\n\t/**\r\n\t * Docced in superclass.\r\n\t */\r\n\tp.getTransformedBounds = function() {\r\n\t\treturn this._getBounds();\r\n\t};\r\n\r\n\t/**\r\n\t * Returns a clone of this Container. Some properties that are specific to this instance's current context are\r\n\t * reverted to their defaults (for example .parent).\r\n\t * @method clone\r\n\t * @param {Boolean} [recursive=false] If true, all of the descendants of this container will be cloned recursively. If false, the\r\n\t * properties of the container will be cloned, but the new instance will not have any children.\r\n\t * @return {Container} A clone of the current Container instance.\r\n\t **/\r\n\tp.clone = function(recursive) {\r\n\t\tvar o = this._cloneProps(new Container());\r\n\t\tif (recursive) { this._cloneChildren(o); }\r\n\t\treturn o;\r\n\t};\r\n\r\n\t/**\r\n\t * Returns a string representation of this object.\r\n\t * @method toString\r\n\t * @return {String} a string representation of the instance.\r\n\t **/\r\n\tp.toString = function() {\r\n\t\treturn \"[Container (name=\"+  this.name +\")]\";\r\n\t};\r\n\r\n\r\n// private methods:\r\n\t/**\r\n\t * @method _tick\r\n\t * @param {Object} evtObj An event object that will be dispatched to all tick listeners. This object is reused between dispatchers to reduce construction & GC costs.\r\n\t * @protected\r\n\t **/\r\n\tp._tick = function(evtObj) {\r\n\t\tif (this.tickChildren) {\r\n\t\t\tfor (var i=this.children.length-1; i>=0; i--) {\r\n\t\t\t\tvar child = this.children[i];\r\n\t\t\t\tif (child.tickEnabled && child._tick) { child._tick(evtObj); }\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.DisplayObject__tick(evtObj);\r\n\t};\r\n\t\r\n\t/**\r\n\t * Recursively clones all children of this container, and adds them to the target container.\r\n\t * @method cloneChildren\r\n\t * @protected\r\n\t * @param {Container} o The target container.\r\n\t **/\r\n\tp._cloneChildren = function(o) {\r\n\t\tif (o.children.length) { o.removeAllChildren(); }\r\n\t\tvar arr = o.children;\r\n\t\tfor (var i=0, l=this.children.length; i<l; i++) {\r\n\t\t\tvar clone = this.children[i].clone(true);\r\n\t\t\tclone.parent = o;\r\n\t\t\tarr.push(clone);\r\n\t\t}\r\n\t};\r\n\r\n\t/**\r\n\t * @method _getObjectsUnderPoint\r\n\t * @param {Number} x\r\n\t * @param {Number} y\r\n\t * @param {Array} arr\r\n\t * @param {Boolean} mouse If true, it will respect mouse interaction properties like mouseEnabled, mouseChildren, and active listeners.\r\n\t * @param {Boolean} activeListener If true, there is an active mouse event listener on a parent object.\r\n\t * @param {Number} currentDepth Indicates the current depth of the search.\r\n\t * @return {DisplayObject}\r\n\t * @protected\r\n\t **/\r\n\tp._getObjectsUnderPoint = function(x, y, arr, mouse, activeListener, currentDepth) {\r\n\t\tcurrentDepth = currentDepth || 0;\r\n\t\tif (!currentDepth && !this._testMask(this, x, y)) { return null; }\r\n\t\tvar mtx, ctx = createjs.DisplayObject._hitTestContext;\r\n\t\tactiveListener = activeListener || (mouse&&this._hasMouseEventListener());\r\n\r\n\t\t// draw children one at a time, and check if we get a hit:\r\n\t\tvar children = this.children, l = children.length;\r\n\t\tfor (var i=l-1; i>=0; i--) {\r\n\t\t\tvar child = children[i];\r\n\t\t\tvar hitArea = child.hitArea;\r\n\t\t\tif (!child.visible || (!hitArea && !child.isVisible()) || (mouse && !child.mouseEnabled)) { continue; }\r\n\t\t\tif (!hitArea && !this._testMask(child, x, y)) { continue; }\r\n\t\t\t\r\n\t\t\t// if a child container has a hitArea then we only need to check its hitArea, so we can treat it as a normal DO:\r\n\t\t\tif (!hitArea && child instanceof Container) {\r\n\t\t\t\tvar result = child._getObjectsUnderPoint(x, y, arr, mouse, activeListener, currentDepth+1);\r\n\t\t\t\tif (!arr && result) { return (mouse && !this.mouseChildren) ? this : result; }\r\n\t\t\t} else {\r\n\t\t\t\tif (mouse && !activeListener && !child._hasMouseEventListener()) { continue; }\r\n\t\t\t\t\r\n\t\t\t\t// TODO: can we pass displayProps forward, to avoid having to calculate this backwards every time? It's kind of a mixed bag. When we're only hunting for DOs with event listeners, it may not make sense.\r\n\t\t\t\tvar props = child.getConcatenatedDisplayProps(child._props);\r\n\t\t\t\tmtx = props.matrix;\r\n\t\t\t\t\r\n\t\t\t\tif (hitArea) {\r\n\t\t\t\t\tmtx.appendMatrix(hitArea.getMatrix(hitArea._props.matrix));\r\n\t\t\t\t\tprops.alpha = hitArea.alpha;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tctx.globalAlpha = props.alpha;\r\n\t\t\t\tctx.setTransform(mtx.a,  mtx.b, mtx.c, mtx.d, mtx.tx-x, mtx.ty-y);\r\n\t\t\t\t(hitArea||child).draw(ctx);\r\n\t\t\t\tif (!this._testHit(ctx)) { continue; }\r\n\t\t\t\tctx.setTransform(1, 0, 0, 1, 0, 0);\r\n\t\t\t\tctx.clearRect(0, 0, 2, 2);\r\n\t\t\t\tif (arr) { arr.push(child); }\r\n\t\t\t\telse { return (mouse && !this.mouseChildren) ? this : child; }\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn null;\r\n\t};\r\n\t\r\n\t/**\r\n\t * @method _testMask\r\n\t * @param {DisplayObject} target\r\n\t * @param {Number} x\r\n\t * @param {Number} y\r\n\t * @return {Boolean} Indicates whether the x/y is within the masked region.\r\n\t * @protected\r\n\t **/\r\n\tp._testMask = function(target, x, y) {\r\n\t\tvar mask = target.mask;\r\n\t\tif (!mask || !mask.graphics || mask.graphics.isEmpty()) { return true; }\r\n\t\t\r\n\t\tvar mtx = this._props.matrix, parent = target.parent;\r\n\t\tmtx = parent ? parent.getConcatenatedMatrix(mtx) : mtx.identity();\r\n\t\tmtx = mask.getMatrix(mask._props.matrix).prependMatrix(mtx);\r\n\t\t\r\n\t\tvar ctx = createjs.DisplayObject._hitTestContext;\r\n\t\tctx.setTransform(mtx.a,  mtx.b, mtx.c, mtx.d, mtx.tx-x, mtx.ty-y);\r\n\t\t\r\n\t\t// draw the mask as a solid fill:\r\n\t\tmask.graphics.drawAsPath(ctx);\r\n\t\tctx.fillStyle = \"#000\";\r\n\t\tctx.fill();\r\n\t\t\r\n\t\tif (!this._testHit(ctx)) { return false; }\r\n\t\tctx.setTransform(1, 0, 0, 1, 0, 0);\r\n\t\tctx.clearRect(0, 0, 2, 2);\r\n\t\t\r\n\t\treturn true;\r\n\t};\r\n\t\r\n\t/**\r\n\t * @method _getBounds\r\n\t * @param {Matrix2D} matrix\r\n\t * @param {Boolean} ignoreTransform If true, does not apply this object's transform.\r\n\t * @return {Rectangle}\r\n\t * @protected\r\n\t **/\r\n\tp._getBounds = function(matrix, ignoreTransform) {\r\n\t\tvar bounds = this.DisplayObject_getBounds();\r\n\t\tif (bounds) { return this._transformBounds(bounds, matrix, ignoreTransform); }\r\n\t\t\r\n\t\tvar mtx = this._props.matrix;\r\n\t\tmtx = ignoreTransform ? mtx.identity() : this.getMatrix(mtx);\r\n\t\tif (matrix) { mtx.prependMatrix(matrix); }\r\n\t\t\r\n\t\tvar l = this.children.length, rect=null;\r\n\t\tfor (var i=0; i<l; i++) {\r\n\t\t\tvar child = this.children[i];\r\n\t\t\tif (!child.visible || !(bounds = child._getBounds(mtx))) { continue; }\r\n\t\t\tif (rect) { rect.extend(bounds.x, bounds.y, bounds.width, bounds.height); }\r\n\t\t\telse { rect = bounds.clone(); }\r\n\t\t}\r\n\t\treturn rect;\r\n\t};\r\n\r\n\r\n\tcreatejs.Container = createjs.promote(Container, \"DisplayObject\");\r\n}());\r\n\r\n//##############################################################################\r\n// Stage.js\r\n//##############################################################################\r\n\r\nthis.createjs = this.createjs||{};\r\n\r\n(function() {\r\n\t\"use strict\";\r\n\r\n\r\n// constructor:\r\n\t/**\r\n\t * A stage is the root level {{#crossLink \"Container\"}}{{/crossLink}} for a display list. Each time its {{#crossLink \"Stage/tick\"}}{{/crossLink}}\r\n\t * method is called, it will render its display list to its target canvas.\r\n\t *\r\n\t * <h4>Example</h4>\r\n\t * This example creates a stage, adds a child to it, then uses {{#crossLink \"Ticker\"}}{{/crossLink}} to update the child\r\n\t * and redraw the stage using {{#crossLink \"Stage/update\"}}{{/crossLink}}.\r\n\t *\r\n\t *      var stage = new createjs.Stage(\"canvasElementId\");\r\n\t *      var image = new createjs.Bitmap(\"imagePath.png\");\r\n\t *      stage.addChild(image);\r\n\t *      createjs.Ticker.addEventListener(\"tick\", handleTick);\r\n\t *      function handleTick(event) {\r\n\t *          image.x += 10;\r\n\t *          stage.update();\r\n\t *      }\r\n\t *\r\n\t * @class Stage\r\n\t * @extends Container\r\n\t * @constructor\r\n\t * @param {HTMLCanvasElement | String | Object} canvas A canvas object that the Stage will render to, or the string id\r\n\t * of a canvas object in the current document.\r\n\t **/\r\n\tfunction Stage(canvas) {\r\n\t\tthis.Container_constructor();\r\n\t\r\n\t\r\n\t// public properties:\r\n\t\t/**\r\n\t\t * Indicates whether the stage should automatically clear the canvas before each render. You can set this to <code>false</code>\r\n\t\t * to manually control clearing (for generative art, or when pointing multiple stages at the same canvas for\r\n\t\t * example).\r\n\t\t *\r\n\t\t * <h4>Example</h4>\r\n\t\t *\r\n\t\t *      var stage = new createjs.Stage(\"canvasId\");\r\n\t\t *      stage.autoClear = false;\r\n\t\t *\r\n\t\t * @property autoClear\r\n\t\t * @type Boolean\r\n\t\t * @default true\r\n\t\t **/\r\n\t\tthis.autoClear = true;\r\n\t\r\n\t\t/**\r\n\t\t * The canvas the stage will render to. Multiple stages can share a single canvas, but you must disable autoClear for all but the\r\n\t\t * first stage that will be ticked (or they will clear each other's render).\r\n\t\t *\r\n\t\t * When changing the canvas property you must disable the events on the old canvas, and enable events on the\r\n\t\t * new canvas or mouse events will not work as expected. For example:\r\n\t\t *\r\n\t\t *      myStage.enableDOMEvents(false);\r\n\t\t *      myStage.canvas = anotherCanvas;\r\n\t\t *      myStage.enableDOMEvents(true);\r\n\t\t *\r\n\t\t * @property canvas\r\n\t\t * @type HTMLCanvasElement | Object\r\n\t\t **/\r\n\t\tthis.canvas = (typeof canvas == \"string\") ? document.getElementById(canvas) : canvas;\r\n\t\r\n\t\t/**\r\n\t\t * The current mouse X position on the canvas. If the mouse leaves the canvas, this will indicate the most recent\r\n\t\t * position over the canvas, and mouseInBounds will be set to false.\r\n\t\t * @property mouseX\r\n\t\t * @type Number\r\n\t\t * @readonly\r\n\t\t **/\r\n\t\tthis.mouseX = 0;\r\n\t\r\n\t\t/**\r\n\t\t * The current mouse Y position on the canvas. If the mouse leaves the canvas, this will indicate the most recent\r\n\t\t * position over the canvas, and mouseInBounds will be set to false.\r\n\t\t * @property mouseY\r\n\t\t * @type Number\r\n\t\t * @readonly\r\n\t\t **/\r\n\t\tthis.mouseY = 0;\r\n\t\r\n\t\t/**\r\n\t\t * Specifies the area of the stage to affect when calling update. This can be use to selectively\r\n\t\t * re-draw specific regions of the canvas. If null, the whole canvas area is drawn.\r\n\t\t * @property drawRect\r\n\t\t * @type {Rectangle}\r\n\t\t */\r\n\t\tthis.drawRect = null;\r\n\t\r\n\t\t/**\r\n\t\t * Indicates whether display objects should be rendered on whole pixels. You can set the\r\n\t\t * {{#crossLink \"DisplayObject/snapToPixel\"}}{{/crossLink}} property of\r\n\t\t * display objects to false to enable/disable this behaviour on a per instance basis.\r\n\t\t * @property snapToPixelEnabled\r\n\t\t * @type Boolean\r\n\t\t * @default false\r\n\t\t **/\r\n\t\tthis.snapToPixelEnabled = false;\r\n\t\r\n\t\t/**\r\n\t\t * Indicates whether the mouse is currently within the bounds of the canvas.\r\n\t\t * @property mouseInBounds\r\n\t\t * @type Boolean\r\n\t\t * @default false\r\n\t\t **/\r\n\t\tthis.mouseInBounds = false;\r\n\t\r\n\t\t/**\r\n\t\t * If true, tick callbacks will be called on all display objects on the stage prior to rendering to the canvas.\r\n\t\t * @property tickOnUpdate\r\n\t\t * @type Boolean\r\n\t\t * @default true\r\n\t\t **/\r\n\t\tthis.tickOnUpdate = true;\r\n\t\r\n\t\t/**\r\n\t\t * If true, mouse move events will continue to be called when the mouse leaves the target canvas. See\r\n\t\t * {{#crossLink \"Stage/mouseInBounds:property\"}}{{/crossLink}}, and {{#crossLink \"MouseEvent\"}}{{/crossLink}}\r\n\t\t * x/y/rawX/rawY.\r\n\t\t * @property mouseMoveOutside\r\n\t\t * @type Boolean\r\n\t\t * @default false\r\n\t\t **/\r\n\t\tthis.mouseMoveOutside = false;\r\n\t\t\r\n\t\t\r\n\t\t/**\r\n\t\t * Prevents selection of other elements in the html page if the user clicks and drags, or double clicks on the canvas.\r\n\t\t * This works by calling `preventDefault()` on any mousedown events (or touch equivalent) originating on the canvas.\r\n\t\t * @property preventSelection\r\n\t\t * @type Boolean\r\n\t\t * @default true\r\n\t\t **/\r\n\t\tthis.preventSelection = true;\r\n\t\r\n\t\t/**\r\n\t\t * The hitArea property is not supported for Stage.\r\n\t\t * @property hitArea\r\n\t\t * @type {DisplayObject}\r\n\t\t * @default null\r\n\t\t */\r\n\t\t \r\n\t\t \r\n\t// private properties:\r\n\t\t/**\r\n\t\t * Holds objects with data for each active pointer id. Each object has the following properties:\r\n\t\t * x, y, event, target, overTarget, overX, overY, inBounds, posEvtObj (native event that last updated position)\r\n\t\t * @property _pointerData\r\n\t\t * @type {Object}\r\n\t\t * @private\r\n\t\t */\r\n\t\tthis._pointerData = {};\r\n\t\r\n\t\t/**\r\n\t\t * Number of active pointers.\r\n\t\t * @property _pointerCount\r\n\t\t * @type {Object}\r\n\t\t * @private\r\n\t\t */\r\n\t\tthis._pointerCount = 0;\r\n\t\r\n\t\t/**\r\n\t\t * The ID of the primary pointer.\r\n\t\t * @property _primaryPointerID\r\n\t\t * @type {Object}\r\n\t\t * @private\r\n\t\t */\r\n\t\tthis._primaryPointerID = null;\r\n\t\r\n\t\t/**\r\n\t\t * @property _mouseOverIntervalID\r\n\t\t * @protected\r\n\t\t * @type Number\r\n\t\t **/\r\n\t\tthis._mouseOverIntervalID = null;\r\n\t\t\r\n\t\t/**\r\n\t\t * @property _nextStage\r\n\t\t * @protected\r\n\t\t * @type Stage\r\n\t\t **/\r\n\t\tthis._nextStage = null;\r\n\t\t\r\n\t\t/**\r\n\t\t * @property _prevStage\r\n\t\t * @protected\r\n\t\t * @type Stage\r\n\t\t **/\r\n\t\tthis._prevStage = null;\r\n\t\t\r\n\t\t\r\n\t// initialize:\r\n\t\tthis.enableDOMEvents(true);\r\n\t}\r\n\tvar p = createjs.extend(Stage, createjs.Container);\r\n\r\n\t/**\r\n\t * <strong>REMOVED</strong>. Removed in favor of using `MySuperClass_constructor`.\r\n\t * See {{#crossLink \"Utility Methods/extend\"}}{{/crossLink}} and {{#crossLink \"Utility Methods/promote\"}}{{/crossLink}}\r\n\t * for details.\r\n\t *\r\n\t * There is an inheritance tutorial distributed with EaselJS in /tutorials/Inheritance.\r\n\t *\r\n\t * @method initialize\r\n\t * @protected\r\n\t * @deprecated\r\n\t */\r\n\t// p.initialize = function() {}; // searchable for devs wondering where it is.\r\n\r\n\r\n// events:\r\n\t/**\r\n\t * Dispatched when the user moves the mouse over the canvas.\r\n\t * See the {{#crossLink \"MouseEvent\"}}{{/crossLink}} class for a listing of event properties.\r\n\t * @event stagemousemove\r\n\t * @since 0.6.0\r\n\t */\r\n\r\n\t/**\r\n\t * Dispatched when the user presses their left mouse button on the canvas. See the {{#crossLink \"MouseEvent\"}}{{/crossLink}}\r\n\t * class for a listing of event properties.\r\n\t * @event stagemousedown\r\n\t * @since 0.6.0\r\n\t */\r\n\r\n\t/**\r\n\t * Dispatched when the user the user presses somewhere on the stage, then releases the mouse button anywhere that the page can detect it (this varies slightly between browsers).\r\n\t * You can use {{#crossLink \"Stage/mouseInBounds:property\"}}{{/crossLink}} to check whether the mouse is currently within the stage bounds.\r\n\t * See the {{#crossLink \"MouseEvent\"}}{{/crossLink}} class for a listing of event properties.\r\n\t * @event stagemouseup\r\n\t * @since 0.6.0\r\n\t */\r\n\r\n\t/**\r\n\t * Dispatched when the mouse moves from within the canvas area (mouseInBounds == true) to outside it (mouseInBounds == false).\r\n\t * This is currently only dispatched for mouse input (not touch). See the {{#crossLink \"MouseEvent\"}}{{/crossLink}}\r\n\t * class for a listing of event properties.\r\n\t * @event mouseleave\r\n\t * @since 0.7.0\r\n\t */\r\n\r\n\t/**\r\n\t * Dispatched when the mouse moves into the canvas area (mouseInBounds == false) from outside it (mouseInBounds == true).\r\n\t * This is currently only dispatched for mouse input (not touch). See the {{#crossLink \"MouseEvent\"}}{{/crossLink}}\r\n\t * class for a listing of event properties.\r\n\t * @event mouseenter\r\n\t * @since 0.7.0\r\n\t */\r\n\t \r\n\t/**\r\n\t * Dispatched each update immediately before the tick event is propagated through the display list.\r\n\t * You can call preventDefault on the event object to cancel propagating the tick event.\r\n\t * @event tickstart\r\n\t * @since 0.7.0\r\n\t */\r\n\t \r\n\t/**\r\n\t * Dispatched each update immediately after the tick event is propagated through the display list. Does not fire if\r\n\t * tickOnUpdate is false. Precedes the \"drawstart\" event.\r\n\t * @event tickend\r\n\t * @since 0.7.0\r\n\t */\r\n\t \r\n\t/**\r\n\t * Dispatched each update immediately before the canvas is cleared and the display list is drawn to it.\r\n\t * You can call preventDefault on the event object to cancel the draw.\r\n\t * @event drawstart\r\n\t * @since 0.7.0\r\n\t */\r\n\t \r\n\t/**\r\n\t * Dispatched each update immediately after the display list is drawn to the canvas and the canvas context is restored.\r\n\t * @event drawend\r\n\t * @since 0.7.0\r\n\t */\r\n\r\n\t \r\n// getter / setters:\r\n\t/**\r\n\t * Specifies a target stage that will have mouse / touch interactions relayed to it after this stage handles them.\r\n\t * This can be useful in cases where you have multiple layered canvases and want user interactions\r\n\t * events to pass through. For example, this would relay mouse events from topStage to bottomStage:\r\n\t *\r\n\t *      topStage.nextStage = bottomStage;\r\n\t *\r\n\t * To disable relaying, set nextStage to null.\r\n\t * \r\n\t * MouseOver, MouseOut, RollOver, and RollOut interactions are also passed through using the mouse over settings\r\n\t * of the top-most stage, but are only processed if the target stage has mouse over interactions enabled.\r\n\t * Considerations when using roll over in relay targets:<OL>\r\n\t * <LI> The top-most (first) stage must have mouse over interactions enabled (via enableMouseOver)</LI>\r\n\t * <LI> All stages that wish to participate in mouse over interaction must enable them via enableMouseOver</LI>\r\n\t * <LI> All relay targets will share the frequency value of the top-most stage</LI>\r\n\t * </OL>\r\n\t * To illustrate, in this example the targetStage would process mouse over interactions at 10hz (despite passing\r\n\t * 30 as it's desired frequency):\r\n\t * \ttopStage.nextStage = targetStage;\r\n\t * \ttopStage.enableMouseOver(10);\r\n\t * \ttargetStage.enableMouseOver(30);\r\n\t * \r\n\t * If the target stage's canvas is completely covered by this stage's canvas, you may also want to disable its\r\n\t * DOM events using:\r\n\t * \r\n\t *\ttargetStage.enableDOMEvents(false);\r\n\t * \r\n\t * @property nextStage\r\n\t * @type {Stage}\r\n\t **/\r\n\tp._get_nextStage = function() {\r\n\t\treturn this._nextStage;\r\n\t};\r\n\tp._set_nextStage = function(value) {\r\n\t\tif (this._nextStage) { this._nextStage._prevStage = null; }\r\n\t\tif (value) { value._prevStage = this; }\r\n\t\tthis._nextStage = value;\r\n\t};\r\n\t\r\n\ttry {\r\n\t\tObject.defineProperties(p, {\r\n\t\t\tnextStage: { get: p._get_nextStage, set: p._set_nextStage }\r\n\t\t});\r\n\t} catch (e) {} // TODO: use Log\r\n\r\n\r\n// public methods:\r\n\t/**\r\n\t * Each time the update method is called, the stage will call {{#crossLink \"Stage/tick\"}}{{/crossLink}}\r\n\t * unless {{#crossLink \"Stage/tickOnUpdate:property\"}}{{/crossLink}} is set to false,\r\n\t * and then render the display list to the canvas.\r\n\t *\r\n\t * @method update\r\n\t * @param {Object} [props] Props object to pass to `tick()`. Should usually be a {{#crossLink \"Ticker\"}}{{/crossLink}} event object, or similar object with a delta property.\r\n\t **/\r\n\tp.update = function(props) {\r\n\t\tif (!this.canvas) { return; }\r\n\t\tif (this.tickOnUpdate) { this.tick(props); }\r\n\t\tif (this.dispatchEvent(\"drawstart\", false, true) === false) { return; }\r\n\t\tcreatejs.DisplayObject._snapToPixelEnabled = this.snapToPixelEnabled;\r\n\t\tvar r = this.drawRect, ctx = this.canvas.getContext(\"2d\");\r\n\t\tctx.setTransform(1, 0, 0, 1, 0, 0);\r\n\t\tif (this.autoClear) {\r\n\t\t\tif (r) { ctx.clearRect(r.x, r.y, r.width, r.height); }\r\n\t\t\telse { ctx.clearRect(0, 0, this.canvas.width+1, this.canvas.height+1); }\r\n\t\t}\r\n\t\tctx.save();\r\n\t\tif (this.drawRect) {\r\n\t\t\tctx.beginPath();\r\n\t\t\tctx.rect(r.x, r.y, r.width, r.height);\r\n\t\t\tctx.clip();\r\n\t\t}\r\n\t\tthis.updateContext(ctx);\r\n\t\tthis.draw(ctx, false);\r\n\t\tctx.restore();\r\n\t\tthis.dispatchEvent(\"drawend\");\r\n\t};\r\n\t\r\n\t/**\r\n\t * Propagates a tick event through the display list. This is automatically called by {{#crossLink \"Stage/update\"}}{{/crossLink}}\r\n\t * unless {{#crossLink \"Stage/tickOnUpdate:property\"}}{{/crossLink}} is set to false.\r\n\t *\r\n\t * If a props object is passed to `tick()`, then all of its properties will be copied to the event object that is\r\n\t * propagated to listeners.\r\n\t *\r\n\t * Some time-based features in EaselJS (for example {{#crossLink \"Sprite/framerate\"}}{{/crossLink}} require that\r\n\t * a {{#crossLink \"Ticker/tick:event\"}}{{/crossLink}} event object (or equivalent object with a delta property) be\r\n\t * passed as the `props` parameter to `tick()`. For example:\r\n\t *\r\n\t * \tTicker.on(\"tick\", handleTick);\r\n\t * \tfunction handleTick(evtObj) {\r\n\t * \t\t// clone the event object from Ticker, and add some custom data to it:\r\n\t * \t\tvar evt = evtObj.clone().set({greeting:\"hello\", name:\"world\"});\r\n\t * \t\t\r\n\t * \t\t// pass it to stage.update():\r\n\t * \t\tmyStage.update(evt); // subsequently calls tick() with the same param\r\n\t * \t}\r\n\t * \t\r\n\t * \t// ...\r\n\t * \tmyDisplayObject.on(\"tick\", handleDisplayObjectTick);\r\n\t * \tfunction handleDisplayObjectTick(evt) {\r\n\t * \t\tconsole.log(evt.delta); // the delta property from the Ticker tick event object\r\n\t * \t\tconsole.log(evt.greeting, evt.name); // custom data: \"hello world\"\r\n\t * \t}\r\n\t * \r\n\t * @method tick\r\n\t * @param {Object} [props] An object with properties that should be copied to the event object. Should usually be a Ticker event object, or similar object with a delta property.\r\n\t **/\r\n\tp.tick = function(props) {\r\n\t\tif (!this.tickEnabled || this.dispatchEvent(\"tickstart\", false, true) === false) { return; }\r\n\t\tvar evtObj = new createjs.Event(\"tick\");\r\n\t\tif (props) {\r\n\t\t\tfor (var n in props) {\r\n\t\t\t\tif (props.hasOwnProperty(n)) { evtObj[n] = props[n]; }\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis._tick(evtObj);\r\n\t\tthis.dispatchEvent(\"tickend\");\r\n\t};\r\n\r\n\t/**\r\n\t * Default event handler that calls the Stage {{#crossLink \"Stage/update\"}}{{/crossLink}} method when a {{#crossLink \"DisplayObject/tick:event\"}}{{/crossLink}}\r\n\t * event is received. This allows you to register a Stage instance as a event listener on {{#crossLink \"Ticker\"}}{{/crossLink}}\r\n\t * directly, using:\r\n\t *\r\n\t *      Ticker.addEventListener(\"tick\", myStage\");\r\n\t *\r\n\t * Note that if you subscribe to ticks using this pattern, then the tick event object will be passed through to\r\n\t * display object tick handlers, instead of <code>delta</code> and <code>paused</code> parameters.\r\n\t * @property handleEvent\r\n\t * @type Function\r\n\t **/\r\n\tp.handleEvent = function(evt) {\r\n\t\tif (evt.type == \"tick\") { this.update(evt); }\r\n\t};\r\n\r\n\t/**\r\n\t * Clears the target canvas. Useful if {{#crossLink \"Stage/autoClear:property\"}}{{/crossLink}} is set to `false`.\r\n\t * @method clear\r\n\t **/\r\n\tp.clear = function() {\r\n\t\tif (!this.canvas) { return; }\r\n\t\tvar ctx = this.canvas.getContext(\"2d\");\r\n\t\tctx.setTransform(1, 0, 0, 1, 0, 0);\r\n\t\tctx.clearRect(0, 0, this.canvas.width+1, this.canvas.height+1);\r\n\t};\r\n\r\n\t/**\r\n\t * Returns a data url that contains a Base64-encoded image of the contents of the stage. The returned data url can\r\n\t * be specified as the src value of an image element.\r\n\t * @method toDataURL\r\n\t * @param {String} [backgroundColor] The background color to be used for the generated image. Any valid CSS color\r\n\t * value is allowed. The default value is a transparent background.\r\n\t * @param {String} [mimeType=\"image/png\"] The MIME type of the image format to be create. The default is \"image/png\". If an unknown MIME type\r\n\t * is passed in, or if the browser does not support the specified MIME type, the default value will be used.\r\n\t * @return {String} a Base64 encoded image.\r\n\t **/\r\n\tp.toDataURL = function(backgroundColor, mimeType) {\r\n\t\tvar data, ctx = this.canvas.getContext('2d'), w = this.canvas.width, h = this.canvas.height;\r\n\r\n\t\tif (backgroundColor) {\r\n\t\t\tdata = ctx.getImageData(0, 0, w, h);\r\n\t\t\tvar compositeOperation = ctx.globalCompositeOperation;\r\n\t\t\tctx.globalCompositeOperation = \"destination-over\";\r\n\t\t\t\r\n\t\t\tctx.fillStyle = backgroundColor;\r\n\t\t\tctx.fillRect(0, 0, w, h);\r\n\t\t}\r\n\r\n\t\tvar dataURL = this.canvas.toDataURL(mimeType||\"image/png\");\r\n\r\n\t\tif(backgroundColor) {\r\n\t\t\tctx.putImageData(data, 0, 0);\r\n\t\t\tctx.globalCompositeOperation = compositeOperation;\r\n\t\t}\r\n\r\n\t\treturn dataURL;\r\n\t};\r\n\r\n\t/**\r\n\t * Enables or disables (by passing a frequency of 0) mouse over ({{#crossLink \"DisplayObject/mouseover:event\"}}{{/crossLink}}\r\n\t * and {{#crossLink \"DisplayObject/mouseout:event\"}}{{/crossLink}}) and roll over events ({{#crossLink \"DisplayObject/rollover:event\"}}{{/crossLink}}\r\n\t * and {{#crossLink \"DisplayObject/rollout:event\"}}{{/crossLink}}) for this stage's display list. These events can\r\n\t * be expensive to generate, so they are disabled by default. The frequency of the events can be controlled\r\n\t * independently of mouse move events via the optional `frequency` parameter.\r\n\t *\r\n\t * <h4>Example</h4>\r\n\t *\r\n\t *      var stage = new createjs.Stage(\"canvasId\");\r\n\t *      stage.enableMouseOver(10); // 10 updates per second\r\n\t *\r\n\t * @method enableMouseOver\r\n\t * @param {Number} [frequency=20] Optional param specifying the maximum number of times per second to broadcast\r\n\t * mouse over/out events. Set to 0 to disable mouse over events completely. Maximum is 50. A lower frequency is less\r\n\t * responsive, but uses less CPU.\r\n\t **/\r\n\tp.enableMouseOver = function(frequency) {\r\n\t\tif (this._mouseOverIntervalID) {\r\n\t\t\tclearInterval(this._mouseOverIntervalID);\r\n\t\t\tthis._mouseOverIntervalID = null;\r\n\t\t\tif (frequency == 0) {\r\n\t\t\t\tthis._testMouseOver(true);\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (frequency == null) { frequency = 20; }\r\n\t\telse if (frequency <= 0) { return; }\r\n\t\tvar o = this;\r\n\t\tthis._mouseOverIntervalID = setInterval(function(){ o._testMouseOver(); }, 1000/Math.min(50,frequency));\r\n\t};\r\n\r\n\t/**\r\n\t * Enables or disables the event listeners that stage adds to DOM elements (window, document and canvas). It is good\r\n\t * practice to disable events when disposing of a Stage instance, otherwise the stage will continue to receive\r\n\t * events from the page.\r\n\t *\r\n\t * When changing the canvas property you must disable the events on the old canvas, and enable events on the\r\n\t * new canvas or mouse events will not work as expected. For example:\r\n\t *\r\n\t *      myStage.enableDOMEvents(false);\r\n\t *      myStage.canvas = anotherCanvas;\r\n\t *      myStage.enableDOMEvents(true);\r\n\t *\r\n\t * @method enableDOMEvents\r\n\t * @param {Boolean} [enable=true] Indicates whether to enable or disable the events. Default is true.\r\n\t **/\r\n\tp.enableDOMEvents = function(enable) {\r\n\t\tif (enable == null) { enable = true; }\r\n\t\tvar n, o, ls = this._eventListeners;\r\n\t\tif (!enable && ls) {\r\n\t\t\tfor (n in ls) {\r\n\t\t\t\to = ls[n];\r\n\t\t\t\to.t.removeEventListener(n, o.f, false);\r\n\t\t\t}\r\n\t\t\tthis._eventListeners = null;\r\n\t\t} else if (enable && !ls && this.canvas) {\r\n\t\t\tvar t = window.addEventListener ? window : document;\r\n\t\t\tvar _this = this;\r\n\t\t\tls = this._eventListeners = {};\r\n\t\t\tls[\"mouseup\"] = {t:t, f:function(e) { _this._handleMouseUp(e)} };\r\n\t\t\tls[\"mousemove\"] = {t:t, f:function(e) { _this._handleMouseMove(e)} };\r\n\t\t\tls[\"dblclick\"] = {t:this.canvas, f:function(e) { _this._handleDoubleClick(e)} };\r\n\t\t\tls[\"mousedown\"] = {t:this.canvas, f:function(e) { _this._handleMouseDown(e)} };\r\n\r\n\t\t\tfor (n in ls) {\r\n\t\t\t\to = ls[n];\r\n\t\t\t\to.t.addEventListener(n, o.f, false);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\t/**\r\n\t * Stage instances cannot be cloned.\r\n\t * @method clone\r\n\t **/\r\n\tp.clone = function() {\r\n\t\tthrow(\"Stage cannot be cloned.\");\r\n\t};\r\n\r\n\t/**\r\n\t * Returns a string representation of this object.\r\n\t * @method toString\r\n\t * @return {String} a string representation of the instance.\r\n\t **/\r\n\tp.toString = function() {\r\n\t\treturn \"[Stage (name=\"+  this.name +\")]\";\r\n\t};\r\n\r\n\r\n// private methods:\r\n\t/**\r\n\t * @method _getElementRect\r\n\t * @protected\r\n\t * @param {HTMLElement} e\r\n\t **/\r\n\tp._getElementRect = function(e) {\r\n\t\tvar bounds;\r\n\t\ttry { bounds = e.getBoundingClientRect(); } // this can fail on disconnected DOM elements in IE9\r\n\t\tcatch (err) { bounds = {top: e.offsetTop, left: e.offsetLeft, width:e.offsetWidth, height:e.offsetHeight}; }\r\n\r\n\t\tvar offX = (window.pageXOffset || document.scrollLeft || 0) - (document.clientLeft || document.body.clientLeft || 0);\r\n\t\tvar offY = (window.pageYOffset || document.scrollTop || 0) - (document.clientTop  || document.body.clientTop  || 0);\r\n\r\n\t\tvar styles = window.getComputedStyle ? getComputedStyle(e,null) : e.currentStyle; // IE <9 compatibility.\r\n\t\tvar padL = parseInt(styles.paddingLeft)+parseInt(styles.borderLeftWidth);\r\n\t\tvar padT = parseInt(styles.paddingTop)+parseInt(styles.borderTopWidth);\r\n\t\tvar padR = parseInt(styles.paddingRight)+parseInt(styles.borderRightWidth);\r\n\t\tvar padB = parseInt(styles.paddingBottom)+parseInt(styles.borderBottomWidth);\r\n\r\n\t\t// note: in some browsers bounds properties are read only.\r\n\t\treturn {\r\n\t\t\tleft: bounds.left+offX+padL,\r\n\t\t\tright: bounds.right+offX-padR,\r\n\t\t\ttop: bounds.top+offY+padT,\r\n\t\t\tbottom: bounds.bottom+offY-padB\r\n\t\t}\r\n\t};\r\n\r\n\t/**\r\n\t * @method _getPointerData\r\n\t * @protected\r\n\t * @param {Number} id\r\n\t **/\r\n\tp._getPointerData = function(id) {\r\n\t\tvar data = this._pointerData[id];\r\n\t\tif (!data) { data = this._pointerData[id] = {x:0,y:0}; }\r\n\t\treturn data;\r\n\t};\r\n\r\n\t/**\r\n\t * @method _handleMouseMove\r\n\t * @protected\r\n\t * @param {MouseEvent} e\r\n\t **/\r\n\tp._handleMouseMove = function(e) {\r\n\t\tif(!e){ e = window.event; }\r\n\t\tthis._handlePointerMove(-1, e, e.pageX, e.pageY);\r\n\t};\r\n\r\n\t/**\r\n\t * @method _handlePointerMove\r\n\t * @protected\r\n\t * @param {Number} id\r\n\t * @param {Event} e\r\n\t * @param {Number} pageX\r\n\t * @param {Number} pageY\r\n\t * @param {Stage} owner Indicates that the event has already been captured & handled by the indicated stage.\r\n\t **/\r\n\tp._handlePointerMove = function(id, e, pageX, pageY, owner) {\r\n\t\tif (this._prevStage && owner === undefined) { return; } // redundant listener.\r\n\t\tif (!this.canvas) { return; }\r\n\t\tvar nextStage=this._nextStage, o=this._getPointerData(id);\r\n\r\n\t\tvar inBounds = o.inBounds;\r\n\t\tthis._updatePointerPosition(id, e, pageX, pageY);\r\n\t\tif (inBounds || o.inBounds || this.mouseMoveOutside) {\r\n\t\t\tif (id === -1 && o.inBounds == !inBounds) {\r\n\t\t\t\tthis._dispatchMouseEvent(this, (inBounds ? \"mouseleave\" : \"mouseenter\"), false, id, o, e);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tthis._dispatchMouseEvent(this, \"stagemousemove\", false, id, o, e);\r\n\t\t\tthis._dispatchMouseEvent(o.target, \"pressmove\", true, id, o, e);\r\n\t\t}\r\n\t\t\r\n\t\tnextStage&&nextStage._handlePointerMove(id, e, pageX, pageY, null);\r\n\t};\r\n\r\n\t/**\r\n\t * @method _updatePointerPosition\r\n\t * @protected\r\n\t * @param {Number} id\r\n\t * @param {Event} e\r\n\t * @param {Number} pageX\r\n\t * @param {Number} pageY\r\n\t **/\r\n\tp._updatePointerPosition = function(id, e, pageX, pageY) {\r\n\t\tvar rect = this._getElementRect(this.canvas);\r\n\t\tpageX -= rect.left;\r\n\t\tpageY -= rect.top;\r\n\r\n\t\tvar w = this.canvas.width;\r\n\t\tvar h = this.canvas.height;\r\n\t\tpageX /= (rect.right-rect.left)/w;\r\n\t\tpageY /= (rect.bottom-rect.top)/h;\r\n\t\tvar o = this._getPointerData(id);\r\n\t\tif (o.inBounds = (pageX >= 0 && pageY >= 0 && pageX <= w-1 && pageY <= h-1)) {\r\n\t\t\to.x = pageX;\r\n\t\t\to.y = pageY;\r\n\t\t} else if (this.mouseMoveOutside) {\r\n\t\t\to.x = pageX < 0 ? 0 : (pageX > w-1 ? w-1 : pageX);\r\n\t\t\to.y = pageY < 0 ? 0 : (pageY > h-1 ? h-1 : pageY);\r\n\t\t}\r\n\r\n\t\to.posEvtObj = e;\r\n\t\to.rawX = pageX;\r\n\t\to.rawY = pageY;\r\n\r\n\t\tif (id === this._primaryPointerID || id === -1) {\r\n\t\t\tthis.mouseX = o.x;\r\n\t\t\tthis.mouseY = o.y;\r\n\t\t\tthis.mouseInBounds = o.inBounds;\r\n\t\t}\r\n\t};\r\n\r\n\t/**\r\n\t * @method _handleMouseUp\r\n\t * @protected\r\n\t * @param {MouseEvent} e\r\n\t **/\r\n\tp._handleMouseUp = function(e) {\r\n\t\tthis._handlePointerUp(-1, e, false);\r\n\t};\r\n\r\n\t/**\r\n\t * @method _handlePointerUp\r\n\t * @protected\r\n\t * @param {Number} id\r\n\t * @param {Event} e\r\n\t * @param {Boolean} clear\r\n\t * @param {Stage} owner Indicates that the event has already been captured & handled by the indicated stage.\r\n\t **/\r\n\tp._handlePointerUp = function(id, e, clear, owner) {\r\n\t\tvar nextStage = this._nextStage, o = this._getPointerData(id);\r\n\t\tif (this._prevStage && owner === undefined) { return; } // redundant listener.\r\n\t\t\r\n\t\tvar target=null, oTarget = o.target;\r\n\t\tif (!owner && (oTarget || nextStage)) { target = this._getObjectsUnderPoint(o.x, o.y, null, true); }\r\n\t\t\r\n\t\tif (o.down) { this._dispatchMouseEvent(this, \"stagemouseup\", false, id, o, e, target); o.down = false; }\r\n\t\t\r\n\t\tif (target == oTarget) { this._dispatchMouseEvent(oTarget, \"click\", true, id, o, e); }\r\n\t\tthis._dispatchMouseEvent(oTarget, \"pressup\", true, id, o, e);\r\n\t\t\r\n\t\tif (clear) {\r\n\t\t\tif (id==this._primaryPointerID) { this._primaryPointerID = null; }\r\n\t\t\tdelete(this._pointerData[id]);\r\n\t\t} else { o.target = null; }\r\n\t\t\r\n\t\tnextStage&&nextStage._handlePointerUp(id, e, clear, owner || target && this);\r\n\t};\r\n\r\n\t/**\r\n\t * @method _handleMouseDown\r\n\t * @protected\r\n\t * @param {MouseEvent} e\r\n\t **/\r\n\tp._handleMouseDown = function(e) {\r\n\t\tthis._handlePointerDown(-1, e, e.pageX, e.pageY);\r\n\t};\r\n\r\n\t/**\r\n\t * @method _handlePointerDown\r\n\t * @protected\r\n\t * @param {Number} id\r\n\t * @param {Event} e\r\n\t * @param {Number} pageX\r\n\t * @param {Number} pageY\r\n\t * @param {Stage} owner Indicates that the event has already been captured & handled by the indicated stage.\r\n\t **/\r\n\tp._handlePointerDown = function(id, e, pageX, pageY, owner) {\r\n\t\tif (this.preventSelection) { e.preventDefault(); }\r\n\t\tif (this._primaryPointerID == null || id === -1) { this._primaryPointerID = id; } // mouse always takes over.\r\n\t\t\r\n\t\tif (pageY != null) { this._updatePointerPosition(id, e, pageX, pageY); }\r\n\t\tvar target = null, nextStage = this._nextStage, o = this._getPointerData(id);\r\n\t\tif (!owner) { target = o.target = this._getObjectsUnderPoint(o.x, o.y, null, true); }\r\n\r\n\t\tif (o.inBounds) { this._dispatchMouseEvent(this, \"stagemousedown\", false, id, o, e, target); o.down = true; }\r\n\t\tthis._dispatchMouseEvent(target, \"mousedown\", true, id, o, e);\r\n\t\t\r\n\t\tnextStage&&nextStage._handlePointerDown(id, e, pageX, pageY, owner || target && this);\r\n\t};\r\n\r\n\t/**\r\n\t * @method _testMouseOver\r\n\t * @param {Boolean} clear If true, clears the mouseover / rollover (ie. no target)\r\n\t * @param {Stage} owner Indicates that the event has already been captured & handled by the indicated stage.\r\n\t * @param {Stage} eventTarget The stage that the cursor is actively over.\r\n\t * @protected\r\n\t **/\r\n\tp._testMouseOver = function(clear, owner, eventTarget) {\r\n\t\tif (this._prevStage && owner === undefined) { return; } // redundant listener.\r\n\t\t\r\n\t\tvar nextStage = this._nextStage;\r\n\t\tif (!this._mouseOverIntervalID) {\r\n\t\t\t// not enabled for mouseover, but should still relay the event.\r\n\t\t\tnextStage&&nextStage._testMouseOver(clear, owner, eventTarget);\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tvar o = this._getPointerData(-1);\r\n\t\t// only update if the mouse position has changed. This provides a lot of optimization, but has some trade-offs.\r\n\t\tif (!o || (!clear && this.mouseX == this._mouseOverX && this.mouseY == this._mouseOverY && this.mouseInBounds)) { return; }\r\n\t\t\r\n\t\tvar e = o.posEvtObj;\r\n\t\tvar isEventTarget = eventTarget || e&&(e.target == this.canvas);\r\n\t\tvar target=null, common = -1, cursor=\"\", t, i, l;\r\n\t\t\r\n\t\tif (!owner && (clear || this.mouseInBounds && isEventTarget)) {\r\n\t\t\ttarget = this._getObjectsUnderPoint(this.mouseX, this.mouseY, null, true);\r\n\t\t\tthis._mouseOverX = this.mouseX;\r\n\t\t\tthis._mouseOverY = this.mouseY;\r\n\t\t}\r\n\r\n\t\tvar oldList = this._mouseOverTarget||[];\r\n\t\tvar oldTarget = oldList[oldList.length-1];\r\n\t\tvar list = this._mouseOverTarget = [];\r\n\r\n\t\t// generate ancestor list and check for cursor:\r\n\t\tt = target;\r\n\t\twhile (t) {\r\n\t\t\tlist.unshift(t);\r\n\t\t\tif (!cursor) { cursor = t.cursor; }\r\n\t\t\tt = t.parent;\r\n\t\t}\r\n\t\tthis.canvas.style.cursor = cursor;\r\n\t\tif (!owner && eventTarget) { eventTarget.canvas.style.cursor = cursor; }\r\n\r\n\t\t// find common ancestor:\r\n\t\tfor (i=0,l=list.length; i<l; i++) {\r\n\t\t\tif (list[i] != oldList[i]) { break; }\r\n\t\t\tcommon = i;\r\n\t\t}\r\n\r\n\t\tif (oldTarget != target) {\r\n\t\t\tthis._dispatchMouseEvent(oldTarget, \"mouseout\", true, -1, o, e, target);\r\n\t\t}\r\n\r\n\t\tfor (i=oldList.length-1; i>common; i--) {\r\n\t\t\tthis._dispatchMouseEvent(oldList[i], \"rollout\", false, -1, o, e, target);\r\n\t\t}\r\n\r\n\t\tfor (i=list.length-1; i>common; i--) {\r\n\t\t\tthis._dispatchMouseEvent(list[i], \"rollover\", false, -1, o, e, oldTarget);\r\n\t\t}\r\n\r\n\t\tif (oldTarget != target) {\r\n\t\t\tthis._dispatchMouseEvent(target, \"mouseover\", true, -1, o, e, oldTarget);\r\n\t\t}\r\n\t\t\r\n\t\tnextStage&&nextStage._testMouseOver(clear, owner || target && this, eventTarget || isEventTarget && this);\r\n\t};\r\n\r\n\t/**\r\n\t * @method _handleDoubleClick\r\n\t * @protected\r\n\t * @param {MouseEvent} e\r\n\t * @param {Stage} owner Indicates that the event has already been captured & handled by the indicated stage.\r\n\t **/\r\n\tp._handleDoubleClick = function(e, owner) {\r\n\t\tvar target=null, nextStage=this._nextStage, o=this._getPointerData(-1);\r\n\t\tif (!owner) {\r\n\t\t\ttarget = this._getObjectsUnderPoint(o.x, o.y, null, true);\r\n\t\t\tthis._dispatchMouseEvent(target, \"dblclick\", true, -1, o, e);\r\n\t\t}\r\n\t\tnextStage&&nextStage._handleDoubleClick(e, owner || target && this);\r\n\t};\r\n\r\n\t/**\r\n\t * @method _dispatchMouseEvent\r\n\t * @protected\r\n\t * @param {DisplayObject} target\r\n\t * @param {String} type\r\n\t * @param {Boolean} bubbles\r\n\t * @param {Number} pointerId\r\n\t * @param {Object} o\r\n\t * @param {MouseEvent} [nativeEvent]\r\n\t * @param {DisplayObject} [relatedTarget]\r\n\t **/\r\n\tp._dispatchMouseEvent = function(target, type, bubbles, pointerId, o, nativeEvent, relatedTarget) {\r\n\t\t// TODO: might be worth either reusing MouseEvent instances, or adding a willTrigger method to avoid GC.\r\n\t\tif (!target || (!bubbles && !target.hasEventListener(type))) { return; }\r\n\t\t/*\r\n\t\t// TODO: account for stage transformations?\r\n\t\tthis._mtx = this.getConcatenatedMatrix(this._mtx).invert();\r\n\t\tvar pt = this._mtx.transformPoint(o.x, o.y);\r\n\t\tvar evt = new createjs.MouseEvent(type, bubbles, false, pt.x, pt.y, nativeEvent, pointerId, pointerId==this._primaryPointerID || pointerId==-1, o.rawX, o.rawY);\r\n\t\t*/\r\n\t\tvar evt = new createjs.MouseEvent(type, bubbles, false, o.x, o.y, nativeEvent, pointerId, pointerId === this._primaryPointerID || pointerId === -1, o.rawX, o.rawY, relatedTarget);\r\n\t\ttarget.dispatchEvent(evt);\r\n\t};\r\n\r\n\r\n\tcreatejs.Stage = createjs.promote(Stage, \"Container\");\r\n}());\r\n\r\n//##############################################################################\r\n// Bitmap.js\r\n//##############################################################################\r\n\r\nthis.createjs = this.createjs||{};\r\n\r\n(function() {\r\n\t\r\n\t/**\r\n\t * A Bitmap represents an Image, Canvas, or Video in the display list. A Bitmap can be instantiated using an existing\r\n\t * HTML element, or a string.\r\n\t *\r\n\t * <h4>Example</h4>\r\n\t *\r\n\t *      var bitmap = new createjs.Bitmap(\"imagePath.jpg\");\r\n\t *\r\n\t * <strong>Notes:</strong>\r\n\t * <ol>\r\n\t *     <li>When a string path or image tag that is not yet loaded is used, the stage may need to be redrawn before it\r\n\t *      will be displayed.</li>\r\n\t *     <li>Bitmaps with an SVG source currently will not respect an alpha value other than 0 or 1. To get around this,\r\n\t *     the Bitmap can be cached.</li>\r\n\t *     <li>Bitmaps with an SVG source will taint the canvas with cross-origin data, which prevents interactivity. This\r\n\t *     happens in all browsers except recent Firefox builds.</li>\r\n\t *     <li>Images loaded cross-origin will throw cross-origin security errors when interacted with using a mouse, using\r\n\t *     methods such as `getObjectUnderPoint`, or using filters, or caching. You can get around this by setting\r\n\t *     `crossOrigin` flags on your images before passing them to EaselJS, eg: `img.crossOrigin=\"Anonymous\";`</li>\r\n\t * </ol>\r\n\t *\r\n\t * @class Bitmap\r\n\t * @extends DisplayObject\r\n\t * @constructor\r\n\t * @param {HTMLImageElement | HTMLCanvasElement | HTMLVideoElement | String} imageOrUri The source object or URI to an image to\r\n\t * display. This can be either an Image, Canvas, or Video object, or a string URI to an image file to load and use.\r\n\t * If it is a URI, a new Image object will be constructed and assigned to the .image property.\r\n\t **/\r\n\tfunction Bitmap(imageOrUri) {\r\n\t\tthis.DisplayObject_constructor();\r\n\t\t\r\n\t\t\r\n\t// public properties:\r\n\t\t/**\r\n\t\t * The image to render. This can be an Image, a Canvas, or a Video. Not all browsers (especially\r\n\t\t * mobile browsers) support drawing video to a canvas.\r\n\t\t * @property image\r\n\t\t * @type HTMLImageElement | HTMLCanvasElement | HTMLVideoElement\r\n\t\t **/\r\n\t\tif (typeof imageOrUri == \"string\") {\r\n\t\t\tthis.image = document.createElement(\"img\");\r\n\t\t\tthis.image.src = imageOrUri;\r\n\t\t} else {\r\n\t\t\tthis.image = imageOrUri;\r\n\t\t}\r\n\t\r\n\t\t/**\r\n\t\t * Specifies an area of the source image to draw. If omitted, the whole image will be drawn.\r\n\t\t * Note that video sources must have a width / height set to work correctly with `sourceRect`.\r\n\t\t * @property sourceRect\r\n\t\t * @type Rectangle\r\n\t\t * @default null\r\n\t\t */\r\n\t\tthis.sourceRect = null;\r\n\t}\r\n\tvar p = createjs.extend(Bitmap, createjs.DisplayObject);\r\n\t\r\n\t\r\n// public methods:\r\n\t/**\r\n\t * Constructor alias for backwards compatibility. This method will be removed in future versions.\r\n\t * Subclasses should be updated to use {{#crossLink \"Utility Methods/extends\"}}{{/crossLink}}.\r\n\t * @method initialize\r\n\t * @deprecated in favour of `createjs.promote()`\r\n\t **/\r\n\tp.initialize = Bitmap; // TODO: deprecated.\r\n\r\n\t/**\r\n\t * Returns true or false indicating whether the display object would be visible if drawn to a canvas.\r\n\t * This does not account for whether it would be visible within the boundaries of the stage.\r\n\t *\r\n\t * NOTE: This method is mainly for internal use, though it may be useful for advanced uses.\r\n\t * @method isVisible\r\n\t * @return {Boolean} Boolean indicating whether the display object would be visible if drawn to a canvas\r\n\t **/\r\n\tp.isVisible = function() {\r\n\t\tvar image = this.image;\r\n\t\tvar hasContent = this.cacheCanvas || (image && (image.naturalWidth || image.getContext || image.readyState >= 2));\r\n\t\treturn !!(this.visible && this.alpha > 0 && this.scaleX != 0 && this.scaleY != 0 && hasContent);\r\n\t};\r\n\r\n\t/**\r\n\t * Draws the display object into the specified context ignoring its visible, alpha, shadow, and transform.\r\n\t * Returns true if the draw was handled (useful for overriding functionality).\r\n\t *\r\n\t * NOTE: This method is mainly for internal use, though it may be useful for advanced uses.\r\n\t * @method draw\r\n\t * @param {CanvasRenderingContext2D} ctx The canvas 2D context object to draw into.\r\n\t * @param {Boolean} [ignoreCache=false] Indicates whether the draw operation should ignore any current cache.\r\n\t * For example, used for drawing the cache (to prevent it from simply drawing an existing cache back\r\n\t * into itself).\r\n\t * @return {Boolean}\r\n\t **/\r\n\tp.draw = function(ctx, ignoreCache) {\r\n\t\tif (this.DisplayObject_draw(ctx, ignoreCache) || !this.image) { return true; }\r\n\t\tvar img = this.image, rect = this.sourceRect;\r\n\t\tif (rect) {\r\n\t\t\t// some browsers choke on out of bound values, so we'll fix them:\r\n\t\t\tvar x1 = rect.x, y1 = rect.y, x2 = x1 + rect.width, y2 = y1 + rect.height, x = 0, y = 0, w = img.width, h = img.height;\r\n\t\t\tif (x1 < 0) { x -= x1; x1 = 0; }\r\n\t\t\tif (x2 > w) { x2 = w; }\r\n\t\t\tif (y1 < 0) { y -= y1; y1 = 0; }\r\n\t\t\tif (y2 > h) { y2 = h; }\r\n\t\t\tctx.drawImage(img, x1, y1, x2-x1, y2-y1, x, y, x2-x1, y2-y1);\r\n\t\t} else {\r\n\t\t\tctx.drawImage(img, 0, 0);\r\n\t\t}\r\n\t\treturn true;\r\n\t};\r\n\t\r\n\t//Note, the doc sections below document using the specified APIs (from DisplayObject)  from\r\n\t//Bitmap. This is why they have no method implementations.\r\n\t\r\n\t/**\r\n\t * Because the content of a Bitmap is already in a simple format, cache is unnecessary for Bitmap instances.\r\n\t * You should <b>not</b> cache Bitmap instances as it can degrade performance.\r\n\t *\r\n\t * <strong>However: If you want to use a filter on a Bitmap, you <em>MUST</em> cache it, or it will not work.</strong>\r\n\t * To see the API for caching, please visit the DisplayObject {{#crossLink \"DisplayObject/cache\"}}{{/crossLink}}\r\n\t * method.\r\n\t * @method cache\r\n\t **/\r\n\t\r\n\t/**\r\n\t * Because the content of a Bitmap is already in a simple format, cache is unnecessary for Bitmap instances.\r\n\t * You should <b>not</b> cache Bitmap instances as it can degrade performance.\r\n\t *\r\n\t * <strong>However: If you want to use a filter on a Bitmap, you <em>MUST</em> cache it, or it will not work.</strong>\r\n\t * To see the API for caching, please visit the DisplayObject {{#crossLink \"DisplayObject/cache\"}}{{/crossLink}}\r\n\t * method.\r\n\t * @method updateCache\r\n\t **/\r\n\t\r\n\t/**\r\n\t * Because the content of a Bitmap is already in a simple format, cache is unnecessary for Bitmap instances.\r\n\t * You should <b>not</b> cache Bitmap instances as it can degrade performance.\r\n\t *\r\n\t * <strong>However: If you want to use a filter on a Bitmap, you <em>MUST</em> cache it, or it will not work.</strong>\r\n\t * To see the API for caching, please visit the DisplayObject {{#crossLink \"DisplayObject/cache\"}}{{/crossLink}}\r\n\t * method.\r\n\t * @method uncache\r\n\t **/\r\n\r\n\t/**\r\n\t * Docced in superclass.\r\n\t */\r\n\tp.getBounds = function() {\r\n\t\tvar rect = this.DisplayObject_getBounds();\r\n\t\tif (rect) { return rect; }\r\n\t\tvar image = this.image, o = this.sourceRect || image;\r\n\t\tvar hasContent = (image && (image.naturalWidth || image.getContext || image.readyState >= 2));\r\n\t\treturn hasContent ? this._rectangle.setValues(0, 0, o.width, o.height) : null;\r\n\t};\r\n\t\r\n\t/**\r\n\t * Returns a clone of the Bitmap instance.\r\n\t * @method clone\r\n\t * @return {Bitmap} a clone of the Bitmap instance.\r\n\t **/\r\n\tp.clone = function() {\r\n\t\tvar o = new Bitmap(this.image);\r\n\t\tif (this.sourceRect) { o.sourceRect = this.sourceRect.clone(); }\r\n\t\tthis._cloneProps(o);\r\n\t\treturn o;\r\n\t};\r\n\t\r\n\t/**\r\n\t * Returns a string representation of this object.\r\n\t * @method toString\r\n\t * @return {String} a string representation of the instance.\r\n\t **/\r\n\tp.toString = function() {\r\n\t\treturn \"[Bitmap (name=\"+  this.name +\")]\";\r\n\t};\r\n\r\n\t\r\n\tcreatejs.Bitmap = createjs.promote(Bitmap, \"DisplayObject\");\r\n}());\r\n\r\n//##############################################################################\r\n// Sprite.js\r\n//##############################################################################\r\n\r\nthis.createjs = this.createjs||{};\r\n\r\n(function() {\r\n\t\"use strict\";\r\n\r\n\r\n// constructor:\r\n\t/**\r\n\t * Displays a frame or sequence of frames (ie. an animation) from a SpriteSheet instance. A sprite sheet is a series of\r\n\t * images (usually animation frames) combined into a single image. For example, an animation consisting of 8 100x100\r\n\t * images could be combined into a 400x200 sprite sheet (4 frames across by 2 high). You can display individual frames,\r\n\t * play frames as an animation, and even sequence animations together.\r\n\t *\r\n\t * See the {{#crossLink \"SpriteSheet\"}}{{/crossLink}} class for more information on setting up frames and animations.\r\n\t *\r\n\t * <h4>Example</h4>\r\n\t *\r\n\t *      var instance = new createjs.Sprite(spriteSheet);\r\n\t *      instance.gotoAndStop(\"frameName\");\r\n\t *\r\n\t * Until {{#crossLink \"Sprite/gotoAndStop\"}}{{/crossLink}} or {{#crossLink \"Sprite/gotoAndPlay\"}}{{/crossLink}} is called,\r\n\t * only the first defined frame defined in the sprite sheet will be displayed.\r\n\t *\r\n\t * @class Sprite\r\n\t * @extends DisplayObject\r\n\t * @constructor\r\n\t * @param {SpriteSheet} spriteSheet The SpriteSheet instance to play back. This includes the source image(s), frame\r\n\t * dimensions, and frame data. See {{#crossLink \"SpriteSheet\"}}{{/crossLink}} for more information.\r\n\t * @param {String|Number} [frameOrAnimation] The frame number or animation to play initially.\r\n\t **/\r\n\tfunction Sprite(spriteSheet, frameOrAnimation) {\r\n\t\tthis.DisplayObject_constructor();\r\n\t\t\r\n\t\t\r\n\t// public properties:\r\n\t\t/**\r\n\t\t * The frame index that will be drawn when draw is called. Note that with some {{#crossLink \"SpriteSheet\"}}{{/crossLink}}\r\n\t\t * definitions, this will advance non-sequentially. This will always be an integer value.\r\n\t\t * @property currentFrame\r\n\t\t * @type {Number}\r\n\t\t * @default 0\r\n\t\t * @readonly\r\n\t\t **/\r\n\t\tthis.currentFrame = 0;\r\n\t\r\n\t\t/**\r\n\t\t * Returns the name of the currently playing animation.\r\n\t\t * @property currentAnimation\r\n\t\t * @type {String}\r\n\t\t * @final\r\n\t\t * @readonly\r\n\t\t **/\r\n\t\tthis.currentAnimation = null;\r\n\t\r\n\t\t/**\r\n\t\t * Prevents the animation from advancing each tick automatically. For example, you could create a sprite\r\n\t\t * sheet of icons, set paused to true, and display the appropriate icon by setting <code>currentFrame</code>.\r\n\t\t * @property paused\r\n\t\t * @type {Boolean}\r\n\t\t * @default false\r\n\t\t **/\r\n\t\tthis.paused = true;\r\n\t\r\n\t\t/**\r\n\t\t * The SpriteSheet instance to play back. This includes the source image, frame dimensions, and frame\r\n\t\t * data. See {{#crossLink \"SpriteSheet\"}}{{/crossLink}} for more information.\r\n\t\t * @property spriteSheet\r\n\t\t * @type {SpriteSheet}\r\n\t\t * @readonly\r\n\t\t **/\r\n\t\tthis.spriteSheet = spriteSheet;\r\n\t\r\n\t\t/**\r\n\t\t * Specifies the current frame index within the currently playing animation. When playing normally, this will increase\r\n\t\t * from 0 to n-1, where n is the number of frames in the current animation.\r\n\t\t *\r\n\t\t * This could be a non-integer value if\r\n\t\t * using time-based playback (see {{#crossLink \"Sprite/framerate\"}}{{/crossLink}}, or if the animation's speed is\r\n\t\t * not an integer.\r\n\t\t * @property currentAnimationFrame\r\n\t\t * @type {Number}\r\n\t\t * @default 0\r\n\t\t **/\r\n\t\tthis.currentAnimationFrame = 0;\r\n\t\r\n\t\t/**\r\n\t\t * By default Sprite instances advance one frame per tick. Specifying a framerate for the Sprite (or its related\r\n\t\t * SpriteSheet) will cause it to advance based on elapsed time between ticks as appropriate to maintain the target\r\n\t\t * framerate.\r\n\t\t *\r\n\t\t * For example, if a Sprite with a framerate of 10 is placed on a Stage being updated at 40fps, then the Sprite will\r\n\t\t * advance roughly one frame every 4 ticks. This will not be exact, because the time between each tick will\r\n\t\t * vary slightly between frames.\r\n\t\t *\r\n\t\t * This feature is dependent on the tick event object (or an object with an appropriate \"delta\" property) being\r\n\t\t * passed into {{#crossLink \"Stage/update\"}}{{/crossLink}}.\r\n\t\t * @property framerate\r\n\t\t * @type {Number}\r\n\t\t * @default 0\r\n\t\t **/\r\n\t\tthis.framerate = 0;\r\n\t\r\n\t\r\n\t// private properties:\r\n\t\t/**\r\n\t\t * Current animation object.\r\n\t\t * @property _animation\r\n\t\t * @protected\r\n\t\t * @type {Object}\r\n\t\t * @default null\r\n\t\t **/\r\n\t\tthis._animation = null;\r\n\t\r\n\t\t/**\r\n\t\t * Current frame index.\r\n\t\t * @property _currentFrame\r\n\t\t * @protected\r\n\t\t * @type {Number}\r\n\t\t * @default null\r\n\t\t **/\r\n\t\tthis._currentFrame = null;\r\n\t\t\r\n\t\t/**\r\n\t\t * Skips the next auto advance. Used by gotoAndPlay to avoid immediately jumping to the next frame\r\n\t\t * @property _skipAdvance\r\n\t\t * @protected\r\n\t\t * @type {Boolean}\r\n\t\t * @default false\r\n\t\t **/\r\n\t\tthis._skipAdvance = false;\r\n\t\t\r\n\t\t\r\n\t\tif (frameOrAnimation != null) { this.gotoAndPlay(frameOrAnimation); }\r\n\t}\r\n\tvar p = createjs.extend(Sprite, createjs.DisplayObject);\r\n\r\n\t/**\r\n\t * Constructor alias for backwards compatibility. This method will be removed in future versions.\r\n\t * Subclasses should be updated to use {{#crossLink \"Utility Methods/extends\"}}{{/crossLink}}.\r\n\t * @method initialize\r\n\t * @deprecated in favour of `createjs.promote()`\r\n\t **/\r\n\tp.initialize = Sprite; // TODO: Deprecated. This is for backwards support of FlashCC spritesheet export.\r\n\r\n\r\n// events:\r\n\t/**\r\n\t * Dispatched when an animation reaches its ends.\r\n\t * @event animationend\r\n\t * @param {Object} target The object that dispatched the event.\r\n\t * @param {String} type The event type.\r\n\t * @param {String} name The name of the animation that just ended.\r\n\t * @param {String} next The name of the next animation that will be played, or null. This will be the same as name if the animation is looping.\r\n\t * @since 0.6.0\r\n\t */\r\n\t \r\n\t/**\r\n\t * Dispatched any time the current frame changes. For example, this could be due to automatic advancement on a tick,\r\n\t * or calling gotoAndPlay() or gotoAndStop().\r\n\t * @event change\r\n\t * @param {Object} target The object that dispatched the event.\r\n\t * @param {String} type The event type.\r\n\t */\r\n\r\n\r\n// public methods:\r\n\t/**\r\n\t * Returns true or false indicating whether the display object would be visible if drawn to a canvas.\r\n\t * This does not account for whether it would be visible within the boundaries of the stage.\r\n\t * NOTE: This method is mainly for internal use, though it may be useful for advanced uses.\r\n\t * @method isVisible\r\n\t * @return {Boolean} Boolean indicating whether the display object would be visible if drawn to a canvas\r\n\t **/\r\n\tp.isVisible = function() {\r\n\t\tvar hasContent = this.cacheCanvas || this.spriteSheet.complete;\r\n\t\treturn !!(this.visible && this.alpha > 0 && this.scaleX != 0 && this.scaleY != 0 && hasContent);\r\n\t};\r\n\r\n\t/**\r\n\t * Draws the display object into the specified context ignoring its visible, alpha, shadow, and transform.\r\n\t * Returns true if the draw was handled (useful for overriding functionality).\r\n\t * NOTE: This method is mainly for internal use, though it may be useful for advanced uses.\r\n\t * @method draw\r\n\t * @param {CanvasRenderingContext2D} ctx The canvas 2D context object to draw into.\r\n\t * @param {Boolean} ignoreCache Indicates whether the draw operation should ignore any current cache.\r\n\t * For example, used for drawing the cache (to prevent it from simply drawing an existing cache back\r\n\t * into itself).\r\n\t **/\r\n\tp.draw = function(ctx, ignoreCache) {\r\n\t\tif (this.DisplayObject_draw(ctx, ignoreCache)) { return true; }\r\n\t\tthis._normalizeFrame();\r\n\t\tvar o = this.spriteSheet.getFrame(this._currentFrame|0);\r\n\t\tif (!o) { return false; }\r\n\t\tvar rect = o.rect;\r\n\t\tif (rect.width && rect.height) { ctx.drawImage(o.image, rect.x, rect.y, rect.width, rect.height, -o.regX, -o.regY, rect.width, rect.height); }\r\n\t\treturn true;\r\n\t};\r\n\r\n\t//Note, the doc sections below document using the specified APIs (from DisplayObject)  from\r\n\t//Bitmap. This is why they have no method implementations.\r\n\r\n\t/**\r\n\t * Because the content of a Sprite is already in a raster format, cache is unnecessary for Sprite instances.\r\n\t * You should not cache Sprite instances as it can degrade performance.\r\n\t * @method cache\r\n\t **/\r\n\r\n\t/**\r\n\t * Because the content of a Sprite is already in a raster format, cache is unnecessary for Sprite instances.\r\n\t * You should not cache Sprite instances as it can degrade performance.\r\n\t * @method updateCache\r\n\t **/\r\n\r\n\t/**\r\n\t * Because the content of a Sprite is already in a raster format, cache is unnecessary for Sprite instances.\r\n\t * You should not cache Sprite instances as it can degrade performance.\r\n\t * @method uncache\r\n\t **/\r\n\r\n\t/**\r\n\t * Play (unpause) the current animation. The Sprite will be paused if either {{#crossLink \"Sprite/stop\"}}{{/crossLink}}\r\n\t * or {{#crossLink \"Sprite/gotoAndStop\"}}{{/crossLink}} is called. Single frame animations will remain\r\n\t * unchanged.\r\n\t * @method play\r\n\t **/\r\n\tp.play = function() {\r\n\t\tthis.paused = false;\r\n\t};\r\n\r\n\t/**\r\n\t * Stop playing a running animation. The Sprite will be playing if {{#crossLink \"Sprite/gotoAndPlay\"}}{{/crossLink}}\r\n\t * is called. Note that calling {{#crossLink \"Sprite/gotoAndPlay\"}}{{/crossLink}} or {{#crossLink \"Sprite/play\"}}{{/crossLink}}\r\n\t * will resume playback.\r\n\t * @method stop\r\n\t **/\r\n\tp.stop = function() {\r\n\t\tthis.paused = true;\r\n\t};\r\n\r\n\t/**\r\n\t * Sets paused to false and plays the specified animation name, named frame, or frame number.\r\n\t * @method gotoAndPlay\r\n\t * @param {String|Number} frameOrAnimation The frame number or animation name that the playhead should move to\r\n\t * and begin playing.\r\n\t **/\r\n\tp.gotoAndPlay = function(frameOrAnimation) {\r\n\t\tthis.paused = false;\r\n\t\tthis._skipAdvance = true;\r\n\t\tthis._goto(frameOrAnimation);\r\n\t};\r\n\r\n\t/**\r\n\t * Sets paused to true and seeks to the specified animation name, named frame, or frame number.\r\n\t * @method gotoAndStop\r\n\t * @param {String|Number} frameOrAnimation The frame number or animation name that the playhead should move to\r\n\t * and stop.\r\n\t **/\r\n\tp.gotoAndStop = function(frameOrAnimation) {\r\n\t\tthis.paused = true;\r\n\t\tthis._goto(frameOrAnimation);\r\n\t};\r\n\r\n\t/**\r\n\t * Advances the playhead. This occurs automatically each tick by default.\r\n\t * @param [time] {Number} The amount of time in ms to advance by. Only applicable if framerate is set on the Sprite\r\n\t * or its SpriteSheet.\r\n\t * @method advance\r\n\t*/\r\n\tp.advance = function(time) {\r\n\t\tvar fps = this.framerate || this.spriteSheet.framerate;\r\n\t\tvar t = (fps && time != null) ? time/(1000/fps) : 1;\r\n\t\tthis._normalizeFrame(t);\r\n\t};\r\n\t\r\n\t/**\r\n\t * Returns a {{#crossLink \"Rectangle\"}}{{/crossLink}} instance defining the bounds of the current frame relative to\r\n\t * the origin. For example, a 90 x 70 frame with <code>regX=50</code> and <code>regY=40</code> would return a\r\n\t * rectangle with [x=-50, y=-40, width=90, height=70]. This ignores transformations on the display object.\r\n\t *\r\n\t * Also see the SpriteSheet {{#crossLink \"SpriteSheet/getFrameBounds\"}}{{/crossLink}} method.\r\n\t * @method getBounds\r\n\t * @return {Rectangle} A Rectangle instance. Returns null if the frame does not exist, or the image is not fully\r\n\t * loaded.\r\n\t **/\r\n\tp.getBounds = function() {\r\n\t\t// TODO: should this normalizeFrame?\r\n\t\treturn this.DisplayObject_getBounds() || this.spriteSheet.getFrameBounds(this.currentFrame, this._rectangle);\r\n\t};\r\n\r\n\t/**\r\n\t * Returns a clone of the Sprite instance. Note that the same SpriteSheet is shared between cloned\r\n\t * instances.\r\n\t * @method clone\r\n\t * @return {Sprite} a clone of the Sprite instance.\r\n\t **/\r\n\tp.clone = function() {\r\n\t\treturn this._cloneProps(new Sprite(this.spriteSheet));\r\n\t};\r\n\r\n\t/**\r\n\t * Returns a string representation of this object.\r\n\t * @method toString\r\n\t * @return {String} a string representation of the instance.\r\n\t **/\r\n\tp.toString = function() {\r\n\t\treturn \"[Sprite (name=\"+  this.name +\")]\";\r\n\t};\r\n\r\n// private methods:\r\n\t/**\r\n\t * @method _cloneProps\r\n\t * @param {Sprite} o\r\n\t * @return {Sprite} o\r\n\t * @protected\r\n\t **/\r\n\tp._cloneProps = function(o) {\r\n\t\tthis.DisplayObject__cloneProps(o);\r\n\t\to.currentFrame = this.currentFrame;\r\n\t\to.currentAnimation = this.currentAnimation;\r\n\t\to.paused = this.paused;\r\n\t\to.currentAnimationFrame = this.currentAnimationFrame;\r\n\t\to.framerate = this.framerate;\r\n\t\t\r\n\t\to._animation = this._animation;\r\n\t\to._currentFrame = this._currentFrame;\r\n\t\to._skipAdvance = this._skipAdvance;\r\n\t\treturn o;\r\n\t};\r\n\t\r\n\t/**\r\n\t * Advances the <code>currentFrame</code> if paused is not true. This is called automatically when the {{#crossLink \"Stage\"}}{{/crossLink}}\r\n\t * ticks.\r\n\t * @param {Object} evtObj An event object that will be dispatched to all tick listeners. This object is reused between dispatchers to reduce construction & GC costs.\r\n\t * @protected\r\n\t * @method _tick\r\n\t **/\r\n\tp._tick = function(evtObj) {\r\n\t\tif (!this.paused) {\r\n\t\t\tif (!this._skipAdvance) { this.advance(evtObj&&evtObj.delta); }\r\n\t\t\tthis._skipAdvance = false;\r\n\t\t}\r\n\t\tthis.DisplayObject__tick(evtObj);\r\n\t};\r\n\r\n\r\n\t/**\r\n\t * Normalizes the current frame, advancing animations and dispatching callbacks as appropriate.\r\n\t * @protected\r\n\t * @method _normalizeFrame\r\n\t **/\r\n\tp._normalizeFrame = function(frameDelta) {\r\n\t\tframeDelta = frameDelta || 0;\r\n\t\tvar animation = this._animation;\r\n\t\tvar paused = this.paused;\r\n\t\tvar frame = this._currentFrame;\r\n\t\tvar l;\r\n\t\t\r\n\t\tif (animation) {\r\n\t\t\tvar speed = animation.speed || 1;\r\n\t\t\tvar animFrame = this.currentAnimationFrame;\r\n\t\t\tl = animation.frames.length;\r\n\t\t\tif (animFrame + frameDelta * speed >= l) {\r\n\t\t\t\tvar next = animation.next;\r\n\t\t\t\tif (this._dispatchAnimationEnd(animation, frame, paused, next, l - 1)) {\r\n\t\t\t\t\t// something changed in the event stack, so we shouldn't make any more changes here.\r\n\t\t\t\t\treturn;\r\n\t\t\t\t} else if (next) {\r\n\t\t\t\t\t// sequence. Automatically calls _normalizeFrame again with the remaining frames.\r\n\t\t\t\t\treturn this._goto(next, frameDelta - (l - animFrame) / speed);\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// end.\r\n\t\t\t\t\tthis.paused = true;\r\n\t\t\t\t\tanimFrame = animation.frames.length - 1;\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tanimFrame += frameDelta * speed;\r\n\t\t\t}\r\n\t\t\tthis.currentAnimationFrame = animFrame;\r\n\t\t\tthis._currentFrame = animation.frames[animFrame | 0]\r\n\t\t} else {\r\n\t\t\tframe = (this._currentFrame += frameDelta);\r\n\t\t\tl = this.spriteSheet.getNumFrames();\r\n\t\t\tif (frame >= l && l > 0) {\r\n\t\t\t\tif (!this._dispatchAnimationEnd(animation, frame, paused, l - 1)) {\r\n\t\t\t\t\t// looped.\r\n\t\t\t\t\tif ((this._currentFrame -= l) >= l) { return this._normalizeFrame(); }\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tframe = this._currentFrame | 0;\r\n\t\tif (this.currentFrame != frame) {\r\n\t\t\tthis.currentFrame = frame;\r\n\t\t\tthis.dispatchEvent(\"change\");\r\n\t\t}\r\n\t};\r\n\r\n\t/**\r\n\t * Dispatches the \"animationend\" event. Returns true if a handler changed the animation (ex. calling {{#crossLink \"Sprite/stop\"}}{{/crossLink}},\r\n\t * {{#crossLink \"Sprite/gotoAndPlay\"}}{{/crossLink}}, etc.)\r\n\t * @property _dispatchAnimationEnd\r\n\t * @private\r\n\t * @type {Function}\r\n\t **/\r\n\tp._dispatchAnimationEnd = function(animation, frame, paused, next, end) {\r\n\t\tvar name = animation ? animation.name : null;\r\n\t\tif (this.hasEventListener(\"animationend\")) {\r\n\t\t\tvar evt = new createjs.Event(\"animationend\");\r\n\t\t\tevt.name = name;\r\n\t\t\tevt.next = next;\r\n\t\t\tthis.dispatchEvent(evt);\r\n\t\t}\r\n\t\t// did the animation get changed in the event stack?:\r\n\t\tvar changed = (this._animation != animation || this._currentFrame != frame);\r\n\t\t// if the animation hasn't changed, but the sprite was paused, then we want to stick to the last frame:\r\n\t\tif (!changed && !paused && this.paused) { this.currentAnimationFrame = end; changed = true; }\r\n\t\treturn changed;\r\n\t};\r\n\r\n\t/**\r\n\t * Moves the playhead to the specified frame number or animation.\r\n\t * @method _goto\r\n\t * @param {String|Number} frameOrAnimation The frame number or animation that the playhead should move to.\r\n\t * @param {Boolean} [frame] The frame of the animation to go to. Defaults to 0.\r\n\t * @protected\r\n\t **/\r\n\tp._goto = function(frameOrAnimation, frame) {\r\n\t\tthis.currentAnimationFrame = 0;\r\n\t\tif (isNaN(frameOrAnimation)) {\r\n\t\t\tvar data = this.spriteSheet.getAnimation(frameOrAnimation);\r\n\t\t\tif (data) {\r\n\t\t\t\tthis._animation = data;\r\n\t\t\t\tthis.currentAnimation = frameOrAnimation;\r\n\t\t\t\tthis._normalizeFrame(frame);\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tthis.currentAnimation = this._animation = null;\r\n\t\t\tthis._currentFrame = frameOrAnimation;\r\n\t\t\tthis._normalizeFrame();\r\n\t\t}\r\n\t};\r\n\r\n\r\n\tcreatejs.Sprite = createjs.promote(Sprite, \"DisplayObject\");\r\n}());\r\n\r\n//##############################################################################\r\n// Shape.js\r\n//##############################################################################\r\n\r\nthis.createjs = this.createjs||{};\r\n\r\n(function() {\r\n\t\"use strict\";\r\n\r\n\r\n// constructor:\r\n\t/**\r\n\t * A Shape allows you to display vector art in the display list. It composites a {{#crossLink \"Graphics\"}}{{/crossLink}}\r\n\t * instance which exposes all of the vector drawing methods. The Graphics instance can be shared between multiple Shape\r\n\t * instances to display the same vector graphics with different positions or transforms.\r\n\t *\r\n\t * If the vector art will not\r\n\t * change between draws, you may want to use the {{#crossLink \"DisplayObject/cache\"}}{{/crossLink}} method to reduce the\r\n\t * rendering cost.\r\n\t *\r\n\t * <h4>Example</h4>\r\n\t *\r\n\t *      var graphics = new createjs.Graphics().beginFill(\"#ff0000\").drawRect(0, 0, 100, 100);\r\n\t *      var shape = new createjs.Shape(graphics);\r\n\t *\r\n\t *      //Alternatively use can also use the graphics property of the Shape class to renderer the same as above.\r\n\t *      var shape = new createjs.Shape();\r\n\t *      shape.graphics.beginFill(\"#ff0000\").drawRect(0, 0, 100, 100);\r\n\t *\r\n\t * @class Shape\r\n\t * @extends DisplayObject\r\n\t * @constructor\r\n\t * @param {Graphics} graphics Optional. The graphics instance to display. If null, a new Graphics instance will be created.\r\n\t **/\r\n\tfunction Shape(graphics) {\r\n\t\tthis.DisplayObject_constructor();\r\n\t\t\r\n\t\t\r\n\t// public properties:\r\n\t\t/**\r\n\t\t * The graphics instance to display.\r\n\t\t * @property graphics\r\n\t\t * @type Graphics\r\n\t\t **/\r\n\t\tthis.graphics = graphics ? graphics : new createjs.Graphics();\r\n\t}\r\n\tvar p = createjs.extend(Shape, createjs.DisplayObject);\r\n\r\n\t// TODO: deprecated\r\n\t// p.initialize = function() {}; // searchable for devs wondering where it is. REMOVED. See docs for details.\r\n\r\n\r\n// public methods:\r\n\t/**\r\n\t * Returns true or false indicating whether the Shape would be visible if drawn to a canvas.\r\n\t * This does not account for whether it would be visible within the boundaries of the stage.\r\n\t * NOTE: This method is mainly for internal use, though it may be useful for advanced uses.\r\n\t * @method isVisible\r\n\t * @return {Boolean} Boolean indicating whether the Shape would be visible if drawn to a canvas\r\n\t **/\r\n\tp.isVisible = function() {\r\n\t\tvar hasContent = this.cacheCanvas || (this.graphics && !this.graphics.isEmpty());\r\n\t\treturn !!(this.visible && this.alpha > 0 && this.scaleX != 0 && this.scaleY != 0 && hasContent);\r\n\t};\r\n\r\n\t/**\r\n\t * Draws the Shape into the specified context ignoring its visible, alpha, shadow, and transform. Returns true if\r\n\t * the draw was handled (useful for overriding functionality).\r\n\t *\r\n\t * <i>NOTE: This method is mainly for internal use, though it may be useful for advanced uses.</i>\r\n\t * @method draw\r\n\t * @param {CanvasRenderingContext2D} ctx The canvas 2D context object to draw into.\r\n\t * @param {Boolean} [ignoreCache=false] Indicates whether the draw operation should ignore any current cache. For example,\r\n\t * used for drawing the cache (to prevent it from simply drawing an existing cache back into itself).\r\n\t * @return {Boolean}\r\n\t **/\r\n\tp.draw = function(ctx, ignoreCache) {\r\n\t\tif (this.DisplayObject_draw(ctx, ignoreCache)) { return true; }\r\n\t\tthis.graphics.draw(ctx, this);\r\n\t\treturn true;\r\n\t};\r\n\r\n\t/**\r\n\t * Returns a clone of this Shape. Some properties that are specific to this instance's current context are reverted to\r\n\t * their defaults (for example .parent).\r\n\t * @method clone\r\n\t * @param {Boolean} recursive If true, this Shape's {{#crossLink \"Graphics\"}}{{/crossLink}} instance will also be\r\n\t * cloned. If false, the Graphics instance will be shared with the new Shape.\r\n\t **/\r\n\tp.clone = function(recursive) {\r\n\t\tvar g = (recursive && this.graphics) ? this.graphics.clone() : this.graphics;\r\n\t\treturn  this._cloneProps(new Shape(g));\r\n\t};\r\n\r\n\t/**\r\n\t * Returns a string representation of this object.\r\n\t * @method toString\r\n\t * @return {String} a string representation of the instance.\r\n\t **/\r\n\tp.toString = function() {\r\n\t\treturn \"[Shape (name=\"+  this.name +\")]\";\r\n\t};\r\n\r\n\r\n\tcreatejs.Shape = createjs.promote(Shape, \"DisplayObject\");\r\n}());\r\n\r\n//##############################################################################\r\n// Text.js\r\n//##############################################################################\r\n\r\nthis.createjs = this.createjs||{};\r\n\r\n(function() {\r\n\t\"use strict\";\r\n\r\n\r\n// constructor:\r\n\t/**\r\n\t * Display one or more lines of dynamic text (not user editable) in the display list. Line wrapping support (using the\r\n\t * lineWidth) is very basic, wrapping on spaces and tabs only. Note that as an alternative to Text, you can position HTML\r\n\t * text above or below the canvas relative to items in the display list using the {{#crossLink \"DisplayObject/localToGlobal\"}}{{/crossLink}}\r\n\t * method, or using {{#crossLink \"DOMElement\"}}{{/crossLink}}.\r\n\t *\r\n\t * <b>Please note that Text does not support HTML text, and can only display one font style at a time.</b> To use\r\n\t * multiple font styles, you will need to create multiple text instances, and position them manually.\r\n\t *\r\n\t * <h4>Example</h4>\r\n\t *\r\n\t *      var text = new createjs.Text(\"Hello World\", \"20px Arial\", \"#ff7700\");\r\n\t *      text.x = 100;\r\n\t *      text.textBaseline = \"alphabetic\";\r\n\t *\r\n\t * CreateJS Text supports web fonts (the same rules as Canvas). The font must be loaded and supported by the browser\r\n\t * before it can be displayed.\r\n\t *\r\n\t * <strong>Note:</strong> Text can be expensive to generate, so cache instances where possible. Be aware that not all\r\n\t * browsers will render Text exactly the same.\r\n\t * @class Text\r\n\t * @extends DisplayObject\r\n\t * @constructor\r\n\t * @param {String} [text] The text to display.\r\n\t * @param {String} [font] The font style to use. Any valid value for the CSS font attribute is acceptable (ex. \"bold\r\n\t * 36px Arial\").\r\n\t * @param {String} [color] The color to draw the text in. Any valid value for the CSS color attribute is acceptable (ex.\r\n\t * \"#F00\", \"red\", or \"#FF0000\").\r\n\t **/\r\n\tfunction Text(text, font, color) {\r\n\t\tthis.DisplayObject_constructor();\r\n\t\t\r\n\t\t\r\n\t// public properties:\r\n\t\t/**\r\n\t\t * The text to display.\r\n\t\t * @property text\r\n\t\t * @type String\r\n\t\t **/\r\n\t\tthis.text = text;\r\n\t\r\n\t\t/**\r\n\t\t * The font style to use. Any valid value for the CSS font attribute is acceptable (ex. \"bold 36px Arial\").\r\n\t\t * @property font\r\n\t\t * @type String\r\n\t\t **/\r\n\t\tthis.font = font;\r\n\t\r\n\t\t/**\r\n\t\t * The color to draw the text in. Any valid value for the CSS color attribute is acceptable (ex. \"#F00\"). Default is \"#000\".\r\n\t\t * It will also accept valid canvas fillStyle values.\r\n\t\t * @property color\r\n\t\t * @type String\r\n\t\t **/\r\n\t\tthis.color = color;\r\n\t\r\n\t\t/**\r\n\t\t * The horizontal text alignment. Any of \"start\", \"end\", \"left\", \"right\", and \"center\". For detailed\r\n\t\t * information view the\r\n\t\t * <a href=\"http://www.whatwg.org/specs/web-apps/current-work/multipage/the-canvas-element.html#text-styles\">\r\n\t\t * whatwg spec</a>. Default is \"left\".\r\n\t\t * @property textAlign\r\n\t\t * @type String\r\n\t\t **/\r\n\t\tthis.textAlign = \"left\";\r\n\t\r\n\t\t/**\r\n\t\t * The vertical alignment point on the font. Any of \"top\", \"hanging\", \"middle\", \"alphabetic\", \"ideographic\", or\r\n\t\t * \"bottom\". For detailed information view the <a href=\"http://www.whatwg.org/specs/web-apps/current-work/multipage/the-canvas-element.html#text-styles\">\r\n\t\t * whatwg spec</a>. Default is \"top\".\r\n\t\t * @property textBaseline\r\n\t\t * @type String\r\n\t\t*/\r\n\t\tthis.textBaseline = \"top\";\r\n\t\r\n\t\t/**\r\n\t\t * The maximum width to draw the text. If maxWidth is specified (not null), the text will be condensed or\r\n\t\t * shrunk to make it fit in this width. For detailed information view the\r\n\t\t * <a href=\"http://www.whatwg.org/specs/web-apps/current-work/multipage/the-canvas-element.html#text-styles\">\r\n\t\t * whatwg spec</a>.\r\n\t\t * @property maxWidth\r\n\t\t * @type Number\r\n\t\t*/\r\n\t\tthis.maxWidth = null;\r\n\t\r\n\t\t/**\r\n\t\t * If greater than 0, the text will be drawn as a stroke (outline) of the specified width.\r\n\t\t * @property outline\r\n\t\t * @type Number\r\n\t\t **/\r\n\t\tthis.outline = 0;\r\n\t\r\n\t\t/**\r\n\t\t * Indicates the line height (vertical distance between baselines) for multi-line text. If null or 0,\r\n\t\t * the value of getMeasuredLineHeight is used.\r\n\t\t * @property lineHeight\r\n\t\t * @type Number\r\n\t\t **/\r\n\t\tthis.lineHeight = 0;\r\n\t\r\n\t\t/**\r\n\t\t * Indicates the maximum width for a line of text before it is wrapped to multiple lines. If null,\r\n\t\t * the text will not be wrapped.\r\n\t\t * @property lineWidth\r\n\t\t * @type Number\r\n\t\t **/\r\n\t\tthis.lineWidth = null;\r\n\t}\r\n\tvar p = createjs.extend(Text, createjs.DisplayObject);\r\n\r\n\t// TODO: deprecated\r\n\t// p.initialize = function() {}; // searchable for devs wondering where it is. REMOVED. See docs for details.\r\n\r\n\t\r\n// static properties:\r\n\t/**\r\n\t * @property _workingContext\r\n\t * @type CanvasRenderingContext2D\r\n\t * @private\r\n\t **/\r\n\tvar canvas = (createjs.createCanvas?createjs.createCanvas():document.createElement(\"canvas\"));\r\n\tif (canvas.getContext) { Text._workingContext = canvas.getContext(\"2d\"); canvas.width = canvas.height = 1; }\r\n\t\r\n\t\r\n// constants:\r\n\t/**\r\n\t * Lookup table for the ratio to offset bounds x calculations based on the textAlign property.\r\n\t * @property H_OFFSETS\r\n\t * @type Object\r\n\t * @protected\r\n\t * @static\r\n\t **/\r\n\tText.H_OFFSETS = {start: 0, left: 0, center: -0.5, end: -1, right: -1};\r\n\t\r\n\t/**\r\n\t * Lookup table for the ratio to offset bounds y calculations based on the textBaseline property.\r\n\t * @property H_OFFSETS\r\n\t * @type Object\r\n\t * @protected\r\n\t * @static\r\n\t **/\r\n\tText.V_OFFSETS = {top: 0, hanging: -0.01, middle: -0.4, alphabetic: -0.8, ideographic: -0.85, bottom: -1};\r\n\r\n\r\n// public methods:\r\n\t/**\r\n\t * Returns true or false indicating whether the display object would be visible if drawn to a canvas.\r\n\t * This does not account for whether it would be visible within the boundaries of the stage.\r\n\t * NOTE: This method is mainly for internal use, though it may be useful for advanced uses.\r\n\t * @method isVisible\r\n\t * @return {Boolean} Whether the display object would be visible if drawn to a canvas\r\n\t **/\r\n\tp.isVisible = function() {\r\n\t\tvar hasContent = this.cacheCanvas || (this.text != null && this.text !== \"\");\r\n\t\treturn !!(this.visible && this.alpha > 0 && this.scaleX != 0 && this.scaleY != 0 && hasContent);\r\n\t};\r\n\r\n\t/**\r\n\t * Draws the Text into the specified context ignoring its visible, alpha, shadow, and transform.\r\n\t * Returns true if the draw was handled (useful for overriding functionality).\r\n\t * NOTE: This method is mainly for internal use, though it may be useful for advanced uses.\r\n\t * @method draw\r\n\t * @param {CanvasRenderingContext2D} ctx The canvas 2D context object to draw into.\r\n\t * @param {Boolean} ignoreCache Indicates whether the draw operation should ignore any current cache.\r\n\t * For example, used for drawing the cache (to prevent it from simply drawing an existing cache back\r\n\t * into itself).\r\n\t **/\r\n\tp.draw = function(ctx, ignoreCache) {\r\n\t\tif (this.DisplayObject_draw(ctx, ignoreCache)) { return true; }\r\n\r\n\t\tvar col = this.color || \"#000\";\r\n\t\tif (this.outline) { ctx.strokeStyle = col; ctx.lineWidth = this.outline*1; }\r\n\t\telse { ctx.fillStyle = col; }\r\n\t\t\r\n\t\tthis._drawText(this._prepContext(ctx));\r\n\t\treturn true;\r\n\t};\r\n\r\n\t/**\r\n\t * Returns the measured, untransformed width of the text without wrapping. Use getBounds for a more robust value.\r\n\t * @method getMeasuredWidth\r\n\t * @return {Number} The measured, untransformed width of the text.\r\n\t **/\r\n\tp.getMeasuredWidth = function() {\r\n\t\treturn this._getMeasuredWidth(this.text);\r\n\t};\r\n\r\n\t/**\r\n\t * Returns an approximate line height of the text, ignoring the lineHeight property. This is based on the measured\r\n\t * width of a \"M\" character multiplied by 1.2, which provides an approximate line height for most fonts.\r\n\t * @method getMeasuredLineHeight\r\n\t * @return {Number} an approximate line height of the text, ignoring the lineHeight property. This is\r\n\t * based on the measured width of a \"M\" character multiplied by 1.2, which approximates em for most fonts.\r\n\t **/\r\n\tp.getMeasuredLineHeight = function() {\r\n\t\treturn this._getMeasuredWidth(\"M\")*1.2;\r\n\t};\r\n\r\n\t/**\r\n\t * Returns the approximate height of multi-line text by multiplying the number of lines against either the\r\n\t * <code>lineHeight</code> (if specified) or {{#crossLink \"Text/getMeasuredLineHeight\"}}{{/crossLink}}. Note that\r\n\t * this operation requires the text flowing logic to run, which has an associated CPU cost.\r\n\t * @method getMeasuredHeight\r\n\t * @return {Number} The approximate height of the untransformed multi-line text.\r\n\t **/\r\n\tp.getMeasuredHeight = function() {\r\n\t\treturn this._drawText(null,{}).height;\r\n\t};\r\n\r\n\t/**\r\n\t * Docced in superclass.\r\n\t */\r\n\tp.getBounds = function() {\r\n\t\tvar rect = this.DisplayObject_getBounds();\r\n\t\tif (rect) { return rect; }\r\n\t\tif (this.text == null || this.text === \"\") { return null; }\r\n\t\tvar o = this._drawText(null, {});\r\n\t\tvar w = (this.maxWidth && this.maxWidth < o.width) ? this.maxWidth : o.width;\r\n\t\tvar x = w * Text.H_OFFSETS[this.textAlign||\"left\"];\r\n\t\tvar lineHeight = this.lineHeight||this.getMeasuredLineHeight();\r\n\t\tvar y = lineHeight * Text.V_OFFSETS[this.textBaseline||\"top\"];\r\n\t\treturn this._rectangle.setValues(x, y, w, o.height);\r\n\t};\r\n\t\r\n\t/**\r\n\t * Returns an object with width, height, and lines properties. The width and height are the visual width and height\r\n\t * of the drawn text. The lines property contains an array of strings, one for\r\n\t * each line of text that will be drawn, accounting for line breaks and wrapping. These strings have trailing\r\n\t * whitespace removed.\r\n\t * @method getMetrics\r\n\t * @return {Object} An object with width, height, and lines properties.\r\n\t **/\r\n\tp.getMetrics = function() {\r\n\t\tvar o = {lines:[]};\r\n\t\to.lineHeight = this.lineHeight || this.getMeasuredLineHeight();\r\n\t\to.vOffset = o.lineHeight * Text.V_OFFSETS[this.textBaseline||\"top\"];\r\n\t\treturn this._drawText(null, o, o.lines);\r\n\t};\r\n\r\n\t/**\r\n\t * Returns a clone of the Text instance.\r\n\t * @method clone\r\n\t * @return {Text} a clone of the Text instance.\r\n\t **/\r\n\tp.clone = function() {\r\n\t\treturn this._cloneProps(new Text(this.text, this.font, this.color));\r\n\t};\r\n\r\n\t/**\r\n\t * Returns a string representation of this object.\r\n\t * @method toString\r\n\t * @return {String} a string representation of the instance.\r\n\t **/\r\n\tp.toString = function() {\r\n\t\treturn \"[Text (text=\"+  (this.text.length > 20 ? this.text.substr(0, 17)+\"...\" : this.text) +\")]\";\r\n\t};\r\n\r\n\r\n// private methods:\r\n\t/**\r\n\t * @method _cloneProps\r\n\t * @param {Text} o\r\n\t * @protected\r\n\t * @return {Text} o\r\n\t **/\r\n\tp._cloneProps = function(o) {\r\n\t\tthis.DisplayObject__cloneProps(o);\r\n\t\to.textAlign = this.textAlign;\r\n\t\to.textBaseline = this.textBaseline;\r\n\t\to.maxWidth = this.maxWidth;\r\n\t\to.outline = this.outline;\r\n\t\to.lineHeight = this.lineHeight;\r\n\t\to.lineWidth = this.lineWidth;\r\n\t\treturn o;\r\n\t};\r\n\r\n\t/**\r\n\t * @method _getWorkingContext\r\n\t * @param {CanvasRenderingContext2D} ctx\r\n\t * @return {CanvasRenderingContext2D}\r\n\t * @protected\r\n\t **/\r\n\tp._prepContext = function(ctx) {\r\n\t\tctx.font = this.font||\"10px sans-serif\";\r\n\t\tctx.textAlign = this.textAlign||\"left\";\r\n\t\tctx.textBaseline = this.textBaseline||\"top\";\r\n\t\treturn ctx;\r\n\t};\r\n\r\n\t/**\r\n\t * Draws multiline text.\r\n\t * @method _drawText\r\n\t * @param {CanvasRenderingContext2D} ctx\r\n\t * @param {Object} o\r\n\t * @param {Array} lines\r\n\t * @return {Object}\r\n\t * @protected\r\n\t **/\r\n\tp._drawText = function(ctx, o, lines) {\r\n\t\tvar paint = !!ctx;\r\n\t\tif (!paint) {\r\n\t\t\tctx = Text._workingContext;\r\n\t\t\tctx.save();\r\n\t\t\tthis._prepContext(ctx);\r\n\t\t}\r\n\t\tvar lineHeight = this.lineHeight||this.getMeasuredLineHeight();\r\n\t\t\r\n\t\tvar maxW = 0, count = 0;\r\n\t\tvar hardLines = String(this.text).split(/(?:\\r\\n|\\r|\\n)/);\r\n\t\tfor (var i=0, l=hardLines.length; i<l; i++) {\r\n\t\t\tvar str = hardLines[i];\r\n\t\t\tvar w = null;\r\n\t\t\t\r\n\t\t\tif (this.lineWidth != null && (w = ctx.measureText(str).width) > this.lineWidth) {\r\n\t\t\t\t// text wrapping:\r\n\t\t\t\tvar words = str.split(/(\\s)/);\r\n\t\t\t\tstr = words[0];\r\n\t\t\t\tw = ctx.measureText(str).width;\r\n\t\t\t\t\r\n\t\t\t\tfor (var j=1, jl=words.length; j<jl; j+=2) {\r\n\t\t\t\t\t// Line needs to wrap:\r\n\t\t\t\t\tvar wordW = ctx.measureText(words[j] + words[j+1]).width;\r\n\t\t\t\t\tif (w + wordW > this.lineWidth) {\r\n\t\t\t\t\t\tif (paint) { this._drawTextLine(ctx, str, count*lineHeight); }\r\n\t\t\t\t\t\tif (lines) { lines.push(str); }\r\n\t\t\t\t\t\tif (w > maxW) { maxW = w; }\r\n\t\t\t\t\t\tstr = words[j+1];\r\n\t\t\t\t\t\tw = ctx.measureText(str).width;\r\n\t\t\t\t\t\tcount++;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tstr += words[j] + words[j+1];\r\n\t\t\t\t\t\tw += wordW;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif (paint) { this._drawTextLine(ctx, str, count*lineHeight); }\r\n\t\t\tif (lines) { lines.push(str); }\r\n\t\t\tif (o && w == null) { w = ctx.measureText(str).width; }\r\n\t\t\tif (w > maxW) { maxW = w; }\r\n\t\t\tcount++;\r\n\t\t}\r\n\t\t\r\n\t\tif (o) {\r\n\t\t\to.width = maxW;\r\n\t\t\to.height = count*lineHeight;\r\n\t\t}\r\n\t\tif (!paint) { ctx.restore(); }\r\n\t\treturn o;\r\n\t};\r\n\r\n\t/**\r\n\t * @method _drawTextLine\r\n\t * @param {CanvasRenderingContext2D} ctx\r\n\t * @param {String} text\r\n\t * @param {Number} y\r\n\t * @protected\r\n\t **/\r\n\tp._drawTextLine = function(ctx, text, y) {\r\n\t\t// Chrome 17 will fail to draw the text if the last param is included but null, so we feed it a large value instead:\r\n\t\tif (this.outline) { ctx.strokeText(text, 0, y, this.maxWidth||0xFFFF); }\r\n\t\telse { ctx.fillText(text, 0, y, this.maxWidth||0xFFFF); }\r\n\t};\r\n\t\r\n\t\r\n\t/**\r\n\t * @method _getMeasuredWidth\r\n\t * @param {String} text\r\n\t * @protected\r\n\t **/\r\n\tp._getMeasuredWidth = function(text) {\r\n\t\tvar ctx = Text._workingContext;\r\n\t\tctx.save();\r\n\t\tvar w = this._prepContext(ctx).measureText(text).width;\r\n\t\tctx.restore();\r\n\t\treturn w;\r\n\t};\r\n\r\n\r\n\tcreatejs.Text = createjs.promote(Text, \"DisplayObject\");\r\n}());\r\n\r\n//##############################################################################\r\n// BitmapText.js\r\n//##############################################################################\r\n\r\nthis.createjs = this.createjs || {};\r\n\r\n(function () {\r\n\t\"use strict\";\r\n\r\n\r\n// constructor:\r\n\t/**\r\n\t * Displays text using bitmap glyphs defined in a sprite sheet. Multi-line text is supported\r\n\t * using new line characters, but automatic wrapping is not supported. See the \r\n\t * {{#crossLink \"BitmapText/spriteSheet:property\"}}{{/crossLink}}\r\n\t * property for more information on defining glyphs.\r\n\t * \r\n\t * <strong>Important:</strong> BitmapText extends Container, but is not designed to be used as one.\r\n\t * As such, methods like addChild and removeChild are disabled.\r\n\t * @class BitmapText\r\n\t * @extends DisplayObject\r\n\t * @param {String} [text=\"\"] The text to display.\r\n\t * @param {SpriteSheet} [spriteSheet=null] The spritesheet that defines the character glyphs.\r\n\t * @constructor\r\n\t **/\r\n\tfunction BitmapText(text, spriteSheet) {\r\n\t\tthis.Container_constructor();\r\n\t\t\r\n\t\t\r\n\t// public properties:\r\n\t\t/**\r\n\t\t * The text to display.\r\n\t\t * @property text\r\n\t\t * @type String\r\n\t\t * @default \"\"\r\n\t\t **/\r\n\t\tthis.text = text||\"\";\r\n\t\t\r\n\t\t/**\r\n\t\t * A SpriteSheet instance that defines the glyphs for this bitmap text. Each glyph/character\r\n\t\t * should have a single frame animation defined in the sprite sheet named the same as\r\n\t\t * corresponding character. For example, the following animation definition:\r\n\t\t *\r\n\t\t * \t\t\"A\": {frames: [0]}\r\n\t\t *\r\n\t\t * would indicate that the frame at index 0 of the spritesheet should be drawn for the \"A\" character. The short form\r\n\t\t * is also acceptable:\r\n\t\t * \r\n\t\t * \t\t\"A\": 0\r\n\t\t *\r\n\t\t * Note that if a character in the text is not found in the sprite sheet, it will also\r\n\t\t * try to use the alternate case (upper or lower).\r\n\t\t *\r\n\t\t * See SpriteSheet for more information on defining sprite sheet data.\r\n\t\t * @property spriteSheet\r\n\t\t * @type SpriteSheet\r\n\t\t * @default null\r\n\t\t **/\r\n\t\tthis.spriteSheet = spriteSheet;\r\n\t\r\n\t\t/**\r\n\t\t * The height of each line of text. If 0, then it will use a line height calculated\r\n\t\t * by checking for the height of the \"1\", \"T\", or \"L\" character (in that order). If\r\n\t\t * those characters are not defined, it will use the height of the first frame of the\r\n\t\t * sprite sheet.\r\n\t\t * @property lineHeight\r\n\t\t * @type Number\r\n\t\t * @default 0\r\n\t\t **/\r\n\t\tthis.lineHeight = 0;\r\n\t\r\n\t\t/**\r\n\t\t * This spacing (in pixels) will be added after each character in the output.\r\n\t\t * @property letterSpacing\r\n\t\t * @type Number\r\n\t\t * @default 0\r\n\t\t **/\r\n\t\tthis.letterSpacing = 0;\r\n\t\r\n\t\t/**\r\n\t\t * If a space character is not defined in the sprite sheet, then empty pixels equal to\r\n\t\t * spaceWidth will be inserted instead. If 0, then it will use a value calculated\r\n\t\t * by checking for the width of the \"1\", \"l\", \"E\", or \"A\" character (in that order). If\r\n\t\t * those characters are not defined, it will use the width of the first frame of the\r\n\t\t * sprite sheet.\r\n\t\t * @property spaceWidth\r\n\t\t * @type Number\r\n\t\t * @default 0\r\n\t\t **/\r\n\t\tthis.spaceWidth = 0;\r\n\t\t\r\n\t\t\r\n\t// private properties:\r\n\t \t/**\r\n\t\t * @property _oldProps\r\n\t\t * @type Object\r\n\t\t * @protected\r\n\t\t **/\r\n\t\tthis._oldProps = {text:0,spriteSheet:0,lineHeight:0,letterSpacing:0,spaceWidth:0};\r\n\t}\r\n\tvar p = createjs.extend(BitmapText, createjs.Container);\r\n\r\n\t/**\r\n\t * <strong>REMOVED</strong>. Removed in favor of using `MySuperClass_constructor`.\r\n\t * See {{#crossLink \"Utility Methods/extend\"}}{{/crossLink}} and {{#crossLink \"Utility Methods/promote\"}}{{/crossLink}}\r\n\t * for details.\r\n\t *\r\n\t * There is an inheritance tutorial distributed with EaselJS in /tutorials/Inheritance.\r\n\t *\r\n\t * @method initialize\r\n\t * @protected\r\n\t * @deprecated\r\n\t */\r\n\t// p.initialize = function() {}; // searchable for devs wondering where it is.\r\n\r\n// static properties:\r\n\t/**\r\n\t * BitmapText uses Sprite instances to draw text. To reduce the creation and destruction of instances (and thus garbage collection), it maintains\r\n\t * an internal object pool of sprite instances to reuse. Increasing this value can cause more sprites to be\r\n\t * retained, slightly increasing memory use, but reducing instantiation.\r\n\t * @property maxPoolSize\r\n\t * @type Number\r\n\t * @static\r\n\t * @default 100\r\n\t **/\r\n\tBitmapText.maxPoolSize = 100;\r\n\t\r\n\t/**\r\n\t * Sprite object pool.\r\n\t * @type {Array}\r\n\t * @static\r\n\t * @private\r\n\t */\r\n\tBitmapText._spritePool = [];\r\n\r\n\t\r\n// public methods:\r\n\t/**\r\n\t * Docced in superclass.\r\n\t **/\r\n\tp.draw = function(ctx, ignoreCache) {\r\n\t\tif (this.DisplayObject_draw(ctx, ignoreCache)) { return; }\r\n\t\tthis._updateText();\r\n\t\tthis.Container_draw(ctx, ignoreCache);\r\n\t};\r\n\t\r\n\t/**\r\n\t * Docced in superclass.\r\n\t **/\r\n\tp.getBounds = function() {\r\n\t\tthis._updateText();\r\n\t\treturn this.Container_getBounds();\r\n\t};\r\n\t\r\n\t/**\r\n\t * Returns true or false indicating whether the display object would be visible if drawn to a canvas.\r\n\t * This does not account for whether it would be visible within the boundaries of the stage.\r\n\t * NOTE: This method is mainly for internal use, though it may be useful for advanced uses.\r\n\t * @method isVisible\r\n\t * @return {Boolean} Boolean indicating whether the display object would be visible if drawn to a canvas\r\n\t **/\r\n\tp.isVisible = function() {\r\n\t\tvar hasContent = this.cacheCanvas || (this.spriteSheet && this.spriteSheet.complete && this.text);\r\n\t\treturn !!(this.visible && this.alpha > 0 && this.scaleX !== 0 && this.scaleY !== 0 && hasContent);\r\n\t};\r\n\t\r\n\tp.clone = function() {\r\n\t\treturn this._cloneProps(new BitmapText(this.text, this.spriteSheet));\r\n\t};\r\n\t\r\n\t/**\r\n\t * <strong>Disabled in BitmapText.</strong>\r\n\t * @method addChild\r\n\t **/\r\n\t/**\r\n\t * <strong>Disabled in BitmapText.</strong>\r\n\t * @method addChildAt\r\n\t **/\r\n\t/**\r\n\t * <strong>Disabled in BitmapText.</strong>\r\n\t * @method removeChild\r\n\t **/\r\n\t/**\r\n\t * <strong>Disabled in BitmapText.</strong>\r\n\t * @method removeChildAt\r\n\t **/\r\n\t/**\r\n\t * <strong>Disabled in BitmapText.</strong>\r\n\t * @method removeAllChildren\r\n\t **/\r\n\tp.addChild = p.addChildAt = p.removeChild = p.removeChildAt = p.removeAllChildren = function() {};\r\n\r\n\r\n// private methods:\r\n \t/**\r\n\t * @method _cloneProps\r\n\t * @param {BitmapText} o\r\n\t * @return {BitmapText} o\r\n\t * @protected\r\n\t **/\r\n\tp._cloneProps = function(o) {\r\n\t\tthis.Container__cloneProps(o);\r\n\t\to.lineHeight = this.lineHeight;\r\n\t\to.letterSpacing = this.letterSpacing;\r\n\t\to.spaceWidth = this.spaceWidth;\r\n\t\treturn o;\r\n\t};\r\n\t\r\n\t/**\r\n\t * @method _getFrameIndex\r\n\t * @param {String} character\r\n\t * @param {SpriteSheet} spriteSheet\r\n\t * @return {Number}\r\n\t * @protected\r\n\t **/\r\n\tp._getFrameIndex = function(character, spriteSheet) {\r\n\t\tvar c, o = spriteSheet.getAnimation(character);\r\n\t\tif (!o) {\r\n\t\t\t(character != (c = character.toUpperCase())) || (character != (c = character.toLowerCase())) || (c=null);\r\n\t\t\tif (c) { o = spriteSheet.getAnimation(c); }\r\n\t\t}\r\n\t\treturn o && o.frames[0];\r\n\t};\r\n\t\r\n\t/**\r\n\t * @method _getFrame\r\n\t * @param {String} character\r\n\t * @param {SpriteSheet} spriteSheet\r\n\t * @return {Object}\r\n\t * @protected\r\n\t **/\r\n\tp._getFrame = function(character, spriteSheet) {\r\n\t\tvar index = this._getFrameIndex(character, spriteSheet);\r\n\t\treturn index == null ? index : spriteSheet.getFrame(index);\r\n\t};\r\n\t\r\n\t/**\r\n\t * @method _getLineHeight\r\n\t * @param {SpriteSheet} ss\r\n\t * @return {Number}\r\n\t * @protected\r\n\t **/\r\n\tp._getLineHeight = function(ss) {\r\n\t\tvar frame = this._getFrame(\"1\",ss) || this._getFrame(\"T\",ss) || this._getFrame(\"L\",ss) || ss.getFrame(0);\r\n\t\treturn frame ? frame.rect.height : 1;\r\n\t};\r\n\t/**\r\n\t * @method _getSpaceWidth\r\n\t * @param {SpriteSheet} ss\r\n\t * @return {Number}\r\n\t * @protected\r\n\t **/\r\n\tp._getSpaceWidth = function(ss) {\r\n\t\tvar frame = this._getFrame(\"1\",ss) || this._getFrame(\"l\",ss) || this._getFrame(\"e\",ss) || this._getFrame(\"a\",ss) || ss.getFrame(0);\r\n\t\treturn frame ? frame.rect.width : 1;\r\n\t};\r\n\t\r\n\t/**\r\n\t * @method _drawText\r\n\t * @protected\r\n\t **/\r\n\tp._updateText = function() {\r\n\t\tvar x=0, y=0, o=this._oldProps, change=false, spaceW=this.spaceWidth, lineH=this.lineHeight, ss=this.spriteSheet;\r\n\t\tvar pool=BitmapText._spritePool, kids=this.children, childIndex=0, numKids=kids.length, sprite;\r\n\t\t\r\n\t\tfor (var n in o) {\r\n\t\t\tif (o[n] != this[n]) {\r\n\t\t\t\to[n] = this[n];\r\n\t\t\t\tchange = true;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (!change) { return; }\r\n\t\t\r\n\t\tvar hasSpace = !!this._getFrame(\" \", ss);\r\n\t\tif (!hasSpace && !spaceW) { spaceW = this._getSpaceWidth(ss); }\r\n\t\tif (!lineH) { lineH = this._getLineHeight(ss); }\r\n\t\t\r\n\t\tfor(var i=0, l=this.text.length; i<l; i++) {\r\n\t\t\tvar character = this.text.charAt(i);\r\n\t\t\tif (character == \" \" && !hasSpace) {\r\n\t\t\t\tx += spaceW;\r\n\t\t\t\tcontinue;\r\n\t\t\t} else if (character==\"\\n\" || character==\"\\r\") {\r\n\t\t\t\tif (character==\"\\r\" && this.text.charAt(i+1) == \"\\n\") { i++; } // crlf\r\n\t\t\t\tx = 0;\r\n\t\t\t\ty += lineH;\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\r\n\t\t\tvar index = this._getFrameIndex(character, ss);\r\n\t\t\tif (index == null) { continue; }\r\n\t\t\t\r\n\t\t\tif (childIndex < numKids) {\r\n\t\t\t\tsprite = kids[childIndex];\r\n\t\t\t} else {\r\n\t\t\t\tkids.push(sprite = pool.length ? pool.pop() : new createjs.Sprite());\r\n\t\t\t\tsprite.parent = this;\r\n\t\t\t\tnumKids++;\r\n\t\t\t}\r\n\t\t\tsprite.spriteSheet = ss;\r\n\t\t\tsprite.gotoAndStop(index);\r\n\t\t\tsprite.x = x;\r\n\t\t\tsprite.y = y;\r\n\t\t\tchildIndex++;\r\n\t\t\t\r\n\t\t\tx += sprite.getBounds().width + this.letterSpacing;\r\n\t\t}\r\n\t\twhile (numKids > childIndex) {\r\n\t\t\t // faster than removeChild.\r\n\t\t\tpool.push(sprite = kids.pop());\r\n\t\t\tsprite.parent = null;\r\n\t\t\tnumKids--;\r\n\t\t}\r\n\t\tif (pool.length > BitmapText.maxPoolSize) { pool.length = BitmapText.maxPoolSize; }\r\n\t};\r\n\r\n\r\n\tcreatejs.BitmapText = createjs.promote(BitmapText, \"Container\");\r\n}());\r\n\r\n//##############################################################################\r\n// MovieClip.js\r\n//##############################################################################\r\n\r\nthis.createjs = this.createjs||{};\r\n\r\n(function() {\r\n\t\"use strict\";\r\n\r\n\r\n// constructor:\r\n\t/**\r\n\t * The MovieClip class associates a TweenJS Timeline with an EaselJS {{#crossLink \"Container\"}}{{/crossLink}}. It allows\r\n\t * you to create objects which encapsulate timeline animations, state changes, and synched actions. Due to the\r\n\t * complexities inherent in correctly setting up a MovieClip, it is largely intended for tool output and is not included\r\n\t * in the main EaselJS library.\r\n\t *\r\n\t * Currently MovieClip only works properly if it is tick based (as opposed to time based) though some concessions have\r\n\t * been made to support time-based timelines in the future.\r\n\t *\r\n\t * <h4>Example</h4>\r\n\t * This example animates two shapes back and forth. The grey shape starts on the left, but we jump to a mid-point in\r\n\t * the animation using {{#crossLink \"MovieClip/gotoAndPlay\"}}{{/crossLink}}.\r\n\t *\r\n\t *      var stage = new createjs.Stage(\"canvas\");\r\n\t *      createjs.Ticker.addEventListener(\"tick\", stage);\r\n\t *\r\n\t *      var mc = new createjs.MovieClip(null, 0, true, {start:20});\r\n\t *      stage.addChild(mc);\r\n\t *\r\n\t *      var child1 = new createjs.Shape(\r\n\t *          new createjs.Graphics().beginFill(\"#999999\")\r\n\t *              .drawCircle(30,30,30));\r\n\t *      var child2 = new createjs.Shape(\r\n\t *          new createjs.Graphics().beginFill(\"#5a9cfb\")\r\n\t *              .drawCircle(30,30,30));\r\n\t *\r\n\t *      mc.timeline.addTween(\r\n\t *          createjs.Tween.get(child1)\r\n\t *              .to({x:0}).to({x:60}, 50).to({x:0}, 50));\r\n\t *      mc.timeline.addTween(\r\n\t *          createjs.Tween.get(child2)\r\n\t *              .to({x:60}).to({x:0}, 50).to({x:60}, 50));\r\n\t *\r\n\t *      mc.gotoAndPlay(\"start\");\r\n\t *\r\n\t * It is recommended to use <code>tween.to()</code> to animate and set properties (use no duration to have it set\r\n\t * immediately), and the <code>tween.wait()</code> method to create delays between animations. Note that using the\r\n\t * <code>tween.set()</code> method to affect properties will likely not provide the desired result.\r\n\t *\r\n\t * @class MovieClip\r\n\t * @main MovieClip\r\n\t * @extends Container\r\n\t * @constructor\r\n\t * @param {String} [mode=independent] Initial value for the mode property. One of {{#crossLink \"MovieClip/INDEPENDENT:property\"}}{{/crossLink}},\r\n\t * {{#crossLink \"MovieClip/SINGLE_FRAME:property\"}}{{/crossLink}}, or {{#crossLink \"MovieClip/SYNCHED:property\"}}{{/crossLink}}.\r\n\t * The default is {{#crossLink \"MovieClip/INDEPENDENT:property\"}}{{/crossLink}}.\r\n\t * @param {Number} [startPosition=0] Initial value for the {{#crossLink \"MovieClip/startPosition:property\"}}{{/crossLink}}\r\n\t * property.\r\n\t * @param {Boolean} [loop=true] Initial value for the {{#crossLink \"MovieClip/loop:property\"}}{{/crossLink}}\r\n\t * property. The default is `true`.\r\n\t * @param {Object} [labels=null] A hash of labels to pass to the {{#crossLink \"MovieClip/timeline:property\"}}{{/crossLink}}\r\n\t * instance associated with this MovieClip. Labels only need to be passed if they need to be used.\r\n\t **/\r\n\tfunction MovieClip(mode, startPosition, loop, labels) {\r\n\t\tthis.Container_constructor();\r\n\t\t!MovieClip.inited&&MovieClip.init(); // static init\r\n\t\t\r\n\t\t\r\n\t// public properties:\r\n\t\t/**\r\n\t\t * Controls how this MovieClip advances its time. Must be one of 0 (INDEPENDENT), 1 (SINGLE_FRAME), or 2 (SYNCHED).\r\n\t\t * See each constant for a description of the behaviour.\r\n\t\t * @property mode\r\n\t\t * @type String\r\n\t\t * @default null\r\n\t\t **/\r\n\t\tthis.mode = mode||MovieClip.INDEPENDENT;\r\n\t\r\n\t\t/**\r\n\t\t * Specifies what the first frame to play in this movieclip, or the only frame to display if mode is SINGLE_FRAME.\r\n\t\t * @property startPosition\r\n\t\t * @type Number\r\n\t\t * @default 0\r\n\t\t */\r\n\t\tthis.startPosition = startPosition || 0;\r\n\t\r\n\t\t/**\r\n\t\t * Indicates whether this MovieClip should loop when it reaches the end of its timeline.\r\n\t\t * @property loop\r\n\t\t * @type Boolean\r\n\t\t * @default true\r\n\t\t */\r\n\t\tthis.loop = loop;\r\n\t\r\n\t\t/**\r\n\t\t * The current frame of the movieclip.\r\n\t\t * @property currentFrame\r\n\t\t * @type Number\r\n\t\t * @default 0\r\n\t\t * @readonly\r\n\t\t */\r\n\t\tthis.currentFrame = 0;\r\n\t\r\n\t\t/**\r\n\t\t * The TweenJS Timeline that is associated with this MovieClip. This is created automatically when the MovieClip\r\n\t\t * instance is initialized. Animations are created by adding <a href=\"http://tweenjs.com\">TweenJS</a> Tween\r\n\t\t * instances to the timeline.\r\n\t\t *\r\n\t\t * <h4>Example</h4>\r\n\t\t *\r\n\t\t *      var tween = createjs.Tween.get(target).to({x:0}).to({x:100}, 30);\r\n\t\t *      var mc = new createjs.MovieClip();\r\n\t\t *      mc.timeline.addTween(tween);\r\n\t\t *\r\n\t\t * Elements can be added and removed from the timeline by toggling an \"_off\" property\r\n\t\t * using the <code>tweenInstance.to()</code> method. Note that using <code>Tween.set</code> is not recommended to\r\n\t\t * create MovieClip animations. The following example will toggle the target off on frame 0, and then back on for\r\n\t\t * frame 1. You can use the \"visible\" property to achieve the same effect.\r\n\t\t *\r\n\t\t *      var tween = createjs.Tween.get(target).to({_off:false})\r\n\t\t *          .wait(1).to({_off:true})\r\n\t\t *          .wait(1).to({_off:false});\r\n\t\t *\r\n\t\t * @property timeline\r\n\t\t * @type Timeline\r\n\t\t * @default null\r\n\t\t */\r\n\t\tthis.timeline = new createjs.Timeline(null, labels, {paused:true, position:startPosition, useTicks:true});\r\n\t\r\n\t\t/**\r\n\t\t * If true, the MovieClip's position will not advance when ticked.\r\n\t\t * @property paused\r\n\t\t * @type Boolean\r\n\t\t * @default false\r\n\t\t */\r\n\t\tthis.paused = false;\r\n\t\r\n\t\t/**\r\n\t\t * If true, actions in this MovieClip's tweens will be run when the playhead advances.\r\n\t\t * @property actionsEnabled\r\n\t\t * @type Boolean\r\n\t\t * @default true\r\n\t\t */\r\n\t\tthis.actionsEnabled = true;\r\n\t\r\n\t\t/**\r\n\t\t * If true, the MovieClip will automatically be reset to its first frame whenever the timeline adds\r\n\t\t * it back onto the display list. This only applies to MovieClip instances with mode=INDEPENDENT.\r\n\t\t * <br><br>\r\n\t\t * For example, if you had a character animation with a \"body\" child MovieClip instance\r\n\t\t * with different costumes on each frame, you could set body.autoReset = false, so that\r\n\t\t * you can manually change the frame it is on, without worrying that it will be reset\r\n\t\t * automatically.\r\n\t\t * @property autoReset\r\n\t\t * @type Boolean\r\n\t\t * @default true\r\n\t\t */\r\n\t\tthis.autoReset = true;\r\n\t\t\r\n\t\t/**\r\n\t\t * An array of bounds for each frame in the MovieClip. This is mainly intended for tool output.\r\n\t\t * @property frameBounds\r\n\t\t * @type Array\r\n\t\t * @default null\r\n\t\t */\r\n\t\tthis.frameBounds = this.frameBounds||null; // TODO: Deprecated. This is for backwards support of FlashCC\r\n\t\t\r\n\t\t/**\r\n\t\t * By default MovieClip instances advance one frame per tick. Specifying a framerate for the MovieClip\r\n\t\t * will cause it to advance based on elapsed time between ticks as appropriate to maintain the target\r\n\t\t * framerate.\r\n\t\t *\r\n\t\t * For example, if a MovieClip with a framerate of 10 is placed on a Stage being updated at 40fps, then the MovieClip will\r\n\t\t * advance roughly one frame every 4 ticks. This will not be exact, because the time between each tick will\r\n\t\t * vary slightly between frames.\r\n\t\t *\r\n\t\t * This feature is dependent on the tick event object (or an object with an appropriate \"delta\" property) being\r\n\t\t * passed into {{#crossLink \"Stage/update\"}}{{/crossLink}}.\r\n\t\t * @property framerate\r\n\t\t * @type {Number}\r\n\t\t * @default null\r\n\t\t **/\r\n\t\tthis.framerate = null;\r\n\t\t\r\n\t\t\r\n\t// private properties:\r\n\t\t/**\r\n\t\t * @property _synchOffset\r\n\t\t * @type Number\r\n\t\t * @default 0\r\n\t\t * @private\r\n\t\t */\r\n\t\tthis._synchOffset = 0;\r\n\t\r\n\t\t/**\r\n\t\t * @property _prevPos\r\n\t\t * @type Number\r\n\t\t * @default -1\r\n\t\t * @private\r\n\t\t */\r\n\t\tthis._prevPos = -1; // TODO: evaluate using a ._reset Boolean prop instead of -1.\r\n\t\r\n\t\t/**\r\n\t\t * @property _prevPosition\r\n\t\t * @type Number\r\n\t\t * @default 0\r\n\t\t * @private\r\n\t\t */\r\n\t\tthis._prevPosition = 0;\r\n\t\r\n\t\t/**\r\n\t\t * The time remaining from the previous tick, only applicable when .framerate is set.\r\n\t\t * @property _t\r\n\t\t * @type Number\r\n\t\t * @private\r\n\t\t */\r\n\t\tthis._t = 0;\r\n\t\r\n\t\t/**\r\n\t\t * List of display objects that are actively being managed by the MovieClip.\r\n\t\t * @property _managed\r\n\t\t * @type Object\r\n\t\t * @private\r\n\t\t */\r\n\t\tthis._managed = {};\r\n\t}\r\n\tvar p = createjs.extend(MovieClip, createjs.Container);\r\n\r\n\r\n// constants:\r\n\t/**\r\n\t * The MovieClip will advance independently of its parent, even if its parent is paused.\r\n\t * This is the default mode.\r\n\t * @property INDEPENDENT\r\n\t * @static\r\n\t * @type String\r\n\t * @default \"independent\"\r\n\t * @readonly\r\n\t **/\r\n\tMovieClip.INDEPENDENT = \"independent\";\r\n\r\n\t/**\r\n\t * The MovieClip will only display a single frame (as determined by the startPosition property).\r\n\t * @property SINGLE_FRAME\r\n\t * @static\r\n\t * @type String\r\n\t * @default \"single\"\r\n\t * @readonly\r\n\t **/\r\n\tMovieClip.SINGLE_FRAME = \"single\";\r\n\r\n\t/**\r\n\t * The MovieClip will be advanced only when its parent advances and will be synched to the position of\r\n\t * the parent MovieClip.\r\n\t * @property SYNCHED\r\n\t * @static\r\n\t * @type String\r\n\t * @default \"synched\"\r\n\t * @readonly\r\n\t **/\r\n\tMovieClip.SYNCHED = \"synched\";\r\n\t\r\n\t\r\n// static properties:\r\n\tMovieClip.inited = false;\r\n\t\r\n\t\r\n// static methods:\r\n\tMovieClip.init = function() {\r\n\t\tif (MovieClip.inited) { return; }\r\n\t\t// plugins introduce some overhead to Tween, so we only install this if an MC is instantiated.\r\n\t\tMovieClipPlugin.install();\r\n\t\tMovieClip.inited = true;\r\n\t};\r\n\t\r\n\t\r\n// getter / setters:\r\n\t/**\r\n\t * Use the {{#crossLink \"MovieClip/labels:property\"}}{{/crossLink}} property instead.\r\n\t * @method getLabels\r\n\t * @return {Array}\r\n\t * @deprecated\r\n\t **/\r\n\tp.getLabels = function() {\r\n\t\treturn this.timeline.getLabels();\r\n\t};\r\n\t\r\n\t/**\r\n\t * Use the {{#crossLink \"MovieClip/currentLabel:property\"}}{{/crossLink}} property instead.\r\n\t * @method getCurrentLabel\r\n\t * @return {String}\r\n\t * @deprecated\r\n\t **/\r\n\tp.getCurrentLabel = function() {\r\n\t\tthis._updateTimeline();\r\n\t\treturn this.timeline.getCurrentLabel();\r\n\t};\r\n\t\r\n\t/**\r\n\t * Use the {{#crossLink \"MovieClip/duration:property\"}}{{/crossLink}} property instead.\r\n\t * @method getDuration\r\n\t * @return {Number}\r\n\t * @protected\r\n\t **/\r\n\tp.getDuration = function() {\r\n\t\treturn this.timeline.duration;\r\n\t};\r\n\r\n\t/**\r\n\t * Returns an array of objects with label and position (aka frame) properties, sorted by position.\r\n\t * Shortcut to TweenJS: Timeline.getLabels();\r\n\t * @property labels\r\n\t * @type {Array}\r\n\t * @readonly\r\n\t **/\r\n\t\r\n\t/**\r\n\t * Returns the name of the label on or immediately before the current frame. See TweenJS: Timeline.getCurrentLabel()\r\n\t * for more information.\r\n\t * @property currentLabel\r\n\t * @type {String}\r\n\t * @readonly\r\n\t **/\r\n\t\r\n\t/**\r\n\t * Returns the duration of this MovieClip in seconds or ticks. Identical to {{#crossLink \"MovieClip/duration:property\"}}{{/crossLink}}\r\n\t * and provided for Flash API compatibility.\r\n\t * @property totalFrames\r\n\t * @type {Number}\r\n\t * @readonly\r\n\t **/\r\n\t\r\n\t/**\r\n\t * Returns the duration of this MovieClip in seconds or ticks.\r\n\t * @property duration\r\n\t * @type {Number}\r\n\t * @readonly\r\n\t **/\r\n\ttry {\r\n\t\tObject.defineProperties(p, {\r\n\t\t\tlabels: { get: p.getLabels },\r\n\t\t\tcurrentLabel: { get: p.getCurrentLabel },\r\n\t\t\ttotalFrames: { get: p.getDuration },\r\n\t\t\tduration: { get: p.getDuration }\r\n\t\t});\r\n\t} catch (e) {}\r\n\r\n\r\n// public methods:\r\n\t/**\r\n\t * Constructor alias for backwards compatibility. This method will be removed in future versions.\r\n\t * Subclasses should be updated to use {{#crossLink \"Utility Methods/extends\"}}{{/crossLink}}.\r\n\t * @method initialize\r\n\t * @deprecated in favour of `createjs.promote()`\r\n\t **/\r\n\tp.initialize = MovieClip; // TODO: Deprecated. This is for backwards support of FlashCC\r\n\r\n\t/**\r\n\t * Returns true or false indicating whether the display object would be visible if drawn to a canvas.\r\n\t * This does not account for whether it would be visible within the boundaries of the stage.\r\n\t * NOTE: This method is mainly for internal use, though it may be useful for advanced uses.\r\n\t * @method isVisible\r\n\t * @return {Boolean} Boolean indicating whether the display object would be visible if drawn to a canvas\r\n\t **/\r\n\tp.isVisible = function() {\r\n\t\t// children are placed in draw, so we can't determine if we have content.\r\n\t\treturn !!(this.visible && this.alpha > 0 && this.scaleX != 0 && this.scaleY != 0);\r\n\t};\r\n\r\n\t/**\r\n\t * Draws the display object into the specified context ignoring its visible, alpha, shadow, and transform.\r\n\t * Returns true if the draw was handled (useful for overriding functionality).\r\n\t * NOTE: This method is mainly for internal use, though it may be useful for advanced uses.\r\n\t * @method draw\r\n\t * @param {CanvasRenderingContext2D} ctx The canvas 2D context object to draw into.\r\n\t * @param {Boolean} ignoreCache Indicates whether the draw operation should ignore any current cache.\r\n\t * For example, used for drawing the cache (to prevent it from simply drawing an existing cache back\r\n\t * into itself).\r\n\t **/\r\n\tp.draw = function(ctx, ignoreCache) {\r\n\t\t// draw to cache first:\r\n\t\tif (this.DisplayObject_draw(ctx, ignoreCache)) { return true; }\r\n\t\tthis._updateTimeline();\r\n\t\tthis.Container_draw(ctx, ignoreCache);\r\n\t\treturn true;\r\n\t};\r\n\t\r\n\t/**\r\n\t * Sets paused to false.\r\n\t * @method play\r\n\t **/\r\n\tp.play = function() {\r\n\t\tthis.paused = false;\r\n\t};\r\n\t\r\n\t/**\r\n\t * Sets paused to true.\r\n\t * @method stop\r\n\t **/\r\n\tp.stop = function() {\r\n\t\tthis.paused = true;\r\n\t};\r\n\t\r\n\t/**\r\n\t * Advances this movie clip to the specified position or label and sets paused to false.\r\n\t * @method gotoAndPlay\r\n\t * @param {String|Number} positionOrLabel The animation name or frame number to go to.\r\n\t **/\r\n\tp.gotoAndPlay = function(positionOrLabel) {\r\n\t\tthis.paused = false;\r\n\t\tthis._goto(positionOrLabel);\r\n\t};\r\n\t\r\n\t/**\r\n\t * Advances this movie clip to the specified position or label and sets paused to true.\r\n\t * @method gotoAndStop\r\n\t * @param {String|Number} positionOrLabel The animation or frame name to go to.\r\n\t **/\r\n\tp.gotoAndStop = function(positionOrLabel) {\r\n\t\tthis.paused = true;\r\n\t\tthis._goto(positionOrLabel);\r\n\t};\r\n\t\r\n\t/**\r\n\t * Advances the playhead. This occurs automatically each tick by default.\r\n\t * @param [time] {Number} The amount of time in ms to advance by. Only applicable if framerate is set.\r\n\t * @method advance\r\n\t*/\r\n\tp.advance = function(time) {\r\n\t\t// TODO: should we worry at all about clips who change their own modes via frame scripts?\r\n\t\tvar independent = MovieClip.INDEPENDENT;\r\n\t\tif (this.mode != independent) { return; }\r\n\t\t\r\n\t\tvar o=this, fps = o.framerate;\r\n\t\twhile ((o = o.parent) && fps == null) {\r\n\t\t\tif (o.mode == independent) { fps = o._framerate; }\r\n\t\t}\r\n\t\tthis._framerate = fps;\r\n\t\t\r\n\t\tvar t = (fps != null && fps != -1 && time != null) ? time/(1000/fps) + this._t : 1;\r\n\t\tvar frames = t|0;\r\n\t\tthis._t = t-frames; // leftover time\r\n\t\t\r\n\t\twhile (!this.paused && frames--) {\r\n\t\t\tthis._prevPosition = (this._prevPos < 0) ? 0 : this._prevPosition+1;\r\n\t\t\tthis._updateTimeline();\r\n\t\t}\r\n\t};\r\n\t\r\n\t/**\r\n\t * MovieClip instances cannot be cloned.\r\n\t * @method clone\r\n\t **/\r\n\tp.clone = function() {\r\n\t\t// TODO: add support for this? Need to clone the Timeline & retarget tweens - pretty complex.\r\n\t\tthrow(\"MovieClip cannot be cloned.\")\r\n\t};\r\n\t\r\n\t/**\r\n\t * Returns a string representation of this object.\r\n\t * @method toString\r\n\t * @return {String} a string representation of the instance.\r\n\t **/\r\n\tp.toString = function() {\r\n\t\treturn \"[MovieClip (name=\"+  this.name +\")]\";\r\n\t};\r\n\r\n\r\n// private methods:\r\n\t/**\r\n\t * @method _tick\r\n\t * @param {Object} evtObj An event object that will be dispatched to all tick listeners. This object is reused between dispatchers to reduce construction & GC costs.\r\n\t * function.\r\n\t * @protected\r\n\t **/\r\n\tp._tick = function(evtObj) {\r\n\t\tthis.advance(evtObj&&evtObj.delta);\r\n\t\tthis.Container__tick(evtObj);\r\n\t};\r\n\t\r\n\t/**\r\n\t * @method _goto\r\n\t * @param {String|Number} positionOrLabel The animation name or frame number to go to.\r\n\t * @protected\r\n\t **/\r\n\tp._goto = function(positionOrLabel) {\r\n\t\tvar pos = this.timeline.resolve(positionOrLabel);\r\n\t\tif (pos == null) { return; }\r\n\t\t// prevent _updateTimeline from overwriting the new position because of a reset:\r\n\t\tif (this._prevPos == -1) { this._prevPos = NaN; }\r\n\t\tthis._prevPosition = pos;\r\n\t\tthis._t = 0;\r\n\t\tthis._updateTimeline();\r\n\t};\r\n\t\r\n\t/**\r\n\t * @method _reset\r\n\t * @private\r\n\t **/\r\n\tp._reset = function() {\r\n\t\tthis._prevPos = -1;\r\n\t\tthis._t = this.currentFrame = 0;\r\n\t\tthis.paused = false;\r\n\t};\r\n\t\r\n\t/**\r\n\t * @method _updateTimeline\r\n\t * @protected\r\n\t **/\r\n\tp._updateTimeline = function() {\r\n\t\tvar tl = this.timeline;\r\n\t\tvar synched = this.mode != MovieClip.INDEPENDENT;\r\n\t\ttl.loop = (this.loop==null) ? true : this.loop;\r\n\t\t\r\n\t\tvar pos = synched ? this.startPosition + (this.mode==MovieClip.SINGLE_FRAME?0:this._synchOffset) : (this._prevPos < 0 ? 0 : this._prevPosition);\r\n\t\tvar mode = synched || !this.actionsEnabled ? createjs.Tween.NONE : null;\r\n\t\t\r\n\t\t// pre-assign currentFrame so it is available to frame scripts:\r\n\t\tthis.currentFrame = tl._calcPosition(pos);\r\n\t\t\r\n\t\t// update timeline position, ignoring actions if this is a graphic.\r\n\t\ttl.setPosition(pos, mode);\r\n\r\n\t\tthis._prevPosition = tl._prevPosition;\r\n\t\tif (this._prevPos == tl._prevPos) { return; }\r\n\t\tthis.currentFrame = this._prevPos = tl._prevPos;\r\n\r\n\t\tfor (var n in this._managed) { this._managed[n] = 1; }\r\n\r\n\t\tvar tweens = tl._tweens;\r\n\t\tfor (var i=0, l=tweens.length; i<l; i++) {\r\n\t\t\tvar tween = tweens[i];\r\n\t\t\tvar target = tween._target;\r\n\t\t\tif (target == this || tween.passive) { continue; } // TODO: this assumes actions tween has this as the target. Valid?\r\n\t\t\tvar offset = tween._stepPosition;\r\n\r\n\t\t\tif (target instanceof createjs.DisplayObject) {\r\n\t\t\t\t// motion tween.\r\n\t\t\t\tthis._addManagedChild(target, offset);\r\n\t\t\t} else {\r\n\t\t\t\t// state tween.\r\n\t\t\t\tthis._setState(target.state, offset);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar kids = this.children;\r\n\t\tfor (i=kids.length-1; i>=0; i--) {\r\n\t\t\tvar id = kids[i].id;\r\n\t\t\tif (this._managed[id] == 1) {\r\n\t\t\t\tthis.removeChildAt(i);\r\n\t\t\t\tdelete(this._managed[id]);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\t/**\r\n\t * @method _setState\r\n\t * @param {Array} state\r\n\t * @param {Number} offset\r\n\t * @protected\r\n\t **/\r\n\tp._setState = function(state, offset) {\r\n\t\tif (!state) { return; }\r\n\t\tfor (var i=state.length-1;i>=0;i--) {\r\n\t\t\tvar o = state[i];\r\n\t\t\tvar target = o.t;\r\n\t\t\tvar props = o.p;\r\n\t\t\tfor (var n in props) { target[n] = props[n]; }\r\n\t\t\tthis._addManagedChild(target, offset);\r\n\t\t}\r\n\t};\r\n\r\n\t/**\r\n\t * Adds a child to the timeline, and sets it up as a managed child.\r\n\t * @method _addManagedChild\r\n\t * @param {MovieClip} child The child MovieClip to manage\r\n\t * @param {Number} offset\r\n\t * @private\r\n\t **/\r\n\tp._addManagedChild = function(child, offset) {\r\n\t\tif (child._off) { return; }\r\n\t\tthis.addChildAt(child,0);\r\n\r\n\t\tif (child instanceof MovieClip) {\r\n\t\t\tchild._synchOffset = offset;\r\n\t\t\t// TODO: this does not precisely match Flash. Flash loses track of the clip if it is renamed or removed from the timeline, which causes it to reset.\r\n\t\t\tif (child.mode == MovieClip.INDEPENDENT && child.autoReset && !this._managed[child.id]) { child._reset(); }\r\n\t\t}\r\n\t\tthis._managed[child.id] = 2;\r\n\t};\r\n\t\r\n\t/**\r\n\t * @method _getBounds\r\n\t * @param {Matrix2D} matrix\r\n\t * @param {Boolean} ignoreTransform\r\n\t * @return {Rectangle}\r\n\t * @protected\r\n\t **/\r\n\tp._getBounds = function(matrix, ignoreTransform) {\r\n\t\tvar bounds = this.DisplayObject_getBounds();\r\n\t\tif (!bounds) {\r\n\t\t\tthis._updateTimeline();\r\n\t\t\tif (this.frameBounds) { bounds = this._rectangle.copy(this.frameBounds[this.currentFrame]); }\r\n\t\t}\r\n\t\tif (bounds) { return this._transformBounds(bounds, matrix, ignoreTransform); }\r\n\t\treturn this.Container__getBounds(matrix, ignoreTransform);\r\n\t};\r\n\r\n\r\n\tcreatejs.MovieClip = createjs.promote(MovieClip, \"Container\");\r\n\r\n\r\n\r\n// MovieClipPlugin for TweenJS:\r\n\t/**\r\n\t * This plugin works with <a href=\"http://tweenjs.com\" target=\"_blank\">TweenJS</a> to prevent the startPosition\r\n\t * property from tweening.\r\n\t * @private\r\n\t * @class MovieClipPlugin\r\n\t * @constructor\r\n\t **/\r\n\tfunction MovieClipPlugin() {\r\n\t\tthrow(\"MovieClipPlugin cannot be instantiated.\")\r\n\t}\r\n\t\r\n\t/**\r\n\t * @method priority\r\n\t * @private\r\n\t **/\r\n\tMovieClipPlugin.priority = 100; // very high priority, should run first\r\n\r\n\t/**\r\n\t * @method install\r\n\t * @private\r\n\t **/\r\n\tMovieClipPlugin.install = function() {\r\n\t\tcreatejs.Tween.installPlugin(MovieClipPlugin, [\"startPosition\"]);\r\n\t};\r\n\t\r\n\t/**\r\n\t * @method init\r\n\t * @param {Tween} tween\r\n\t * @param {String} prop\r\n\t * @param {String|Number|Boolean} value\r\n\t * @private\r\n\t **/\r\n\tMovieClipPlugin.init = function(tween, prop, value) {\r\n\t\treturn value;\r\n\t};\r\n\t\r\n\t/**\r\n\t * @method step\r\n\t * @private\r\n\t **/\r\n\tMovieClipPlugin.step = function() {\r\n\t\t// unused.\r\n\t};\r\n\r\n\t/**\r\n\t * @method tween\r\n\t * @param {Tween} tween\r\n\t * @param {String} prop\r\n\t * @param {String | Number | Boolean} value\r\n\t * @param {Array} startValues\r\n\t * @param {Array} endValues\r\n\t * @param {Number} ratio\r\n\t * @param {Object} wait\r\n\t * @param {Object} end\r\n\t * @return {*}\r\n\t */\r\n\tMovieClipPlugin.tween = function(tween, prop, value, startValues, endValues, ratio, wait, end) {\r\n\t\tif (!(tween.target instanceof MovieClip)) { return value; }\r\n\t\treturn (ratio == 1 ? endValues[prop] : startValues[prop]);\r\n\t};\r\n\r\n}());\r\n\r\n//##############################################################################\r\n// SpriteSheetUtils.js\r\n//##############################################################################\r\n\r\nthis.createjs = this.createjs||{};\r\n\r\n(function() {\r\n\t\"use strict\";\r\n\t\r\n\t\r\n// constructor:\r\n\t/**\r\n\t * The SpriteSheetUtils class is a collection of static methods for working with {{#crossLink \"SpriteSheet\"}}{{/crossLink}}s.\r\n\t * A sprite sheet is a series of images (usually animation frames) combined into a single image on a regular grid. For\r\n\t * example, an animation consisting of 8 100x100 images could be combined into a 400x200 sprite sheet (4 frames across\r\n\t * by 2 high). The SpriteSheetUtils class uses a static interface and should not be instantiated.\r\n\t * @class SpriteSheetUtils\r\n\t * @static\r\n\t **/\r\n\tfunction SpriteSheetUtils() {\r\n\t\tthrow \"SpriteSheetUtils cannot be instantiated\";\r\n\t}\r\n\r\n\r\n// private static properties:\r\n\t/**\r\n\t * @property _workingCanvas\r\n\t * @static\r\n\t * @type HTMLCanvasElement | Object\r\n\t * @protected\r\n\t*/\r\n\t/**\r\n\t * @property _workingContext\r\n\t * @static\r\n\t * @type CanvasRenderingContext2D\r\n\t * @protected\r\n\t*/\r\n\tvar canvas = (createjs.createCanvas?createjs.createCanvas():document.createElement(\"canvas\"));\r\n\tif (canvas.getContext) {\r\n\t\tSpriteSheetUtils._workingCanvas = canvas;\r\n\t\tSpriteSheetUtils._workingContext = canvas.getContext(\"2d\");\r\n\t\tcanvas.width = canvas.height = 1;\r\n\t}\r\n\r\n\r\n// public static methods:\r\n\t/**\r\n\t * <b>This is an experimental method, and may be buggy. Please report issues.</b><br/><br/>\r\n\t * Extends the existing sprite sheet by flipping the original frames horizontally, vertically, or both,\r\n\t * and adding appropriate animation & frame data. The flipped animations will have a suffix added to their names\r\n\t * (_h, _v, _hv as appropriate). Make sure the sprite sheet images are fully loaded before using this method.\r\n\t * <br/><br/>\r\n\t * For example:<br/>\r\n\t * SpriteSheetUtils.addFlippedFrames(mySpriteSheet, true, true);\r\n\t * The above would add frames that are flipped horizontally AND frames that are flipped vertically.\r\n\t * <br/><br/>\r\n\t * Note that you can also flip any display object by setting its scaleX or scaleY to a negative value. On some\r\n\t * browsers (especially those without hardware accelerated canvas) this can result in slightly degraded performance,\r\n\t * which is why addFlippedFrames is available.\r\n\t * @method addFlippedFrames\r\n\t * @static\r\n\t * @param {SpriteSheet} spriteSheet\r\n\t * @param {Boolean} horizontal If true, horizontally flipped frames will be added.\r\n\t * @param {Boolean} vertical If true, vertically flipped frames will be added.\r\n\t * @param {Boolean} both If true, frames that are flipped both horizontally and vertically will be added.\r\n\t * @deprecated Modern browsers perform better when flipping via a transform (ex. scaleX=-1) rendering this obsolete.\r\n\t **/\r\n\tSpriteSheetUtils.addFlippedFrames = function(spriteSheet, horizontal, vertical, both) {\r\n\t\tif (!horizontal && !vertical && !both) { return; }\r\n\r\n\t\tvar count = 0;\r\n\t\tif (horizontal) { SpriteSheetUtils._flip(spriteSheet,++count,true,false); }\r\n\t\tif (vertical) { SpriteSheetUtils._flip(spriteSheet,++count,false,true); }\r\n\t\tif (both) { SpriteSheetUtils._flip(spriteSheet,++count,true,true); }\r\n\t};\r\n\r\n\t/**\r\n\t * Returns a single frame of the specified sprite sheet as a new PNG image. An example of when this may be useful is\r\n\t * to use a spritesheet frame as the source for a bitmap fill.\r\n\t *\r\n\t * <strong>WARNING:</strong> In almost all cases it is better to display a single frame using a {{#crossLink \"Sprite\"}}{{/crossLink}}\r\n\t * with a {{#crossLink \"Sprite/gotoAndStop\"}}{{/crossLink}} call than it is to slice out a frame using this\r\n\t * method and display it with a Bitmap instance. You can also crop an image using the {{#crossLink \"Bitmap/sourceRect\"}}{{/crossLink}}\r\n\t * property of {{#crossLink \"Bitmap\"}}{{/crossLink}}.\r\n\t *\r\n\t * The extractFrame method may cause cross-domain warnings since it accesses pixels directly on the canvas.\r\n\t * @method extractFrame\r\n\t * @static\r\n\t * @param {SpriteSheet} spriteSheet The SpriteSheet instance to extract a frame from.\r\n\t * @param {Number|String} frameOrAnimation The frame number or animation name to extract. If an animation\r\n\t * name is specified, only the first frame of the animation will be extracted.\r\n\t * @return {HTMLImageElement} a single frame of the specified sprite sheet as a new PNG image.\r\n\t*/\r\n\tSpriteSheetUtils.extractFrame = function(spriteSheet, frameOrAnimation) {\r\n\t\tif (isNaN(frameOrAnimation)) {\r\n\t\t\tframeOrAnimation = spriteSheet.getAnimation(frameOrAnimation).frames[0];\r\n\t\t}\r\n\t\tvar data = spriteSheet.getFrame(frameOrAnimation);\r\n\t\tif (!data) { return null; }\r\n\t\tvar r = data.rect;\r\n\t\tvar canvas = SpriteSheetUtils._workingCanvas;\r\n\t\tcanvas.width = r.width;\r\n\t\tcanvas.height = r.height;\r\n\t\tSpriteSheetUtils._workingContext.drawImage(data.image, r.x, r.y, r.width, r.height, 0, 0, r.width, r.height);\r\n\t\tvar img = document.createElement(\"img\");\r\n\t\timg.src = canvas.toDataURL(\"image/png\");\r\n\t\treturn img;\r\n\t};\r\n\r\n\t/**\r\n\t * Merges the rgb channels of one image with the alpha channel of another. This can be used to combine a compressed\r\n\t * JPEG image containing color data with a PNG32 monochromatic image containing alpha data. With certain types of\r\n\t * images (those with detail that lend itself to JPEG compression) this can provide significant file size savings\r\n\t * versus a single RGBA PNG32. This method is very fast (generally on the order of 1-2 ms to run).\r\n\t * @method mergeAlpha\r\n\t * @static\r\n\t * @param {HTMLImageElement} rbgImage The image (or canvas) containing the RGB channels to use.\r\n\t * @param {HTMLImageElement} alphaImage The image (or canvas) containing the alpha channel to use.\r\n\t * @param {HTMLCanvasElement} canvas Optional. If specified, this canvas will be used and returned. If not, a new canvas will be created.\r\n\t * @return {HTMLCanvasElement} A canvas with the combined image data. This can be used as a source for Bitmap or SpriteSheet.\r\n\t * @deprecated Tools such as ImageAlpha generally provide better results. This will be moved to sandbox in the future.\r\n\t*/\r\n\tSpriteSheetUtils.mergeAlpha = function(rgbImage, alphaImage, canvas) {\r\n\t\tif (!canvas) { canvas = createjs.createCanvas?createjs.createCanvas():document.createElement(\"canvas\"); }\r\n\t\tcanvas.width = Math.max(alphaImage.width, rgbImage.width);\r\n\t\tcanvas.height = Math.max(alphaImage.height, rgbImage.height);\r\n\t\tvar ctx = canvas.getContext(\"2d\");\r\n\t\tctx.save();\r\n\t\tctx.drawImage(rgbImage,0,0);\r\n\t\tctx.globalCompositeOperation = \"destination-in\";\r\n\t\tctx.drawImage(alphaImage,0,0);\r\n\t\tctx.restore();\r\n\t\treturn canvas;\r\n\t};\r\n\r\n\r\n// private static methods:\r\n\tSpriteSheetUtils._flip = function(spriteSheet, count, h, v) {\r\n\t\tvar imgs = spriteSheet._images;\r\n\t\tvar canvas = SpriteSheetUtils._workingCanvas;\r\n\t\tvar ctx = SpriteSheetUtils._workingContext;\r\n\t\tvar il = imgs.length/count;\r\n\t\tfor (var i=0;i<il;i++) {\r\n\t\t\tvar src = imgs[i];\r\n\t\t\tsrc.__tmp = i; // a bit hacky, but faster than doing indexOf below.\r\n\t\t\tctx.setTransform(1,0,0,1,0,0);\r\n\t\t\tctx.clearRect(0,0,canvas.width+1,canvas.height+1);\r\n\t\t\tcanvas.width = src.width;\r\n\t\t\tcanvas.height = src.height;\r\n\t\t\tctx.setTransform(h?-1:1, 0, 0, v?-1:1, h?src.width:0, v?src.height:0);\r\n\t\t\tctx.drawImage(src,0,0);\r\n\t\t\tvar img = document.createElement(\"img\");\r\n\t\t\timg.src = canvas.toDataURL(\"image/png\");\r\n\t\t\t// work around a strange bug in Safari:\r\n\t\t\timg.width = src.width;\r\n\t\t\timg.height = src.height;\r\n\t\t\timgs.push(img);\r\n\t\t}\r\n\r\n\t\tvar frames = spriteSheet._frames;\r\n\t\tvar fl = frames.length/count;\r\n\t\tfor (i=0;i<fl;i++) {\r\n\t\t\tsrc = frames[i];\r\n\t\t\tvar rect = src.rect.clone();\r\n\t\t\timg = imgs[src.image.__tmp+il*count];\r\n\r\n\t\t\tvar frame = {image:img,rect:rect,regX:src.regX,regY:src.regY};\r\n\t\t\tif (h) {\r\n\t\t\t\trect.x = img.width-rect.x-rect.width; // update rect\r\n\t\t\t\tframe.regX = rect.width-src.regX; // update registration point\r\n\t\t\t}\r\n\t\t\tif (v) {\r\n\t\t\t\trect.y = img.height-rect.y-rect.height;  // update rect\r\n\t\t\t\tframe.regY = rect.height-src.regY; // update registration point\r\n\t\t\t}\r\n\t\t\tframes.push(frame);\r\n\t\t}\r\n\r\n\t\tvar sfx = \"_\"+(h?\"h\":\"\")+(v?\"v\":\"\");\r\n\t\tvar names = spriteSheet._animations;\r\n\t\tvar data = spriteSheet._data;\r\n\t\tvar al = names.length/count;\r\n\t\tfor (i=0;i<al;i++) {\r\n\t\t\tvar name = names[i];\r\n\t\t\tsrc = data[name];\r\n\t\t\tvar anim = {name:name+sfx,speed:src.speed,next:src.next,frames:[]};\r\n\t\t\tif (src.next) { anim.next += sfx; }\r\n\t\t\tframes = src.frames;\r\n\t\t\tfor (var j=0,l=frames.length;j<l;j++) {\r\n\t\t\t\tanim.frames.push(frames[j]+fl*count);\r\n\t\t\t}\r\n\t\t\tdata[anim.name] = anim;\r\n\t\t\tnames.push(anim.name);\r\n\t\t}\r\n\t};\r\n\r\n\r\n\tcreatejs.SpriteSheetUtils = SpriteSheetUtils;\r\n}());\r\n\r\n//##############################################################################\r\n// SpriteSheetBuilder.js\r\n//##############################################################################\r\n\r\nthis.createjs = this.createjs||{};\r\n\r\n(function() {\r\n\t\"use strict\";\r\n\r\n\r\n// constructor:\r\n\t/**\r\n\t * The SpriteSheetBuilder allows you to generate {{#crossLink \"SpriteSheet\"}}{{/crossLink}} instances at run time\r\n\t * from any display object. This can allow you to maintain your assets as vector graphics (for low file size), and\r\n\t * render them at run time as SpriteSheets for better performance.\r\n\t *\r\n\t * SpriteSheets can be built either synchronously, or asynchronously, so that large SpriteSheets can be generated\r\n\t * without locking the UI.\r\n\t *\r\n\t * Note that the \"images\" used in the generated SpriteSheet are actually canvas elements, and that they will be\r\n\t * sized to the nearest power of 2 up to the value of {{#crossLink \"SpriteSheetBuilder/maxWidth:property\"}}{{/crossLink}}\r\n\t * or {{#crossLink \"SpriteSheetBuilder/maxHeight:property\"}}{{/crossLink}}.\r\n\t * @class SpriteSheetBuilder\r\n\t * @param {Number} [framerate=0] The {{#crossLink \"SpriteSheet/framerate:property\"}}{{/crossLink}} of\r\n\t * {{#crossLink \"SpriteSheet\"}}{{/crossLink}} instances that are created.\r\n\t * @extends EventDispatcher\r\n\t * @constructor\r\n\t **/\r\n\tfunction SpriteSheetBuilder(framerate) {\r\n\t\tthis.EventDispatcher_constructor();\r\n\t\t\r\n\t// public properties:\r\n\t\t/**\r\n\t\t * The maximum width for the images (not individual frames) in the generated SpriteSheet. It is recommended to\r\n\t\t * use a power of 2 for this value (ex. 1024, 2048, 4096). If the frames cannot all fit within the max\r\n\t\t * dimensions, then additional images will be created as needed.\r\n\t\t * @property maxWidth\r\n\t\t * @type Number\r\n\t\t * @default 2048\r\n\t\t*/\r\n\t\tthis.maxWidth = 2048;\r\n\t\r\n\t\t/**\r\n\t\t * The maximum height for the images (not individual frames) in the generated SpriteSheet. It is recommended to\r\n\t\t * use a power of 2 for this value (ex. 1024, 2048, 4096). If the frames cannot all fit within the max\r\n\t\t * dimensions, then additional images will be created as needed.\r\n\t\t * @property maxHeight\r\n\t\t * @type Number\r\n\t\t * @default 2048\r\n\t\t **/\r\n\t\tthis.maxHeight = 2048;\r\n\t\r\n\t\t/**\r\n\t\t * The SpriteSheet that was generated. This will be null before a build is completed successfully.\r\n\t\t * @property spriteSheet\r\n\t\t * @type SpriteSheet\r\n\t\t **/\r\n\t\tthis.spriteSheet = null;\r\n\t\r\n\t\t/**\r\n\t\t * The scale to apply when drawing all frames to the SpriteSheet. This is multiplied against any scale specified\r\n\t\t * in the addFrame call. This can be used, for example, to generate a SpriteSheet at run time that is tailored\r\n\t\t * to the a specific device resolution (ex. tablet vs mobile).\r\n\t\t * @property scale\r\n\t\t * @type Number\r\n\t\t * @default 1\r\n\t\t **/\r\n\t\tthis.scale = 1;\r\n\t\r\n\t\t/**\r\n\t\t* The padding to use between frames. This is helpful to preserve antialiasing on drawn vector content.\r\n\t\t* @property padding\r\n\t\t* @type Number\r\n\t\t* @default 1\r\n\t\t**/\r\n\t\tthis.padding = 1;\r\n\t\r\n\t\t/**\r\n\t\t * A number from 0.01 to 0.99 that indicates what percentage of time the builder can use. This can be\r\n\t\t * thought of as the number of seconds per second the builder will use. For example, with a timeSlice value of 0.3,\r\n\t\t * the builder will run 20 times per second, using approximately 15ms per build (30% of available time, or 0.3s per second).\r\n\t\t * Defaults to 0.3.\r\n\t\t * @property timeSlice\r\n\t\t * @type Number\r\n\t\t * @default 0.3\r\n\t\t **/\r\n\t\tthis.timeSlice = 0.3;\r\n\t\r\n\t\t/**\r\n\t\t * A value between 0 and 1 that indicates the progress of a build, or -1 if a build has not\r\n\t\t * been initiated.\r\n\t\t * @property progress\r\n\t\t * @type Number\r\n\t\t * @default -1\r\n\t\t * @readonly\r\n\t\t */\r\n\t\tthis.progress = -1;\r\n\r\n\t\t/**\r\n\t\t * A {{#crossLink \"SpriteSheet/framerate:property\"}}{{/crossLink}} value that will be passed to new {{#crossLink \"SpriteSheet\"}}{{/crossLink}} instances that are\r\n\t\t * created. If no framerate is specified (or it is 0), then SpriteSheets will use the {{#crossLink \"Ticker\"}}{{/crossLink}}\r\n\t\t * framerate.\r\n\t\t * @property framerate\r\n\t\t * @type Number\r\n\t\t * @default 0\r\n\t\t */\r\n\t\tthis.framerate = framerate || 0;\r\n\t\r\n\t\r\n\t// private properties:\r\n\t\t/**\r\n\t\t * @property _frames\r\n\t\t * @protected\r\n\t\t * @type Array\r\n\t\t **/\r\n\t\tthis._frames = [];\r\n\t\r\n\t\t/**\r\n\t\t * @property _animations\r\n\t\t * @protected\r\n\t\t * @type Array\r\n\t\t **/\r\n\t\tthis._animations = {};\r\n\t\r\n\t\t/**\r\n\t\t * @property _data\r\n\t\t * @protected\r\n\t\t * @type Array\r\n\t\t **/\r\n\t\tthis._data = null;\r\n\t\r\n\t\t/**\r\n\t\t * @property _nextFrameIndex\r\n\t\t * @protected\r\n\t\t * @type Number\r\n\t\t **/\r\n\t\tthis._nextFrameIndex = 0;\r\n\t\r\n\t\t/**\r\n\t\t * @property _index\r\n\t\t * @protected\r\n\t\t * @type Number\r\n\t\t **/\r\n\t\tthis._index = 0;\r\n\t\r\n\t\t/**\r\n\t\t * @property _timerID\r\n\t\t * @protected\r\n\t\t * @type Number\r\n\t\t **/\r\n\t\tthis._timerID = null;\r\n\t\r\n\t\t/**\r\n\t\t * @property _scale\r\n\t\t * @protected\r\n\t\t * @type Number\r\n\t\t **/\r\n\t\tthis._scale = 1;\r\n\t}\r\n\tvar p = createjs.extend(SpriteSheetBuilder, createjs.EventDispatcher);\r\n\r\n\t/**\r\n\t * <strong>REMOVED</strong>. Removed in favor of using `MySuperClass_constructor`.\r\n\t * See {{#crossLink \"Utility Methods/extend\"}}{{/crossLink}} and {{#crossLink \"Utility Methods/promote\"}}{{/crossLink}}\r\n\t * for details.\r\n\t *\r\n\t * There is an inheritance tutorial distributed with EaselJS in /tutorials/Inheritance.\r\n\t *\r\n\t * @method initialize\r\n\t * @protected\r\n\t * @deprecated\r\n\t */\r\n\t// p.initialize = function() {}; // searchable for devs wondering where it is.\r\n\r\n\r\n// constants:\r\n\tSpriteSheetBuilder.ERR_DIMENSIONS = \"frame dimensions exceed max spritesheet dimensions\";\r\n\tSpriteSheetBuilder.ERR_RUNNING = \"a build is already running\";\r\n\r\n// events:\r\n\t/**\r\n\t * Dispatched when a build completes.\r\n\t * @event complete\r\n\t * @param {Object} target The object that dispatched the event.\r\n\t * @param {String} type The event type.\r\n\t * @since 0.6.0\r\n\t */\r\n\r\n\t/**\r\n\t * Dispatched when an asynchronous build has progress.\r\n\t * @event progress\r\n\t * @param {Object} target The object that dispatched the event.\r\n\t * @param {String} type The event type.\r\n\t * @param {Number} progress The current progress value (0-1).\r\n\t * @since 0.6.0\r\n\t */\r\n\r\n\r\n// public methods:\r\n\t/**\r\n\t * Adds a frame to the {{#crossLink \"SpriteSheet\"}}{{/crossLink}}. Note that the frame will not be drawn until you\r\n\t * call {{#crossLink \"SpriteSheetBuilder/build\"}}{{/crossLink}} method. The optional setup params allow you to have\r\n\t * a function run immediately before the draw occurs. For example, this allows you to add a single source multiple\r\n\t * times, but manipulate it or its children to change it to generate different frames.\r\n\t *\r\n\t * Note that the source's transformations (x, y, scale, rotate, alpha) will be ignored, except for regX/Y. To apply\r\n\t * transforms to a source object and have them captured in the SpriteSheet, simply place it into a {{#crossLink \"Container\"}}{{/crossLink}}\r\n\t * and pass in the Container as the source.\r\n\t * @method addFrame\r\n\t * @param {DisplayObject} source The source {{#crossLink \"DisplayObject\"}}{{/crossLink}}  to draw as the frame.\r\n\t * @param {Rectangle} [sourceRect] A {{#crossLink \"Rectangle\"}}{{/crossLink}} defining the portion of the\r\n\t * source to draw to the frame. If not specified, it will look for a `getBounds` method, bounds property, or\r\n\t * `nominalBounds` property on the source to use. If one is not found, the frame will be skipped.\r\n\t * @param {Number} [scale=1] Optional. The scale to draw this frame at. Default is 1.\r\n\t * @param {Function} [setupFunction] A function to call immediately before drawing this frame. It will be called with two parameters: the source, and setupData.\r\n\t * @param {Object} [setupData] Arbitrary setup data to pass to setupFunction as the second parameter.\r\n\t * @return {Number} The index of the frame that was just added, or null if a sourceRect could not be determined.\r\n\t **/\r\n\tp.addFrame = function(source, sourceRect, scale, setupFunction, setupData) {\r\n\t\tif (this._data) { throw SpriteSheetBuilder.ERR_RUNNING; }\r\n\t\tvar rect = sourceRect||source.bounds||source.nominalBounds;\r\n\t\tif (!rect&&source.getBounds) { rect = source.getBounds(); }\r\n\t\tif (!rect) { return null; }\r\n\t\tscale = scale||1;\r\n\t\treturn this._frames.push({source:source, sourceRect:rect, scale:scale, funct:setupFunction, data:setupData, index:this._frames.length, height:rect.height*scale})-1;\r\n\t};\r\n\r\n\t/**\r\n\t * Adds an animation that will be included in the created {{#crossLink \"SpriteSheet\"}}{{/crossLink}}.\r\n\t * @method addAnimation\r\n\t * @param {String} name The name for the animation.\r\n\t * @param {Array} frames An array of frame indexes that comprise the animation. Ex. [3,6,5] would describe an animation\r\n\t * that played frame indexes 3, 6, and 5 in that order.\r\n\t * @param {String} [next] Specifies the name of the animation to continue to after this animation ends. You can\r\n\t * also pass false to have the animation stop when it ends. By default it will loop to the start of the same animation.\r\n\t * @param {Number} [speed] Specifies a frame advance speed for this animation. For example, a value of 0.5 would\r\n\t * cause the animation to advance every second tick. Note that earlier versions used `frequency` instead, which had\r\n\t * the opposite effect.\r\n\t **/\r\n\tp.addAnimation = function(name, frames, next, speed) {\r\n\t\tif (this._data) { throw SpriteSheetBuilder.ERR_RUNNING; }\r\n\t\tthis._animations[name] = {frames:frames, next:next, speed:speed};\r\n\t};\r\n\r\n\t/**\r\n\t * This will take a {{#crossLink \"MovieClip\"}}{{/crossLink}} instance, and add its frames and labels to this\r\n\t * builder. Labels will be added as an animation running from the label index to the next label. For example, if\r\n\t * there is a label named \"foo\" at frame 0 and a label named \"bar\" at frame 10, in a MovieClip with 15 frames, it\r\n\t * will add an animation named \"foo\" that runs from frame index 0 to 9, and an animation named \"bar\" that runs from\r\n\t * frame index 10 to 14.\r\n\t *\r\n\t * Note that this will iterate through the full MovieClip with {{#crossLink \"MovieClip/actionsEnabled:property\"}}{{/crossLink}}\r\n\t * set to `false`, ending on the last frame.\r\n\t * @method addMovieClip\r\n\t * @param {MovieClip} source The source MovieClip instance to add to the SpriteSheet.\r\n\t * @param {Rectangle} [sourceRect] A {{#crossLink \"Rectangle\"}}{{/crossLink}} defining the portion of the source to\r\n\t * draw to the frame. If not specified, it will look for a {{#crossLink \"DisplayObject/getBounds\"}}{{/crossLink}}\r\n\t * method, `frameBounds` Array, `bounds` property, or `nominalBounds` property on the source to use. If one is not\r\n\t * found, the MovieClip will be skipped.\r\n\t * @param {Number} [scale=1] The scale to draw the movie clip at.\r\n\t * @param {Function} [setupFunction] A function to call immediately before drawing each frame. It will be called\r\n\t * with three parameters: the source, setupData, and the frame index.\r\n\t * @param {Object} [setupData] Arbitrary setup data to pass to setupFunction as the second parameter.\r\n\t * @param {Function} [labelFunction] This method will be called for each MovieClip label that is added with four\r\n\t * parameters: the label name, the source MovieClip instance, the starting frame index (in the movieclip timeline)\r\n\t * and the end index. It must return a new name for the label/animation, or `false` to exclude the label.\r\n\t **/\r\n\tp.addMovieClip = function(source, sourceRect, scale, setupFunction, setupData, labelFunction) {\r\n\t\tif (this._data) { throw SpriteSheetBuilder.ERR_RUNNING; }\r\n\t\tvar rects = source.frameBounds;\r\n\t\tvar rect = sourceRect||source.bounds||source.nominalBounds;\r\n\t\tif (!rect&&source.getBounds) { rect = source.getBounds(); }\r\n\t\tif (!rect && !rects) { return; }\r\n\r\n\t\tvar i, l, baseFrameIndex = this._frames.length;\r\n\t\tvar duration = source.timeline.duration;\r\n\t\tfor (i=0; i<duration; i++) {\r\n\t\t\tvar r = (rects&&rects[i]) ? rects[i] : rect;\r\n\t\t\tthis.addFrame(source, r, scale, this._setupMovieClipFrame, {i:i, f:setupFunction, d:setupData});\r\n\t\t}\r\n\t\tvar labels = source.timeline._labels;\r\n\t\tvar lbls = [];\r\n\t\tfor (var n in labels) {\r\n\t\t\tlbls.push({index:labels[n], label:n});\r\n\t\t}\r\n\t\tif (lbls.length) {\r\n\t\t\tlbls.sort(function(a,b){ return a.index-b.index; });\r\n\t\t\tfor (i=0,l=lbls.length; i<l; i++) {\r\n\t\t\t\tvar label = lbls[i].label;\r\n\t\t\t\tvar start = baseFrameIndex+lbls[i].index;\r\n\t\t\t\tvar end = baseFrameIndex+((i == l-1) ? duration : lbls[i+1].index);\r\n\t\t\t\tvar frames = [];\r\n\t\t\t\tfor (var j=start; j<end; j++) { frames.push(j); }\r\n\t\t\t\tif (labelFunction) {\r\n\t\t\t\t\tlabel = labelFunction(label, source, start, end);\r\n\t\t\t\t\tif (!label) { continue; }\r\n\t\t\t\t}\r\n\t\t\t\tthis.addAnimation(label, frames, true); // for now, this loops all animations.\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\t/**\r\n\t * Builds a {{#crossLink \"SpriteSheet\"}}{{/crossLink}} instance based on the current frames.\r\n\t * @method build\r\n\t * @return {SpriteSheet} The created SpriteSheet instance, or null if a build is already running or an error\r\n\t * occurred.\r\n\t **/\r\n\tp.build = function() {\r\n\t\tif (this._data) { throw SpriteSheetBuilder.ERR_RUNNING; }\r\n\t\tthis._startBuild();\r\n\t\twhile (this._drawNext()) {}\r\n\t\tthis._endBuild();\r\n\t\treturn this.spriteSheet;\r\n\t};\r\n\r\n\t/**\r\n\t * Asynchronously builds a {{#crossLink \"SpriteSheet\"}}{{/crossLink}} instance based on the current frames. It will\r\n\t * run 20 times per second, using an amount of time defined by `timeSlice`. When it is complete it will call the\r\n\t * specified callback.\r\n\t * @method buildAsync\r\n\t * @param {Number} [timeSlice] Sets the timeSlice property on this instance.\r\n\t **/\r\n\tp.buildAsync = function(timeSlice) {\r\n\t\tif (this._data) { throw SpriteSheetBuilder.ERR_RUNNING; }\r\n\t\tthis.timeSlice = timeSlice;\r\n\t\tthis._startBuild();\r\n\t\tvar _this = this;\r\n\t\tthis._timerID = setTimeout(function() { _this._run(); }, 50-Math.max(0.01, Math.min(0.99, this.timeSlice||0.3))*50);\r\n\t};\r\n\r\n\t/**\r\n\t * Stops the current asynchronous build.\r\n\t * @method stopAsync\r\n\t **/\r\n\tp.stopAsync = function() {\r\n\t\tclearTimeout(this._timerID);\r\n\t\tthis._data = null;\r\n\t};\r\n\r\n\t/**\r\n\t * SpriteSheetBuilder instances cannot be cloned.\r\n\t * @method clone\r\n\t **/\r\n\tp.clone = function() {\r\n\t\tthrow(\"SpriteSheetBuilder cannot be cloned.\");\r\n\t};\r\n\r\n\t/**\r\n\t * Returns a string representation of this object.\r\n\t * @method toString\r\n\t * @return {String} a string representation of the instance.\r\n\t **/\r\n\tp.toString = function() {\r\n\t\treturn \"[SpriteSheetBuilder]\";\r\n\t};\r\n\r\n\r\n// private methods:\r\n\t/**\r\n\t * @method _startBuild\r\n\t * @protected\r\n\t **/\r\n\tp._startBuild = function() {\r\n\t\tvar pad = this.padding||0;\r\n\t\tthis.progress = 0;\r\n\t\tthis.spriteSheet = null;\r\n\t\tthis._index = 0;\r\n\t\tthis._scale = this.scale;\r\n\t\tvar dataFrames = [];\r\n\t\tthis._data = {\r\n\t\t\timages: [],\r\n\t\t\tframes: dataFrames,\r\n\t\t\tframerate: this.framerate,\r\n\t\t\tanimations: this._animations // TODO: should we \"clone\" _animations in case someone adds more animations after a build?\r\n\t\t};\r\n\r\n\t\tvar frames = this._frames.slice();\r\n\t\tframes.sort(function(a,b) { return (a.height<=b.height) ? -1 : 1; });\r\n\r\n\t\tif (frames[frames.length-1].height+pad*2 > this.maxHeight) { throw SpriteSheetBuilder.ERR_DIMENSIONS; }\r\n\t\tvar y=0, x=0;\r\n\t\tvar img = 0;\r\n\t\twhile (frames.length) {\r\n\t\t\tvar o = this._fillRow(frames, y, img, dataFrames, pad);\r\n\t\t\tif (o.w > x) { x = o.w; }\r\n\t\t\ty += o.h;\r\n\t\t\tif (!o.h || !frames.length) {\r\n\t\t\t\tvar canvas = createjs.createCanvas?createjs.createCanvas():document.createElement(\"canvas\");\r\n\t\t\t\tcanvas.width = this._getSize(x,this.maxWidth);\r\n\t\t\t\tcanvas.height = this._getSize(y,this.maxHeight);\r\n\t\t\t\tthis._data.images[img] = canvas;\r\n\t\t\t\tif (!o.h) {\r\n\t\t\t\t\tx=y=0;\r\n\t\t\t\t\timg++;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\t\r\n\t/**\r\n\t * @method _setupMovieClipFrame\r\n\t * @protected\r\n\t * @return {Number} The width & height of the row.\r\n\t **/\r\n\tp._setupMovieClipFrame = function(source, data) {\r\n\t\tvar ae = source.actionsEnabled;\r\n\t\tsource.actionsEnabled = false;\r\n\t\tsource.gotoAndStop(data.i);\r\n\t\tsource.actionsEnabled = ae;\r\n\t\tdata.f&&data.f(source, data.d, data.i);\r\n\t};\r\n\r\n\t/**\r\n\t * @method _getSize\r\n\t * @protected\r\n\t * @return {Number} The width & height of the row.\r\n\t **/\r\n\tp._getSize = function(size,max) {\r\n\t\tvar pow = 4;\r\n\t\twhile (Math.pow(2,++pow) < size){}\r\n\t\treturn Math.min(max,Math.pow(2,pow));\r\n\t};\r\n\r\n\t/**\r\n\t * @method _fillRow\r\n\t * @param {Array} frames\r\n\t * @param {Number} y\r\n\t * @param {HTMLImageElement} img\r\n\t * @param {Object} dataFrames\r\n\t * @param {Number} pad\r\n\t * @protected\r\n\t * @return {Number} The width & height of the row.\r\n\t **/\r\n\tp._fillRow = function(frames, y, img, dataFrames, pad) {\r\n\t\tvar w = this.maxWidth;\r\n\t\tvar maxH = this.maxHeight;\r\n\t\ty += pad;\r\n\t\tvar h = maxH-y;\r\n\t\tvar x = pad;\r\n\t\tvar height = 0;\r\n\t\tfor (var i=frames.length-1; i>=0; i--) {\r\n\t\t\tvar frame = frames[i];\r\n\t\t\tvar sc = this._scale*frame.scale;\r\n\t\t\tvar rect = frame.sourceRect;\r\n\t\t\tvar source = frame.source;\r\n\t\t\tvar rx = Math.floor(sc*rect.x-pad);\r\n\t\t\tvar ry = Math.floor(sc*rect.y-pad);\r\n\t\t\tvar rh = Math.ceil(sc*rect.height+pad*2);\r\n\t\t\tvar rw = Math.ceil(sc*rect.width+pad*2);\r\n\t\t\tif (rw > w) { throw SpriteSheetBuilder.ERR_DIMENSIONS; }\r\n\t\t\tif (rh > h || x+rw > w) { continue; }\r\n\t\t\tframe.img = img;\r\n\t\t\tframe.rect = new createjs.Rectangle(x,y,rw,rh);\r\n\t\t\theight = height || rh;\r\n\t\t\tframes.splice(i,1);\r\n\t\t\tdataFrames[frame.index] = [x,y,rw,rh,img,Math.round(-rx+sc*source.regX-pad),Math.round(-ry+sc*source.regY-pad)];\r\n\t\t\tx += rw;\r\n\t\t}\r\n\t\treturn {w:x, h:height};\r\n\t};\r\n\r\n\t/**\r\n\t * @method _endBuild\r\n\t * @protected\r\n\t **/\r\n\tp._endBuild = function() {\r\n\t\tthis.spriteSheet = new createjs.SpriteSheet(this._data);\r\n\t\tthis._data = null;\r\n\t\tthis.progress = 1;\r\n\t\tthis.dispatchEvent(\"complete\");\r\n\t};\r\n\r\n\t/**\r\n\t * @method _run\r\n\t * @protected\r\n\t **/\r\n\tp._run = function() {\r\n\t\tvar ts = Math.max(0.01, Math.min(0.99, this.timeSlice||0.3))*50;\r\n\t\tvar t = (new Date()).getTime()+ts;\r\n\t\tvar complete = false;\r\n\t\twhile (t > (new Date()).getTime()) {\r\n\t\t\tif (!this._drawNext()) { complete = true; break; }\r\n\t\t}\r\n\t\tif (complete) {\r\n\t\t\tthis._endBuild();\r\n\t\t} else {\r\n\t\t\tvar _this = this;\r\n\t\t\tthis._timerID = setTimeout(function() { _this._run(); }, 50-ts);\r\n\t\t}\r\n\t\tvar p = this.progress = this._index/this._frames.length;\r\n\t\tif (this.hasEventListener(\"progress\")) {\r\n\t\t\tvar evt = new createjs.Event(\"progress\");\r\n\t\t\tevt.progress = p;\r\n\t\t\tthis.dispatchEvent(evt);\r\n\t\t}\r\n\t};\r\n\r\n\t/**\r\n\t * @method _drawNext\r\n\t * @protected\r\n\t * @return Boolean Returns false if this is the last draw.\r\n\t **/\r\n\tp._drawNext = function() {\r\n\t\tvar frame = this._frames[this._index];\r\n\t\tvar sc = frame.scale*this._scale;\r\n\t\tvar rect = frame.rect;\r\n\t\tvar sourceRect = frame.sourceRect;\r\n\t\tvar canvas = this._data.images[frame.img];\r\n\t\tvar ctx = canvas.getContext(\"2d\");\r\n\t\tframe.funct&&frame.funct(frame.source, frame.data);\r\n\t\tctx.save();\r\n\t\tctx.beginPath();\r\n\t\tctx.rect(rect.x, rect.y, rect.width, rect.height);\r\n\t\tctx.clip();\r\n\t\tctx.translate(Math.ceil(rect.x-sourceRect.x*sc), Math.ceil(rect.y-sourceRect.y*sc));\r\n\t\tctx.scale(sc,sc);\r\n\t\tframe.source.draw(ctx); // display object will draw itself.\r\n\t\tctx.restore();\r\n\t\treturn (++this._index) < this._frames.length;\r\n\t};\r\n\r\n\r\n\tcreatejs.SpriteSheetBuilder = createjs.promote(SpriteSheetBuilder, \"EventDispatcher\");\r\n}());\r\n\r\n//##############################################################################\r\n// DOMElement.js\r\n//##############################################################################\r\n\r\nthis.createjs = this.createjs||{};\r\n\r\n(function() {\r\n\t\"use strict\";\r\n\r\n\r\n// constructor:\r\n\t/**\r\n\t * <b>This class is still experimental, and more advanced use is likely to be buggy. Please report bugs.</b>\r\n\t *\r\n\t * A DOMElement allows you to associate a HTMLElement with the display list. It will be transformed\r\n\t * within the DOM as though it is child of the {{#crossLink \"Container\"}}{{/crossLink}} it is added to. However, it is\r\n\t * not rendered to canvas, and as such will retain whatever z-index it has relative to the canvas (ie. it will be\r\n\t * drawn in front of or behind the canvas).\r\n\t *\r\n\t * The position of a DOMElement is relative to their parent node in the DOM. It is recommended that\r\n\t * the DOM Object be added to a div that also contains the canvas so that they share the same position\r\n\t * on the page.\r\n\t *\r\n\t * DOMElement is useful for positioning HTML elements over top of canvas content, and for elements\r\n\t * that you want to display outside the bounds of the canvas. For example, a tooltip with rich HTML\r\n\t * content.\r\n\t *\r\n\t * <h4>Mouse Interaction</h4>\r\n\t *\r\n\t * DOMElement instances are not full EaselJS display objects, and do not participate in EaselJS mouse\r\n\t * events or support methods like hitTest. To get mouse events from a DOMElement, you must instead add handlers to\r\n\t * the htmlElement (note, this does not support EventDispatcher)\r\n\t *\r\n\t *      var domElement = new createjs.DOMElement(htmlElement);\r\n\t *      domElement.htmlElement.onclick = function() {\r\n\t *          console.log(\"clicked\");\r\n\t *      }\r\n\t *\r\n\t * @class DOMElement\r\n\t * @extends DisplayObject\r\n\t * @constructor\r\n\t * @param {HTMLElement} htmlElement A reference or id for the DOM element to manage.\r\n\t */\r\n\tfunction DOMElement(htmlElement) {\r\n\t\tthis.DisplayObject_constructor();\r\n\t\t\r\n\t\tif (typeof(htmlElement)==\"string\") { htmlElement = document.getElementById(htmlElement); }\r\n\t\tthis.mouseEnabled = false;\r\n\t\t\r\n\t\tvar style = htmlElement.style;\r\n\t\tstyle.position = \"absolute\";\r\n\t\tstyle.transformOrigin = style.WebkitTransformOrigin = style.msTransformOrigin = style.MozTransformOrigin = style.OTransformOrigin = \"0% 0%\";\r\n\t\t\r\n\t\t\r\n\t// public properties:\r\n\t\t/**\r\n\t\t * The DOM object to manage.\r\n\t\t * @property htmlElement\r\n\t\t * @type HTMLElement\r\n\t\t */\r\n\t\tthis.htmlElement = htmlElement;\r\n\t\r\n\t\r\n\t// private properties:\r\n\t\t/**\r\n\t\t * @property _oldMtx\r\n\t\t * @type Matrix2D\r\n\t\t * @protected\r\n\t\t */\r\n\t\tthis._oldProps = null;\r\n\t}\r\n\tvar p = createjs.extend(DOMElement, createjs.DisplayObject);\r\n\r\n\t// TODO: deprecated\r\n\t// p.initialize = function() {}; // searchable for devs wondering where it is. REMOVED. See docs for details.\r\n\r\n\r\n// public methods:\r\n\t/**\r\n\t * Returns true or false indicating whether the display object would be visible if drawn to a canvas.\r\n\t * This does not account for whether it would be visible within the boundaries of the stage.\r\n\t * NOTE: This method is mainly for internal use, though it may be useful for advanced uses.\r\n\t * @method isVisible\r\n\t * @return {Boolean} Boolean indicating whether the display object would be visible if drawn to a canvas\r\n\t */\r\n\tp.isVisible = function() {\r\n\t\treturn this.htmlElement != null;\r\n\t};\r\n\r\n\t/**\r\n\t * Draws the display object into the specified context ignoring its visible, alpha, shadow, and transform.\r\n\t * Returns true if the draw was handled (useful for overriding functionality).\r\n\t * NOTE: This method is mainly for internal use, though it may be useful for advanced uses.\r\n\t * @method draw\r\n\t * @param {CanvasRenderingContext2D} ctx The canvas 2D context object to draw into.\r\n\t * @param {Boolean} ignoreCache Indicates whether the draw operation should ignore any current cache.\r\n\t * For example, used for drawing the cache (to prevent it from simply drawing an existing cache back\r\n\t * into itself).\r\n\t * @return {Boolean}\r\n\t */\r\n\tp.draw = function(ctx, ignoreCache) {\r\n\t\t// this relies on the _tick method because draw isn't called if the parent is not visible.\r\n\t\t// the actual update happens in _handleDrawEnd\r\n\t\treturn true;\r\n\t};\r\n\r\n\t/**\r\n\t * Not applicable to DOMElement.\r\n\t * @method cache\r\n\t */\r\n\tp.cache = function() {};\r\n\r\n\t/**\r\n\t * Not applicable to DOMElement.\r\n\t * @method uncache\r\n\t */\r\n\tp.uncache = function() {};\r\n\r\n\t/**\r\n\t * Not applicable to DOMElement.\r\n\t * @method updateCache\r\n\t */\r\n\tp.updateCache = function() {};\r\n\r\n\t/**\r\n\t * Not applicable to DOMElement.\r\n\t * @method hitTest\r\n\t */\r\n\tp.hitTest = function() {};\r\n\r\n\t/**\r\n\t * Not applicable to DOMElement.\r\n\t * @method localToGlobal\r\n\t */\r\n\tp.localToGlobal = function() {};\r\n\r\n\t/**\r\n\t * Not applicable to DOMElement.\r\n\t * @method globalToLocal\r\n\t */\r\n\tp.globalToLocal = function() {};\r\n\r\n\t/**\r\n\t * Not applicable to DOMElement.\r\n\t * @method localToLocal\r\n\t */\r\n\tp.localToLocal = function() {};\r\n\r\n\t/**\r\n\t * DOMElement cannot be cloned. Throws an error.\r\n\t * @method clone\r\n\t */\r\n\tp.clone = function() {\r\n\t\tthrow(\"DOMElement cannot be cloned.\")\r\n\t};\r\n\r\n\t/**\r\n\t * Returns a string representation of this object.\r\n\t * @method toString\r\n\t * @return {String} a string representation of the instance.\r\n\t */\r\n\tp.toString = function() {\r\n\t\treturn \"[DOMElement (name=\"+  this.name +\")]\";\r\n\t};\r\n\r\n\t/**\r\n     * Interaction events should be added to `htmlElement`, and not the DOMElement instance, since DOMElement instances\r\n\t * are not full EaselJS display objects and do not participate in EaselJS mouse events.\r\n\t * @event click\r\n\t */\r\n\r\n     /**\r\n     * Interaction events should be added to `htmlElement`, and not the DOMElement instance, since DOMElement instances\r\n \t * are not full EaselJS display objects and do not participate in EaselJS mouse events.\r\n\t * @event dblClick\r\n\t */\r\n\r\n     /**\r\n      * Interaction events should be added to `htmlElement`, and not the DOMElement instance, since DOMElement instances\r\n \t  * are not full EaselJS display objects and do not participate in EaselJS mouse events.\r\n\t  * @event mousedown\r\n\t  */\r\n\r\n     /**\r\n      * The HTMLElement can listen for the mouseover event, not the DOMElement instance.\r\n      * Since DOMElement instances are not full EaselJS display objects and do not participate in EaselJS mouse events.\r\n      * @event mouseover\r\n\t  */\r\n\r\n     /**\r\n      * Not applicable to DOMElement.\r\n\t  * @event tick\r\n\t  */\r\n\r\n\r\n// private methods:\r\n\t/**\r\n\t * @method _tick\r\n\t * @param {Object} evtObj An event object that will be dispatched to all tick listeners. This object is reused between dispatchers to reduce construction & GC costs.\r\n\t * function.\r\n\t * @protected\r\n\t */\r\n\tp._tick = function(evtObj) {\r\n\t\tvar stage = this.getStage();\r\n\t\tstage&&stage.on(\"drawend\", this._handleDrawEnd, this, true);\r\n\t\tthis.DisplayObject__tick(evtObj);\r\n\t};\r\n\t\r\n\t/**\r\n\t * @method _handleDrawEnd\r\n\t * @param {Event} evt\r\n\t * @protected\r\n\t */\r\n\tp._handleDrawEnd = function(evt) {\r\n\t\tvar o = this.htmlElement;\r\n\t\tif (!o) { return; }\r\n\t\tvar style = o.style;\r\n\t\t\r\n\t\tvar props = this.getConcatenatedDisplayProps(this._props), mtx = props.matrix;\r\n\t\t\r\n\t\tvar visibility = props.visible ? \"visible\" : \"hidden\";\r\n\t\tif (visibility != style.visibility) { style.visibility = visibility; }\r\n\t\tif (!props.visible) { return; }\r\n\t\t\r\n\t\tvar oldProps = this._oldProps, oldMtx = oldProps&&oldProps.matrix;\r\n\t\tvar n = 10000; // precision\r\n\t\t\r\n\t\tif (!oldMtx || !oldMtx.equals(mtx)) {\r\n\t\t\tvar str = \"matrix(\" + (mtx.a*n|0)/n +\",\"+ (mtx.b*n|0)/n +\",\"+ (mtx.c*n|0)/n +\",\"+ (mtx.d*n|0)/n +\",\"+ (mtx.tx+0.5|0);\r\n\t\t\tstyle.transform = style.WebkitTransform = style.OTransform = style.msTransform = str +\",\"+ (mtx.ty+0.5|0) +\")\";\r\n\t\t\tstyle.MozTransform = str +\"px,\"+ (mtx.ty+0.5|0) +\"px)\";\r\n\t\t\tif (!oldProps) { oldProps = this._oldProps = new createjs.DisplayProps(true, NaN); }\r\n\t\t\toldProps.matrix.copy(mtx);\r\n\t\t}\r\n\t\t\r\n\t\tif (oldProps.alpha != props.alpha) {\r\n\t\t\tstyle.opacity = \"\"+(props.alpha*n|0)/n;\r\n\t\t\toldProps.alpha = props.alpha;\r\n\t\t}\r\n\t};\r\n\r\n\r\n\tcreatejs.DOMElement = createjs.promote(DOMElement, \"DisplayObject\");\r\n}());\r\n\r\n//##############################################################################\r\n// Filter.js\r\n//##############################################################################\r\n\r\nthis.createjs = this.createjs||{};\r\n\r\n(function() {\r\n\t\"use strict\";\r\n\r\n\r\n// constructor:\r\n\t/**\r\n\t * Base class that all filters should inherit from. Filters need to be applied to objects that have been cached using\r\n\t * the {{#crossLink \"DisplayObject/cache\"}}{{/crossLink}} method. If an object changes, please cache it again, or use\r\n\t * {{#crossLink \"DisplayObject/updateCache\"}}{{/crossLink}}. Note that the filters must be applied before caching.\r\n\t *\r\n\t * <h4>Example</h4>\r\n\t *\r\n\t *      myInstance.filters = [\r\n\t *          new createjs.ColorFilter(0, 0, 0, 1, 255, 0, 0),\r\n\t *          new createjs.BlurFilter(5, 5, 10)\r\n\t *      ];\r\n\t *      myInstance.cache(0,0, 100, 100);\r\n\t *\r\n\t * Note that each filter can implement a {{#crossLink \"Filter/getBounds\"}}{{/crossLink}} method, which returns the\r\n\t * margins that need to be applied in order to fully display the filter. For example, the {{#crossLink \"BlurFilter\"}}{{/crossLink}}\r\n\t * will cause an object to feather outwards, resulting in a margin around the shape.\r\n\t *\r\n\t * <h4>EaselJS Filters</h4>\r\n\t * EaselJS comes with a number of pre-built filters:\r\n\t * <ul><li>{{#crossLink \"AlphaMapFilter\"}}{{/crossLink}} : Map a greyscale image to the alpha channel of a display object</li>\r\n\t *      <li>{{#crossLink \"AlphaMaskFilter\"}}{{/crossLink}}: Map an image's alpha channel to the alpha channel of a display object</li>\r\n\t *      <li>{{#crossLink \"BlurFilter\"}}{{/crossLink}}: Apply vertical and horizontal blur to a display object</li>\r\n\t *      <li>{{#crossLink \"ColorFilter\"}}{{/crossLink}}: Color transform a display object</li>\r\n\t *      <li>{{#crossLink \"ColorMatrixFilter\"}}{{/crossLink}}: Transform an image using a {{#crossLink \"ColorMatrix\"}}{{/crossLink}}</li>\r\n\t * </ul>\r\n\t *\r\n\t * @class Filter\r\n\t * @constructor\r\n\t **/\r\n\tfunction Filter() {}\r\n\tvar p = Filter.prototype;\r\n\r\n\t/**\r\n\t * <strong>REMOVED</strong>. Removed in favor of using `MySuperClass_constructor`.\r\n\t * See {{#crossLink \"Utility Methods/extend\"}}{{/crossLink}} and {{#crossLink \"Utility Methods/promote\"}}{{/crossLink}}\r\n\t * for details.\r\n\t *\r\n\t * There is an inheritance tutorial distributed with EaselJS in /tutorials/Inheritance.\r\n\t *\r\n\t * @method initialize\r\n\t * @protected\r\n\t * @deprecated\r\n\t */\r\n\t// p.initialize = function() {}; // searchable for devs wondering where it is.\r\n\r\n\r\n// public methods:\r\n\t/**\r\n\t * Provides padding values for this filter. That is, how much the filter will extend the visual bounds of an object it is applied to.\r\n\t * @method getBounds\r\n\t * @param {Rectangle} [rect] If specified, the provided Rectangle instance will be expanded by the padding amounts and returned.\r\n\t * @return {Rectangle} If a `rect` param was provided, it is returned. If not, either a new rectangle with the padding values, or null if no padding is required for this filter.\r\n\t **/\r\n\tp.getBounds = function(rect) {\r\n\t\treturn rect;\r\n\t};\r\n\r\n\t/**\r\n\t * Applies the filter to the specified context.\r\n\t * @method applyFilter\r\n\t * @param {CanvasRenderingContext2D} ctx The 2D context to use as the source.\r\n\t * @param {Number} x The x position to use for the source rect.\r\n\t * @param {Number} y The y position to use for the source rect.\r\n\t * @param {Number} width The width to use for the source rect.\r\n\t * @param {Number} height The height to use for the source rect.\r\n\t * @param {CanvasRenderingContext2D} [targetCtx] The 2D context to draw the result to. Defaults to the context passed to ctx.\r\n\t * @param {Number} [targetX] The x position to draw the result to. Defaults to the value passed to x.\r\n\t * @param {Number} [targetY] The y position to draw the result to. Defaults to the value passed to y.\r\n\t * @return {Boolean} If the filter was applied successfully.\r\n\t **/\r\n\tp.applyFilter = function(ctx, x, y, width, height, targetCtx, targetX, targetY) {\r\n\t\t// this is the default behaviour because most filters access pixel data. It is overridden when not needed.\r\n\t\ttargetCtx = targetCtx || ctx;\r\n\t\tif (targetX == null) { targetX = x; }\r\n\t\tif (targetY == null) { targetY = y; }\r\n\t\ttry {\r\n\t\t\tvar imageData = ctx.getImageData(x, y, width, height);\r\n\t\t} catch (e) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tif (this._applyFilter(imageData)) {\r\n\t\t\ttargetCtx.putImageData(imageData, targetX, targetY);\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\treturn false;\r\n\t};\r\n\r\n\t/**\r\n\t * Returns a string representation of this object.\r\n\t * @method toString\r\n\t * @return {String} a string representation of the instance.\r\n\t **/\r\n\tp.toString = function() {\r\n\t\treturn \"[Filter]\";\r\n\t};\r\n\r\n\t/**\r\n\t * Returns a clone of this Filter instance.\r\n\t * @method clone\r\n\t * @return {Filter} A clone of the current Filter instance.\r\n\t **/\r\n\tp.clone = function() {\r\n\t\treturn new Filter();\r\n\t};\r\n\t\r\n// private methods:\r\n\t/**\r\n\t * @method _applyFilter\r\n\t * @param {ImageData} imageData Target ImageData instance.\r\n\t * @return {Boolean}\r\n\t **/\r\n\tp._applyFilter = function(imageData) { return true; };\r\n\r\n\r\n\tcreatejs.Filter = Filter;\r\n}());\r\n\r\n//##############################################################################\r\n// BlurFilter.js\r\n//##############################################################################\r\n\r\nthis.createjs = this.createjs||{};\r\n\r\n(function() {\r\n\t\"use strict\";\r\n\r\n\r\n// constructor:\r\n\t/**\r\n\t * Applies a box blur to DisplayObjects. Note that this filter is fairly CPU intensive, particularly if the quality is\r\n\t * set higher than 1.\r\n\t *\r\n\t * <h4>Example</h4>\r\n\t * This example creates a red circle, and then applies a 5 pixel blur to it. It uses the {{#crossLink \"Filter/getBounds\"}}{{/crossLink}}\r\n\t * method to account for the spread that the blur causes.\r\n\t *\r\n\t *      var shape = new createjs.Shape().set({x:100,y:100});\r\n\t *      shape.graphics.beginFill(\"#ff0000\").drawCircle(0,0,50);\r\n\t *\r\n\t *      var blurFilter = new createjs.BlurFilter(5, 5, 1);\r\n\t *      shape.filters = [blurFilter];\r\n\t *      var bounds = blurFilter.getBounds();\r\n\t *\r\n\t *      shape.cache(-50+bounds.x, -50+bounds.y, 100+bounds.width, 100+bounds.height);\r\n\t *\r\n\t * See {{#crossLink \"Filter\"}}{{/crossLink}} for an more information on applying filters.\r\n\t * @class BlurFilter\r\n\t * @extends Filter\r\n\t * @constructor\r\n\t * @param {Number} [blurX=0] The horizontal blur radius in pixels.\r\n\t * @param {Number} [blurY=0] The vertical blur radius in pixels.\r\n\t * @param {Number} [quality=1] The number of blur iterations.\r\n\t **/\r\n\tfunction BlurFilter( blurX, blurY, quality) {\r\n\t\tif ( isNaN(blurX) || blurX < 0 ) blurX = 0;\r\n\t\tif ( isNaN(blurY) || blurY < 0 ) blurY = 0;\r\n\t\tif ( isNaN(quality) || quality < 1  ) quality = 1;\r\n\r\n\r\n\t\t// public properties:\r\n\t\t/**\r\n\t\t * Horizontal blur radius in pixels\r\n\t\t * @property blurX\r\n\t\t * @default 0\r\n\t\t * @type Number\r\n\t\t **/\r\n\t\tthis.blurX = blurX | 0;\r\n\r\n\t\t/**\r\n\t\t * Vertical blur radius in pixels\r\n\t\t * @property blurY\r\n\t\t * @default 0\r\n\t\t * @type Number\r\n\t\t **/\r\n\t\tthis.blurY = blurY | 0;\r\n\r\n\t\t/**\r\n\t\t * Number of blur iterations. For example, a value of 1 will produce a rough blur. A value of 2 will produce a\r\n\t\t * smoother blur, but take twice as long to run.\r\n\t\t * @property quality\r\n\t\t * @default 1\r\n\t\t * @type Number\r\n\t\t **/\r\n\t\tthis.quality = quality | 0;\r\n\t}\r\n\tvar p = createjs.extend(BlurFilter, createjs.Filter);\r\n\r\n\t// TODO: deprecated\r\n\t// p.initialize = function() {}; // searchable for devs wondering where it is. REMOVED. See docs for details.\r\n\r\n\r\n// constants:\r\n\t/**\r\n\t * Array of multiply values for blur calculations.\r\n\t * @property MUL_TABLE\r\n\t * @type Array\r\n\t * @protected\r\n\t * @static\r\n\t **/\r\n\tBlurFilter.MUL_TABLE = [1, 171, 205, 293, 57, 373, 79, 137, 241, 27, 391, 357, 41, 19, 283, 265, 497, 469, 443, 421, 25, 191, 365, 349, 335, 161, 155, 149, 9, 278, 269, 261, 505, 245, 475, 231, 449, 437, 213, 415, 405, 395, 193, 377, 369, 361, 353, 345, 169, 331, 325, 319, 313, 307, 301, 37, 145, 285, 281, 69, 271, 267, 263, 259, 509, 501, 493, 243, 479, 118, 465, 459, 113, 446, 55, 435, 429, 423, 209, 413, 51, 403, 199, 393, 97, 3, 379, 375, 371, 367, 363, 359, 355, 351, 347, 43, 85, 337, 333, 165, 327, 323, 5, 317, 157, 311, 77, 305, 303, 75, 297, 294, 73, 289, 287, 71, 141, 279, 277, 275, 68, 135, 67, 133, 33, 262, 260, 129, 511, 507, 503, 499, 495, 491, 61, 121, 481, 477, 237, 235, 467, 232, 115, 457, 227, 451, 7, 445, 221, 439, 218, 433, 215, 427, 425, 211, 419, 417, 207, 411, 409, 203, 202, 401, 399, 396, 197, 49, 389, 387, 385, 383, 95, 189, 47, 187, 93, 185, 23, 183, 91, 181, 45, 179, 89, 177, 11, 175, 87, 173, 345, 343, 341, 339, 337, 21, 167, 83, 331, 329, 327, 163, 81, 323, 321, 319, 159, 79, 315, 313, 39, 155, 309, 307, 153, 305, 303, 151, 75, 299, 149, 37, 295, 147, 73, 291, 145, 289, 287, 143, 285, 71, 141, 281, 35, 279, 139, 69, 275, 137, 273, 17, 271, 135, 269, 267, 133, 265, 33, 263, 131, 261, 130, 259, 129, 257, 1];\r\n\r\n\t/**\r\n\t * Array of shift values for blur calculations.\r\n\t * @property SHG_TABLE\r\n\t * @type Array\r\n\t * @protected\r\n\t * @static\r\n\t **/\r\n\tBlurFilter.SHG_TABLE = [0, 9, 10, 11, 9, 12, 10, 11, 12, 9, 13, 13, 10, 9, 13, 13, 14, 14, 14, 14, 10, 13, 14, 14, 14, 13, 13, 13, 9, 14, 14, 14, 15, 14, 15, 14, 15, 15, 14, 15, 15, 15, 14, 15, 15, 15, 15, 15, 14, 15, 15, 15, 15, 15, 15, 12, 14, 15, 15, 13, 15, 15, 15, 15, 16, 16, 16, 15, 16, 14, 16, 16, 14, 16, 13, 16, 16, 16, 15, 16, 13, 16, 15, 16, 14, 9, 16, 16, 16, 16, 16, 16, 16, 16, 16, 13, 14, 16, 16, 15, 16, 16, 10, 16, 15, 16, 14, 16, 16, 14, 16, 16, 14, 16, 16, 14, 15, 16, 16, 16, 14, 15, 14, 15, 13, 16, 16, 15, 17, 17, 17, 17, 17, 17, 14, 15, 17, 17, 16, 16, 17, 16, 15, 17, 16, 17, 11, 17, 16, 17, 16, 17, 16, 17, 17, 16, 17, 17, 16, 17, 17, 16, 16, 17, 17, 17, 16, 14, 17, 17, 17, 17, 15, 16, 14, 16, 15, 16, 13, 16, 15, 16, 14, 16, 15, 16, 12, 16, 15, 16, 17, 17, 17, 17, 17, 13, 16, 15, 17, 17, 17, 16, 15, 17, 17, 17, 16, 15, 17, 17, 14, 16, 17, 17, 16, 17, 17, 16, 15, 17, 16, 14, 17, 16, 15, 17, 16, 17, 17, 16, 17, 15, 16, 17, 14, 17, 16, 15, 17, 16, 17, 13, 17, 16, 17, 17, 16, 17, 14, 17, 16, 17, 16, 17, 16, 17, 9];\r\n\r\n// public methods:\r\n\t/** docced in super class **/\r\n\tp.getBounds = function (rect) {\r\n\t\tvar x = this.blurX|0, y = this.blurY| 0;\r\n\t\tif (x <= 0 && y <= 0) { return rect; }\r\n\t\tvar q = Math.pow(this.quality, 0.2);\r\n\t\treturn (rect || new createjs.Rectangle()).pad(x*q+1,y*q+1,x*q+1,y*q+1);\r\n\t};\r\n\r\n\t/** docced in super class **/\r\n\tp.clone = function() {\r\n\t\treturn new BlurFilter(this.blurX, this.blurY, this.quality);\r\n\t};\r\n\r\n\t/** docced in super class **/\r\n\tp.toString = function() {\r\n\t\treturn \"[BlurFilter]\";\r\n\t};\r\n\r\n\r\n// private methods:\r\n\r\n\t/** docced in super class **/\r\n\tp._applyFilter = function (imageData) {\r\n\r\n\t\tvar radiusX = this.blurX >> 1;\r\n\t\tif (isNaN(radiusX) || radiusX < 0) return false;\r\n\t\tvar radiusY = this.blurY >> 1;\r\n\t\tif (isNaN(radiusY) || radiusY < 0) return false;\r\n\t\tif (radiusX == 0 && radiusY == 0) return false;\r\n\r\n\t\tvar iterations = this.quality;\r\n\t\tif (isNaN(iterations) || iterations < 1) iterations = 1;\r\n\t\titerations |= 0;\r\n\t\tif (iterations > 3) iterations = 3;\r\n\t\tif (iterations < 1) iterations = 1;\r\n\r\n\t\tvar px = imageData.data;\r\n\t\tvar x=0, y=0, i=0, p=0, yp=0, yi=0, yw=0, r=0, g=0, b=0, a=0, pr=0, pg=0, pb=0, pa=0;\r\n\r\n\t\tvar divx = (radiusX + radiusX + 1) | 0;\r\n\t\tvar divy = (radiusY + radiusY + 1) | 0;\r\n\t\tvar w = imageData.width | 0;\r\n\t\tvar h = imageData.height | 0;\r\n\r\n\t\tvar w1 = (w - 1) | 0;\r\n\t\tvar h1 = (h - 1) | 0;\r\n\t\tvar rxp1 = (radiusX + 1) | 0;\r\n\t\tvar ryp1 = (radiusY + 1) | 0;\r\n\r\n\t\tvar ssx = {r:0,b:0,g:0,a:0};\r\n\t\tvar sx = ssx;\r\n\t\tfor ( i = 1; i < divx; i++ )\r\n\t\t{\r\n\t\t\tsx = sx.n = {r:0,b:0,g:0,a:0};\r\n\t\t}\r\n\t\tsx.n = ssx;\r\n\r\n\t\tvar ssy = {r:0,b:0,g:0,a:0};\r\n\t\tvar sy = ssy;\r\n\t\tfor ( i = 1; i < divy; i++ )\r\n\t\t{\r\n\t\t\tsy = sy.n = {r:0,b:0,g:0,a:0};\r\n\t\t}\r\n\t\tsy.n = ssy;\r\n\r\n\t\tvar si = null;\r\n\r\n\r\n\t\tvar mtx = BlurFilter.MUL_TABLE[radiusX] | 0;\r\n\t\tvar stx = BlurFilter.SHG_TABLE[radiusX] | 0;\r\n\t\tvar mty = BlurFilter.MUL_TABLE[radiusY] | 0;\r\n\t\tvar sty = BlurFilter.SHG_TABLE[radiusY] | 0;\r\n\r\n\t\twhile (iterations-- > 0) {\r\n\r\n\t\t\tyw = yi = 0;\r\n\t\t\tvar ms = mtx;\r\n\t\t\tvar ss = stx;\r\n\t\t\tfor (y = h; --y > -1;) {\r\n\t\t\t\tr = rxp1 * (pr = px[(yi) | 0]);\r\n\t\t\t\tg = rxp1 * (pg = px[(yi + 1) | 0]);\r\n\t\t\t\tb = rxp1 * (pb = px[(yi + 2) | 0]);\r\n\t\t\t\ta = rxp1 * (pa = px[(yi + 3) | 0]);\r\n\r\n\t\t\t\tsx = ssx;\r\n\r\n\t\t\t\tfor( i = rxp1; --i > -1; )\r\n\t\t\t\t{\r\n\t\t\t\t\tsx.r = pr;\r\n\t\t\t\t\tsx.g = pg;\r\n\t\t\t\t\tsx.b = pb;\r\n\t\t\t\t\tsx.a = pa;\r\n\t\t\t\t\tsx = sx.n;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfor( i = 1; i < rxp1; i++ )\r\n\t\t\t\t{\r\n\t\t\t\t\tp = (yi + ((w1 < i ? w1 : i) << 2)) | 0;\r\n\t\t\t\t\tr += ( sx.r = px[p]);\r\n\t\t\t\t\tg += ( sx.g = px[p+1]);\r\n\t\t\t\t\tb += ( sx.b = px[p+2]);\r\n\t\t\t\t\ta += ( sx.a = px[p+3]);\r\n\r\n\t\t\t\t\tsx = sx.n;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tsi = ssx;\r\n\t\t\t\tfor ( x = 0; x < w; x++ )\r\n\t\t\t\t{\r\n\t\t\t\t\tpx[yi++] = (r * ms) >>> ss;\r\n\t\t\t\t\tpx[yi++] = (g * ms) >>> ss;\r\n\t\t\t\t\tpx[yi++] = (b * ms) >>> ss;\r\n\t\t\t\t\tpx[yi++] = (a * ms) >>> ss;\r\n\r\n\t\t\t\t\tp = ((yw + ((p = x + radiusX + 1) < w1 ? p : w1)) << 2);\r\n\r\n\t\t\t\t\tr -= si.r - ( si.r = px[p]);\r\n\t\t\t\t\tg -= si.g - ( si.g = px[p+1]);\r\n\t\t\t\t\tb -= si.b - ( si.b = px[p+2]);\r\n\t\t\t\t\ta -= si.a - ( si.a = px[p+3]);\r\n\r\n\t\t\t\t\tsi = si.n;\r\n\r\n\t\t\t\t}\r\n\t\t\t\tyw += w;\r\n\t\t\t}\r\n\r\n\t\t\tms = mty;\r\n\t\t\tss = sty;\r\n\t\t\tfor (x = 0; x < w; x++) {\r\n\t\t\t\tyi = (x << 2) | 0;\r\n\r\n\t\t\t\tr = (ryp1 * (pr = px[yi])) | 0;\r\n\t\t\t\tg = (ryp1 * (pg = px[(yi + 1) | 0])) | 0;\r\n\t\t\t\tb = (ryp1 * (pb = px[(yi + 2) | 0])) | 0;\r\n\t\t\t\ta = (ryp1 * (pa = px[(yi + 3) | 0])) | 0;\r\n\r\n\t\t\t\tsy = ssy;\r\n\t\t\t\tfor( i = 0; i < ryp1; i++ )\r\n\t\t\t\t{\r\n\t\t\t\t\tsy.r = pr;\r\n\t\t\t\t\tsy.g = pg;\r\n\t\t\t\t\tsy.b = pb;\r\n\t\t\t\t\tsy.a = pa;\r\n\t\t\t\t\tsy = sy.n;\r\n\t\t\t\t}\r\n\r\n\t\t\t\typ = w;\r\n\r\n\t\t\t\tfor( i = 1; i <= radiusY; i++ )\r\n\t\t\t\t{\r\n\t\t\t\t\tyi = ( yp + x ) << 2;\r\n\r\n\t\t\t\t\tr += ( sy.r = px[yi]);\r\n\t\t\t\t\tg += ( sy.g = px[yi+1]);\r\n\t\t\t\t\tb += ( sy.b = px[yi+2]);\r\n\t\t\t\t\ta += ( sy.a = px[yi+3]);\r\n\r\n\t\t\t\t\tsy = sy.n;\r\n\r\n\t\t\t\t\tif( i < h1 )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\typ += w;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tyi = x;\r\n\t\t\t\tsi = ssy;\r\n\t\t\t\tif ( iterations > 0 )\r\n\t\t\t\t{\r\n\t\t\t\t\tfor ( y = 0; y < h; y++ )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tp = yi << 2;\r\n\t\t\t\t\t\tpx[p+3] = pa =(a * ms) >>> ss;\r\n\t\t\t\t\t\tif ( pa > 0 )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tpx[p]   = ((r * ms) >>> ss );\r\n\t\t\t\t\t\t\tpx[p+1] = ((g * ms) >>> ss );\r\n\t\t\t\t\t\t\tpx[p+2] = ((b * ms) >>> ss );\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tpx[p] = px[p+1] = px[p+2] = 0\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tp = ( x + (( ( p = y + ryp1) < h1 ? p : h1 ) * w )) << 2;\r\n\r\n\t\t\t\t\t\tr -= si.r - ( si.r = px[p]);\r\n\t\t\t\t\t\tg -= si.g - ( si.g = px[p+1]);\r\n\t\t\t\t\t\tb -= si.b - ( si.b = px[p+2]);\r\n\t\t\t\t\t\ta -= si.a - ( si.a = px[p+3]);\r\n\r\n\t\t\t\t\t\tsi = si.n;\r\n\r\n\t\t\t\t\t\tyi += w;\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tfor ( y = 0; y < h; y++ )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tp = yi << 2;\r\n\t\t\t\t\t\tpx[p+3] = pa =(a * ms) >>> ss;\r\n\t\t\t\t\t\tif ( pa > 0 )\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tpa = 255 / pa;\r\n\t\t\t\t\t\t\tpx[p]   = ((r * ms) >>> ss ) * pa;\r\n\t\t\t\t\t\t\tpx[p+1] = ((g * ms) >>> ss ) * pa;\r\n\t\t\t\t\t\t\tpx[p+2] = ((b * ms) >>> ss ) * pa;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tpx[p] = px[p+1] = px[p+2] = 0\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tp = ( x + (( ( p = y + ryp1) < h1 ? p : h1 ) * w )) << 2;\r\n\r\n\t\t\t\t\t\tr -= si.r - ( si.r = px[p]);\r\n\t\t\t\t\t\tg -= si.g - ( si.g = px[p+1]);\r\n\t\t\t\t\t\tb -= si.b - ( si.b = px[p+2]);\r\n\t\t\t\t\t\ta -= si.a - ( si.a = px[p+3]);\r\n\r\n\t\t\t\t\t\tsi = si.n;\r\n\r\n\t\t\t\t\t\tyi += w;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t\treturn true;\r\n\t};\r\n\r\n\tcreatejs.BlurFilter = createjs.promote(BlurFilter, \"Filter\");\r\n}());\r\n\r\n//##############################################################################\r\n// AlphaMapFilter.js\r\n//##############################################################################\r\n\r\nthis.createjs = this.createjs || {};\r\n\r\n(function () {\r\n\t\"use strict\";\r\n\t\r\n\t\r\n// constructor:\r\n\t/**\r\n\t * Applies a greyscale alpha map image (or canvas) to the target, such that the alpha channel of the result will\r\n\t * be copied from the red channel of the map, and the RGB channels will be copied from the target.\r\n\t *\r\n\t * Generally, it is recommended that you use {{#crossLink \"AlphaMaskFilter\"}}{{/crossLink}}, because it has much\r\n\t * better performance.\r\n\t *\r\n\t * <h4>Example</h4>\r\n\t * This example draws a red->blue box, caches it, and then uses the cache canvas as an alpha map on a 100x100 image.\r\n\t *\r\n\t *       var box = new createjs.Shape();\r\n\t *       box.graphics.beginLinearGradientFill([\"#ff0000\", \"#0000ff\"], [0, 1], 0, 0, 0, 100)\r\n\t *       box.graphics.drawRect(0, 0, 100, 100);\r\n\t *       box.cache(0, 0, 100, 100);\r\n\t *\r\n\t *       var bmp = new createjs.Bitmap(\"path/to/image.jpg\");\r\n\t *       bmp.filters = [\r\n\t *           new createjs.AlphaMapFilter(box.cacheCanvas)\r\n\t *       ];\r\n\t *       bmp.cache(0, 0, 100, 100);\r\n\t *       stage.addChild(bmp);\r\n\t *\r\n\t * See {{#crossLink \"Filter\"}}{{/crossLink}} for more information on applying filters.\r\n\t * @class AlphaMapFilter\r\n\t * @extends Filter\r\n\t * @constructor\r\n\t * @param {HTMLImageElement|HTMLCanvasElement} alphaMap The greyscale image (or canvas) to use as the alpha value for the\r\n\t * result. This should be exactly the same dimensions as the target.\r\n\t **/\r\n\tfunction AlphaMapFilter(alphaMap) {\r\n\t\r\n\t\r\n\t// public properties:\r\n\t\t/**\r\n\t\t * The greyscale image (or canvas) to use as the alpha value for the result. This should be exactly the same\r\n\t\t * dimensions as the target.\r\n\t\t * @property alphaMap\r\n\t\t * @type HTMLImageElement|HTMLCanvasElement\r\n\t\t **/\r\n\t\tthis.alphaMap = alphaMap;\r\n\t\t\r\n\t\t\r\n\t// private properties:\r\n\t\t/**\r\n\t\t * @property _alphaMap\r\n\t\t * @protected\r\n\t\t * @type HTMLImageElement|HTMLCanvasElement\r\n\t\t **/\r\n\t\tthis._alphaMap = null;\r\n\t\t\r\n\t\t/**\r\n\t\t * @property _mapData\r\n\t\t * @protected\r\n\t\t * @type Uint8ClampedArray\r\n\t\t **/\r\n\t\tthis._mapData = null;\r\n\t}\r\n\tvar p = createjs.extend(AlphaMapFilter, createjs.Filter);\r\n\r\n\t// TODO: deprecated\r\n\t// p.initialize = function() {}; // searchable for devs wondering where it is. REMOVED. See docs for details.\r\n\r\n\r\n// public methods:\r\n\t/** docced in super class **/\r\n\tp.clone = function () {\r\n\t\tvar o = new AlphaMapFilter(this.alphaMap);\r\n\t\to._alphaMap = this._alphaMap;\r\n\t\to._mapData = this._mapData;\r\n\t\treturn o;\r\n\t};\r\n\r\n\t/** docced in super class **/\r\n\tp.toString = function () {\r\n\t\treturn \"[AlphaMapFilter]\";\r\n\t};\r\n\r\n\r\n// private methods:\r\n\t/** docced in super class **/\r\n\tp._applyFilter = function (imageData) {\r\n\t\tif (!this.alphaMap) { return true; }\r\n\t\tif (!this._prepAlphaMap()) { return false; }\r\n\t\t\r\n\t\t// TODO: update to support scenarios where the target has different dimensions.\r\n\t\tvar data = imageData.data;\r\n\t\tvar map = this._mapData;\r\n\t\tfor(var i=0, l=data.length; i<l; i += 4) { data[i + 3] = map[i] || 0; }\r\n\t\t\r\n\t\treturn true;\r\n\t};\r\n\r\n\t/**\r\n\t * @method _prepAlphaMap\r\n\t * @protected\r\n\t **/\r\n\tp._prepAlphaMap = function () {\r\n\t\tif (!this.alphaMap) { return false; }\r\n\t\tif (this.alphaMap == this._alphaMap && this._mapData) { return true; }\r\n\r\n\t\tthis._mapData = null;\r\n\t\tvar map = this._alphaMap = this.alphaMap;\r\n\t\tvar canvas = map;\r\n\t\tvar ctx;\r\n\t\tif (map instanceof HTMLCanvasElement) {\r\n\t\t\tctx = canvas.getContext(\"2d\");\r\n\t\t} else {\r\n\t\t\tcanvas = createjs.createCanvas ? createjs.createCanvas() : document.createElement(\"canvas\");\r\n\t\t\tcanvas.width = map.width;\r\n\t\t\tcanvas.height = map.height;\r\n\t\t\tctx = canvas.getContext(\"2d\");\r\n\t\t\tctx.drawImage(map, 0, 0);\r\n\t\t}\r\n\r\n\t\ttry {\r\n\t\t\tvar imgData = ctx.getImageData(0, 0, map.width, map.height);\r\n\t\t} catch (e) {\r\n\t\t\t//if (!this.suppressCrossDomainErrors) throw new Error(\"unable to access local image data: \" + e);\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\t\r\n\t\tthis._mapData = imgData.data;\r\n\t\treturn true;\r\n\t};\r\n\r\n\r\n\tcreatejs.AlphaMapFilter = createjs.promote(AlphaMapFilter, \"Filter\");\r\n}());\r\n\r\n//##############################################################################\r\n// AlphaMaskFilter.js\r\n//##############################################################################\r\n\r\nthis.createjs = this.createjs || {};\r\n\r\n(function () {\r\n\t\"use strict\";\r\n\r\n\r\n// constructor:\r\n\t/**\r\n\t * Applies the alpha from the mask image (or canvas) to the target, such that the alpha channel of the result will\r\n\t * be derived from the mask, and the RGB channels will be copied from the target. This can be used, for example, to\r\n\t * apply an alpha mask to a display object. This can also be used to combine a JPG compressed RGB image with a PNG32\r\n\t * alpha mask, which can result in a much smaller file size than a single PNG32 containing ARGB.\r\n\t *\r\n\t * <b>IMPORTANT NOTE: This filter currently does not support the targetCtx, or targetX/Y parameters correctly.</b>\r\n\t *\r\n\t * <h4>Example</h4>\r\n\t * This example draws a gradient box, then caches it and uses the \"cacheCanvas\" as the alpha mask on a 100x100 image.\r\n\t *\r\n\t *      var box = new createjs.Shape();\r\n\t *      box.graphics.beginLinearGradientFill([\"#000000\", \"rgba(0, 0, 0, 0)\"], [0, 1], 0, 0, 100, 100)\r\n\t *      box.graphics.drawRect(0, 0, 100, 100);\r\n\t *      box.cache(0, 0, 100, 100);\r\n\t *\r\n\t *      var bmp = new createjs.Bitmap(\"path/to/image.jpg\");\r\n\t *      bmp.filters = [\r\n\t *          new createjs.AlphaMaskFilter(box.cacheCanvas)\r\n\t *      ];\r\n\t *      bmp.cache(0, 0, 100, 100);\r\n\t *\r\n\t * See {{#crossLink \"Filter\"}}{{/crossLink}} for more information on applying filters.\r\n\t * @class AlphaMaskFilter\r\n\t * @extends Filter\r\n\t * @constructor\r\n\t * @param {HTMLImageElement|HTMLCanvasElement} mask\r\n\t **/\r\n\tfunction AlphaMaskFilter(mask) {\r\n\t\r\n\t\r\n\t// public properties:\r\n\t\t/**\r\n\t\t * The image (or canvas) to use as the mask.\r\n\t\t * @property mask\r\n\t\t * @type HTMLImageElement|HTMLCanvasElement\r\n\t\t **/\r\n\t\tthis.mask = mask;\r\n\t}\r\n\tvar p = createjs.extend(AlphaMaskFilter, createjs.Filter);\r\n\r\n\t// TODO: deprecated\r\n\t// p.initialize = function() {}; // searchable for devs wondering where it is. REMOVED. See docs for details.\r\n\t\r\n\r\n// public methods:\r\n\t/**\r\n\t * Applies the filter to the specified context.\r\n\t *\r\n\t * <strong>IMPORTANT NOTE: This filter currently does not support the targetCtx, or targetX/Y parameters\r\n\t * correctly.</strong>\r\n\t * @method applyFilter\r\n\t * @param {CanvasRenderingContext2D} ctx The 2D context to use as the source.\r\n\t * @param {Number} x The x position to use for the source rect.\r\n\t * @param {Number} y The y position to use for the source rect.\r\n\t * @param {Number} width The width to use for the source rect.\r\n\t * @param {Number} height The height to use for the source rect.\r\n\t * @param {CanvasRenderingContext2D} [targetCtx] NOT SUPPORTED IN THIS FILTER. The 2D context to draw the result to. Defaults to the context passed to ctx.\r\n\t * @param {Number} [targetX] NOT SUPPORTED IN THIS FILTER. The x position to draw the result to. Defaults to the value passed to x.\r\n\t * @param {Number} [targetY] NOT SUPPORTED IN THIS FILTER. The y position to draw the result to. Defaults to the value passed to y.\r\n\t * @return {Boolean} If the filter was applied successfully.\r\n\t **/\r\n\tp.applyFilter = function (ctx, x, y, width, height, targetCtx, targetX, targetY) {\r\n\t\tif (!this.mask) { return true; }\r\n\t\ttargetCtx = targetCtx || ctx;\r\n\t\tif (targetX == null) { targetX = x; }\r\n\t\tif (targetY == null) { targetY = y; }\r\n\r\n\t\ttargetCtx.save();\r\n\t\tif (ctx != targetCtx) {\r\n\t\t\t// TODO: support targetCtx and targetX/Y\r\n\t\t\t// clearRect, then draw the ctx in?\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\ttargetCtx.globalCompositeOperation = \"destination-in\";\r\n\t\ttargetCtx.drawImage(this.mask, targetX, targetY);\r\n\t\ttargetCtx.restore();\r\n\t\treturn true;\r\n\t};\r\n\r\n\t/** docced in super class **/\r\n\tp.clone = function () {\r\n\t\treturn new AlphaMaskFilter(this.mask);\r\n\t};\r\n\r\n\t/** docced in super class **/\r\n\tp.toString = function () {\r\n\t\treturn \"[AlphaMaskFilter]\";\r\n\t};\r\n\r\n\r\n\tcreatejs.AlphaMaskFilter = createjs.promote(AlphaMaskFilter, \"Filter\");\r\n}());\r\n\r\n//##############################################################################\r\n// ColorFilter.js\r\n//##############################################################################\r\n\r\nthis.createjs = this.createjs||{};\r\n\r\n(function() {\r\n\t\"use strict\";\r\n\r\n\r\n// constructor:\r\n\t/**\r\n\t * Applies a color transform to DisplayObjects.\r\n\t *\r\n\t * <h4>Example</h4>\r\n\t * This example draws a red circle, and then transforms it to Blue. This is accomplished by multiplying all the channels\r\n\t * to 0 (except alpha, which is set to 1), and then adding 255 to the blue channel.\r\n\t *\r\n\t *      var shape = new createjs.Shape().set({x:100,y:100});\r\n\t *      shape.graphics.beginFill(\"#ff0000\").drawCircle(0,0,50);\r\n\t *\r\n\t *      shape.filters = [\r\n\t *          new createjs.ColorFilter(0,0,0,1, 0,0,255,0)\r\n\t *      ];\r\n\t *      shape.cache(-50, -50, 100, 100);\r\n\t *\r\n\t * See {{#crossLink \"Filter\"}}{{/crossLink}} for an more information on applying filters.\r\n\t * @class ColorFilter\r\n\t * @param {Number} [redMultiplier=1] The amount to multiply against the red channel. This is a range between 0 and 1.\r\n\t * @param {Number} [greenMultiplier=1] The amount to multiply against the green channel. This is a range between 0 and 1.\r\n\t * @param {Number} [blueMultiplier=1] The amount to multiply against the blue channel. This is a range between 0 and 1.\r\n\t * @param {Number} [alphaMultiplier=1] The amount to multiply against the alpha channel. This is a range between 0 and 1.\r\n\t * @param {Number} [redOffset=0] The amount to add to the red channel after it has been multiplied. This is a range\r\n\t * between -255 and 255.\r\n\t * @param {Number} [greenOffset=0] The amount to add to the green channel after it has been multiplied. This is a range\r\n\t  * between -255 and 255.\r\n\t * @param {Number} [blueOffset=0] The amount to add to the blue channel after it has been multiplied. This is a range\r\n\t  * between -255 and 255.\r\n\t * @param {Number} [alphaOffset=0] The amount to add to the alpha channel after it has been multiplied. This is a range\r\n\t  * between -255 and 255.\r\n\t * @constructor\r\n\t * @extends Filter\r\n\t **/\r\n\tfunction ColorFilter(redMultiplier, greenMultiplier, blueMultiplier, alphaMultiplier, redOffset, greenOffset, blueOffset, alphaOffset) {\r\n\t\t\r\n\t\r\n\t// public properties:\r\n\t\t/**\r\n\t\t * Red channel multiplier.\r\n\t\t * @property redMultiplier\r\n\t\t * @type Number\r\n\t\t **/\r\n\t\tthis.redMultiplier = redMultiplier != null ? redMultiplier : 1;\r\n\t\r\n\t\t/**\r\n\t\t * Green channel multiplier.\r\n\t\t * @property greenMultiplier\r\n\t\t * @type Number\r\n\t\t **/\r\n\t\tthis.greenMultiplier = greenMultiplier != null ? greenMultiplier : 1;\r\n\t\r\n\t\t/**\r\n\t\t * Blue channel multiplier.\r\n\t\t * @property blueMultiplier\r\n\t\t * @type Number\r\n\t\t **/\r\n\t\tthis.blueMultiplier = blueMultiplier != null ? blueMultiplier : 1;\r\n\t\r\n\t\t/**\r\n\t\t * Alpha channel multiplier.\r\n\t\t * @property alphaMultiplier\r\n\t\t * @type Number\r\n\t\t **/\r\n\t\tthis.alphaMultiplier = alphaMultiplier != null ? alphaMultiplier : 1;\r\n\t\r\n\t\t/**\r\n\t\t * Red channel offset (added to value).\r\n\t\t * @property redOffset\r\n\t\t * @type Number\r\n\t\t **/\r\n\t\tthis.redOffset = redOffset || 0;\r\n\t\r\n\t\t/**\r\n\t\t * Green channel offset (added to value).\r\n\t\t * @property greenOffset\r\n\t\t * @type Number\r\n\t\t **/\r\n\t\tthis.greenOffset = greenOffset || 0;\r\n\t\r\n\t\t/**\r\n\t\t * Blue channel offset (added to value).\r\n\t\t * @property blueOffset\r\n\t\t * @type Number\r\n\t\t **/\r\n\t\tthis.blueOffset = blueOffset || 0;\r\n\t\r\n\t\t/**\r\n\t\t * Alpha channel offset (added to value).\r\n\t\t * @property alphaOffset\r\n\t\t * @type Number\r\n\t\t **/\r\n\t\tthis.alphaOffset = alphaOffset || 0;\r\n\t}\r\n\tvar p = createjs.extend(ColorFilter, createjs.Filter);\r\n\r\n\t// TODO: deprecated\r\n\t// p.initialize = function() {}; // searchable for devs wondering where it is. REMOVED. See docs for details.\r\n\r\n\r\n// public methods:\r\n\t/** docced in super class **/\r\n\tp.toString = function() {\r\n\t\treturn \"[ColorFilter]\";\r\n\t};\r\n\r\n\t/** docced in super class **/\r\n\tp.clone = function() {\r\n\t\treturn new ColorFilter(this.redMultiplier, this.greenMultiplier, this.blueMultiplier, this.alphaMultiplier, this.redOffset, this.greenOffset, this.blueOffset, this.alphaOffset);\r\n\t};\r\n\t\r\n\r\n// private methods:\r\n\t/** docced in super class **/\r\n\tp._applyFilter = function(imageData) {\r\n\t\tvar data = imageData.data;\r\n\t\tvar l = data.length;\r\n\t\tfor (var i=0; i<l; i+=4) {\r\n\t\t\tdata[i] = data[i]*this.redMultiplier+this.redOffset;\r\n\t\t\tdata[i+1] = data[i+1]*this.greenMultiplier+this.greenOffset;\r\n\t\t\tdata[i+2] = data[i+2]*this.blueMultiplier+this.blueOffset;\r\n\t\t\tdata[i+3] = data[i+3]*this.alphaMultiplier+this.alphaOffset;\r\n\t\t}\r\n\t\treturn true;\r\n\t};\r\n\r\n\r\n\tcreatejs.ColorFilter = createjs.promote(ColorFilter, \"Filter\");\r\n}());\r\n\r\n//##############################################################################\r\n// ColorMatrix.js\r\n//##############################################################################\r\n\r\nthis.createjs = this.createjs||{};\r\n\r\n(function() {\r\n\t\"use strict\";\r\n\r\n\r\n// constructor:\r\n\t/**\r\n\t * Provides helper functions for assembling a matrix for use with the {{#crossLink \"ColorMatrixFilter\"}}{{/crossLink}}.\r\n\t * Most methods return the instance to facilitate chained calls.\r\n\t *\r\n\t * <h4>Example</h4>\r\n\t *\r\n\t *      myColorMatrix.adjustHue(20).adjustBrightness(50);\r\n\t *\r\n\t * See {{#crossLink \"Filter\"}}{{/crossLink}} for an example of how to apply filters, or {{#crossLink \"ColorMatrixFilter\"}}{{/crossLink}}\r\n\t * for an example of how to use ColorMatrix to change a DisplayObject's color.\r\n\t * @class ColorMatrix\r\n\t * @param {Number} brightness\r\n\t * @param {Number} contrast\r\n\t * @param {Number} saturation\r\n\t * @param {Number} hue\r\n\t * @constructor\r\n\t **/\r\n\tfunction ColorMatrix(brightness, contrast, saturation, hue) {\r\n\t\tthis.setColor(brightness, contrast, saturation, hue);\r\n\t}\r\n\tvar p = ColorMatrix.prototype;\r\n\r\n\t/**\r\n\t * <strong>REMOVED</strong>. Removed in favor of using `MySuperClass_constructor`.\r\n\t * See {{#crossLink \"Utility Methods/extend\"}}{{/crossLink}} and {{#crossLink \"Utility Methods/promote\"}}{{/crossLink}}\r\n\t * for details.\r\n\t *\r\n\t * There is an inheritance tutorial distributed with EaselJS in /tutorials/Inheritance.\r\n\t *\r\n\t * @method initialize\r\n\t * @protected\r\n\t * @deprecated\r\n\t */\r\n\t// p.initialize = function() {}; // searchable for devs wondering where it is.\r\n\r\n\r\n// constants:\r\n\t/**\r\n\t * Array of delta values for contrast calculations.\r\n\t * @property DELTA_INDEX\r\n\t * @type Array\r\n\t * @protected\r\n\t * @static\r\n\t **/\r\n\tColorMatrix.DELTA_INDEX = [\r\n\t\t0,    0.01, 0.02, 0.04, 0.05, 0.06, 0.07, 0.08, 0.1,  0.11,\r\n\t\t0.12, 0.14, 0.15, 0.16, 0.17, 0.18, 0.20, 0.21, 0.22, 0.24,\r\n\t\t0.25, 0.27, 0.28, 0.30, 0.32, 0.34, 0.36, 0.38, 0.40, 0.42,\r\n\t\t0.44, 0.46, 0.48, 0.5,  0.53, 0.56, 0.59, 0.62, 0.65, 0.68,\r\n\t\t0.71, 0.74, 0.77, 0.80, 0.83, 0.86, 0.89, 0.92, 0.95, 0.98,\r\n\t\t1.0,  1.06, 1.12, 1.18, 1.24, 1.30, 1.36, 1.42, 1.48, 1.54,\r\n\t\t1.60, 1.66, 1.72, 1.78, 1.84, 1.90, 1.96, 2.0,  2.12, 2.25,\r\n\t\t2.37, 2.50, 2.62, 2.75, 2.87, 3.0,  3.2,  3.4,  3.6,  3.8,\r\n\t\t4.0,  4.3,  4.7,  4.9,  5.0,  5.5,  6.0,  6.5,  6.8,  7.0,\r\n\t\t7.3,  7.5,  7.8,  8.0,  8.4,  8.7,  9.0,  9.4,  9.6,  9.8,\r\n\t\t10.0\r\n\t];\r\n\r\n\t/**\r\n\t * Identity matrix values.\r\n\t * @property IDENTITY_MATRIX\r\n\t * @type Array\r\n\t * @protected\r\n\t * @static\r\n\t **/\r\n\tColorMatrix.IDENTITY_MATRIX = [\r\n\t\t1,0,0,0,0,\r\n\t\t0,1,0,0,0,\r\n\t\t0,0,1,0,0,\r\n\t\t0,0,0,1,0,\r\n\t\t0,0,0,0,1\r\n\t];\r\n\r\n\t/**\r\n\t * The constant length of a color matrix.\r\n\t * @property LENGTH\r\n\t * @type Number\r\n\t * @protected\r\n\t * @static\r\n\t **/\r\n\tColorMatrix.LENGTH = ColorMatrix.IDENTITY_MATRIX.length;\r\n\r\n\r\n// public methods:\r\n\t/**\r\n\t * Resets the instance with the specified values.\r\n\t * @method setColor\r\n\t * @param {Number} brightness\r\n\t * @param {Number} contrast\r\n\t * @param {Number} saturation\r\n\t * @param {Number} hue\r\n\t * @return {ColorMatrix} The ColorMatrix instance the method is called on (useful for chaining calls.)\r\n\t * @chainable\r\n\t */\r\n\tp.setColor = function(brightness,contrast,saturation,hue) {\r\n\t\treturn this.reset().adjustColor(brightness,contrast,saturation,hue);\r\n\t};\r\n\r\n\t/**\r\n\t * Resets the matrix to identity values.\r\n\t * @method reset\r\n\t * @return {ColorMatrix} The ColorMatrix instance the method is called on (useful for chaining calls.)\r\n\t * @chainable\r\n\t */\r\n\tp.reset = function() {\r\n\t\treturn this.copy(ColorMatrix.IDENTITY_MATRIX);\r\n\t};\r\n\r\n\t/**\r\n\t * Shortcut method to adjust brightness, contrast, saturation and hue.\r\n\t * Equivalent to calling adjustHue(hue), adjustContrast(contrast),\r\n\t * adjustBrightness(brightness), adjustSaturation(saturation), in that order.\r\n\t * @method adjustColor\r\n\t * @param {Number} brightness\r\n\t * @param {Number} contrast\r\n\t * @param {Number} saturation\r\n\t * @param {Number} hue\r\n\t * @return {ColorMatrix} The ColorMatrix instance the method is called on (useful for chaining calls.)\r\n\t * @chainable\r\n\t **/\r\n\tp.adjustColor = function(brightness,contrast,saturation,hue) {\r\n\t\tthis.adjustHue(hue);\r\n\t\tthis.adjustContrast(contrast);\r\n\t\tthis.adjustBrightness(brightness);\r\n\t\treturn this.adjustSaturation(saturation);\r\n\t};\r\n\r\n\t/**\r\n\t * Adjusts the brightness of pixel color by adding the specified value to the red, green and blue channels.\r\n\t * Positive values will make the image brighter, negative values will make it darker.\r\n\t * @method adjustBrightness\r\n\t * @param {Number} value A value between -255 & 255 that will be added to the RGB channels.\r\n\t * @return {ColorMatrix} The ColorMatrix instance the method is called on (useful for chaining calls.)\r\n\t * @chainable\r\n\t **/\r\n\tp.adjustBrightness = function(value) {\r\n\t\tif (value == 0 || isNaN(value)) { return this; }\r\n\t\tvalue = this._cleanValue(value,255);\r\n\t\tthis._multiplyMatrix([\r\n\t\t\t1,0,0,0,value,\r\n\t\t\t0,1,0,0,value,\r\n\t\t\t0,0,1,0,value,\r\n\t\t\t0,0,0,1,0,\r\n\t\t\t0,0,0,0,1\r\n\t\t]);\r\n\t\treturn this;\r\n\t};\r\n\r\n\t/**\r\n\t * Adjusts the contrast of pixel color.\r\n\t * Positive values will increase contrast, negative values will decrease contrast.\r\n\t * @method adjustContrast\r\n\t * @param {Number} value A value between -100 & 100.\r\n\t * @return {ColorMatrix} The ColorMatrix instance the method is called on (useful for chaining calls.)\r\n\t * @chainable\r\n\t **/\r\n\tp.adjustContrast = function(value) {\r\n\t\tif (value == 0 || isNaN(value)) { return this; }\r\n\t\tvalue = this._cleanValue(value,100);\r\n\t\tvar x;\r\n\t\tif (value<0) {\r\n\t\t\tx = 127+value/100*127;\r\n\t\t} else {\r\n\t\t\tx = value%1;\r\n\t\t\tif (x == 0) {\r\n\t\t\t\tx = ColorMatrix.DELTA_INDEX[value];\r\n\t\t\t} else {\r\n\t\t\t\tx = ColorMatrix.DELTA_INDEX[(value<<0)]*(1-x)+ColorMatrix.DELTA_INDEX[(value<<0)+1]*x; // use linear interpolation for more granularity.\r\n\t\t\t}\r\n\t\t\tx = x*127+127;\r\n\t\t}\r\n\t\tthis._multiplyMatrix([\r\n\t\t\tx/127,0,0,0,0.5*(127-x),\r\n\t\t\t0,x/127,0,0,0.5*(127-x),\r\n\t\t\t0,0,x/127,0,0.5*(127-x),\r\n\t\t\t0,0,0,1,0,\r\n\t\t\t0,0,0,0,1\r\n\t\t]);\r\n\t\treturn this;\r\n\t};\r\n\r\n\t/**\r\n\t * Adjusts the color saturation of the pixel.\r\n\t * Positive values will increase saturation, negative values will decrease saturation (trend towards greyscale).\r\n\t * @method adjustSaturation\r\n\t * @param {Number} value A value between -100 & 100.\r\n\t * @return {ColorMatrix} The ColorMatrix instance the method is called on (useful for chaining calls.)\r\n\t * @chainable\r\n\t **/\r\n\tp.adjustSaturation = function(value) {\r\n\t\tif (value == 0 || isNaN(value)) { return this; }\r\n\t\tvalue = this._cleanValue(value,100);\r\n\t\tvar x = 1+((value > 0) ? 3*value/100 : value/100);\r\n\t\tvar lumR = 0.3086;\r\n\t\tvar lumG = 0.6094;\r\n\t\tvar lumB = 0.0820;\r\n\t\tthis._multiplyMatrix([\r\n\t\t\tlumR*(1-x)+x,lumG*(1-x),lumB*(1-x),0,0,\r\n\t\t\tlumR*(1-x),lumG*(1-x)+x,lumB*(1-x),0,0,\r\n\t\t\tlumR*(1-x),lumG*(1-x),lumB*(1-x)+x,0,0,\r\n\t\t\t0,0,0,1,0,\r\n\t\t\t0,0,0,0,1\r\n\t\t]);\r\n\t\treturn this;\r\n\t};\r\n\r\n\r\n\t/**\r\n\t * Adjusts the hue of the pixel color.\r\n\t * @method adjustHue\r\n\t * @param {Number} value A value between -180 & 180.\r\n\t * @return {ColorMatrix} The ColorMatrix instance the method is called on (useful for chaining calls.)\r\n\t * @chainable\r\n\t **/\r\n\tp.adjustHue = function(value) {\r\n\t\tif (value == 0 || isNaN(value)) { return this; }\r\n\t\tvalue = this._cleanValue(value,180)/180*Math.PI;\r\n\t\tvar cosVal = Math.cos(value);\r\n\t\tvar sinVal = Math.sin(value);\r\n\t\tvar lumR = 0.213;\r\n\t\tvar lumG = 0.715;\r\n\t\tvar lumB = 0.072;\r\n\t\tthis._multiplyMatrix([\r\n\t\t\tlumR+cosVal*(1-lumR)+sinVal*(-lumR),lumG+cosVal*(-lumG)+sinVal*(-lumG),lumB+cosVal*(-lumB)+sinVal*(1-lumB),0,0,\r\n\t\t\tlumR+cosVal*(-lumR)+sinVal*(0.143),lumG+cosVal*(1-lumG)+sinVal*(0.140),lumB+cosVal*(-lumB)+sinVal*(-0.283),0,0,\r\n\t\t\tlumR+cosVal*(-lumR)+sinVal*(-(1-lumR)),lumG+cosVal*(-lumG)+sinVal*(lumG),lumB+cosVal*(1-lumB)+sinVal*(lumB),0,0,\r\n\t\t\t0,0,0,1,0,\r\n\t\t\t0,0,0,0,1\r\n\t\t]);\r\n\t\treturn this;\r\n\t};\r\n\r\n\t/**\r\n\t * Concatenates (multiplies) the specified matrix with this one.\r\n\t * @method concat\r\n\t * @param {Array} matrix An array or ColorMatrix instance.\r\n\t * @return {ColorMatrix} The ColorMatrix instance the method is called on (useful for chaining calls.)\r\n\t * @chainable\r\n\t **/\r\n\tp.concat = function(matrix) {\r\n\t\tmatrix = this._fixMatrix(matrix);\r\n\t\tif (matrix.length != ColorMatrix.LENGTH) { return this; }\r\n\t\tthis._multiplyMatrix(matrix);\r\n\t\treturn this;\r\n\t};\r\n\r\n\t/**\r\n\t * Returns a clone of this ColorMatrix.\r\n\t * @method clone\r\n\t * @return {ColorMatrix} A clone of this ColorMatrix.\r\n\t **/\r\n\tp.clone = function() {\r\n\t\treturn (new ColorMatrix()).copy(this);\r\n\t};\r\n\r\n\t/**\r\n\t * Return a length 25 (5x5) array instance containing this matrix's values.\r\n\t * @method toArray\r\n\t * @return {Array} An array holding this matrix's values.\r\n\t **/\r\n\tp.toArray = function() {\r\n\t\tvar arr = [];\r\n\t\tfor (var i= 0, l=ColorMatrix.LENGTH; i<l; i++) {\r\n\t\t\tarr[i] = this[i];\r\n\t\t}\r\n\t\treturn arr;\r\n\t};\r\n\r\n\t/**\r\n\t * Copy the specified matrix's values to this matrix.\r\n\t * @method copy\r\n\t * @param {Array} matrix An array or ColorMatrix instance.\r\n\t * @return {ColorMatrix} The ColorMatrix instance the method is called on (useful for chaining calls.)\r\n\t * @chainable\r\n\t **/\r\n\tp.copy = function(matrix) {\r\n\t\tvar l = ColorMatrix.LENGTH;\r\n\t\tfor (var i=0;i<l;i++) {\r\n\t\t\tthis[i] = matrix[i];\r\n\t\t}\r\n\t\treturn this;\r\n\t};\r\n\t\r\n\t/**\r\n\t * Returns a string representation of this object.\r\n\t * @method toString\r\n\t * @return {String} a string representation of the instance.\r\n\t **/\r\n\tp.toString = function() {\r\n\t\treturn \"[ColorMatrix]\";\r\n\t};\r\n\r\n\r\n// private methods:\r\n\t/**\r\n\t * @method _multiplyMatrix\r\n\t * @param {Array} matrix\r\n\t * @protected\r\n\t **/\r\n\tp._multiplyMatrix = function(matrix) {\r\n\t\tvar i, j, k, col = [];\r\n\r\n\t\tfor (i=0;i<5;i++) {\r\n\t\t\tfor (j=0;j<5;j++) {\r\n\t\t\t\tcol[j] = this[j+i*5];\r\n\t\t\t}\r\n\t\t\tfor (j=0;j<5;j++) {\r\n\t\t\t\tvar val=0;\r\n\t\t\t\tfor (k=0;k<5;k++) {\r\n\t\t\t\t\tval += matrix[j+k*5]*col[k];\r\n\t\t\t\t}\r\n\t\t\t\tthis[j+i*5] = val;\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\t/**\r\n\t * Make sure values are within the specified range, hue has a limit of 180, brightness is 255, others are 100.\r\n\t * @method _cleanValue\r\n\t * @param {Number} value The raw number\r\n\t * @param {Number} limit The maximum that the number can be. The minimum is the limit * -1.\r\n\t * @protected\r\n\t **/\r\n\tp._cleanValue = function(value, limit) {\r\n\t\treturn Math.min(limit,Math.max(-limit,value));\r\n\t};\r\n\r\n\t/**\r\n\t * Makes sure matrixes are 5x5 (25 long).\r\n\t * @method _fixMatrix\r\n\t * @param {Array} matrix\r\n\t * @protected\r\n\t **/\r\n\tp._fixMatrix = function(matrix) {\r\n\t\tif (matrix instanceof ColorMatrix) { matrix = matrix.toArray(); }\r\n\t\tif (matrix.length < ColorMatrix.LENGTH) {\r\n\t\t\tmatrix = matrix.slice(0,matrix.length).concat(ColorMatrix.IDENTITY_MATRIX.slice(matrix.length,ColorMatrix.LENGTH));\r\n\t\t} else if (matrix.length > ColorMatrix.LENGTH) {\r\n\t\t\tmatrix = matrix.slice(0,ColorMatrix.LENGTH);\r\n\t\t}\r\n\t\treturn matrix;\r\n\t};\r\n\r\n\r\n\tcreatejs.ColorMatrix = ColorMatrix;\r\n}());\r\n\r\n//##############################################################################\r\n// ColorMatrixFilter.js\r\n//##############################################################################\r\n\r\nthis.createjs = this.createjs||{};\r\n\r\n(function() {\r\n\t\"use strict\";\r\n\r\n\r\n// constructor:\r\n\t/**\r\n\t * Allows you to carry out complex color operations such as modifying saturation, brightness, or inverting. See the\r\n\t * {{#crossLink \"ColorMatrix\"}}{{/crossLink}} for more information on changing colors. For an easier color transform,\r\n\t * consider the {{#crossLink \"ColorFilter\"}}{{/crossLink}}.\r\n\t *\r\n\t * <h4>Example</h4>\r\n\t * This example creates a red circle, inverts its hue, and then saturates it to brighten it up.\r\n\t *\r\n\t *      var shape = new createjs.Shape().set({x:100,y:100});\r\n\t *      shape.graphics.beginFill(\"#ff0000\").drawCircle(0,0,50);\r\n\t *\r\n\t *      var matrix = new createjs.ColorMatrix().adjustHue(180).adjustSaturation(100);\r\n\t *      shape.filters = [\r\n\t *          new createjs.ColorMatrixFilter(matrix)\r\n\t *      ];\r\n\t *\r\n\t *      shape.cache(-50, -50, 100, 100);\r\n\t *\r\n\t * See {{#crossLink \"Filter\"}}{{/crossLink}} for an more information on applying filters.\r\n\t * @class ColorMatrixFilter\r\n\t * @constructor\r\n\t * @extends Filter\r\n\t * @param {Array | ColorMatrix} matrix A 4x5 matrix describing the color operation to perform. See also the {{#crossLink \"ColorMatrix\"}}{{/crossLink}}\r\n\t * class.\r\n\t **/\r\n\tfunction ColorMatrixFilter(matrix) {\r\n\t\r\n\t\t\r\n\t// public properties:\r\n\t\t/**\r\n\t\t * A 4x5 matrix describing the color operation to perform. See also the {{#crossLink \"ColorMatrix\"}}{{/crossLink}}\r\n\t\t * @property matrix\r\n\t\t * @type Array | ColorMatrix\r\n\t\t **/\r\n\t\tthis.matrix = matrix;\r\n\t}\r\n\tvar p = createjs.extend(ColorMatrixFilter, createjs.Filter);\r\n\r\n\t// TODO: deprecated\r\n\t// p.initialize = function() {}; // searchable for devs wondering where it is. REMOVED. See docs for details.\r\n\t\r\n\r\n// public methods:\r\n\t/** docced in super class **/\r\n\tp.toString = function() {\r\n\t\treturn \"[ColorMatrixFilter]\";\r\n\t};\r\n\r\n\t/** docced in super class **/\r\n\tp.clone = function() {\r\n\t\treturn new ColorMatrixFilter(this.matrix);\r\n\t};\r\n\r\n// private methods:\r\n\t/** docced in super class **/\r\n\tp._applyFilter = function(imageData) { \r\n\t\tvar data = imageData.data;\r\n\t\tvar l = data.length;\r\n\t\tvar r,g,b,a;\r\n\t\tvar mtx = this.matrix;\r\n\t\tvar m0 =  mtx[0],  m1 =  mtx[1],  m2 =  mtx[2],  m3 =  mtx[3],  m4 =  mtx[4];\r\n\t\tvar m5 =  mtx[5],  m6 =  mtx[6],  m7 =  mtx[7],  m8 =  mtx[8],  m9 =  mtx[9];\r\n\t\tvar m10 = mtx[10], m11 = mtx[11], m12 = mtx[12], m13 = mtx[13], m14 = mtx[14];\r\n\t\tvar m15 = mtx[15], m16 = mtx[16], m17 = mtx[17], m18 = mtx[18], m19 = mtx[19];\r\n\r\n\t\tfor (var i=0; i<l; i+=4) {\r\n\t\t\tr = data[i];\r\n\t\t\tg = data[i+1];\r\n\t\t\tb = data[i+2];\r\n\t\t\ta = data[i+3];\r\n\t\t\tdata[i] = r*m0+g*m1+b*m2+a*m3+m4; // red\r\n\t\t\tdata[i+1] = r*m5+g*m6+b*m7+a*m8+m9; // green\r\n\t\t\tdata[i+2] = r*m10+g*m11+b*m12+a*m13+m14; // blue\r\n\t\t\tdata[i+3] = r*m15+g*m16+b*m17+a*m18+m19; // alpha\r\n\t\t}\r\n\t\treturn true;\r\n\t};\r\n\r\n\r\n\tcreatejs.ColorMatrixFilter = createjs.promote(ColorMatrixFilter, \"Filter\");\r\n}());\r\n\r\n//##############################################################################\r\n// Touch.js\r\n//##############################################################################\r\n\r\nthis.createjs = this.createjs||{};\r\n\r\n(function() {\r\n\t\"use strict\";\r\n\r\n\r\n// constructor:\r\n\t/**\r\n * Global utility for working with multi-touch enabled devices in EaselJS. Currently supports W3C Touch API (iOS and\r\n * modern Android browser) and the Pointer API (IE), including ms-prefixed events in IE10, and unprefixed in IE11.\r\n *\r\n * Ensure that you {{#crossLink \"Touch/disable\"}}{{/crossLink}} touch when cleaning up your application. You do not have\r\n * to check if touch is supported to enable it, as it will fail gracefully if it is not supported.\r\n *\r\n * <h4>Example</h4>\r\n *\r\n *      var stage = new createjs.Stage(\"canvasId\");\r\n *      createjs.Touch.enable(stage);\r\n *\r\n * <strong>Note:</strong> It is important to disable Touch on a stage that you are no longer using:\r\n *\r\n *      createjs.Touch.disable(stage);\r\n *\r\n * @class Touch\r\n * @static\r\n **/\r\n\tfunction Touch() {\r\n\t\tthrow \"Touch cannot be instantiated\";\r\n\t}\r\n\r\n\r\n// public static methods:\r\n\t/**\r\n\t * Returns `true` if touch is supported in the current browser.\r\n\t * @method isSupported\r\n\t * @return {Boolean} Indicates whether touch is supported in the current browser.\r\n\t * @static\r\n\t **/\r\n\tTouch.isSupported = function() {\r\n\t\treturn\t!!(('ontouchstart' in window) // iOS & Android\r\n\t\t\t|| (window.navigator['msPointerEnabled'] && window.navigator['msMaxTouchPoints'] > 0) // IE10\r\n\t\t\t|| (window.navigator['pointerEnabled'] && window.navigator['maxTouchPoints'] > 0)); // IE11+\r\n\t};\r\n\r\n\t/**\r\n\t * Enables touch interaction for the specified EaselJS {{#crossLink \"Stage\"}}{{/crossLink}}. Currently supports iOS\r\n\t * (and compatible browsers, such as modern Android browsers), and IE10/11. Supports both single touch and\r\n\t * multi-touch modes. Extends the EaselJS {{#crossLink \"MouseEvent\"}}{{/crossLink}} model, but without support for\r\n\t * double click or over/out events. See the MouseEvent {{#crossLink \"MouseEvent/pointerId:property\"}}{{/crossLink}}\r\n\t * for more information.\r\n\t * @method enable\r\n\t * @param {Stage} stage The {{#crossLink \"Stage\"}}{{/crossLink}} to enable touch on.\r\n\t * @param {Boolean} [singleTouch=false] If `true`, only a single touch will be active at a time.\r\n\t * @param {Boolean} [allowDefault=false] If `true`, then default gesture actions (ex. scrolling, zooming) will be\r\n\t * allowed when the user is interacting with the target canvas.\r\n\t * @return {Boolean} Returns `true` if touch was successfully enabled on the target stage.\r\n\t * @static\r\n\t **/\r\n\tTouch.enable = function(stage, singleTouch, allowDefault) {\r\n\t\tif (!stage || !stage.canvas || !Touch.isSupported()) { return false; }\r\n\t\tif (stage.__touch) { return true; }\r\n\r\n\t\t// inject required properties on stage:\r\n\t\tstage.__touch = {pointers:{}, multitouch:!singleTouch, preventDefault:!allowDefault, count:0};\r\n\r\n\t\t// note that in the future we may need to disable the standard mouse event model before adding\r\n\t\t// these to prevent duplicate calls. It doesn't seem to be an issue with iOS devices though.\r\n\t\tif ('ontouchstart' in window) { Touch._IOS_enable(stage); }\r\n\t\telse if (window.navigator['msPointerEnabled'] || window.navigator[\"pointerEnabled\"]) { Touch._IE_enable(stage); }\r\n\t\treturn true;\r\n\t};\r\n\r\n\t/**\r\n\t * Removes all listeners that were set up when calling `Touch.enable()` on a stage.\r\n\t * @method disable\r\n\t * @param {Stage} stage The {{#crossLink \"Stage\"}}{{/crossLink}} to disable touch on.\r\n\t * @static\r\n\t **/\r\n\tTouch.disable = function(stage) {\r\n\t\tif (!stage) { return; }\r\n\t\tif ('ontouchstart' in window) { Touch._IOS_disable(stage); }\r\n\t\telse if (window.navigator['msPointerEnabled'] || window.navigator[\"pointerEnabled\"]) { Touch._IE_disable(stage); }\r\n\t\t\r\n\t\tdelete stage.__touch;\r\n\t};\r\n\r\n\r\n// Private static methods:\r\n\t/**\r\n\t * @method _IOS_enable\r\n\t * @protected\r\n\t * @param {Stage} stage\r\n\t * @static\r\n\t **/\r\n\tTouch._IOS_enable = function(stage) {\r\n\t\tvar canvas = stage.canvas;\r\n\t\tvar f = stage.__touch.f = function(e) { Touch._IOS_handleEvent(stage,e); };\r\n\t\tcanvas.addEventListener(\"touchstart\", f, false);\r\n\t\tcanvas.addEventListener(\"touchmove\", f, false);\r\n\t\tcanvas.addEventListener(\"touchend\", f, false);\r\n\t\tcanvas.addEventListener(\"touchcancel\", f, false);\r\n\t};\r\n\r\n\t/**\r\n\t * @method _IOS_disable\r\n\t * @protected\r\n\t * @param {Stage} stage\r\n\t * @static\r\n\t **/\r\n\tTouch._IOS_disable = function(stage) {\r\n\t\tvar canvas = stage.canvas;\r\n\t\tif (!canvas) { return; }\r\n\t\tvar f = stage.__touch.f;\r\n\t\tcanvas.removeEventListener(\"touchstart\", f, false);\r\n\t\tcanvas.removeEventListener(\"touchmove\", f, false);\r\n\t\tcanvas.removeEventListener(\"touchend\", f, false);\r\n\t\tcanvas.removeEventListener(\"touchcancel\", f, false);\r\n\t};\r\n\r\n\t/**\r\n\t * @method _IOS_handleEvent\r\n\t * @param {Stage} stage\r\n\t * @param {Object} e The event to handle\r\n\t * @protected\r\n\t * @static\r\n\t **/\r\n\tTouch._IOS_handleEvent = function(stage, e) {\r\n\t\tif (!stage) { return; }\r\n\t\tif (stage.__touch.preventDefault) { e.preventDefault&&e.preventDefault(); }\r\n\t\tvar touches = e.changedTouches;\r\n\t\tvar type = e.type;\r\n\t\tfor (var i= 0,l=touches.length; i<l; i++) {\r\n\t\t\tvar touch = touches[i];\r\n\t\t\tvar id = touch.identifier;\r\n\t\t\tif (touch.target != stage.canvas) { continue; }\r\n\r\n\t\t\tif (type == \"touchstart\") {\r\n\t\t\t\tthis._handleStart(stage, id, e, touch.pageX, touch.pageY);\r\n\t\t\t} else if (type == \"touchmove\") {\r\n\t\t\t\tthis._handleMove(stage, id, e, touch.pageX, touch.pageY);\r\n\t\t\t} else if (type == \"touchend\" || type == \"touchcancel\") {\r\n\t\t\t\tthis._handleEnd(stage, id, e);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\t/**\r\n\t * @method _IE_enable\r\n\t * @protected\r\n\t * @param {Stage} stage\r\n\t * @static\r\n\t **/\r\n\tTouch._IE_enable = function(stage) {\r\n\t\tvar canvas = stage.canvas;\r\n\t\tvar f = stage.__touch.f = function(e) { Touch._IE_handleEvent(stage,e); };\r\n\r\n\t\tif (window.navigator[\"pointerEnabled\"] === undefined) {\r\n\t\t\tcanvas.addEventListener(\"MSPointerDown\", f, false);\r\n\t\t\twindow.addEventListener(\"MSPointerMove\", f, false);\r\n\t\t\twindow.addEventListener(\"MSPointerUp\", f, false);\r\n\t\t\twindow.addEventListener(\"MSPointerCancel\", f, false);\r\n\t\t\tif (stage.__touch.preventDefault) { canvas.style.msTouchAction = \"none\"; }\r\n\t\t} else {\r\n\t\t\tcanvas.addEventListener(\"pointerdown\", f, false);\r\n\t\t\twindow.addEventListener(\"pointermove\", f, false);\r\n\t\t\twindow.addEventListener(\"pointerup\", f, false);\r\n\t\t\twindow.addEventListener(\"pointercancel\", f, false);\r\n\t\t\tif (stage.__touch.preventDefault) { canvas.style.touchAction = \"none\"; }\r\n\r\n\t\t}\r\n\t\tstage.__touch.activeIDs = {};\r\n\t};\r\n\r\n\t/**\r\n\t * @method _IE_disable\r\n\t * @protected\r\n\t * @param {Stage} stage\r\n\t * @static\r\n\t **/\r\n\tTouch._IE_disable = function(stage) {\r\n\t\tvar f = stage.__touch.f;\r\n\r\n\t\tif (window.navigator[\"pointerEnabled\"] === undefined) {\r\n\t\t\twindow.removeEventListener(\"MSPointerMove\", f, false);\r\n\t\t\twindow.removeEventListener(\"MSPointerUp\", f, false);\r\n\t\t\twindow.removeEventListener(\"MSPointerCancel\", f, false);\r\n\t\t\tif (stage.canvas) {\r\n\t\t\t\tstage.canvas.removeEventListener(\"MSPointerDown\", f, false);\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\twindow.removeEventListener(\"pointermove\", f, false);\r\n\t\t\twindow.removeEventListener(\"pointerup\", f, false);\r\n\t\t\twindow.removeEventListener(\"pointercancel\", f, false);\r\n\t\t\tif (stage.canvas) {\r\n\t\t\t\tstage.canvas.removeEventListener(\"pointerdown\", f, false);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\t/**\r\n\t * @method _IE_handleEvent\r\n\t * @param {Stage} stage\r\n\t * @param {Object} e The event to handle.\r\n\t * @protected\r\n\t * @static\r\n\t **/\r\n\tTouch._IE_handleEvent = function(stage, e) {\r\n\t\tif (!stage) { return; }\r\n\t\tif (stage.__touch.preventDefault) { e.preventDefault && e.preventDefault(); }\r\n\t\tvar type = e.type;\r\n\t\tvar id = e.pointerId;\r\n\t\tvar ids = stage.__touch.activeIDs;\r\n\r\n\t\tif (type == \"MSPointerDown\" || type == \"pointerdown\") {\r\n\t\t\tif (e.srcElement != stage.canvas) { return; }\r\n\t\t\tids[id] = true;\r\n\t\t\tthis._handleStart(stage, id, e, e.pageX, e.pageY);\r\n\t\t} else if (ids[id]) { // it's an id we're watching\r\n\t\t\tif (type == \"MSPointerMove\" || type == \"pointermove\") {\r\n\t\t\t\tthis._handleMove(stage, id, e, e.pageX, e.pageY);\r\n\t\t\t} else if (type == \"MSPointerUp\" || type == \"MSPointerCancel\"\r\n\t\t\t\t\t|| type == \"pointerup\" || type == \"pointercancel\") {\r\n\t\t\t\tdelete(ids[id]);\r\n\t\t\t\tthis._handleEnd(stage, id, e);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\t/**\r\n\t * @method _handleStart\r\n\t * @param {Stage} stage\r\n\t * @param {String|Number} id\r\n\t * @param {Object} e\r\n\t * @param {Number} x\r\n\t * @param {Number} y\r\n\t * @protected\r\n\t **/\r\n\tTouch._handleStart = function(stage, id, e, x, y) {\r\n\t\tvar props = stage.__touch;\r\n\t\tif (!props.multitouch && props.count) { return; }\r\n\t\tvar ids = props.pointers;\r\n\t\tif (ids[id]) { return; }\r\n\t\tids[id] = true;\r\n\t\tprops.count++;\r\n\t\tstage._handlePointerDown(id, e, x, y);\r\n\t};\r\n\r\n\t/**\r\n\t * @method _handleMove\r\n\t * @param {Stage} stage\r\n\t * @param {String|Number} id\r\n\t * @param {Object} e\r\n\t * @param {Number} x\r\n\t * @param {Number} y\r\n\t * @protected\r\n\t **/\r\n\tTouch._handleMove = function(stage, id, e, x, y) {\r\n\t\tif (!stage.__touch.pointers[id]) { return; }\r\n\t\tstage._handlePointerMove(id, e, x, y);\r\n\t};\r\n\r\n\t/**\r\n\t * @method _handleEnd\r\n\t * @param {Stage} stage\r\n\t * @param {String|Number} id\r\n\t * @param {Object} e\r\n\t * @protected\r\n\t **/\r\n\tTouch._handleEnd = function(stage, id, e) {\r\n\t\t// TODO: cancel should be handled differently for proper UI (ex. an up would trigger a click, a cancel would more closely resemble an out).\r\n\t\tvar props = stage.__touch;\r\n\t\tvar ids = props.pointers;\r\n\t\tif (!ids[id]) { return; }\r\n\t\tprops.count--;\r\n\t\tstage._handlePointerUp(id, e, true);\r\n\t\tdelete(ids[id]);\r\n\t};\r\n\r\n\r\n\tcreatejs.Touch = Touch;\r\n}());\r\n\r\n//##############################################################################\r\n// version.js\r\n//##############################################################################\r\n\r\nthis.createjs = this.createjs || {};\r\n\r\n(function() {\r\n\t\"use strict\";\r\n\r\n\t/**\r\n\t * Static class holding library specific information such as the version and buildDate of\r\n\t * the library.\r\n\t * @class EaselJS\r\n\t **/\r\n\tvar s = createjs.EaselJS = createjs.EaselJS || {};\r\n\r\n\t/**\r\n\t * The version string for this release.\r\n\t * @property version\r\n\t * @type String\r\n\t * @static\r\n\t **/\r\n\ts.version = /*=version*/\"0.8.2\"; // injected by build process\r\n\r\n\t/**\r\n\t * The build date for this release in UTC format.\r\n\t * @property buildDate\r\n\t * @type String\r\n\t * @static\r\n\t **/\r\n\ts.buildDate = /*=date*/\"Thu, 26 Nov 2015 20:44:34 GMT\"; // injected by build process\r\n\r\n})();\n}.call(window));"],"sourceRoot":""}